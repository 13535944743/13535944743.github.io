<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>微软自带的日语输入法怎么切换平假名和片假名</title>
      <link href="/2022/03/16/life-skill/"/>
      <url>/2022/03/16/life-skill/</url>
      
        <content type="html"><![CDATA[<h1 id="微软自带的日语输入法怎么切换平假名和片假名"><a href="#微软自带的日语输入法怎么切换平假名和片假名" class="headerlink" title="微软自带的日语输入法怎么切换平假名和片假名"></a>微软自带的日语输入法怎么切换平假名和片假名</h1><p>使用按键ctrl+caps lock，切换平假名。</p><p>使用按键alt+caps lock，切换片假名。</p>]]></content>
      
      
      <categories>
          
          <category> 小技能 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Vue Router深入学习(二)</title>
      <link href="/2022/03/15/vue-router-deep-2/"/>
      <url>/2022/03/15/vue-router-deep-2/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue-Router深入学习-二"><a href="#Vue-Router深入学习-二" class="headerlink" title="Vue Router深入学习(二)"></a>Vue Router深入学习(二)</h1><p>通过阅读文档，自己写一些demo来加深自己的理解。(主要针对Vue3)<br>上一篇：<a href="https://clz.vercel.app/2022/03/12/vue-router-deep-1/">Vue Router深入学习(一)</a></p><h2 id="1-路由元信息"><a href="#1-路由元信息" class="headerlink" title="1. 路由元信息"></a>1. 路由元信息</h2><blockquote><p>有时，你可能希望将任意信息附加到路由上，如过渡名称、谁可以访问路由等。这些事情可以通过接收属性对象的<code>meta</code>属性来实现，并且它可以在路由地址和导航守卫上都被访问到。定义路由的时候你可以这样配置 <code>meta</code> 字段</p></blockquote><p>语法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/User.vue&#x27;</span>),<br>    <span class="hljs-attr">meta</span>: &#123;<br>      <span class="hljs-attr">tag</span>: <span class="hljs-string">&#x27;用户&#x27;</span>,<br>      <span class="hljs-attr">isLogin</span>: <span class="hljs-literal">true</span><br>    &#125;<br>  &#125;<br>];<br></code></pre></td></tr></table></figure><h3 id="1-1-简单使用"><a href="#1-1-简单使用" class="headerlink" title="1.1 简单使用"></a>1.1 简单使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;<br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/User.vue&#x27;</span>),<br>    <span class="hljs-attr">meta</span>: &#123;<br>      <span class="hljs-attr">tag</span>: <span class="hljs-string">&#x27;用户&#x27;</span>,<br>      <span class="hljs-attr">isLogin</span>: <span class="hljs-literal">true</span><br>    &#125;<br>  &#125;<br>];<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHistory(),<br>  routes<br>&#125;);<br><br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>User<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; route.meta &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">const</span> route = useRoute()</span><br><span class="javascript"><span class="hljs-built_in">console</span>.log(route.meta)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/15/spOZRvIcYXwPtHm.png" alt="image-20220304103855475"></p><h3 id="1-2-搭配路由守卫使用"><a href="#1-2-搭配路由守卫使用" class="headerlink" title="1.2 搭配路由守卫使用"></a>1.2 搭配路由守卫使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;<br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/User.vue&#x27;</span>),<br>    <span class="hljs-attr">meta</span>: &#123;<br>      <span class="hljs-attr">tag</span>: <span class="hljs-string">&#x27;用户&#x27;</span>,<br>      <span class="hljs-attr">isLogin</span>: <span class="hljs-literal">true</span><br>    &#125;,<br>    <span class="hljs-attr">children</span>: [<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;:id(\\d+)&#x27;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/UserId.vue&#x27;</span>),<br>        <span class="hljs-attr">meta</span>: &#123;<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;id&#x27;</span>,<br>          <span class="hljs-attr">requireAuth</span>: <span class="hljs-literal">true</span><br>        &#125;<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;:name&#x27;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/UserName.vue&#x27;</span>),<br>        <span class="hljs-attr">meta</span>: &#123;<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;name&#x27;</span>,<br>          <span class="hljs-attr">requireAuth</span>: <span class="hljs-literal">false</span><br>        &#125;<br>      &#125;<br>    ]<br>  &#125;<br>];<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHistory(),<br>  routes<br>&#125;);<br><br></code></pre></td></tr></table></figure><p>路由前置守卫</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js">router.beforeEach(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (to.meta.requireAuth) &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>      <span class="hljs-attr">query</span>: &#123;<br>        <span class="hljs-attr">redirect</span>: to.path   <span class="hljs-comment">// 保存要去的位置，获得权限后再去</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/15/nImTkXpSrcCadJB.gif" alt="vue-router"></p><h2 id="2-数据获取"><a href="#2-数据获取" class="headerlink" title="2. 数据获取"></a>2. 数据获取</h2><blockquote><p>有时候，进入某个路由后，需要从服务器获取数据。例如，在渲染用户信息时，你需要从服务器获取用户的数据。</p></blockquote><h3 id="2-1-导航完成后获取数据"><a href="#2-1-导航完成后获取数据" class="headerlink" title="2.1 导航完成后获取数据"></a>2.1 导航完成后获取数据</h3><blockquote><p>当你使用这种方式时，我们会马上导航和渲染组件，然后在组件的 created 钩子中获取数据。这让我们有机会在数据获取期间展示一个 loading 状态，还可以在不同视图间展示不同的 loading 状态。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>id: &#123;&#123; post.id &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; name: &#x27;Post&#x27;, params: &#123; id: 222 &#125; &#125;&quot;</span>&gt;</span>222<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; name: &#x27;Post&#x27;, params: &#123; id: 333 &#125; &#125;&quot;</span>&gt;</span>333<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; name: &#x27;Post&#x27;, params: &#123; id: 444 &#125; &#125;&quot;</span>&gt;</span>444<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; reactive, watchEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">let</span> post = reactive(&#123;</span><br><span class="javascript">  <span class="hljs-attr">id</span>: <span class="hljs-literal">null</span></span><br><span class="javascript">&#125;)</span><br><span class="javascript"><span class="hljs-keyword">const</span> route = useRoute()</span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">const</span> fetchData = <span class="hljs-function">() =&gt;</span> &#123;   <span class="hljs-comment">// 数据获取，不需要生命周期钩子。因为beforeCreate和created没有API，因为setup实际上就相当于这两个生命周期函数</span></span><br><span class="javascript">  post.id = route.params.id</span><br><span class="javascript">&#125;</span><br><span class="javascript"></span><br><span class="javascript">watchEffect(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">  <span class="hljs-keyword">const</span> id = post.id</span><br><span class="javascript">  fetchData()</span><br><span class="javascript">&#125;)</span><br><span class="javascript"></span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span><br><span class="css"><span class="hljs-selector-tag">span</span> &#123;</span><br><span class="css">  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span>;</span><br><span class="css">&#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/15/468dhyarpVXUOWm.gif" alt="vue-router"></p><h3 id="2-2-在导航完成前获取数据"><a href="#2-2-在导航完成前获取数据" class="headerlink" title="2.2 在导航完成前获取数据"></a>2.2 在导航完成前获取数据</h3><blockquote><p>通过这种方式，我们在导航转入新的路由前获取数据。我们可以在接下来的组件的 <code>beforeRouteEnter</code> 守卫中获取数据，当数据获取成功后只调用 <code>next</code> 方法</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>id: &#123;&#123; post.id &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; name: &#x27;Post&#x27;, params: &#123; id: 222 &#125; &#125;&quot;</span>&gt;</span>222<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; name: &#x27;Post&#x27;, params: &#123; id: 333 &#125; &#125;&quot;</span>&gt;</span>333<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; name: &#x27;Post&#x27;, params: &#123; id: 444 &#125; &#125;&quot;</span>&gt;</span>444<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">      <span class="hljs-attr">post</span>: &#123;&#125;</span><br><span class="javascript">    &#125;</span><br><span class="javascript">  &#125;,</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">beforeRouteEnter</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>)</span> &#123;    <span class="hljs-comment">// 不要写在setup里</span></span><br><span class="javascript">    next(<span class="hljs-function"><span class="hljs-params">vm</span> =&gt;</span> &#123;</span><br><span class="javascript">      vm.setData(to.params)</span><br><span class="javascript">    &#125;)</span><br><span class="javascript">  &#125;,</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">beforeRouteUpdate</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-built_in">this</span>.post = to.params</span><br><span class="javascript">  &#125;,</span><br><span class="javascript">  <span class="hljs-attr">methods</span>: &#123;</span><br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">setData</span>(<span class="hljs-params">post</span>)</span> &#123;</span><br><span class="javascript">      <span class="hljs-built_in">this</span>.post = post</span><br><span class="javascript">    &#125;</span><br><span class="javascript">  &#125;</span><br><span class="javascript">&#125;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span><br><span class="css"><span class="hljs-selector-tag">span</span> &#123;</span><br><span class="css">  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span>;</span><br><span class="css">&#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>效果和上图一样。这里有点问题，通过<code>beforeRouteEnter</code>无法获取到<code> setup</code>里的函数、数据等，所以变成了使用Vue2的形式来实现。</p><h2 id="3-过渡动效"><a href="#3-过渡动效" class="headerlink" title="3. 过渡动效"></a>3. 过渡动效</h2><h3 id="3-1-transition简单了解"><a href="#3-1-transition简单了解" class="headerlink" title="3.1 transition简单了解"></a>3.1 transition简单了解</h3><blockquote><p><code>&lt;Transition&gt;</code> 会在一个元素或组件进入和离开 DOM 时应用动画</p></blockquote><p><img src="https://s2.loli.net/2022/03/15/FBeshZCdVrvYul6.png" alt="image-20220304182013408"></p><h3 id="3-2-简单使用"><a href="#3-2-简单使用" class="headerlink" title="3.2 简单使用"></a>3.2 简单使用</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">v-slot</span>=<span class="hljs-string">&quot;&#123; Component &#125;&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">transition</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;fade&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;Component&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br></code></pre></td></tr></table></figure><p>在router-view上使用v-slot获取对应的组件，使用component动态组件来渲染这个组件，然后用transition包裹住这个动态组件</p><p><b style="color: red">对应的路由组件只能有一个根元素，否则过渡将没有效果</b></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.fade-enter-from</span>,<br><span class="hljs-selector-class">.fade-leave-to</span> &#123;<br>  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">100px</span>);<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-selector-class">.fade-enter-active</span> &#123;<br>  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">1s</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>效果：</p><p><img src="https://s2.loli.net/2022/03/15/HNFL6CBem9nM3ao.gif" alt="vue-router"></p><h4 id="代码部分"><a href="#代码部分" class="headerlink" title="代码部分"></a>代码部分</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">v-slot</span>=<span class="hljs-string">&quot;&#123; Component &#125;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">transition</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;fade&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;Component&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css"><span class="hljs-selector-class">.fade-enter-from</span>,</span><br><span class="css"><span class="hljs-selector-class">.fade-leave-to</span> &#123;</span><br><span class="css">  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">100px</span>);</span><br><span class="css">  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span><br><span class="css">&#125;</span><br><span class="css"></span><br><span class="css"><span class="hljs-selector-class">.fade-enter-active</span> &#123;</span><br><span class="css">  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">1s</span>;</span><br><span class="css">&#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-3-单个路由的过渡"><a href="#3-3-单个路由的过渡" class="headerlink" title="3.3 单个路由的过渡"></a>3.3 单个路由的过渡</h3><p>原理很简单，路由配置时在<code>meta上</code>添加上<code>trasition</code>属性，再动态地和<code> name</code>结合在一起就行</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/Home.vue&#x27;</span>),<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/post&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Post&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/Post.vue&#x27;</span>),<br>    <span class="hljs-attr">meta</span>: &#123;<br>      <span class="hljs-attr">transition</span>: <span class="hljs-string">&#x27;slide-left&#x27;</span><br>    &#125;<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;User&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/User.vue&#x27;</span>),<br>    <span class="hljs-attr">meta</span>: &#123;<br>      <span class="hljs-attr">transition</span>: <span class="hljs-string">&#x27;slide-right&#x27;</span><br>    &#125;<br>  &#125;<br>];<br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">v-slot</span>=<span class="hljs-string">&quot;&#123; Component, route &#125;&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">transition</span> <span class="hljs-attr">:name</span>=<span class="hljs-string">&quot;route.meta.transition || fade&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;Component&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br></code></pre></td></tr></table></figure><p>再添加上对应的css样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.fade-enter-from</span>,<br><span class="hljs-selector-class">.fade-leave-to</span> &#123;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-selector-class">.fade-enter-active</span>,<br><span class="hljs-selector-class">.slide-left-enter-active</span>,<br><span class="hljs-selector-class">.slide-right-enter-active</span> &#123;<br>  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">1s</span>;<br>&#125;<br><br><span class="hljs-selector-class">.slide-left-enter-from</span>,<br><span class="hljs-selector-class">.slide-left-leave-to</span> &#123;<br>  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">200px</span>);<br>&#125;<br><br><span class="hljs-selector-class">.slide-right-enter-from</span>,<br><span class="hljs-selector-class">.slide-right-leave-to</span> &#123;<br>  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">200px</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/15/ueE7mi691FaULNR.gif"></p><h3 id="3-4-基于路由的动态过渡"><a href="#3-4-基于路由的动态过渡" class="headerlink" title="3.4 基于路由的动态过渡"></a>3.4 基于路由的动态过渡</h3><p>根据目标路由和当前路由之间的关系，动态地确定使用的过渡</p><p>如：添加一个 <a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%85%A8%E5%B1%80%E5%90%8E%E7%BD%AE%E9%92%A9%E5%AD%90">全局后置钩子</a>，根据路径的深度动态添加信息到 <code>meta</code> 字段</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">router.afterEach(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> toDepth = to.path.split(<span class="hljs-string">&#x27;/&#x27;</span>).length<br>  <span class="hljs-keyword">const</span> fromDepth = <span class="hljs-keyword">from</span>.path.split(<span class="hljs-string">&#x27;/&#x27;</span>).length<br><br>  to.meta.transition = toDepth &lt; fromDepth ? <span class="hljs-string">&#x27;slide-right&#x27;</span> : <span class="hljs-string">&#x27;slide-left&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/04/M2gyJ1QtPL4aqEV.gif" alt="vue-router"></p><h2 id="4-滚动行为"><a href="#4-滚动行为" class="headerlink" title="4. 滚动行为"></a>4. 滚动行为</h2><p>在创建Router示例时，提供一个<code> scrollBehavior</code>方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> router = createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHashHistory(),<br>  <span class="hljs-attr">routes</span>: [...],<br>  scrollBehavior (to, <span class="hljs-keyword">from</span>, savedPosition) &#123;<br>    <span class="hljs-comment">// return 期望滚动到哪个的位置</span><br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="4-1-普通用法"><a href="#4-1-普通用法" class="headerlink" title="4.1 普通用法"></a>4.1 普通用法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHistory(),<br>  routes,<br>  <span class="hljs-function"><span class="hljs-title">scrollBehavior</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, savedPosition</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">top</span>: <span class="hljs-number">50</span>   <span class="hljs-comment">// 始终滚动到距离顶部50px处</span><br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/07/EV8YKSlftByWXr3.gif" alt="vue-router1"></p><p>如果浏览器支持<a href="https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions/behavior">滚动行为</a>，可以通过<code>behavior</code>变得更流畅</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHistory(),<br>  routes,<br>  <span class="hljs-function"><span class="hljs-title">scrollBehavior</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, savedPosition</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">top</span>: <span class="hljs-number">50</span>,   <span class="hljs-comment">// 始终滚动到距离顶部50px处</span><br>      <span class="hljs-attr">behavior</span>: <span class="hljs-string">&#x27;smooth&#x27;</span>,<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/07/oOms145iPFjnIMG.gif" alt="vue-router1"></p><h3 id="4-2-通过-el实现相对元素的偏移"><a href="#4-2-通过-el实现相对元素的偏移" class="headerlink" title="4.2 通过 el实现相对元素的偏移"></a>4.2 通过<code> el</code>实现相对元素的偏移</h3><p><code> el</code>可接受一个CSS选择器或一个DOM元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHistory(),<br>  routes,<br>  <span class="hljs-function"><span class="hljs-title">scrollBehavior</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, savedPosition</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;h2&#x27;</span>,<br>      <span class="hljs-attr">top</span>: <span class="hljs-number">50</span><br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/07/b4Dv5ZBGsw7OLNm.gif" alt="vue-router1"></p><h3 id="4-3-恢复之前的位置"><a href="#4-3-恢复之前的位置" class="headerlink" title="4.3 恢复之前的位置"></a>4.3 恢复之前的位置</h3><p>返回 <code>savedPosition</code>，在按下 后退/前进 按钮时，就会恢复之前的位置。像浏览器的原生表现那样</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHistory(),<br>  routes,<br>  <span class="hljs-function"><span class="hljs-title">scrollBehavior</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, savedPosition</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (savedPosition) &#123;<br>      <span class="hljs-comment">// console.log(savedPosition)</span><br>      <span class="hljs-keyword">return</span> savedPosition<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">top</span>: <span class="hljs-number">0</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/07/bg2IuKXjRE1rPoY.gif" alt="vue-router1"></p><h3 id="4-4-延迟滚动"><a href="#4-4-延迟滚动" class="headerlink" title="4.4 延迟滚动"></a>4.4 延迟滚动</h3><p>通过返回一个Promise来实现。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHistory(),<br>  routes,<br>  <span class="hljs-function"><span class="hljs-title">scrollBehavior</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, savedPosition</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        resolve(&#123;<br>          <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,<br>          <span class="hljs-attr">behavior</span>: <span class="hljs-string">&#x27;smooth&#x27;</span><br>        &#125;)<br>      &#125;, <span class="hljs-number">500</span>)<br>    &#125;)<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/07/VkiJHyfjaZDvIPc.gif" alt="vue-router1"></p><h2 id="5-路由懒加载"><a href="#5-路由懒加载" class="headerlink" title="5. 路由懒加载"></a>5. 路由懒加载</h2><blockquote><p>把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件，会更高效</p></blockquote><p>静态导入：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> User <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../components/User.vue&#x27;</span><br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;User&#x27;</span>,<br>    <span class="hljs-attr">component</span>: User<br>  &#125;<br>];<br></code></pre></td></tr></table></figure><p>动态导入：(实际上还省字)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;<br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;User&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/User.vue&#x27;</span>)<br>  &#125;<br>];<br></code></pre></td></tr></table></figure><h2 id="6-动态路由"><a href="#6-动态路由" class="headerlink" title="6. 动态路由"></a>6. 动态路由</h2><h3 id="6-1-添加路由"><a href="#6-1-添加路由" class="headerlink" title="6.1 添加路由"></a>6.1 添加路由</h3><p>路由配置：初始只有一个路由</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;<br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/Home.vue&#x27;</span>)<br>  &#125;<br>];<br><br><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHistory(),<br>  routes<br>&#125;);<br><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;<br></code></pre></td></tr></table></figure><p>在导航守卫处添加新路由：实际上要限制那些页面的权限就可以这样添加，只有满足条件才会动态添加路由</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">router.beforeEach(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> &#123;<br>  router.addRoute(&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;User&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./components/User.vue&#x27;</span>)<br>  &#125;)<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="6-2-删除路由"><a href="#6-2-删除路由" class="headerlink" title="6.2 删除路由"></a>6.2 删除路由</h3><p><b style="color: red">当路由被删除时，所有的别名和子路由都会被同时删掉</b></p><h4 id="6-2-1-通过添加一个名字冲突的路由"><a href="#6-2-1-通过添加一个名字冲突的路由" class="headerlink" title="6.2.1 通过添加一个名字冲突的路由"></a>6.2.1 通过添加一个名字冲突的路由</h4><p>如果添加与现有名称相同的路由，会先删除路由，再添加路由。</p><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">router.addRoute(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/about&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;about&#x27;</span>, <span class="hljs-attr">component</span>: About &#125;)<br><span class="hljs-comment">// 这将会删除之前已经添加的路由，因为他们具有相同的名字且名字必须是唯一的</span><br>router.addRoute(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/other&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;about&#x27;</span>, <span class="hljs-attr">component</span>: Other &#125;)<br></code></pre></td></tr></table></figure></blockquote><h4 id="6-2-2-通过调用-router-addRoute-返回的回调"><a href="#6-2-2-通过调用-router-addRoute-返回的回调" class="headerlink" title="6.2.2 通过调用 router.addRoute() 返回的回调"></a>6.2.2 通过调用 <code>router.addRoute()</code> 返回的回调</h4><p>情境：路由没有名称，没法覆盖删除掉路由</p><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> removeRoute = router.addRoute(routeRecord)<br>removeRoute() <span class="hljs-comment">// 删除路由如果存在的话</span><br></code></pre></td></tr></table></figure></blockquote><h4 id="6-2-3-通过使用-router-removeRoute-按名称删除路由"><a href="#6-2-3-通过使用-router-removeRoute-按名称删除路由" class="headerlink" title="6.2.3 通过使用 router.removeRoute() 按名称删除路由"></a>6.2.3 通过使用 <code>router.removeRoute()</code> 按名称删除路由</h4><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">router.addRoute(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/about&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;about&#x27;</span>, <span class="hljs-attr">component</span>: About &#125;)<br><span class="hljs-comment">// 删除路由</span><br>router.removeRoute(<span class="hljs-string">&#x27;about&#x27;</span>)<br></code></pre></td></tr></table></figure></blockquote><h3 id="6-3-添加嵌套路由"><a href="#6-3-添加嵌套路由" class="headerlink" title="6.3 添加嵌套路由"></a>6.3 添加嵌套路由</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">router.addRoute(&#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;admin&#x27;</span>,<br>  <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/admin&#x27;</span>,<br>  <span class="hljs-attr">component</span>: Admin,<br>  <span class="hljs-attr">children</span>: [&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;settings&#x27;</span>, <span class="hljs-attr">component</span>: AdminSettings &#125;],<br>&#125;)<br></code></pre></td></tr></table></figure><p>也可以将路由的<code> name</code>作为第一个参数传递给<code> router.addRoute()</code>，这样就可以有效的添加路由</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">router.addRoute(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;admin&#x27;</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/admin&#x27;</span>, <span class="hljs-attr">component</span>: Admin &#125;)<br>router.addRoute(<span class="hljs-string">&#x27;admin&#x27;</span>, &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;settings&#x27;</span>, <span class="hljs-attr">component</span>: AdminSettings &#125;)<br></code></pre></td></tr></table></figure><h3 id="6-4-查看现有路由"><a href="#6-4-查看现有路由" class="headerlink" title="6.4 查看现有路由"></a>6.4 查看现有路由</h3><ul><li><a href="https://router.vuejs.org/zh/api/#hasroute"><code>router.hasRoute()</code></a>：检查路由是否存在。</li><li><a href="https://router.vuejs.org/zh/api/#getroutes"><code>router.getRoutes()</code></a>：获取一个包含所有路由记录的数组。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue Router </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>详解JavaScript 执行机制</title>
      <link href="/2022/03/14/javascript-eventloop/"/>
      <url>/2022/03/14/javascript-eventloop/</url>
      
        <content type="html"><![CDATA[<h1 id="详解JavaScript-执行机制"><a href="#详解JavaScript-执行机制" class="headerlink" title="详解JavaScript 执行机制"></a>详解JavaScript 执行机制</h1><h2 id="热身"><a href="#热身" class="headerlink" title="热身"></a>热身</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/* 先打印1， 3， 2s后打印2 */</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>)<br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>)<br>&#125;, <span class="hljs-number">1000</span>)<br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>)<br><br><br><span class="hljs-comment">/* 先打印1， 3， 后打印2 */</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>)<br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>)<br>&#125;, <span class="hljs-number">0</span>)<br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure><p>第一个例子的话不难理解，定时器函数就是1s后才调用回调函数.</p><p>而第二个例子则可能优点小问题，JavaScript从上到下执行，那么遇到0s的计时器函数，就应该先输出2才对啊。这就是因为后面要提到的JavaScript执行机制导致的啦，因为setTimeout是异步任务。</p><h2 id="JavaScript是单线程"><a href="#JavaScript是单线程" class="headerlink" title="JavaScript是单线程"></a>JavaScript是单线程</h2><p>JavaScript的核心特征就是<strong>单线程</strong>，即同一时间只能做一件事。</p><p>为什么它是单线程呢？因为JavaScript作为浏览器脚本语言，它的主要用途就是与用户互动、操作DOM。既然如此，如果它不是单线程的话，假如一个线程在DOM节点上添加内容，同时另一个线程删除这个节点。可以看出，如果JavaScript不是单线程的话，那么将会导致同步问题。</p><br><h2 id="任务队列"><a href="#任务队列" class="headerlink" title="任务队列"></a>任务队列</h2><p>JavaScript是单线程语言，这也就导致了如果有一个任务等待很长的时间，这个时候就会导致阻塞，程序就会“卡死”，用户体验非常差。所以JavaScript需要异步任务。</p><br><p>那么，为什么JavsScript明明是单线程的，为什么能异步呢？这是因为浏览器是多线程的，通过事件循环<code> Event Loop</code>即可实现异步。</p><br><p>所有任务都可以分成两种。</p><ul><li><strong>同步任务</strong>：在主线程上排队执行的任务，只有前一个任务执行完，才能执行后一个任务</li><li><strong>异步任务</strong>：不进入主线程，而是进入任务队列的任务。<b style="color: red">当异步任务的触发条件满足时，异步任务才会进入任务队列，而当主线程空了，就会去任务队列中取异步任务到主线程中执行</b></li></ul><br><p><strong>常见异步任务</strong>：</p><ul><li>JS事件</li><li>AJAX请求</li><li>setTimeout和setInterval</li><li>Promise(<b style="color: red">Promise定义部分为同步任务，回调部分为异步任务</b>)</li></ul><br><h2 id="Event-Loop事件循环机制1"><a href="#Event-Loop事件循环机制1" class="headerlink" title="Event Loop事件循环机制1"></a>Event Loop事件循环机制1</h2><ol><li>所有同步任务进入主线程，而异步任务则是进入<code> Event Table</code>注册回调函数</li><li>当异步任务的<b style="color: red">触发条件满足</b>时，异步任务注册的回调函数将会从<code> Event Table</code>移入到任务队列<code> Event Queue</code>中</li><li>当主线程中的所有同步任务执行完毕后，系统就会去看看<code> Event Queue</code>中看看有没有回调函数，有的话就推到主线程中</li><li>主线程不断重复上面的步骤</li></ol><p><img src="https://s2.loli.net/2022/03/14/hANCZjRUYIsFrgf.jpg" alt="preview"></p><p>这就是<strong>Event Loop</strong></p><h2 id="宏任务和微任务"><a href="#宏任务和微任务" class="headerlink" title="宏任务和微任务"></a>宏任务和微任务</h2><p>异步任务又可以进行更精细的划分为宏任务和微任务。</p><h3 id="宏任务"><a href="#宏任务" class="headerlink" title="宏任务"></a>宏任务</h3><p>setTimeout、setInterval、requestAnimationFrame</p><ul><li>当宏任务队列中的任务全部都执行完之后，如果微任务队列不为空，则先执行微任务队列中的所有任务</li></ul><h3 id="微任务"><a href="#微任务" class="headerlink" title="微任务"></a>微任务</h3><p>Promise回调部分、process.nextTick</p><ul><li>在上一个宏任务队列执行完毕后如果有微任务就会执行微任务队列中的所有元素</li></ul><h2 id="Event-Loop事件循环机制2"><a href="#Event-Loop事件循环机制2" class="headerlink" title="Event Loop事件循环机制2"></a>Event Loop事件循环机制2</h2><ol><li>首先执行<code> script</code>下的同步任务</li><li>执行过程中，如果遇到异步任务，则需要把它放到对应的任务队列中(遇到宏任务，则放到宏任务中；遇到微任务，则放到微任务队列中)</li><li>同步任务执行完毕，查看微任务队列<ul><li>如果存在微任务，则将微任务队列全部执行(<b style="color: red">包括执行微任务中产生的新微任务</b>)</li><li>如果不存在微任务，则查看宏任务队列，执行第一个宏任务，宏任务执行完后，又看看微任务队列是否有任务，有的话，又先全部执行完微任务队列，重复上述操作，知道宏任务队列为空。</li></ul></li></ol><p><img src="https://s2.loli.net/2022/03/14/xzo2leVm165AkLd.png" alt="preview"></p><h3 id="练手1"><a href="#练手1" class="headerlink" title="练手1"></a>练手1</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>)<br><br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>)<br>&#125;, <span class="hljs-number">0</span>)<br><br><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">3</span>; i &lt; <span class="hljs-number">6</span>; i++) &#123;<br>    <span class="hljs-built_in">console</span>.log(i)<br>  &#125;<br>  resolve()<br>&#125;).then(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">6</span>)<br>&#125;)<br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">7</span>)<br></code></pre></td></tr></table></figure><p>打印顺序：1, 3, 4, 5, 7, 6, 2</p><br><p>解析：</p><ol><li>首先，程序从上往下走，直接输出1，遇到<code> setTimeout</code>后，把它放到宏任务队列中<ul><li>此时，宏任务队列中为<code>[setTimeout]</code>(<strong>这里用数组表示任务队列，左边代表先进入的任务队列</strong>)</li></ul></li><li>继续往下跑，遇到<code> Promise</code>，因为<b style="color: red">Promise定义部分为同步任务</b>，依次输出3, 4, 5，遇到<code> Promise.then()</code>，把它放到微任务队列中<ul><li>此时，宏任务队列为<code>[setTimeout]</code></li><li>此时，微任务队列为<code>[Promise.then()]</code></li></ul></li><li>输出7后，执行微任务队列中全部的任务，输出6， 再执行宏任务队列中的任务，输出2</li></ol><h3 id="练手2"><a href="#练手2" class="headerlink" title="练手2"></a>练手2</h3><p><strong>题目是本人自己想的，分析有误请见谅(希望评论指示)</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>)<br><br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>)<br>  <span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>)<br>  &#125;)<br>&#125;, <span class="hljs-number">10</span>)<br><br><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">4</span>)<br>  resolve(<span class="hljs-number">5</span>)<br>&#125;).then(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(value)<br>  <span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">6</span>)<br>  &#125;)<br>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">7</span>)<br>  &#125;)<br>&#125;).then(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">8</span>)<br>&#125;)<br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">9</span>)<br></code></pre></td></tr></table></figure><p>输出顺序：1, 4, 9, 5, 6, 8, 7, 2, 3</p><br><p>解析：</p><ol><li><strong>先输出1</strong>， 遇到定时器，但是此时并不满足触发条件，所以2(后面还有其他的内容)只能存放在<code> Event Table</code>中<ul><li>此时，<code> Event Table</code>中有<code> [2(后面还有其他的内容)]</code>。<b style="color: red"><code> Event Table</code>中没有顺序，满足触发条件后，就会进入对应的任务队列</b></li></ul></li><li><strong>输出4</strong>，5(后面还有内容)进入微任务队列<ul><li>此时，<code> Event Table</code>中有<code> [2(后面还有其他的内容)]</code></li><li>微任务队列为[5(后面还有内容)]</li></ul></li><li>8进入微任务队列<ul><li>此时，<code> Event Table</code>中有<code> [2(后面还有其他的内容)]</code></li><li>微任务队列为[5(后面还有内容), 8]</li></ul></li><li><strong>输出9</strong>， 然后执行微任务中的任务<ol><li><strong>输出5</strong>， 6进入微任务队列, 7进入宏任务队列<ul><li>此时，<code> Event Table</code>中有<code> [2(后面还有其他的内容)]</code></li><li>微任务队列为<code>[6, 8]</code>，<b style="color: red">6会在8之前，因为6是微任务队列5里的微任务</b></li><li>宏任务队列为[7]</li></ul></li><li>依次执行完微任务队列中的任务，然后再执行宏任务队列的任务。<strong>输出顺序为6，8，7</strong></li></ol></li><li>10ms后，满足触发条件，进入宏任务队列，此时，宏任务队列和微任务队列中都没有任务，所以直接执行。<strong>输出2</strong>，3进入微任务队列，<strong>输出3</strong></li></ol><br><h2 id="async-await"><a href="#async-await" class="headerlink" title="async, await"></a>async, await</h2><blockquote><p>async/await本质上还是基于Promise的一些封装，而Promise是属于微任务的一种。所以在使用await关键字与Promise.then相同。<br>async函数在await之前的代码都是同步执行的，await之后的代码则是属于微任务(类似于Promise)<b style="color: red">await的表达式还是属于同步任务</b></p></blockquote><p>下面就继续练手</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">async1</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>)<br>  <span class="hljs-keyword">await</span> async2()<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>)<br>&#125;<br>async1()<br><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">async2</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">4</span>)<br><br>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">5</span>)<br>    resolve(<span class="hljs-number">6</span>)<br>  &#125;).then(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(value)<br>  &#125;)<br><br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">7</span>)<br>&#125;<br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">8</span>)<br></code></pre></td></tr></table></figure><p>输出顺序为：1, 2, 4, 5, 8, 6, 7, 3</p><br><p>分析：</p><ol><li><strong>先输出1</strong>，调用<code> async1</code>函数，因为<code> await</code>之前包括<code> await</code>的表达式都是同步任务，所以，<strong>输出2</strong>后，进入到<code> async2</code>函数中</li><li><strong>输出4</strong>，<code>await</code>一个<code> Promise</code>也是同理，<strong>输出5</strong>，6进入微任务队列，因为<b style="color: red">await之后的代码则是属于微任务(不包括await的表达式)</b>，所以7进入微任务队列<ul><li>此时，微任务队列为[6, 7]</li></ul></li><li>执行完<code> async2</code>函数后，回到<code> async1</code>函数中，之后的3进入微任务队列<ul><li>此时，微任务队列为[6, 7, 3]</li></ul></li><li><strong>输出8</strong>，执行微任务队列中的任务，<strong>输出6, 7, 3</strong></li></ol><br><p>参考链接：<br><a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html">JavaScript 运行机制详解：再谈Event Loop</a><br><a href="https://zhuanlan.zhihu.com/p/379475079">彻底搞懂 JavaScript 执行机制</a><br><a href="https://juejin.cn/post/7020328988715270157">JavaScript之彻底理解EventLoop</a><br><a href="https://segmentfault.com/a/1190000012806637">10分钟理解JS引擎的执行机制</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS实现渐变字</title>
      <link href="/2022/03/13/gradients-word/"/>
      <url>/2022/03/13/gradients-word/</url>
      
        <content type="html"><![CDATA[<h1 id="CSS实现渐变字"><a href="#CSS实现渐变字" class="headerlink" title="CSS实现渐变字"></a>CSS实现渐变字</h1><p><img src="https://s2.loli.net/2022/03/13/AmGSj5UWvXZO6gw.png" alt="image-20220309200715875"></p><p>先来下前置知识。如果想速通，也可指直接到<a href="#jump">渐变字实现</a></p><h2 id="什么是渐变"><a href="#什么是渐变" class="headerlink" title="什么是渐变"></a>什么是渐变</h2><blockquote><p>CSS3 渐变（gradients）可以让你在两个或多个指定的颜色之间显示平稳的过渡。</p><p>以前，你必须使用图像来实现这些效果。但是，通过使用 CSS3 渐变（gradients），你可以减少下载的时间和宽带的使用。此外，渐变效果的元素在放大时看起来效果更好，因为渐变（gradient）是由浏览器生成的。</p></blockquote><h2 id="渐变类型"><a href="#渐变类型" class="headerlink" title="渐变类型"></a>渐变类型</h2><p>渐变主要有三种类型：线性渐变(<code> linear-gradient</code>)、径向渐变(<code> radial-gradient</code>)、圆锥渐变(<code> conic-gradient</code>)</p><h3 id="线性渐变"><a href="#线性渐变" class="headerlink" title="线性渐变"></a>线性渐变</h3><p>线性渐变创建了一条沿直线前进的颜色带。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">linear-gradient</span>(direction, color-start, ..., color-end);<br></code></pre></td></tr></table></figure><ul><li>第一个参数为<strong>渐变方向</strong></li><li>第二个参数为<strong>渐变起点</strong></li><li>第三个参数为<strong>渐变终点</strong></li></ul><br><h4 id="基础线性渐变"><a href="#基础线性渐变" class="headerlink" title="基础线性渐变"></a>基础线性渐变</h4><p>使用<code> linear-gradient</code>函数，至少指定两种颜色即可(也被称为色标)</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(red, blue);<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(red, blue, purple);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/13/R8zcYlsv2UZXOED.png" alt="image-20220309000309356"></p><h4 id="改变渐变方向"><a href="#改变渐变方向" class="headerlink" title="改变渐变方向"></a>改变渐变方向</h4><p>线性渐变的方向默认是从上到下，可以通过关键字<code> to</code>改变渐变方向。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to right, red, blue, purple);<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to bottom right, red, blue, purple);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/13/xY7GDQJC35ef24R.png" alt="image-20220309000853385"></p><h4 id="设置渐变角度"><a href="#设置渐变角度" class="headerlink" title="设置渐变角度"></a>设置渐变角度</h4><p>上面说了，可以通过关键字<code> to</code>来改变角度，但是可选方向有较大限制。此时可以给渐变设置一个具体的角度。</p><p><img src="https://s2.loli.net/2022/03/13/CSpdiucQHfUPzsO.png" alt="image-20220309154501119"></p><p><strong>此图来自菜鸟教程</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span>,<br><span class="hljs-selector-class">.box3</span>,<br><span class="hljs-selector-class">.box4</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">0deg</span>, red, blue, purple);<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">60deg</span>, red, blue, purple);<br>&#125;<br><br><span class="hljs-selector-class">.box3</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">180deg</span>, red, blue, purple);<br>&#125;<br><br><span class="hljs-selector-class">.box4</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(-<span class="hljs-number">60deg</span>, red, blue, purple);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/13/JQvosu2C3YmVD5z.png" alt="image-20220309001836218"></p><h4 id="颜色终止位置"><a href="#颜色终止位置" class="headerlink" title="颜色终止位置"></a>颜色终止位置</h4><p>可以给颜色设置像素值或百分比等其他数值来调整位置。没有明确设置的话，会自动计算</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span>,<br><span class="hljs-selector-class">.box3</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">90deg</span>, red <span class="hljs-number">70%</span>, blue);<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">90deg</span>, red <span class="hljs-number">30%</span>, blue <span class="hljs-number">70%</span>);<br>&#125;<br><br><span class="hljs-selector-class">.box3</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">180deg</span>, red <span class="hljs-number">200px</span>, blue);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/13/ol751QfJuVFE4pR.png" alt="image-20220309083036610"></p><h4 id="创建实线"><a href="#创建实线" class="headerlink" title="创建实线"></a>创建实线</h4><p>根据颜色终止位置的知识点，很容易就能知道可以通过设置相邻的颜色的终止位置设置为相同即可</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to right, red <span class="hljs-number">50%</span>, blue <span class="hljs-number">50%</span>);<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, red <span class="hljs-number">33%</span>, blue <span class="hljs-number">33%</span>, blue <span class="hljs-number">66%</span>, purple <span class="hljs-number">66%</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/13/vponawje52IUPA6.png" alt="image-20220309084146642"></p><h4 id="设置渐变中心点"><a href="#设置渐变中心点" class="headerlink" title="设置渐变中心点"></a>设置渐变中心点</h4><p>默认情况下，渐变会平滑地从一种颜色过渡到另一种颜色。但是可以设置一个值修改渐变的中心点。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span>,<br><span class="hljs-selector-class">.box3</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to right, red, blue);<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to right, red, <span class="hljs-number">50%</span>, blue);<br>&#125;<br><br><span class="hljs-selector-class">.box3</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to right, red, <span class="hljs-number">80%</span>, blue);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/09/RfwzUOsLdcDpEnl.png" alt="image-20220309084757700"></p><h4 id="创建色带和条纹"><a href="#创建色带和条纹" class="headerlink" title="创建色带和条纹"></a>创建色带和条纹</h4><p>要创建一个颜色的区域的话，一个颜色需要两个位置，这样子，这个颜色在两个颜色起止点都将会是完全饱和(即会保持该饱和度)。而和相邻的不同颜色还是正常的过渡。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to right, red <span class="hljs-number">30%</span>, blue <span class="hljs-number">35%</span>, blue <span class="hljs-number">65%</span>, purple <span class="hljs-number">70%</span>);<br><br>  <span class="hljs-comment">/* 简洁写法 */</span><br>  <span class="hljs-comment">/* background: linear-gradient(to right, red 30%, blue 35% 65%, purple 70%);   */</span><br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to right, red <span class="hljs-number">33%</span>, blue <span class="hljs-number">33%</span> <span class="hljs-number">66%</span>, purple <span class="hljs-number">66%</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/13/EMTkJjYA6B38uc9.png" alt="image-20220309090648171"></p><h4 id="堆叠背景、渐变"><a href="#堆叠背景、渐变" class="headerlink" title="堆叠背景、渐变"></a>堆叠背景、渐变</h4><p>渐变支持透明度，因此可以堆叠多个背景。背景从上到下堆叠，第一个指定在顶部</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">480px</span>;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to left, transparent <span class="hljs-number">50%</span>, red),<br>    <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;https://s2.loli.net/2022/03/09/8OjEFf5GQy6iTcm.png&#x27;</span>) no-repeat;<br>  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">800px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">480px</span>;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;https://s2.loli.net/2022/03/09/8OjEFf5GQy6iTcm.png&#x27;</span>) no-repeat,<br>    <span class="hljs-built_in">linear-gradient</span>(to left, transparent <span class="hljs-number">50%</span>, red);<br>  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">800px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/09/B3ObCwQDSXgoKVG.png" alt="image-20220309114848001"></p><br><p>同理：渐变也是可以和其他渐变叠加的。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">480px</span>;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to left, transparent, red),<br>    <span class="hljs-built_in">linear-gradient</span>(to top, transparent, blue);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/09/m94dTQjl7fZE8au.png" alt="image-20220309122310300"></p><h3 id="径向渐变"><a href="#径向渐变" class="headerlink" title="径向渐变"></a>径向渐变</h3><p>径向渐变类似于线性渐变，只是它们从中心点向外辐射。可以指定该中心点在哪里。也可以把它们做成圆形或椭圆形。</p><p>语法：</p><p><code>radial-gradient(center, shape size, start-color, ..., last-color);</code></p><ul><li>第一个参数为<strong>渐变起点</strong></li><li>第二个参数为<strong>渐变形状</strong>和<strong>渐变大小</strong></li><li>第三个参数为<strong>渐变起点色标</strong></li><li>第四个参数为<strong>渐变终点色标</strong></li></ul><br><h4 id="基础径向渐变"><a href="#基础径向渐变" class="headerlink" title="基础径向渐变"></a>基础径向渐变</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(red, blue);<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(red, blue, purple);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/09/4Lg2QEa5jIsRM9J.png" alt="image-20220309123443478"></p><h4 id="颜色终止位置-1"><a href="#颜色终止位置-1" class="headerlink" title="颜色终止位置"></a>颜色终止位置</h4><p>和线性渐变一样</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(red <span class="hljs-number">10px</span>, yellow <span class="hljs-number">30%</span>, <span class="hljs-number">#1e90ff</span> <span class="hljs-number">50%</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/09/tyrkoNGT74EevBm.png" alt="image-20220309131245750"></p><h4 id="设置渐变中心"><a href="#设置渐变中心" class="headerlink" title="设置渐变中心"></a>设置渐变中心</h4><p>通过关键字<code>at</code>实现:  第一个参数是横轴，最左是0%, 最右是100%. 第二个参数是纵轴. </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-comment">/* 关键字at: 第一个参数是横轴，最左是0%, 最右是100%. 第二个参数是纵轴. */</span><br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(at <span class="hljs-number">0%</span> <span class="hljs-number">100%</span>, red <span class="hljs-number">10px</span>, yellow <span class="hljs-number">30%</span>, <span class="hljs-number">#1e90ff</span> <span class="hljs-number">50%</span>);<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(at <span class="hljs-number">100px</span> <span class="hljs-number">200px</span>, red <span class="hljs-number">10px</span>, yellow <span class="hljs-number">30%</span>, <span class="hljs-number">#1e90ff</span> <span class="hljs-number">50%</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/09/dFDMOVX4xnE8tGK.png" alt="image-20220309131916527"></p><h4 id="设置形状"><a href="#设置形状" class="headerlink" title="设置形状"></a>设置形状</h4><p>shape 参数定义了形状。可以是值 circle 或 ellipse。其中，circle 表示圆形，ellipse 表示椭圆形。默认值是 ellipse</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span>,<br><span class="hljs-selector-class">.box3</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(red <span class="hljs-number">10px</span>, yellow <span class="hljs-number">30%</span>, <span class="hljs-number">#1e90ff</span> <span class="hljs-number">50%</span>);<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(circle, red <span class="hljs-number">10px</span>, yellow <span class="hljs-number">30%</span>, <span class="hljs-number">#1e90ff</span> <span class="hljs-number">50%</span>);<br>&#125;<br><br><span class="hljs-selector-class">.box3</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(ellipse, red <span class="hljs-number">10px</span>, yellow <span class="hljs-number">30%</span>, <span class="hljs-number">#1e90ff</span> <span class="hljs-number">50%</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/09/nV4MxdHZIANbzD7.png" alt="image-20220309154415832"></p><p><b style="color: red">如果盒子是正方形，那么设置形状为椭圆可能不起效</b></p><h4 id="设置渐变大小"><a href="#设置渐变大小" class="headerlink" title="设置渐变大小"></a>设置渐变大小</h4><p>size 参数定义了渐变的大小。它可以是以下四个值：</p><ul><li><code>closest-side</code>，指定径向渐变的半径长度为<strong>从圆心到离圆心最近的边</strong></li><li><code>farthest-side</code>，指定径向渐变的半径长度为<strong>从圆心到离圆心最远的边</strong></li><li><code>closest-corner</code>，指定径向渐变的半径长度为<strong>从圆心到离圆心最近的角</strong></li><li><code>farthest-corner</code>，指定径向渐变的半径长度为<strong>从圆心到离圆心最远的角</strong></li></ul><p>默认值为<code>farthest-corner</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span>,<br><span class="hljs-selector-class">.box3</span>,<br><span class="hljs-selector-class">.box4</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(closest-side, red <span class="hljs-number">10px</span>, yellow <span class="hljs-number">30%</span>, <span class="hljs-number">#1e90ff</span> <span class="hljs-number">50%</span>);<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(farthest-side, red <span class="hljs-number">10px</span>, yellow <span class="hljs-number">30%</span>, <span class="hljs-number">#1e90ff</span> <span class="hljs-number">50%</span>);<br>&#125;<br><br><span class="hljs-selector-class">.box3</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(closest-corner, red <span class="hljs-number">10px</span>, yellow <span class="hljs-number">30%</span>, <span class="hljs-number">#1e90ff</span> <span class="hljs-number">50%</span>);<br>&#125;<br><br><span class="hljs-selector-class">.box4</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(farthest-corner, red <span class="hljs-number">10px</span>, yellow <span class="hljs-number">30%</span>, <span class="hljs-number">#1e90ff</span> <span class="hljs-number">50%</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/09/UGvjcOD1HkRQySW.png" alt="image-20220309171611188"></p><h4 id="堆叠径向渐变"><a href="#堆叠径向渐变" class="headerlink" title="堆叠径向渐变"></a>堆叠径向渐变</h4><p>和线性渐变一样</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">background</span>:<br>    <span class="hljs-built_in">radial-gradient</span>(at <span class="hljs-number">50%</span> <span class="hljs-number">0</span>,<br>      <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, .<span class="hljs-number">5</span>),<br>      <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)),<br>    <span class="hljs-built_in">radial-gradient</span>(at <span class="hljs-number">25%</span> <span class="hljs-number">75%</span>,<br>      <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>, .<span class="hljs-number">5</span>),<br>      <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>)),<br>    <span class="hljs-built_in">radial-gradient</span>(at <span class="hljs-number">75%</span> <span class="hljs-number">75%</span>,<br>      <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>, .<span class="hljs-number">5</span>),<br>      <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/09/Ol4kNXsi9pQMyYh.png" alt="image-20220309174059818"></p><h3 id="重复渐变"><a href="#重复渐变" class="headerlink" title="重复渐变"></a>重复渐变</h3><blockquote><p><code>linear-gradient</code>和<code>radial-gradient</code>属性不支持自动重复色标。但是，<code>repeating-linear-gradient</code> 和<code>repeating-radial-gradient</code>属性可用于提供此功能。</p></blockquote><h4 id="重复线性渐变"><a href="#重复线性渐变" class="headerlink" title="重复线性渐变"></a>重复线性渐变</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">repeating-linear-gradient</span>(<span class="hljs-number">45deg</span>, red <span class="hljs-number">0</span> <span class="hljs-number">20px</span>, blue <span class="hljs-number">20px</span> <span class="hljs-number">40px</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/09/E98RIZTLbDrVWgu.png" alt="image-20220309175418709"></p><p>看多难受，勿贪看。</p><h4 id="重复径向渐变"><a href="#重复径向渐变" class="headerlink" title="重复径向渐变"></a>重复径向渐变</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">60px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">repeating-radial-gradient</span>(red <span class="hljs-number">0</span> <span class="hljs-number">20px</span>, blue <span class="hljs-number">20px</span> <span class="hljs-number">40px</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/09/6womYBMjpVqb591.png" alt="image-20220309175910740"></p><h2 id="background-clip属性"><a href="#background-clip属性" class="headerlink" title="background-clip属性"></a>background-clip属性</h2><p><code>background-clip</code> 设置元素的背景（背景图片或颜色）是否延伸到边框、内边距盒子、内容盒子下面。</p><ul><li><p>border-box：背景延伸至边框外沿（但是在边框下层）。</p></li><li><p>padding-box：背景延伸至内边距（<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/padding"><code>padding</code></a>）外沿。不会绘制到边框处。</p></li><li><p>content-box：背景被裁剪至内容区（content box）外沿。</p></li><li><p>text：背景被裁剪成文字的前景色。（即文字的背景即为区块的背景，文字之外的区域都将被裁剪掉）</p></li></ul><br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span> &#123;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">40px</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span>,<br><span class="hljs-selector-class">.box2</span>,<br><span class="hljs-selector-class">.box3</span>,<br><span class="hljs-selector-class">.box4</span> &#123;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">20px</span> dashed blue;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">background-color</span>: pink;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">80px</span>;<br>  <span class="hljs-attribute">text-align</span>: center;<br>&#125;<br><br><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">background-clip</span>: padding-box;<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">background-clip</span>: border-box;<br>&#125;<br><br><span class="hljs-selector-class">.box3</span> &#123;<br>  <span class="hljs-attribute">background-clip</span>: content-box;<br>&#125;<br><br><span class="hljs-selector-class">.box4</span> &#123;<br>  -webkit-<span class="hljs-attribute">background-clip</span>: text;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/09/oqR4vUajV9PhWdz.png" alt="image-20220309193146881"></p><p><b style="color: red">一眼望去，最后一个最特殊</b>，所以要加上前缀<code> -webkit</code>，好吧，原因并不是这样。网上有种说法是background-clip: text; 只兼容chrome,要想兼容其他浏览器就要用: <code>-webkit-background-clip: text;</code>。然而，我的chrome浏览器都需要<code>-webkit-background-clip: text;</code>才能实现。<b style="color: red">另外，文字的颜色应该设置为透明，否则会覆盖掉背景色。</b></p><h2 id="渐变字实现"><a href="#渐变字实现" class="headerlink" title="渐变字实现"></a><span id="jump">渐变字实现</span></h2><p>看到这里，基本就能实现渐变字啦。</p><p>代码如下。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>渐变字实现<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">    <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">      <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to right, <span class="hljs-built_in">rgb</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">0%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>, .<span class="hljs-number">8</span>) <span class="hljs-number">50%</span>, <span class="hljs-built_in">rgb</span>(<span class="hljs-number">128</span>, <span class="hljs-number">0</span>, <span class="hljs-number">128</span>) <span class="hljs-number">80%</span>);</span><br><span class="css">      -webkit-<span class="hljs-attribute">background-clip</span>: text;</span><br><span class="css">      <span class="hljs-attribute">color</span>: transparent;</span><br><span class="css">      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">400px</span>;</span><br><span class="css">      <span class="hljs-attribute">text-align</span>: center;</span><br><span class="css">    &#125;</span><br><span class="css">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>赤蓝紫<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/13/BL9Zesh6qIzRw2g.png" alt="image-20220309200709951"></p><br /><p>参考链接：</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Images/Using_CSS_gradients">使用 CSS 渐变 - CSS（层叠样式表） | MDN (mozilla.org)</a></p><p><a href="https://www.runoob.com/css3/css3-gradients.html">CSS3 渐变 | 菜鸟教程 </a></p><p><a href="https://blog.csdn.net/weixin_45337959/article/details/123004306">CSS3新特性概述_阿锐丫的博客-CSDN博客_css3新增特性</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue Router深入学习(一)</title>
      <link href="/2022/03/12/vue-router-deep-1/"/>
      <url>/2022/03/12/vue-router-deep-1/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue-Router深入学习-一"><a href="#Vue-Router深入学习-一" class="headerlink" title="Vue Router深入学习(一)"></a>Vue Router深入学习(一)</h1><p>之前的笔记：<a href="https://clz.vercel.app/2021/10/15/vue-3/#toc-heading-9">Vue路由</a></p><p>通过阅读文档，自己写一些demo来加深自己的理解。(主要针对Vue3)</p><h2 id="1-动态路由匹配"><a href="#1-动态路由匹配" class="headerlink" title="1. 动态路由匹配"></a>1. 动态路由匹配</h2><h3 id="1-1-捕获所有路由-404路由"><a href="#1-1-捕获所有路由-404路由" class="headerlink" title="1.1 捕获所有路由(404路由)"></a>1.1 捕获所有路由(404路由)</h3><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">&gt;<span class="hljs-keyword">const</span> routes = [<br>&gt;<span class="hljs-comment">// 将匹配所有内容并将其放在 `$route.params.pathMatch` 下</span><br>&gt;&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/:pathMatch(.*)*&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;NotFound&#x27;</span>, <span class="hljs-attr">component</span>: NotFound &#125;,<br>&gt;<span class="hljs-comment">// 将匹配以 `/user-` 开头的所有内容，并将其放在 `$route.params.afterUser` 下</span><br>&gt;&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user-:afterUser(.*)&#x27;</span>, <span class="hljs-attr">component</span>: UserGeneric &#125;,<br>&gt;]<br></code></pre></td></tr></table></figure></blockquote><p><strong>使用</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span><br><br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>    <span class="hljs-attr">redirect</span>: <span class="hljs-string">&#x27;/home&#x27;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/home&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Home&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;../components/Home.vue&quot;</span>)<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user-:afterUser(.*)&#x27;</span>,<br>    <span class="hljs-comment">// 将匹配以 `/user-` 开头的所有内容，并将其放在 `$route.params.afterUser` 下</span><br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;User&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/User.vue&#x27;</span>)<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/:pathMatch(.*)*&quot;</span>,<br>    <span class="hljs-comment">// 将匹配所有内容并将其放在 `$route.params.pathMatch` 下</span><br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;NotFound&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;../components/NotFound.vue&quot;</span>)<br>  &#125;<br>]<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHashHistory(),<br>  routes<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure><p>app.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  &#123;&#123; route.params &#125;&#125;<br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">const</span> route = useRoute()</span><br><span class="javascript"></span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/12/NpOPi2VMot3wJfh.png" alt="image-20220302183444782"></p><h2 id="2-路由的匹配语法"><a href="#2-路由的匹配语法" class="headerlink" title="2 路由的匹配语法"></a>2 路由的匹配语法</h2><p>主要是通过正则表达式的语法来实现</p><h3 id="2-1-在参数中自定义正则"><a href="#2-1-在参数中自定义正则" class="headerlink" title="2.1 在参数中自定义正则"></a>2.1 在参数中自定义正则</h3><p>语法：</p><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> routes = [<br><span class="hljs-comment">// /:orderId -&gt; 仅匹配数字</span><br>&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/:orderId(\\d+)&#x27;</span> &#125;,<br><span class="hljs-comment">// /:productName -&gt; 匹配其他任何内容</span><br>&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/:productName&#x27;</span> &#125;,<br>]<br></code></pre></td></tr></table></figure></blockquote><p>实践：</p><p>路由配置：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHashHistory, useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span><br><br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>    <span class="hljs-attr">redirect</span>: <span class="hljs-string">&#x27;/home&#x27;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/home&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Home&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;../components/Home.vue&quot;</span>)<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/:userid(\\d+)&quot;</span>,   <span class="hljs-comment">// 两个\是因为会被转义</span><br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;UserId&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/UserId.vue&#x27;</span>)<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user/:username&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;UserName&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/UserName.vue&#x27;</span>)<br>  &#125;<br>]<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHashHistory(),<br>  routes<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/12/kU9syn7R3pvidCm.gif" alt="vue-router"></p><h3 id="2-2-可重复的参数"><a href="#2-2-可重复的参数" class="headerlink" title="2.2 可重复的参数"></a>2.2 可重复的参数</h3><p>可以使用<code> *</code>(0个或多个)和<code> +</code>(1个或多个)将参数标记为可重复</p><p>语法：</p><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> routes = [<br><span class="hljs-comment">// /:chapters -&gt;  匹配 /one, /one/two, /one/two/three, 等</span><br>&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/:chapters+&#x27;</span> &#125;,<br><span class="hljs-comment">// /:chapters -&gt; 匹配 /, /one, /one/two, /one/two/three, 等</span><br>&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/:chapters*&#x27;</span> &#125;,<br>]<br></code></pre></td></tr></table></figure></blockquote><p>实践：</p><p><b style="color: red">*</b>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHashHistory, useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span><br><br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/:chapters*&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Chapters&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;../components/Chapters.vue&quot;</span>)<br>  &#125;<br>]<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHashHistory(),<br>  routes<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/12/EBaOnpYLSKrdQjz.gif" alt="vue-router"></p><p><b style="color: red">+</b>：</p><p><img src="https://s2.loli.net/2022/03/12/Yhb82rAMQsOk1vF.gif" alt="vue-router"></p><h3 id="2-3-可选参数"><a href="#2-3-可选参数" class="headerlink" title="2.3 可选参数"></a>2.3 可选参数</h3><p>使用 <code>?</code> 修饰符(0 个或 1 个)将一个参数标记为可选</p><p>语法：</p><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> routes = [<br><span class="hljs-comment">// 匹配 /users 和 /users/posva</span><br>&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/users/:userId?&#x27;</span> &#125;,<br><span class="hljs-comment">// 匹配 /users 和 /users/42</span><br>&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/users/:userId(\\d+)?&#x27;</span> &#125;,<br>]<br></code></pre></td></tr></table></figure></blockquote><p>实践：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user/:userid(\\d+)?&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;User&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/User.vue&#x27;</span>)<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/:pathMatch(.*)*&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;NotFound&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/NotFound.vue&#x27;</span>)<br>  &#125;,<br>]<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/12/TVynubejJ6OfsFa.png" alt="image-20220303103934235"></p><p>如果没加可选限制，那么访问/user时也会匹配到404去</p><p><img src="https://s2.loli.net/2022/03/12/cIr1pqQnsf4CeRE.png" alt="image-20220303104039713"></p><h2 id="3-编程式导航"><a href="#3-编程式导航" class="headerlink" title="3. 编程式导航"></a>3. 编程式导航</h2><p><strong><code>params</code> 不能与 <code>path</code> 一起使用，而应该使用<code>name</code>(命名路由)</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; useRoute, useRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span></span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">const</span> route = useRoute()</span><br><span class="javascript">    <span class="hljs-keyword">const</span> router = useRouter()</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// // query编程式导航传参</span></span><br><span class="javascript">    <span class="hljs-comment">// router.push(&#123;</span></span><br><span class="javascript">    <span class="hljs-comment">//   path: &quot;/user/123&quot;,</span></span><br><span class="javascript">    <span class="hljs-comment">//   query: &#123;</span></span><br><span class="javascript">    <span class="hljs-comment">//     id: 666</span></span><br><span class="javascript">    <span class="hljs-comment">//   &#125;</span></span><br><span class="javascript">    <span class="hljs-comment">// &#125;)</span></span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// params编程式导航传参</span></span><br><span class="javascript">    router.push(&#123;</span><br><span class="javascript">      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-comment">// 需要使用命名路由</span></span><br><span class="javascript">      <span class="hljs-attr">params</span>: &#123;</span><br><span class="javascript">        <span class="hljs-attr">userid</span>: <span class="hljs-number">666</span></span><br><span class="javascript">      &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript">  &#125;</span><br><span class="javascript">&#125;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h3 id="3-1-替换当前位置"><a href="#3-1-替换当前位置" class="headerlink" title="3.1 替换当前位置"></a>3.1 替换当前位置</h3><p>不会向<code> history</code>添加新纪录，而是替换当前的记录</p><p><strong>声明式</strong>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/home&quot;</span> <span class="hljs-attr">replace</span>&gt;</span>home<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>编程式</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">router.replace(&#123;<br>  <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/home&#x27;</span><br>&#125;)<br><br><span class="hljs-comment">// 或</span><br><span class="hljs-comment">// router.push(&#123;</span><br><span class="hljs-comment">//   path: &#x27;/home&#x27;,</span><br><span class="hljs-comment">//   replace: true</span><br><span class="hljs-comment">// &#125;)</span><br></code></pre></td></tr></table></figure><h2 id="4-命名视图"><a href="#4-命名视图" class="headerlink" title="4. 命名视图"></a>4. 命名视图</h2><p>需要同时同级展示多个视图，而不是嵌套展示时，命名视图就能够派上用场了</p><p>首先路由配置需要使用<code> components</code>配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;home&quot;</span>,<br>    <span class="hljs-attr">components</span>: &#123;<br>      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./views/First.vue&quot;</span>),<br>      <span class="hljs-attr">second</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./views/Second.vue&quot;</span>),<br>      <span class="hljs-attr">third</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./views/Third.vue&quot;</span>)<br>    &#125;<br>  &#125;<br>];<br></code></pre></td></tr></table></figure><p>使用<code> router-view</code>时，添加上<code>name</code>属性即可</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;second&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;third&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br></code></pre></td></tr></table></figure><p>示例：</p><p><a href="https://codesandbox.io/s/ming-ming-shi-tu-8275iy">命名视图</a></p><h2 id="5-路由组件传参"><a href="#5-路由组件传参" class="headerlink" title="5. 路由组件传参"></a>5. 路由组件传参</h2><p>首先可通过<code> route</code>来实现路由传参，不过也可以通过<code> props</code>配置来开启<code> props传参</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span>;<br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/:id&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;../components/User.vue&quot;</span>),<br>    <span class="hljs-attr">props</span>: <span class="hljs-literal">true</span><br>  &#125;<br>];<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHistory(),<br>  routes<br>&#125;);<br><br></code></pre></td></tr></table></figure><p>通过<code> props</code>获取参数</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>User<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; id &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">const</span> props = defineProps([<span class="hljs-string">&quot;id&quot;</span>]);</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/12/q7KwpDYVS4EzRkN.png" alt="image-20220303194719540"></p><p><a href="https://router.vuejs.org/zh/guide/essentials/passing-props.html">更多</a></p><p>参考链接：<a href="https://router.vuejs.org/zh/">Vue Router</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue Router </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>axios笔记(二)    深入了解axios</title>
      <link href="/2022/03/10/axios-2/"/>
      <url>/2022/03/10/axios-2/</url>
      
        <content type="html"><![CDATA[<h1 id="axios笔记-二-深入了解axios"><a href="#axios笔记-二-深入了解axios" class="headerlink" title="axios笔记(二)    深入了解axios"></a>axios笔记(二)    深入了解axios</h1><h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1. 介绍"></a>1. 介绍</h2><ul><li>前端最流行的ajax请求库</li><li>react / vue官方推荐使用axios发送ajax请求</li><li><a href="https://github.com/axios/axios">axios仓库</a></li></ul><h2 id="2-axios特点"><a href="#2-axios特点" class="headerlink" title="2. axios特点"></a>2. axios特点</h2><ul><li>基于promise的异步ajax请求库</li><li>浏览器端 / node端都可以使用</li><li>支持请求 / 响应拦截器</li><li>支持请求取消</li><li>请求 / 响应数据转换</li><li>批量发送多个请求</li></ul><h2 id="3-axios常用语法"><a href="#3-axios常用语法" class="headerlink" title="3. axios常用语法"></a>3. axios常用语法</h2><ul><li>axios(config)：最本质的能发任何类型请求的方式</li><li>axios.get(url, config)：发get请求</li><li>axios.put(url, config)：发put请求</li></ul><ul><li>axios.defaults.xxx：请求的默认全局配置，如baseURL</li><li>axios.interceptors.request.use()：添加请求拦截器</li><li>axios.interceptors.response.use()：添加响应拦截器</li><li>axios.create(config)：新建一个 axios 实例(没有以下的功能)</li></ul><ul><li>axios.Cancel()：用于创建取消请求的错误对象</li><li>axios.CancelToken()：用于创建取消请求的token对象</li><li>axios.isCancel()：判断是否是一个取消请求的错误</li><li>axios.all(promises)：用于批量执行多个异步错误</li></ul><h3 id="3-1-axios简单使用"><a href="#3-1-axios简单使用" class="headerlink" title="3.1 axios简单使用"></a>3.1 axios简单使用</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;testGet()&quot;</span>&gt;</span>GET请求<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;testPost()&quot;</span>&gt;</span>POST请求<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    axios.defaults.baseURL = <span class="hljs-string">&#x27;http://localhost:3000&#x27;</span> <span class="hljs-comment">// 设置请求的基址,后面就不需要写完整的路径了</span></span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// GET请求: 服务端获取数据</span></span><br><span class="javascript">    <span class="hljs-keyword">const</span> testGet = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">      axios(&#123;</span><br><span class="javascript">          <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span>,</span><br><span class="javascript">          <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,</span><br><span class="javascript">          <span class="hljs-attr">params</span>: &#123;</span><br><span class="javascript">            <span class="hljs-attr">id</span>: <span class="hljs-number">1</span></span><br><span class="javascript">          &#125;</span><br><span class="javascript">        &#125;)</span><br><span class="javascript">        .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span><br><span class="javascript">            <span class="hljs-built_in">console</span>.log(response)</span><br><span class="javascript">          &#125;,</span><br><span class="javascript">          <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;</span><br><span class="javascript">            alert(error.message)</span><br><span class="javascript">          &#125;)</span><br><span class="javascript">    &#125;</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// POST请求: 服务端增加数据</span></span><br><span class="javascript">    <span class="hljs-keyword">const</span> testPost = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">      axios(&#123;</span><br><span class="javascript">          <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span>,</span><br><span class="javascript">          <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,</span><br><span class="javascript">          <span class="hljs-attr">data</span>: &#123;</span><br><span class="javascript">            <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;axios&#x27;</span>,</span><br><span class="javascript">            <span class="hljs-attr">author</span>: <span class="hljs-string">&#x27;clz&#x27;</span></span><br><span class="javascript">          &#125;</span><br><span class="javascript">        &#125;)</span><br><span class="javascript">        .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span><br><span class="javascript">            <span class="hljs-built_in">console</span>.log(response)</span><br><span class="javascript">          &#125;,</span><br><span class="javascript">          <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;</span><br><span class="javascript">            alert(error.message)</span><br><span class="javascript">          &#125;)</span><br><span class="javascript">    &#125;</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-2-axios-create-config"><a href="#3-2-axios-create-config" class="headerlink" title="3.2 axios.create(config)"></a>3.2 axios.create(config)</h3><p>简单使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> instance1 = axios.create(&#123;<br>  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;http://localhost:3000&#x27;</span><br>&#125;)<br><br><span class="hljs-comment">// 使用instance发送请求</span><br>instance1(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>可以发现用法和axios()很像，和下面一样效果</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">axios.defaults.baseURL = <span class="hljs-string">&#x27;http://localhost:3000&#x27;</span><br>axios(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>那么，axios.create(config)肯定得有它的过人之处，否则，早就会被淘汰掉了。</p><p>先来一个情景：我们要向端口3000发送get请求，要向端口4000发送post请求</p><p><strong>通过axios.create(config)实现</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> instance1 = axios.create(&#123;<br>  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;http://localhost:3000&#x27;</span><br>&#125;)<br><br><span class="hljs-comment">// 使用instance发送请求</span><br>instance1(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span><br>&#125;)<br><br><span class="hljs-keyword">const</span> instance2 = axios.create(&#123;<br>  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;http://localhost:4000&#x27;</span><br>&#125;)<br><br><span class="hljs-comment">// 使用instance发送请求</span><br>instance2(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span>,<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>直接通过axios()实现</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js">axios.defaults.baseURL = <span class="hljs-string">&#x27;http://localhost:3000&#x27;</span><br>axios(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span><br>&#125;)<br><br>axios.defaults.baseURL = <span class="hljs-string">&#x27;http://localhost:4000&#x27;</span><br>axios(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span>,<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>可能有人会提出疑问：不是一样都能实现吗？但是，如果我需要最后在向端口3000再发送一次GET请求的话。</p><p>让我们再看一下代码：</p><p><strong>通过axios.create(config)实现</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> instance1 = axios.create(&#123;<br>  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;http://localhost:3000&#x27;</span><br>&#125;)<br><br>instance1(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span><br>&#125;)<br><br><span class="hljs-keyword">const</span> instance2 = axios.create(&#123;<br>  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;http://localhost:4000&#x27;</span><br>&#125;)<br><br>instance2(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span>,<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span><br>&#125;)<br><br>instance1(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>直接通过axios()实现</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js">axios.defaults.baseURL = <span class="hljs-string">&#x27;http://localhost:3000&#x27;</span><br>axios(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span><br>&#125;)<br><br>axios.defaults.baseURL = <span class="hljs-string">&#x27;http://localhost:4000&#x27;</span><br>axios(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span>,<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span><br>&#125;)<br><br>axios.defaults.baseURL = <span class="hljs-string">&#x27;http://localhost:3000&#x27;</span><br>axios(&#123;<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/posts&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>比较上面的两种情况，就能发现**axios.create(config)<strong>的好处了。因为是新建axios实例，所以3000和4000两个端口分别使用的是不同的axios实例。所以能够很好地各司其责。而axios()则不能，仅仅只是简单地修改baseURL，都需要每次发送请求前重新修改，还是未考虑异步的情况。这么一看，在这种情况下，</strong>axios.create()**新建axios实例还是很香的。</p><h3 id="3-3-拦截器及运行流程"><a href="#3-3-拦截器及运行流程" class="headerlink" title="3.3 拦截器及运行流程"></a>3.3 拦截器及运行流程</h3><h4 id="3-3-1-添加请求拦截器"><a href="#3-3-1-添加请求拦截器" class="headerlink" title="3.3.1 添加请求拦截器"></a>3.3.1 添加请求拦截器</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">axios.interceptors.request.use(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) </span>&#123;<br>  <span class="hljs-comment">// Do something before request is sent</span><br>  <span class="hljs-keyword">return</span> config;<span class="hljs-comment">// 用于把任务串联起来</span><br>&#125;, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>&#123;<br>  <span class="hljs-comment">// Do something with request error</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);<span class="hljs-comment">// 一定要返回错误，不让之后能进入成功的流程</span><br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="3-3-2-添加响应拦截器"><a href="#3-3-2-添加响应拦截器" class="headerlink" title="3.3.2 添加响应拦截器"></a>3.3.2 添加响应拦截器</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">axios.interceptors.response.use(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>&#123;<br>    <span class="hljs-comment">// Any status code that lie within the range of 2xx cause this function to trigger</span><br>    <span class="hljs-comment">// Do something with response data</span><br>    <span class="hljs-keyword">return</span> response;<br>  &#125;, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>&#123;<br>    <span class="hljs-comment">// Any status codes that falls outside the range of 2xx cause this function to trigger</span><br>    <span class="hljs-comment">// Do something with response error</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);<br>  &#125;);<br></code></pre></td></tr></table></figure><h4 id="3-3-3-拦截器简单使用"><a href="#3-3-3-拦截器简单使用" class="headerlink" title="3.3.3 拦截器简单使用"></a>3.3.3 拦截器简单使用</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>拦截器简单使用<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// 添加请求拦截器(回调函数，成功的必须返回config：用于把任务串联起来)</span></span><br><span class="javascript">    axios.interceptors.request.use(</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;request interceptor1 onResolved()&#x27;</span>)</span><br><span class="javascript">        <span class="hljs-keyword">return</span> config</span><br><span class="javascript">      &#125;,</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;request interceptor1 onRejected()&#x27;</span>)</span><br><span class="javascript">        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error) <span class="hljs-comment">// 一定要返回错误，不让之后能进入成功的流程</span></span><br><span class="javascript">      &#125;</span><br><span class="javascript">    )</span><br><span class="javascript">    axios.interceptors.request.use(</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;request interceptor2 onResolved()&#x27;</span>)</span><br><span class="javascript">        <span class="hljs-keyword">return</span> config</span><br><span class="javascript">      &#125;,</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;request interceptor2 onRejected()&#x27;</span>)</span><br><span class="javascript">        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error)</span><br><span class="javascript">      &#125;</span><br><span class="javascript">    )</span><br><span class="javascript"></span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// 添加响应拦截器(回调函数，成功的必须返回response：用于把任务串联起来)</span></span><br><span class="javascript">    axios.interceptors.response.use(</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;response interceptor1 onResolved()&#x27;</span>)</span><br><span class="javascript">        <span class="hljs-keyword">return</span> response</span><br><span class="javascript">      &#125;,</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;response interceptor1 onRejected()&#x27;</span>)</span><br><span class="javascript">        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error)</span><br><span class="javascript">      &#125;</span><br><span class="javascript">    )</span><br><span class="javascript">    axios.interceptors.response.use(</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;response interceptor2 onResolved()&#x27;</span>)</span><br><span class="javascript">        <span class="hljs-keyword">return</span> response</span><br><span class="javascript">      &#125;,</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;response interceptor2 onRejected()&#x27;</span>)</span><br><span class="javascript">        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error)</span><br><span class="javascript">      &#125;</span><br><span class="javascript">    )</span><br><span class="javascript"></span><br><span class="javascript">    axios.get(<span class="hljs-string">&#x27;http://localhost:3000/posts&#x27;</span>)</span><br><span class="javascript">      .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;data: &#x27;</span>, response.data)</span><br><span class="javascript">      &#125;)</span><br><span class="javascript">      .catch(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;error: &#x27;</span>, error.message)</span><br><span class="javascript">      &#125;)</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/10/pRVPvKnuZqzJ3Uf.png" alt="image-20220301001039494"></p><p>先发送请求，再接收响应。所以会先触发请求拦截器，再触发响应拦截器，经过响应拦截器后才能得到数据</p><h4 id="3-3-4-取消请求"><a href="#3-3-4-取消请求" class="headerlink" title="3.3.4 取消请求"></a>3.3.4 取消请求</h4><p>express知识：<a href="https://clz.vercel.app/tags/Express/">Express笔记: clz</a></p><p>先搭建一个服务器：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>)<br><span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;cors&#x27;</span>)<br><br><span class="hljs-keyword">const</span> app = express()<br><br>app.use(cors())  <span class="hljs-comment">// 使用cors，允许跨域</span><br><br>app.use(express.json())   <span class="hljs-comment">// 解析Content-Type为 application/json格式的请求体</span><br><br>app.get(<span class="hljs-string">&#x27;/product1&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    res.send([<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;product1&#x27;</span><br>      &#125;<br>    ])<br>  &#125;, <span class="hljs-number">2000</span>)<br>&#125;)<br><br>app.listen(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:3000&#x27;</span>)<br>&#125;)<br></code></pre></td></tr></table></figure><p>开启服务器，<code> node server.js</code>或<code> nodemon server.js</code>（支持热更新）</p><p><strong>取消请求的简单使用</strong>：</p><ol><li><p>先定义一个变量<code> cancel</code>，用于保存取消请求的函数</p></li><li><p>设置请求路径、请求方法时，还要设置属性<code> cancelToken</code>，值为一个<code> CancelToken对象</code>，CancelToken类的构造函数的参数是用于请求的函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">cancelToken: <span class="hljs-keyword">new</span> axios.CancelToken(<span class="hljs-function">(<span class="hljs-params">c</span>) =&gt;</span> &#123; <span class="hljs-comment">// c是用于取消当前请求的函数</span><br>  cancel = c <span class="hljs-comment">// 保存取消请求函数，用于之后取消请求</span><br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>在需要请求的地方，调用保存的取消请求的函数</p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>取消请求<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;getProducts1()&quot;</span>&gt;</span>获取商品列表1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;cancelReq()&quot;</span>&gt;</span>取消请求<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/axios/dist/axios.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">let</span> cancel <span class="hljs-comment">// 用于保存取消请求的函数</span></span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> getProducts1 = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">      axios(&#123;</span><br><span class="javascript">        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;http://localhost:3000/products1&#x27;</span>,</span><br><span class="javascript">        <span class="hljs-attr">cancelToken</span>: <span class="hljs-keyword">new</span> axios.CancelToken(<span class="hljs-function">(<span class="hljs-params">c</span>) =&gt;</span> &#123; <span class="hljs-comment">// c是用于取消当前请求的函数</span></span><br><span class="javascript">          cancel = c <span class="hljs-comment">// 保存取消请求函数，用于之后取消请求</span></span><br><span class="javascript">        &#125;)</span><br><span class="javascript">      &#125;).then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span><br><span class="javascript">        cancel = <span class="hljs-literal">null</span> <span class="hljs-comment">// 请求结束后保存的取消请求的函数不在需要保存</span></span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;请求1成功: &#x27;</span>, response.data)</span><br><span class="javascript">      &#125;, <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;</span><br><span class="javascript">        cancel = <span class="hljs-literal">null</span></span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;请求1失败: &#x27;</span>, error.message, error)</span><br><span class="javascript">      &#125;)</span><br><span class="javascript">    &#125;</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> cancelReq = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> cancel === <span class="hljs-string">&#x27;function&#x27;</span>) &#123;</span><br><span class="javascript">        cancel(<span class="hljs-string">&#x27;强制取消请求1&#x27;</span>)</span><br><span class="javascript">      &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;没有可以取消的请求&#x27;</span>)</span><br><span class="javascript">      &#125;</span><br><span class="javascript">    &#125;</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/10/mdoGr4ALWMKQDlc.gif" alt="axios"></p><p>另外，取消请求的函数可以传参，传的参数将变成请求失败时，Cancel对象的message(这个时候并不是Error对象)<br></p><p><strong>取消请求优化</strong>：发送请求前取消掉未完成的请求</p><p>在点击事件最前面添加判断</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> cancel === <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>  cancel(<span class="hljs-string">&#x27;取消请求&#x27;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>这里会出现一个问题，如果连续发送三个请求(在收到响应之前)，会发现，第三个请求没有取消掉前一个未完成的请求</p><p><img src="https://s2.loli.net/2022/03/10/356pd2mBaUYRKuw.gif" alt="axios"></p><p>为什么会这样呢？看下下面的流程图就可能可以迎刃而解了(有错可评论指出)</p><p><img src="https://s2.loli.net/2022/03/10/m8NGi7p5w6FyrjR.png" alt="image-20220301185301548"></p><p>为了解决上面的问题，这时候就需要使用<code> axios.isCancel(error)</code>判断是不是取消请求导致的请求失败，如果是，则此时不需要把<code> cancel</code>变为<code>null</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>  &lt;meta charset=&quot;UTF-8&quot;&gt;<br>  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>  &lt;title&gt;取消请求&lt;/title&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>  &lt;button onclick=&quot;getProducts1()&quot;&gt;获取商品列表1&lt;/button&gt;&lt;br&gt;<br><br>  &lt;button onclick=&quot;cancelReq()&quot;&gt;取消请求&lt;/button&gt;<br><br>  &lt;script src=&quot;./node_modules/axios/dist/axios.js&quot;&gt;&lt;/script&gt;<br>  &lt;script&gt;<br>    let cancel // 用于保存取消请求的函数<br><br>    const getProducts1 = () =&gt; &#123;<br>      if (typeof cancel === &#x27;function&#x27;) &#123;<br>        cancel(&#x27;取消请求&#x27;)<br>      &#125;<br><br>      axios(&#123;<br>        url: &#x27;http://localhost:3000/products1&#x27;,<br>        cancelToken: new axios.CancelToken((c) =&gt; &#123; // c是用于取消当前请求的函数<br>          cancel = c // 保存取消请求函数，用于之后取消请求<br>        &#125;)<br>      &#125;).then(response =&gt; &#123;<br>        cancel = null // 请求结束后保存的取消请求的函数不在需要保存<br>        console.log(&#x27;请求1成功: &#x27;, response.data)<br>      &#125;, error =&gt; &#123;<br>        if (axios.isCancel(error)) &#123;<br>          console.log(&#x27;请求1失败: &#x27;, error.message)<br>        &#125; else &#123;<br>          cancel = null<br>          console.log(&#x27;请求1失败: &#x27;, error.message)<br>        &#125;<br><br>      &#125;)<br>    &#125;<br><br>    const cancelReq = () =&gt; &#123;<br>      if (typeof cancel === &#x27;function&#x27;) &#123;<br>        cancel(&#x27;强制取消请求1&#x27;)<br>      &#125; else &#123;<br>        console.log(&#x27;没有可以取消的请求&#x27;)<br>      &#125;<br>    &#125;<br>  &lt;/script&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/10/kwRCNruZ1cSe8hs.png" alt="image-20220301185709307"></p><p><img src="https://s2.loli.net/2022/03/10/tqs5JXMgWpIhHwl.gif" alt="axios"></p><p><strong>通过拦截器再优化</strong>：增加代码可复用性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 请求拦截器</span><br>axios.interceptors.request.use(<span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> cancel === <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>    cancel(<span class="hljs-string">&#x27;取消请求&#x27;</span>)<br>  &#125;<br>  config.cancelToken = <span class="hljs-keyword">new</span> axios.CancelToken(<span class="hljs-function">(<span class="hljs-params">c</span>) =&gt;</span> &#123; <span class="hljs-comment">// c是用于取消当前请求的函数</span><br>    cancel = c <span class="hljs-comment">// 保存取消请求函数，用于之后取消请求</span><br>  &#125;)<br><br>  <span class="hljs-keyword">return</span> config<br>&#125;)<br><br><span class="hljs-comment">// 响应拦截器</span><br>axios.interceptors.response.use(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>  cancel = <span class="hljs-literal">null</span><br>  <span class="hljs-keyword">return</span> response<br>&#125;, <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (axios.isCancel(error)) &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;请求取消: &#x27;</span>, error.message)<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">() =&gt;</span> &#123;&#125;) <span class="hljs-comment">// 中断Promise链。因为返回一个pending状态的对象时，后续的回调就不能执行了。</span><br>    <span class="hljs-comment">// 因为后面的回调函数只有在状态发生变化时才能执行。</span><br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    cancel = <span class="hljs-literal">null</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error) <span class="hljs-comment">// 将错误向下传递</span><br>  &#125;<br>&#125;)<br><br></code></pre></td></tr></table></figure><p>完整代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>取消请求<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;getProducts1()&quot;</span>&gt;</span>获取商品列表1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;getProducts2()&quot;</span>&gt;</span>获取商品列表2<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;cancelReq()&quot;</span>&gt;</span>取消请求<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/axios/dist/axios.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// 请求拦截器</span></span><br><span class="javascript">    axios.interceptors.request.use(<span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> &#123;</span><br><span class="javascript">      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> cancel === <span class="hljs-string">&#x27;function&#x27;</span>) &#123;</span><br><span class="javascript">        cancel(<span class="hljs-string">&#x27;取消请求&#x27;</span>)</span><br><span class="javascript">      &#125;</span><br><span class="javascript">      config.cancelToken = <span class="hljs-keyword">new</span> axios.CancelToken(<span class="hljs-function">(<span class="hljs-params">c</span>) =&gt;</span> &#123; <span class="hljs-comment">// c是用于取消当前请求的函数</span></span><br><span class="javascript">        cancel = c <span class="hljs-comment">// 保存取消请求函数，用于之后取消请求</span></span><br><span class="javascript">      &#125;)</span><br><span class="javascript"></span><br><span class="javascript">      <span class="hljs-keyword">return</span> config</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// 响应拦截器</span></span><br><span class="javascript">    axios.interceptors.response.use(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span><br><span class="javascript">      cancel = <span class="hljs-literal">null</span></span><br><span class="javascript">      <span class="hljs-keyword">return</span> response</span><br><span class="javascript">    &#125;, <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;</span><br><span class="javascript">      <span class="hljs-keyword">if</span> (axios.isCancel(error)) &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;请求取消: &#x27;</span>, error.message)</span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">() =&gt;</span> &#123;&#125;) <span class="hljs-comment">// 中断Promise链。因为返回一个pending状态的对象时，后续的回调就不能执行了。</span></span><br><span class="javascript">        <span class="hljs-comment">// 因为后面的回调函数只有在状态发生变化时才能执行。</span></span><br><span class="javascript">      &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="javascript">        cancel = <span class="hljs-literal">null</span></span><br><span class="javascript">        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error) <span class="hljs-comment">// 将错误向下传递</span></span><br><span class="javascript">      &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">let</span> cancel <span class="hljs-comment">// 用于保存取消请求的函数</span></span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> getProducts1 = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">      axios(&#123;</span><br><span class="javascript">        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;http://localhost:3000/products1&#x27;</span>,</span><br><span class="javascript">      &#125;).then(</span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;请求1成功: &#x27;</span>, response.data)</span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;请求1失败: &#x27;</span>, error.message)</span><br><span class="javascript">        &#125;)</span><br><span class="javascript">    &#125;</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> getProducts2 = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">      axios(&#123;</span><br><span class="javascript">        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;http://localhost:3000/products1&#x27;</span>,</span><br><span class="javascript">      &#125;).then(</span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;请求2成功: &#x27;</span>, response.data)</span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;请求2失败: &#x27;</span>, error.message)</span><br><span class="javascript">        &#125;)</span><br><span class="javascript">    &#125;</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> cancelReq = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> cancel === <span class="hljs-string">&#x27;function&#x27;</span>) &#123;</span><br><span class="javascript">        cancel(<span class="hljs-string">&#x27;强制取消请求1&#x27;</span>)</span><br><span class="javascript">      &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;没有可以取消的请求&#x27;</span>)</span><br><span class="javascript">      &#125;</span><br><span class="javascript">    &#125;</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> axios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>axios笔记(一)    简单入门</title>
      <link href="/2022/03/10/axios-1/"/>
      <url>/2022/03/10/axios-1/</url>
      
        <content type="html"><![CDATA[<h1 id="axios笔记-一-简单入门"><a href="#axios笔记-一-简单入门" class="headerlink" title="axios笔记(一)    简单入门"></a>axios笔记(一)    简单入门</h1><p>又是前端必备知识的笔记。</p><h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><p>之前的笔记：<a href="https://clz.vercel.app/2022/02/09/yc-http/">HTTP笔记 | 赤蓝紫 (clz.vercel.app)</a></p><h3 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1. 介绍"></a>1. 介绍</h3><blockquote><p>HTTP是一种能够获取如 HTML 这样的网络资源的<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Protocol">protocol</a>(通讯协议)。它是在 Web 上进行数据交换的基础，是一种 client-server 协议，也就是说，请求通常是由像浏览器这样的接受方发起的。一个完整的Web文档通常是由不同的子文档拼接而成的，像是文本、布局描述、图片、视频、脚本等等。</p></blockquote><p>文档：<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Overview">HTTP</a></p><h3 id="2-HTTP请求交互的基本过程"><a href="#2-HTTP请求交互的基本过程" class="headerlink" title="2. HTTP请求交互的基本过程"></a>2. HTTP请求交互的基本过程</h3><p><img src="https://s2.loli.net/2022/03/10/xBUuGF69vNS78mI.png" alt="image-20220228094936947"></p><ol><li>浏览器向服务器发送请求报文</li><li>后台服务器接收到请求后，调度服务器应用处理请求，向浏览器返回HTTP响应(响应报文)</li><li>浏览器接收到响应，解析显示响应体 / 调用监视回调</li></ol><p>查看HTTP请求响应信息：DevTools Network面板</p><p><img src="https://s2.loli.net/2022/03/10/AZN5J6KEwiovrYu.png" alt="image-20220228095526783"></p><h3 id="3-API分类"><a href="#3-API分类" class="headerlink" title="3. API分类"></a>3. API分类</h3><h4 id="3-1-REST-API-restful"><a href="#3-1-REST-API-restful" class="headerlink" title="3.1 REST API(restful)"></a>3.1 REST API(restful)</h4><p><a href="https://clz.vercel.app/2022/02/28/RESTful/">RESTful接口设计规范</a></p><ul><li>发送请求进行CRUD哪个操作由请求方式来决定</li><li>同一个请求路径可以进行多个操作</li><li>请求方式会用到GET / POST / PUT / DELETE等</li></ul><h4 id="3-2-非REST-API-restless"><a href="#3-2-非REST-API-restless" class="headerlink" title="3.2 非REST API(restless)"></a>3.2 非REST API(restless)</h4><ul><li>请求方式不决定请求的CRUD操作(甚至可以用GET请求进行删除操作)</li><li>一个请求路径只对应一个操作</li><li>请求方式一般只有GET / POST</li></ul><h3 id="4-json-server搭建REST接口"><a href="#4-json-server搭建REST接口" class="headerlink" title="4. json-server搭建REST接口"></a>4. json-server搭建REST接口</h3><p><a href="https://github.com/typicode/json-server">json-server仓库</a></p><ol><li><p>全局安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install -g json-server<br></code></pre></td></tr></table></figure></li><li><p>新建<code> db.json</code>文件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;posts&quot;</span>: [<br>    &#123; <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;json-server&quot;</span>, <span class="hljs-attr">&quot;author&quot;</span>: <span class="hljs-string">&quot;typicode&quot;</span> &#125;<br>  ],<br>  <span class="hljs-attr">&quot;comments&quot;</span>: [<br>    &#123; <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;some comment&quot;</span>, <span class="hljs-attr">&quot;postId&quot;</span>: <span class="hljs-number">1</span> &#125;<br>  ],<br>  <span class="hljs-attr">&quot;profile&quot;</span>: &#123; <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;typicode&quot;</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>开启服务器(支持热更新)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">json-server --watch db.json<br></code></pre></td></tr></table></figure></li><li><p>打开<code> http://localhost:3000/</code>，可以在Resources中看到所有的接口</p><p><img src="https://s2.loli.net/2022/03/10/aMDp4T9JQ2ruvqV.png" alt="image-20220228105153779"></p></li><li><p>点击对应接口，可以获取对应数据</p><p><img src="https://s2.loli.net/2022/03/10/pg9WGrXK1HhINBm.png" alt="image-20220228105310624"></p></li><li><p>支持携带参数</p><ul><li><p>params参数</p><p><img src="https://s2.loli.net/2022/03/10/Ux4IzmPwQ3BFLuA.png" alt="image-20220228105412534"></p></li><li><p>query参数</p><p><img src="https://s2.loli.net/2022/03/10/j65GDoirbMQa27A.png" alt="image-20220228105530166"></p></li><li><p>两种参数区别：query参数是从所有的数据中筛选，所以最后是数组的形式；params参数则是特定查找的形式，所以最后是对象的形式</p></li></ul></li></ol><h2 id="使用axios请求REST接口"><a href="#使用axios请求REST接口" class="headerlink" title="使用axios请求REST接口"></a>使用axios请求REST接口</h2><p><b style="color:red">上面开启的服务器不要关</b></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;testGet()&quot;</span>&gt;</span>GET请求<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;testPost()&quot;</span>&gt;</span>POST请求<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;testPut()&quot;</span>&gt;</span>PUT请求<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;testDelete()&quot;</span>&gt;</span>DELETE请求<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> testGet = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">      axios.get(<span class="hljs-string">&#x27;http://localhost:3000/posts&#x27;</span>, &#123;</span><br><span class="javascript">          <span class="hljs-comment">// params: &#123;</span></span><br><span class="javascript">          <span class="hljs-comment">//   id: 2</span></span><br><span class="javascript">          <span class="hljs-comment">// &#125;</span></span><br><span class="javascript">        &#125;)</span><br><span class="javascript">        .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;/posts get&#x27;</span>, response.data)</span><br><span class="javascript">        &#125;)</span><br><span class="javascript">    &#125;</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> testPost = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">      axios.post(<span class="hljs-string">&#x27;http://localhost:3000/posts&#x27;</span>, &#123;</span><br><span class="javascript">          <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;czh&#x27;</span>,</span><br><span class="javascript">          <span class="hljs-attr">author</span>: <span class="hljs-string">&#x27;czh&#x27;</span></span><br><span class="javascript">        &#125;)</span><br><span class="javascript">        .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;/posts post&#x27;</span>, response.data)</span><br><span class="javascript">        &#125;)</span><br><span class="javascript">    &#125;</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> testPut = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">      axios.put(<span class="hljs-string">&#x27;http://localhost:3000/posts/3&#x27;</span>, &#123;</span><br><span class="javascript">          <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;czh...&#x27;</span>,</span><br><span class="javascript">          <span class="hljs-attr">author</span>: <span class="hljs-string">&#x27;czh...&#x27;</span></span><br><span class="javascript">        &#125;)</span><br><span class="javascript">        .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;/posts put&#x27;</span>, response.data)</span><br><span class="javascript">        &#125;)</span><br><span class="javascript">    &#125;</span><br><span class="javascript"></span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> testDelete = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">      axios.delete(<span class="hljs-string">&#x27;http://localhost:3000/posts/3&#x27;</span>)</span><br><span class="javascript">        .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;/posts delete&#x27;</span>, response.data)</span><br><span class="javascript">        &#125;)</span><br><span class="javascript">    &#125;</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="XHR"><a href="#XHR" class="headerlink" title="XHR"></a>XHR</h2><h3 id="1-介绍-1"><a href="#1-介绍-1" class="headerlink" title="1. 介绍"></a>1. 介绍</h3><blockquote><p><code>XMLHttpRequest</code>（XHR）对象用于与服务器交互。通过 XMLHttpRequest 可以在不刷新页面的情况下请求特定 URL，获取数据。这允许网页在不影响用户操作的情况下，更新页面的局部内容。<code>XMLHttpRequest</code> 在 <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/AJAX">AJAX</a> 编程中被大量使用。</p></blockquote><p>文档：<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a></p><h3 id="2-ajax请求与一般的http请求"><a href="#2-ajax请求与一般的http请求" class="headerlink" title="2. ajax请求与一般的http请求"></a>2. ajax请求与一般的http请求</h3><ul><li><p>ajax请求是一种特殊的http请求</p></li><li><p>对服务器端来说，没有任何请求，区别在于<strong>浏览器端</strong>(ajax请求有专门的ajax引擎帮忙发送)</p></li><li><p>浏览器端发送请求，只有XHR或fetch发出的才是ajax请求，其他的都不是ajax请求</p></li><li><p>浏览器端接收到响应(一般请求浏览器会自动更新页面，而ajax请求需要手动更新)</p><ul><li><p>一般请求：浏览器会直接显示响应体数据，即刷新/跳转页面</p></li><li><p>ajax请求：浏览器不会对页面进行任何更新操作，而只是调用监视的回调函数并传入响应相关数据</p></li></ul></li></ul><h3 id="3-常用API"><a href="#3-常用API" class="headerlink" title="3. 常用API"></a>3. 常用API</h3><ul><li><p>XMLHttpRequest()：创建XHR对象的构造函数</p></li><li><p>status：响应状态码，如200、404等</p></li><li><p>statusText：响应状态文本</p></li><li><p>readyState：标识请求状态的只读属性</p><p>​    0: 初始</p><p>​    1: open()之后</p><p>​    2: send()之后</p><p>​    3: 请求中</p><p>​    4: 请求完成</p></li><li><p>onreadystatechange：绑定readyState改变的监听</p></li><li><p>responseType：指定响应数据类型</p></li><li><p>timeout：指定请求超时时间，默认为0，表示没有限制</p></li><li><p>open()：初始化一个请求。参数为<code> (method, url [, async])</code></p></li><li><p>send(data)：发送请求</p></li><li><p>setRequestHeader(name, value)：设置请求头</p></li><li><p>getResponseHeader(name)：获取指定名称的响应头值</p></li></ul><h2 id="封装axios"><a href="#封装axios" class="headerlink" title="封装axios"></a>封装axios</h2><p>axios</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">axios</span>(<span class="hljs-params">&#123;</span></span><br><span class="hljs-params"><span class="hljs-function">  url,</span></span><br><span class="hljs-params"><span class="hljs-function">  method = <span class="hljs-string">&#x27;GET&#x27;</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  params = &#123;&#125;,</span></span><br><span class="hljs-params"><span class="hljs-function">  data = &#123;&#125;</span></span><br><span class="hljs-params"><span class="hljs-function">&#125;</span>) </span>&#123;<br>  <span class="hljs-comment">// 返回Promise对象</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// 处理method大小写</span><br>    method = method.toUpperCase()<br><br>    <span class="hljs-comment">// 把请求参数拼接到url中</span><br>    <span class="hljs-keyword">let</span> queryString = <span class="hljs-string">&#x27;&#x27;</span><br>    <span class="hljs-built_in">Object</span>.keys(params).forEach(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> &#123;<br>      queryString += <span class="hljs-string">`<span class="hljs-subst">$&#123;key&#125;</span>=<span class="hljs-subst">$&#123;params[key]&#125;</span>&amp;`</span><br>    &#125;)<br><br>    <span class="hljs-keyword">if</span> (queryString) &#123; <span class="hljs-comment">// 有查询参数,需要把最后的&amp;去掉</span><br>      queryString = queryString.substring(<span class="hljs-number">0</span>, queryString.length - <span class="hljs-number">1</span>)<br>      url += <span class="hljs-string">`?<span class="hljs-subst">$&#123;queryString&#125;</span>`</span><br>    &#125;<br><br>    <span class="hljs-comment">// 1. 执行异步ajax请求</span><br>    <span class="hljs-comment">// 1.1 创建xhr对象</span><br>    <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br><br>    <span class="hljs-comment">// 1.2 打开连接，初始化请求</span><br>    xhr.open(method, url, <span class="hljs-literal">true</span>) <span class="hljs-comment">// 第三个参数表示是否异步执行操作，默认为true。如果值为false，send()方法直到收到答复前不会返回。</span><br><br>    <span class="hljs-comment">// 1.3 发送请求</span><br>    <span class="hljs-keyword">if</span> (method === <span class="hljs-string">&#x27;GET&#x27;</span> || method === <span class="hljs-string">&#x27;DELETE&#x27;</span>) &#123;<br>      xhr.send()<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (method === <span class="hljs-string">&#x27;POST&#x27;</span> || method === <span class="hljs-string">&#x27;PUT&#x27;</span>) &#123;<br>      xhr.setRequestHeader(<span class="hljs-string">&#x27;Content-Type&#x27;</span>, <span class="hljs-string">&#x27;application/json;charset=utf-8&#x27;</span>) <span class="hljs-comment">// 设置请求头，通知服务器请求体的格式是json</span><br>      xhr.send(<span class="hljs-built_in">JSON</span>.stringify(data)) <span class="hljs-comment">// 发送json格式请求体参数</span><br>    &#125;<br><br>    <span class="hljs-comment">// 1.4 绑定状态的监听,监听的定义能放在后面是因为这里是异步发送请求</span><br>    xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">if</span> (xhr.readyState !== <span class="hljs-number">4</span>) &#123;<br>        <span class="hljs-keyword">return</span><br>      &#125;<br><br>      <span class="hljs-keyword">const</span> &#123;<br>        status, <span class="hljs-comment">// 响应状态在[200, 300)之间代表成功,否则失败</span><br>        statusText<br>      &#125; = xhr<br><br>      <span class="hljs-comment">// 2.1 如果请求成功，调用resolve()</span><br>      <span class="hljs-keyword">if</span> (status &gt;= <span class="hljs-number">200</span> &amp;&amp; status &lt; <span class="hljs-number">300</span>) &#123;<br>        <span class="hljs-keyword">const</span> response = &#123;<br>          <span class="hljs-attr">data</span>: <span class="hljs-built_in">JSON</span>.parse(xhr.response), <span class="hljs-comment">// 把响应转化成JSON对象</span><br>          status,<br>          statusText<br>        &#125;<br>        resolve(response)<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// 2.2 如果请求失败，调用reject()</span><br>        reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;request error status is &#x27;</span> + status))<br>      &#125;<br><br>    &#125;<br><br>  &#125;)<br>&#125;<br><br></code></pre></td></tr></table></figure><p>使用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// GET请求: 服务端获取数据</span><br><span class="hljs-keyword">const</span> testGet = <span class="hljs-function">() =&gt;</span> &#123;<br>  axios(&#123;<br>      <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;http://localhost:3000/posts&#x27;</span>,<br>      <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>      <span class="hljs-attr">params</span>: &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">1</span><br>      &#125;<br>    &#125;)<br>    .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>        <span class="hljs-built_in">console</span>.log(response)<br>      &#125;,<br>      <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>        alert(error.message)<br>      &#125;)<br>&#125;<br><br><span class="hljs-comment">// POST请求: 服务端增加数据</span><br><span class="hljs-keyword">const</span> testPost = <span class="hljs-function">() =&gt;</span> &#123;<br>  axios(&#123;<br>      <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;http://localhost:3000/posts&#x27;</span>,<br>      <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>      <span class="hljs-attr">data</span>: &#123;<br>        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;axios&#x27;</span>,<br>        <span class="hljs-attr">author</span>: <span class="hljs-string">&#x27;clz&#x27;</span><br>      &#125;<br>    &#125;)<br>    .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>        <span class="hljs-built_in">console</span>.log(response)<br>      &#125;,<br>      <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>        alert(error.message)<br>      &#125;)<br>&#125;<br><br><span class="hljs-comment">// PUT请求: 服务端更新数据</span><br><span class="hljs-keyword">const</span> testPut = <span class="hljs-function">() =&gt;</span> &#123;<br>  axios(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;http://localhost:3000/posts/1&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;put&#x27;</span>,<br>    <span class="hljs-attr">data</span>: &#123;<br>      <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;axios!!!!!&#x27;</span>,<br>      <span class="hljs-attr">author</span>: <span class="hljs-string">&#x27;clz!!!!!!&#x27;</span><br>    &#125;<br>  &#125;).then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(response)<br>  &#125;, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>    alert(error.message)<br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// DELETE请求: 服务端删除数据</span><br><span class="hljs-keyword">const</span> testDelete = <span class="hljs-function">() =&gt;</span> &#123;<br>  axios(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;http://localhost:3000/posts/2&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;delete&#x27;</span><br>  &#125;).then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(response)<br>  &#125;, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>    alert(error.message)<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p><b style="color: red">发送POST、PUT等需要修改服务器端的资源的请求时会发送OPTIONS请求，查看是否能够修改，即预请求。而GET请求不需要，因为GET请求不需要修改服务器上的资源</b></p><p><img src="https://s2.loli.net/2022/03/10/XfniK4GOZEIRcVs.png" alt="image-20220228151239576"></p><p>学习链接：<a href="https://www.bilibili.com/video/BV1NJ41197u6">尚硅谷_axios核心技术</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> axios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>params编程式导航踩坑</title>
      <link href="/2022/03/08/vue-router-proplem-2/"/>
      <url>/2022/03/08/vue-router-proplem-2/</url>
      
        <content type="html"><![CDATA[<h1 id="params编程式导航踩坑"><a href="#params编程式导航踩坑" class="headerlink" title="params编程式导航踩坑"></a>params编程式导航踩坑</h1><h2 id="1-params-不能与-path-一起使用"><a href="#1-params-不能与-path-一起使用" class="headerlink" title="1. params 不能与 path 一起使用"></a>1. <code>params</code> 不能与 <code>path</code> 一起使用</h2><p>先来一下路由配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHashHistory, useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span><br><br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user/:userid&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/User.vue&#x27;</span>),<br>  &#125;<br>]<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHashHistory(),<br>  routes<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure><p>先来一下：query编程式导航</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; useRoute, useRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span></span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">const</span> router = useRouter()</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// query编程式导航传参</span></span><br><span class="javascript">    router.push(&#123;</span><br><span class="javascript">      <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/123&quot;</span>,</span><br><span class="javascript">      <span class="hljs-attr">query</span>: &#123;</span><br><span class="javascript">        <span class="hljs-attr">userid</span>: <span class="hljs-number">666</span></span><br><span class="javascript">      &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><br><span class="javascript">  &#125;</span><br><span class="javascript">&#125;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/08/lJkUbH12vCRnus6.png" alt="image-20220303114728772"></p><p>一切正常</p><p>然后，换成params编程式导航</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; useRoute, useRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span></span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">const</span> router = useRouter()</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// params编程式导航传参</span></span><br><span class="javascript">    router.push(&#123;</span><br><span class="javascript">      <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user&quot;</span>,</span><br><span class="javascript">      <span class="hljs-attr">params</span>: &#123;</span><br><span class="javascript">        <span class="hljs-attr">userid</span>: <span class="hljs-number">123</span></span><br><span class="javascript">      &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><br><span class="javascript">  &#125;</span><br><span class="javascript">&#125;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>最后跳转到<a href="http://localhost:3000/#/user%EF%BC%8C%E6%B2%A1%E6%9C%89%E5%90%8E%E9%9D%A2%E7%9A%84params%E5%8F%82%E6%95%B0%EF%BC%8C%E8%BF%99%E6%98%AF%E5%9B%A0%E4%B8%BA">http://localhost:3000/#/user，没有后面的params参数，这是因为</a><b style="color: red"><code>params</code> 不能与 <code>path</code> 一起使用</b>，一起使用后，后面的params参数将不再起作用。</p><h2 id="2-需要和命名路由搭配使用"><a href="#2-需要和命名路由搭配使用" class="headerlink" title="2. 需要和命名路由搭配使用"></a>2. 需要和命名路由搭配使用</h2><p>先说一下，一开始，本人还以为<code>name</code>就是类似<code>path</code>的用法。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; useRoute, useRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span></span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">const</span> router = useRouter()</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">// params编程式导航传参</span></span><br><span class="javascript">    router.push(&#123;</span><br><span class="javascript">      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;user&quot;</span>,</span><br><span class="javascript">      <span class="hljs-attr">params</span>: &#123;</span><br><span class="javascript">        <span class="hljs-attr">userid</span>: <span class="hljs-number">123</span></span><br><span class="javascript">      &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><br><span class="javascript">  &#125;</span><br><span class="javascript">&#125;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>然后报错</p><p><img src="https://s2.loli.net/2022/03/08/BUNkO9yWdXK4JEe.png" alt="image-20220303115736810"></p><p>通过查阅资料后，才知道，这里的name属性就是命名路由名称。</p><p>修改路由的配置：变成命名路由</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHashHistory, useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span><br><br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user/:userid&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;user&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/User.vue&#x27;</span>),<br>  &#125;<br>]<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHashHistory(),<br>  routes<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/08/YI82MDXWtHruqwy.png" alt="image-20220303120329957"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Vue3 </tag>
            
            <tag> Vue-router </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>刷新页面后this.$route.params 为空</title>
      <link href="/2022/03/08/vue-router-proplem-1/"/>
      <url>/2022/03/08/vue-router-proplem-1/</url>
      
        <content type="html"><![CDATA[<h1 id="刷新页面后this-route-params-为空"><a href="#刷新页面后this-route-params-为空" class="headerlink" title="刷新页面后this.$route.params 为空"></a>刷新页面后this.$route.params 为空</h1><p>深度学习<code> vue-router</code>时，按官方文档的教程看下来，结果发现刷新页面后，打印的<code>this.$route.params </code>为空</p><h2 id="Vue2"><a href="#Vue2" class="headerlink" title="Vue2"></a>Vue2</h2><h3 id="问题复现"><a href="#问题复现" class="headerlink" title="问题复现"></a>问题复现</h3><p>路由配置：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> VueRouter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><br>Vue.use(VueRouter)<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> VueRouter(&#123;<br>  <span class="hljs-attr">routes</span>: [<br>    &#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>      <span class="hljs-attr">redirect</span>: <span class="hljs-string">&#x27;/home&#x27;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/home&quot;</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Home&quot;</span>,<br>      <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;../components/Home.vue&quot;</span>)<br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/:id&quot;</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;../components/User.vue&quot;</span>)<br>    &#125;<br>  ]<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure><p>App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;App&quot;</span>,</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.$route.params)</span><br><span class="javascript">  &#125;</span><br><span class="javascript">&#125;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/08/FWeYxVU8bqB29yJ.png" alt="image-20220302152502581"></p><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><h4 id="1-在导航守卫中获取"><a href="#1-在导航守卫中获取" class="headerlink" title="1. 在导航守卫中获取"></a>1. 在导航守卫中获取</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">router.beforeEach(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(to.params)<br>  next()<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/08/dqoSPzYgaDeFAUy.gif" alt="vue-router2"></p><h4 id="2-在跳转后的页面获取，而不是在app-vue中获取"><a href="#2-在跳转后的页面获取，而不是在app-vue中获取" class="headerlink" title="2. 在跳转后的页面获取，而不是在app.vue中获取"></a>2. 在跳转后的页面获取，而不是在app.vue中获取</h4><p>User.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>User<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.$route.params)</span><br><span class="javascript">  &#125;</span><br><span class="javascript">&#125;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span><br><span class="css"><span class="hljs-selector-tag">h2</span> &#123;</span><br><span class="css">  <span class="hljs-attribute">color</span>: purple;</span><br><span class="css">&#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="3-在-updated生命周期钩子中获取-可能实际开发用不上"><a href="#3-在-updated生命周期钩子中获取-可能实际开发用不上" class="headerlink" title="3. 在 updated生命周期钩子中获取(可能实际开发用不上)"></a>3. 在<code> updated</code>生命周期钩子中获取(可能实际开发用不上)</h4><p>为什么会出这个问题呢？</p><p>以下是个人现阶段的理解。(可能有误)</p><p>结论：<b style="Color: red">此时打印<code> this.$route.params</code>应该在<code> updated</code>生命周期钩子中打印</b></p><p>首先先在<code> created</code>和<code> mounted</code>钩子中打印<code> this.$route</code>看一下情况。</p><p><img src="https://s2.loli.net/2022/03/08/pOfQMSabTkjCt3Z.png" alt="image-20220302153712535"></p><p>发现，信息不符合。猜测可能是组件创建、渲染阶段时，路由还没有跳转，所以打印的信息不对。路由跳转后，修改数据<code> this.$route</code>是在数据更新阶段，所以获取最新的路由信息应该在<code> updated</code>中获取。</p><p><img src="https://s2.loli.net/2022/03/08/oBSyKRIdsVfhw83.png" alt="image-20220302154158334"></p><p>问题解决</p><h2 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h2><p>首先，路由配置也不太一样</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span><br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>    <span class="hljs-attr">redirect</span>: <span class="hljs-string">&#x27;/home&#x27;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/home&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Home&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;../components/Home.vue&quot;</span>)<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/user/:id&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;../components/User.vue&quot;</span>)<br>  &#125;<br>]<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHashHistory(),<br>  routes<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure><h3 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h3><h4 id="1-在导航守卫中获取-1"><a href="#1-在导航守卫中获取-1" class="headerlink" title="1. 在导航守卫中获取"></a>1. 在导航守卫中获取</h4><p>和Vue2的相同。</p><h4 id="2-在跳转后的页面获取，而不是在app-vue中获取-1"><a href="#2-在跳转后的页面获取，而不是在app-vue中获取-1" class="headerlink" title="2. 在跳转后的页面获取，而不是在app.vue中获取"></a>2. 在跳转后的页面获取，而不是在app.vue中获取</h4><p><strong>这个在开发中用到的可能性还大一些。毕竟开发时每个页面都需要路由信息的很少，都需要的话就可以采用上面在导航守卫中获取的做法</strong></p><p>User.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>User<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; onUpdated &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">const</span> route = useRoute()</span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-built_in">console</span>.log(route.params)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span><br><span class="css"><span class="hljs-selector-tag">h2</span> &#123;</span><br><span class="css">  <span class="hljs-attribute">color</span>: purple;</span><br><span class="css">&#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>效果和上图一样</p><h4 id="3-强行实现-不建议"><a href="#3-强行实现-不建议" class="headerlink" title="3. 强行实现(不建议)"></a>3. 强行实现(不建议)</h4><p>Vue3中，针对Vue2的解决方案3不再有效。在Vue3中，路由的变化不再属于是数据的更新，所以也不会触发<code> onUpdated</code>钩子</p><p>app.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/home&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; onUpdated &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">const</span> route = useRoute()</span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-comment">// console.log(route.params)</span></span><br><span class="javascript"></span><br><span class="javascript">onUpdated(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">  <span class="hljs-built_in">console</span>.log(route.params)</span><br><span class="javascript">&#125;)</span><br><span class="javascript"></span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/08/6mokixOAbLd2PrR.gif" alt="vue-router"></p><p>那么怎么解决呢？</p><br /><p>这个只是个人学习时，想到的暴力法。(现在也只会这个暴力法，开发时应该是嗤之以鼻的做法)</p><p>app.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; onUpdated &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">const</span> route = useRoute()</span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">  <span class="hljs-built_in">console</span>.log(route.params)</span><br><span class="javascript">&#125;, <span class="hljs-number">200</span>)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>效果还是同上</p><h2 id="最后的坑-又能解释的希望评论告知"><a href="#最后的坑-又能解释的希望评论告知" class="headerlink" title="最后的坑(又能解释的希望评论告知)"></a>最后的坑(又能解释的希望评论告知)</h2><p>app.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  params: &#123;&#123; route.params &#125;&#125;<br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; onUpdated &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">const</span> route = useRoute()</span><br><span class="javascript"></span><br><span class="javascript"><span class="hljs-built_in">console</span>.log(route)</span><br><span class="javascript"><span class="hljs-built_in">console</span>.log(route.params)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/08/v7SWpIYkjZx9FCV.png" alt="image-20220308160130992"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Vue3 </tag>
            
            <tag> Vue-router </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeanCloud国际版遇到的问题及解决方案</title>
      <link href="/2022/03/07/valine-problem/"/>
      <url>/2022/03/07/valine-problem/</url>
      
        <content type="html"><![CDATA[<h1 id="LeanCloud国际版遇到的问题及解决方案"><a href="#LeanCloud国际版遇到的问题及解决方案" class="headerlink" title="LeanCloud国际版遇到的问题及解决方案"></a>LeanCloud国际版遇到的问题及解决方案</h1><p>首先，为什么要用<code> LeanCloud国际版</code>呢？就是因为设置邮件提醒功能时，需要绑定访问域名来唤醒leancloud，而国际版提供免费域名，国内的需要备案域名。</p><p><img src="https://s2.loli.net/2022/03/07/52vX34VkWodfMUj.png" alt="image-20220307123838756"></p><p><br />只能说弄这个博客，真的是非常能感受到迭代的快(虽然遇到的不是技术点上的)：</p><ul><li>搭建博客时，刚好遇上github默认分支从<code> master</code>变为<code> master</code>，然后网上的教程都还是<code> master</code></li><li>这次的问题也是因为us.avoscloud.com这个域名被弃用了，然而报错提示的确实跨域问题</li></ul><p><img src="https://s2.loli.net/2022/03/07/zpYQtBL8f2Fq5ng.png" alt="img"></p><p>这一次属于是长教训了，不看公告，一个月前的事情现在才知道</p><p><img src="https://s2.loli.net/2022/03/07/gLp8f4vniyNwt6D.png" alt="image-20220307122010510"></p><p>最后通过到leancloud社区直接询问，通过<a href="https://forum.leancloud.cn/users/shifuchen">shifuchen大佬</a>的回答解决问题</p><p>那么怎么解决这个问题呢？</p><ul><li><p>首先，登录<a href="https://console.leancloud.app/apps">LeanCloud</a>，进入自己的应用。然后进入<code> 设置 -&gt; 应用凭证</code>，复制<strong>REST API 服务器地址</strong></p><p><img src="https://s2.loli.net/2022/03/07/jFlm6HG42sVtfwM.png" alt="image-20220307122544336"></p><p><img src="https://s2.loli.net/2022/03/07/owuWH5fLhX9T7nm.png" alt="image-20220307122650723"></p></li><li><p>然后，回到你的博客的主题文件夹中，找到使用valine部分，<a href="https://github.com/blinkfox/hexo-theme-matery">Matery</a>主题的就在<code> layout \ _partial \ valine.ejs</code>中</p><p><img src="https://s2.loli.net/2022/03/07/uaCetFqbYPLDXpf.png" alt="image-20220307123020590"></p></li><li><p>新建<code>Valine</code>实例时，添加<code> serverURLs</code>属性，值为刚刚复制的地址</p><p><img src="https://s2.loli.net/2022/03/07/xJrIPAlsfVc18i5.png" alt="image-20220307123226134"></p></li></ul><p>成功：<a href="https://clz.vercel.app/contact/">contact | 赤蓝紫</a></p><p><img src="https://s2.loli.net/2022/03/07/zlyf1ZWcmFYhNOX.png" alt="image-20220307123328264"></p>]]></content>
      
      
      <categories>
          
          <category> 小技能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode刷题(二)    JavaScript</title>
      <link href="/2022/03/06/leetcode-2/"/>
      <url>/2022/03/06/leetcode-2/</url>
      
        <content type="html"><![CDATA[<h1 id="LeetCode刷题-二-JavaScript"><a href="#LeetCode刷题-二-JavaScript" class="headerlink" title="LeetCode刷题(二)    JavaScript"></a>LeetCode刷题(二)    JavaScript</h1><h2 id="合并两个有序链表"><a href="#合并两个有序链表" class="headerlink" title="合并两个有序链表"></a><a href="https://leetcode-cn.com/problems/merge-two-sorted-lists/description/">合并两个有序链表</a></h2><p>通过递归实现：判断list1和list2那个链表的头结点的值更小，然后递归下去决定下一个添加到结果的节点，当两个链表中有为空时，递归结束。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> mergeTwoLists = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">list1, list2</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (list1 === <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-keyword">return</span> list2<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (list2 === <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-keyword">return</span> list1<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (list1.val &lt; list2.val) &#123;<br>    list1.next = mergeTwoLists(list1.next, list2)<br>    <span class="hljs-keyword">return</span> list1<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    list2.next = mergeTwoLists(list1, list2.next)<br>    <span class="hljs-keyword">return</span> list2<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="删除有序数组中的重复项"><a href="#删除有序数组中的重复项" class="headerlink" title="删除有序数组中的重复项"></a><a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/description/">删除有序数组中的重复项</a></h2><h3 id="1-简单版本"><a href="#1-简单版本" class="headerlink" title="1. 简单版本"></a>1. 简单版本</h3><p>遍历一遍，通过<code> indexOf</code>和<code> lastIndexOf</code>来判断是否有重复项，有的话，则不相等。然后通过<code> splice</code>删除掉重复项，删除后，因为少一位了，此时的索引也需要-1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">nums</span></span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">var</span> removeDuplicates = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">if</span> (nums.indexOf(nums[i]) !== nums.lastIndexOf(nums[i])) &#123;<br>      nums.splice(i, <span class="hljs-number">1</span>)<br>      i--<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> nums.length<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="2-双指针法"><a href="#2-双指针法" class="headerlink" title="2. 双指针法"></a>2. 双指针法</h3><p>定义两个指针fast和slow，起始都为1(因为0时不可能会有重复)，其中fast指针一直在走，而当<code> nums[fast]</code>不等于<code> nums[fast - 1]</code>时，即是不重复项，那么此时就让<code> nums[slow] = nums[fast]</code>，即存下不重复项，<code> slow</code>指针才继续走一步，遍历完后，<code>slow</code>就是删掉重复项后数组的长度。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">nums</span></span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">var</span> removeDuplicates = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> n = nums.length<br>  <span class="hljs-keyword">if</span> (n === <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>  &#125;<br><br>  <span class="hljs-keyword">let</span> fast = <span class="hljs-number">1</span><br>  <span class="hljs-keyword">let</span> slow = <span class="hljs-number">1</span><br><br>  <span class="hljs-keyword">while</span> (fast &lt; n) &#123;<br>    <span class="hljs-keyword">if</span> (nums[fast] !== nums[fast - <span class="hljs-number">1</span>]) &#123;<br>      nums[slow] = nums[fast]<br>      slow++<br>    &#125;<br>    fast++<br>  &#125;<br><br>  <span class="hljs-built_in">console</span>.log(slow)<br><br>  <span class="hljs-keyword">return</span> slow<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="移除元素"><a href="#移除元素" class="headerlink" title="移除元素"></a><a href="https://leetcode-cn.com/problems/remove-element/description/">移除元素</a></h2><h3 id="1-双指针法"><a href="#1-双指针法" class="headerlink" title="1. 双指针法"></a>1. 双指针法</h3><p>和上面的做法一样，</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> removeElement = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, val</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> n = nums.length<br>  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> right = <span class="hljs-number">0</span>; right &lt; n; right++) &#123;<br>    <span class="hljs-keyword">if</span> (nums[right] !== val) &#123;<br>      nums[left] = nums[right]    <span class="hljs-comment">// 不等于要移除的元素，则存起来，等于则不存</span><br>      left++<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> left<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="2-双指针优化"><a href="#2-双指针优化" class="headerlink" title="2. 双指针优化"></a>2. 双指针优化</h3><p>做法和双指针法类似，不同的是，初始时，左指针指向0，右指针指向数组最后一位。</p><p>通过判断left指针指向的元素等不等于val</p><ul><li>等于的话，则把right指针指向的元素赋值给left指针，然后right–，继续判断left指针指向的元素等不等于left</li><li>不等于的话，则left指针前进</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> <span class="hljs-variable">nums</span></span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">val</span></span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">var</span> removeElement = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, val</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>, right = nums.length<br><br>  <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>    <span class="hljs-keyword">if</span> (nums[left] === val) &#123;<br>      nums[left] = nums[right - <span class="hljs-number">1</span>]    <span class="hljs-comment">// 把后面的元素放到前面，避免重复赋值。如1,2,3,4,5要去掉1</span><br>      right--<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      left++<br>    &#125;<br><br>  &#125;<br><br>  <span class="hljs-keyword">return</span> left<br>&#125;;<br></code></pre></td></tr></table></figure><p><b style="color: red">可以避免元素的重复赋值操作</b>：</p><p>假设数组为<code> [1, 2, 3, 4]</code>，要删除的元素为1</p><ul><li>使用普通的双指针法：第一位等于要删的元素，跳过，后面一次赋值<code> nums[0]=2</code>，<code> nums[1]=3</code>，<code> nums[2]=4</code></li><li>使用优化的双指针法：第一轮需要赋值<code> nums[0]=4</code>，后面就不需要在赋值了</li></ul><h2 id="实现-strStr"><a href="#实现-strStr" class="headerlink" title="实现 strStr()"></a><a href="https://leetcode-cn.com/problems/implement-strstr/description/">实现 strStr()</a></h2><h3 id="1-暴力匹配"><a href="#1-暴力匹配" class="headerlink" title="1. 暴力匹配"></a>1. 暴力匹配</h3><p>就是直接嵌套循环，时间复杂度较大。KMP算法比较麻烦，先留个坑(希望之后会补坑)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">haystack</span></span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> <span class="hljs-variable">needle</span></span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">var</span> strStr = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">haystack, needle</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> hLen = haystack.length<br>  <span class="hljs-keyword">let</span> nLen = needle.length<br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i + nLen &lt;= hLen; i++) &#123;<br>    <span class="hljs-keyword">let</span> flag = <span class="hljs-literal">true</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; nLen; j++) &#123;<br>      <span class="hljs-keyword">if</span> (haystack[i + j] !== needle[j]) &#123;<br>        flag = <span class="hljs-literal">false</span><br>        <span class="hljs-keyword">break</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (flag) &#123;<br>      <span class="hljs-keyword">return</span> i<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="搜索插入位置"><a href="#搜索插入位置" class="headerlink" title="搜索插入位置"></a><a href="https://leetcode-cn.com/problems/search-insert-position/description/">搜索插入位置</a></h2><p>有序插入：二分法：就是每次都取在中间的那个值，如果<code>target</code>小于等于中间那个值的话，就是说<code> target</code>在左半边，此时，让right=mid-1，大于则让<code> left=mid+1</code>。最后返回<code> right+1</code>。（这里返回<code> right+1</code>的原因是<code>target</code>小于等于中间那个值都会继续往左移，所以<code>right</code>停的位置会比<code>target</code>小，那么插的位置就是<code> right+1</code>了）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> searchInsert = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, target</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>, right = nums.length - <span class="hljs-number">1</span><br>  <span class="hljs-keyword">let</span> ans = nums.length<br><br>  <span class="hljs-keyword">while</span> (left &lt;= right) &#123;<br>    <span class="hljs-keyword">let</span> mid = right - <span class="hljs-built_in">Number</span>.parseInt((right - left) / <span class="hljs-number">2</span>)<br><br>    <span class="hljs-keyword">if</span> (target &lt;= nums[mid]) &#123;<br>      right = mid - <span class="hljs-number">1</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      left = mid + <span class="hljs-number">1</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> right + <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Express实战(二)    登录验证、身份认证、增删改查</title>
      <link href="/2022/03/06/express-4/"/>
      <url>/2022/03/06/express-4/</url>
      
        <content type="html"><![CDATA[<h1 id="Express实战-二-登录验证、身份认证、增删改查"><a href="#Express实战-二-登录验证、身份认证、增删改查" class="headerlink" title="Express实战(二)    登录验证、身份认证、增删改查"></a>Express实战(二)    登录验证、身份认证、增删改查</h1><p>最终结果：<a href="https://github.com/13535944743/realworld-api-express-practise-">realworld-api-express-practise- </a></p><h2 id="1-数据验证-登录验证"><a href="#1-数据验证-登录验证" class="headerlink" title="1. 数据验证(登录验证)"></a>1. 数据验证(登录验证)</h2><p>validate \ user.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">exports</span>.login = [<br>  validate([body(<span class="hljs-string">&quot;user.email&quot;</span>).notEmpty().withMessage(<span class="hljs-string">&quot;邮箱不能为空&quot;</span>), body(<span class="hljs-string">&quot;user.password&quot;</span>).notEmpty().withMessage(<span class="hljs-string">&quot;密码不能为空&quot;</span>)]),<br>  validate([<br>    <span class="hljs-comment">// 只有上面的验证通过才会执行，利用的是中间件的机制</span><br>    body(<span class="hljs-string">&quot;user.email&quot;</span>).custom(<span class="hljs-keyword">async</span> (email, &#123; req &#125;) =&gt; &#123;<br>      <span class="hljs-comment">// 这里参数的req解构是官网文档用法</span><br>      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> User.findOne(&#123;<br>        email<br>      &#125;).select([<span class="hljs-string">&quot;password&quot;</span>, <span class="hljs-string">&#x27;username&#x27;</span>, <span class="hljs-string">&#x27;email&#x27;</span>, <span class="hljs-string">&#x27;bio&#x27;</span>, <span class="hljs-string">&#x27;image&#x27;</span>])    <span class="hljs-comment">// 这里需要获取密码的话，因为用户密码的模式设计那里设置了select: false，即通过查找不能查到密码，此时需要通过select()实现能查出密码</span><br>      <span class="hljs-keyword">if</span> (!user) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&quot;用户不存在&quot;</span>)<br>      &#125;<br><br>      <span class="hljs-comment">// 将数据挂载到请求对象上，这样子后续的中间件也可以直接使用</span><br>      req.user = user<br>    &#125;)<br>  ]),<br>  validate([<br>    body(<span class="hljs-string">&quot;user.password&quot;</span>).custom(<span class="hljs-keyword">async</span> (password, &#123; req &#125;) =&gt; &#123;<br><br>      <span class="hljs-keyword">if</span> (md5(password) !== req.user.password) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&quot;密码错误&quot;</span>)<br>      &#125;<br><br>      <span class="hljs-built_in">console</span>.log(req.user)<br>    &#125;)<br>  ])<br>]<br></code></pre></td></tr></table></figure><p>user的路由那里也要加上</p><p>router \ user.js</p><p><img src="https://s2.loli.net/2022/03/06/VOkFwbflWv32tqx.png" alt="image-20220212175651983"></p><p><img src="https://s2.loli.net/2022/03/06/Q72rvg8PFGHahKW.png" alt="image-20220212175753306"></p><p><img src="https://s2.loli.net/2022/03/06/QeX7S6bxAN98OCP.png" alt="image-20220212175808931"></p><h2 id="2-基于JWT的身份认证"><a href="#2-基于JWT的身份认证" class="headerlink" title="2. 基于JWT的身份认证"></a>2. 基于JWT的身份认证</h2><p><a href="https://jwt.io/">JSON Web Tokens - jwt.io</a></p><p>JWT原理：服务器认证之后，生成一个JSON对象，类似下面</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-string">&quot;姓名&quot;</span>: <span class="hljs-string">&quot;clz&quot;</span>,<br>    <span class="hljs-string">&quot;角色&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>,<br>    <span class="hljs-string">&quot;到期时间&quot;</span>: <span class="hljs-string">&quot;2022-02-28&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>以后，用户和服务端通信，都要发回这个JSON对象，服务器只靠这个对象确认用户身份。为了防止用户篡改数据，服务器在生成这个对象时，会加上签名。</p><p>实际JWT：</p><p><img src="https://s2.loli.net/2022/03/06/e6YlBAa9SKiLIyP.png" alt="image-20220212181436946"></p><p>JWT的三个部分：</p><ul><li>Header（头部）</li><li>Payload（负载）</li><li>Signature（签名）</li></ul><p>Header.Payload.Signature</p><h3 id="2-1-Header"><a href="#2-1-Header" class="headerlink" title="2.1 Header"></a>2.1 Header</h3><p>Header部分是一个JSON对象，描述JWT的元数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-string">&quot;alg&quot;</span>: <span class="hljs-string">&quot;HS256&quot;</span>,<span class="hljs-comment">// 表示签名的算法，默认是HMAC SHA256</span><br>    <span class="hljs-string">&quot;typ&quot;</span>: <span class="hljs-string">&quot;JWT&quot;</span><span class="hljs-comment">// 表示令牌（token）的类型，ＪＷＴ令牌写为ＪＷＴ</span><br>&#125;<br></code></pre></td></tr></table></figure><p>最后通过<code> Base64URL</code>算法将上面的ＪＳＯＮ对象转成字符串</p><h3 id="2-2-Payload"><a href="#2-2-Payload" class="headerlink" title="2.2 Payload"></a>2.2 Payload</h3><p>Payload也是一个JSON对象，用来存实际需要传的数据。JWT规定了7个官方字段</p><ul><li>iss(issuer)：签发人</li><li>exp(expiration time)：过期时间</li><li>sub(subject)：主题</li><li>aud(audience)：受众</li><li>nbf(Not Before)：生效时间</li><li>iat(Issued At)：签发时间</li><li>jti(JWT ID)：编号</li></ul><p>除了官方字段，还可以定义私有字段</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-string">&quot;sub&quot;</span>: <span class="hljs-string">&quot;134567890&quot;</span>,<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;clz&quot;</span>,<br>    <span class="hljs-string">&quot;admin&quot;</span>: <span class="hljs-literal">true</span><br>&#125;<br></code></pre></td></tr></table></figure><p><b style="color: red">JWT默认是不加密的，所以需要保密的信息不应该放在这部分</b></p><p>最后通过<code> Base64URL</code>算法将上面的JSON对象转成字符串</p><h3 id="2-3-Signature"><a href="#2-3-Signature" class="headerlink" title="2.3 Signature"></a>2.3 Signature</h3><p>Signature是对前两部分的签名，防止数据篡改</p><p>首先，需要指定一个密钥(<b style="color: red">这个密钥只有服务器知道，不能泄露给用户</b>)。然后，使用Header里面指定的签名算法，按以下公式产生签名。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">HMACSHA256(<br>base64UrlEncode(header) + <span class="hljs-string">&quot;.&quot;</span> +<br>base64UrlEncode(payload),<br>secret    <span class="hljs-comment">// 私钥</span><br>)<br></code></pre></td></tr></table></figure><p>得到签名后，将Header、Payload、Signature三个部分拼接成一个字符串，用<code> .</code>分隔，可以返回给用户</p><p><b style="Color: red">在JWT中，消息体是透明的，使用签名可以保证消息不被篡改，但不能实现数据加密功能</b></p><p>将Header和Payload串型化的算法是<code> BaseURL</code>，和<code> Base64</code>算法类似，但有一些不同。</p><p>JWT作为一个令牌(token)，有时候需要放到URL中(如api.example.com/?token=xxx)。</p><ul><li>Base64中的三个字符<code> +</code>, <code> /</code>, <code> =</code> ，在URL中有特殊意义</li><li>Base64URL：<code> =</code>被省略，<code> +</code>替换成<code> -</code>，<code> /</code>替换成<code> _</code></li></ul><h3 id="2-4-JWT的使用方式"><a href="#2-4-JWT的使用方式" class="headerlink" title="2.4 JWT的使用方式"></a>2.4 JWT的使用方式</h3><p>客户端收到服务器返回的JWT，可以存在Cookie里，也可以存在localStorage中。之后，客户端与服务器通信，都要带上这个JWT，可以将JWT放在Cookie里自动发送，不过这样子不能跨域。<b style="color: red">更好的做法是：放在HTTP请求头的<code> Authorization</code>字段里面</b></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Authorization: Bearer &lt;token&gt;<br></code></pre></td></tr></table></figure><h3 id="2-5-使用jsonwebtoken"><a href="#2-5-使用jsonwebtoken" class="headerlink" title="2.5 使用jsonwebtoken"></a>2.5 使用jsonwebtoken</h3><p><a href="https://github.com/auth0/node-jsonwebtoken">jsonwebtoken仓库</a></p><p>了解jsonwebtoken的使用</p><p>先安装，<code> npm install jsonwebtoken</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;jsonwebtoken&#x27;</span>)<br><br><span class="hljs-comment">// 生成jwt：jwt.sign</span><br><span class="hljs-comment">// // 同步方式:</span><br><span class="hljs-comment">// const token = jwt.sign(&#123; foo: &#x27;bar&#x27; &#125;, &#x27;hello&#x27;);</span><br><span class="hljs-comment">// console.log(token)</span><br><br><span class="hljs-comment">// 异步方式：就只是加多一个回调函数</span><br><span class="hljs-keyword">const</span> token = jwt.sign(&#123;<br>  <span class="hljs-attr">foo</span>: <span class="hljs-string">&#x27;bar&#x27;</span><br>&#125;, <span class="hljs-string">&#x27;hello&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, token</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;生成token失败&#x27;</span>)<br>  &#125;<br>  <span class="hljs-built_in">console</span>.log(token)<br>&#125;);<br><br><span class="hljs-comment">// 验证jwt：jwt.verify</span><br><span class="hljs-comment">// 同步方式：</span><br><span class="hljs-comment">// const result = jwt.verify(&#x27;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.\</span><br><span class="hljs-comment">// eyJmb28iOiJiYXIiLCJpYXQiOjE2NDQ2NjY1NDd9.\</span><br><span class="hljs-comment">// 0Vy596XulYTCxeTrBp27U2T4BMh93IPN5l2b0GqxAMY&#x27;, &#x27;hello&#x27;)</span><br><br><span class="hljs-comment">// console.log(result)</span><br><br><span class="hljs-comment">// 异步方式：</span><br>jwt.verify(<span class="hljs-string">&#x27;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.\</span><br><span class="hljs-string">eyJmb28iOiJiYXIiLCJpYXQiOjE2NDQ2NjY1NDd9.\</span><br><span class="hljs-string">0Vy596XulYTCxeTrBp27U2T4BMh93IPN5l2b0GqxAMY&#x27;</span>,<br>  <span class="hljs-string">&#x27;hello&#x27;</span>,<br>  <span class="hljs-function">(<span class="hljs-params">err, ret</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (err) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;验证token失败&#x27;</span>)<br>    &#125;<br>    <span class="hljs-built_in">console</span>.log(ret)<br>  &#125;)<br></code></pre></td></tr></table></figure><h4 id="2-5-1-生成token"><a href="#2-5-1-生成token" class="headerlink" title="2.5.1 生成token"></a>2.5.1 生成token</h4><p>util \ jwt.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;jsonwebtoken&#x27;</span>)<br><span class="hljs-keyword">const</span> &#123; promisify &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;util&#x27;</span>)   <span class="hljs-comment">// 将回调函数转换成Promise形式</span><br><br><br><span class="hljs-built_in">exports</span>.sign = promisify(jwt.sign)<br><br><span class="hljs-built_in">exports</span>.verify = promisify(jwt.verify)<br><br><span class="hljs-built_in">exports</span>.decode = promisify(jwt.decode)  <span class="hljs-comment">// 不验证，直接解析</span><br><br></code></pre></td></tr></table></figure><p>config \ config.default.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-string">&quot;dbURL&quot;</span>: <span class="hljs-string">&quot;mongodb://localhost:27017/realworld&quot;</span>,     <span class="hljs-comment">// MongoDB默认端口17017</span><br>  <span class="hljs-string">&quot;jwtSecret&quot;</span>: <span class="hljs-string">&quot;c06eddf5-78eb-494f-b2c6-4a6d45b56cd5&quot;</span>   <span class="hljs-comment">// uuid随机生成(直接搜索uuid)</span><br>&#125;<br></code></pre></td></tr></table></figure><p>controller userController.js（只改登录部分）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 类前面引入</span><br><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../util/jwt&#x27;</span>)<br><span class="hljs-keyword">const</span> &#123; jwtSecret &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../config/config.default&#x27;</span>)<br><br><span class="hljs-comment">// 用户登录</span><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">login</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">// 1. 数据验证</span><br>    <span class="hljs-comment">// 2. 生成token</span><br>    <span class="hljs-keyword">const</span> user = req.user.toJSON()<br><br>    <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> jwt.sign(&#123;<br>      <span class="hljs-attr">userId</span>: user._id    <span class="hljs-comment">// 生成token不需要全部user信息，只要_id即可</span><br>    &#125;, jwtSecret)<br><br>    <span class="hljs-comment">// 3. 发送成功响应(包含token的用户信息)</span><br>    <span class="hljs-keyword">delete</span> user.password<br>    res.status(<span class="hljs-number">200</span>).json(&#123;<br>      ...user,<br>      token<br>    &#125;)<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    next(err)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/06/7E9rMZ3c8QU42sS.png" alt="image-20220212204150260"></p><h3 id="2-6-中间件统一处理JWT身份认证"><a href="#2-6-中间件统一处理JWT身份认证" class="headerlink" title="2.6 中间件统一处理JWT身份认证"></a>2.6 中间件统一处理JWT身份认证</h3><p>middleware \ authorization.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; verify &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../util/jwt&#x27;</span>)<br><span class="hljs-keyword">const</span> &#123; jwtSecret &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../config/config.default&#x27;</span>)<br><span class="hljs-keyword">const</span> &#123; User &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../model/index&#x27;</span>)<br><br><span class="hljs-built_in">module</span>.exports = <span class="hljs-keyword">async</span> (req, res, next) =&gt; &#123;<br>  <span class="hljs-comment">// 1. 从请求头获取token</span><br>  <span class="hljs-keyword">let</span> token = req.headers[<span class="hljs-string">&#x27;authorization&#x27;</span>]<br><br>  token = token ? token.split(<span class="hljs-string">&#x27;Bearer &#x27;</span>)[<span class="hljs-number">1</span>] : <span class="hljs-literal">null</span><br><br>  <span class="hljs-keyword">if</span> (!token) &#123;<br>    <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">401</span>).end(<span class="hljs-string">&#x27;请求头无token或token格式不对&#x27;</span>)<br>  &#125;<br><br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">// 2. 验证token是否有效</span><br>    <span class="hljs-comment">//    无效 ==&gt; 响应401状态码</span><br>    <span class="hljs-comment">//    有效 ==&gt; 把用户信息读取出来，并挂载到req请求对象中，继续往后执行</span><br>    <span class="hljs-keyword">const</span> decodedToken = <span class="hljs-keyword">await</span> verify(token, jwtSecret)<br>    req.user = <span class="hljs-keyword">await</span> User.findById(decodedToken.userId)<br><br>    next()<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">401</span>).end(<span class="hljs-string">&#x27;token无效&#x27;</span>)<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/06/QsY2dEJHM48ISLB.png" alt="image-20220213193413017"></p><p><img src="https://s2.loli.net/2022/03/06/bqK4VkZ9XQsWIyH.png" alt="image-20220213193952500"></p><h3 id="2-7-JWT过期时间"><a href="#2-7-JWT过期时间" class="headerlink" title="2.7 JWT过期时间"></a>2.7 JWT过期时间</h3><p><img src="https://s2.loli.net/2022/03/06/6lFVXrutyLmdkOo.png" alt="image-20220213194228528"></p><p>设置为15秒，体验下过期</p><p><img src="https://s2.loli.net/2022/03/06/XBpAb8rQvGM9qDS.gif" alt="jwt"></p><h3 id="2-8-Postman自动添加token"><a href="#2-8-Postman自动添加token" class="headerlink" title="2.8 Postman自动添加token"></a>2.8 Postman自动添加token</h3><p><img src="https://s2.loli.net/2022/03/06/ES316tO8CoMA9BY.png" alt="image-20220213195824827"></p><p><img src="https://s2.loli.net/2022/03/06/2c8tgln6ekvhGYq.png" alt="image-20220213200015365"></p><h2 id="3-新增文章"><a href="#3-新增文章" class="headerlink" title="3. 新增文章"></a>3. 新增文章</h2><p><strong>和注册类似</strong></p><h3 id="3-1-数据验证"><a href="#3-1-数据验证" class="headerlink" title="3.1 数据验证"></a>3.1 数据验证</h3><p>validate \ article.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> validate = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;../middleware/validate&quot;</span>)<br><span class="hljs-keyword">const</span> &#123; body &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;express-validator&quot;</span>)<br><br><br><span class="hljs-built_in">exports</span>.createArticle = validate([<br>  body(<span class="hljs-string">&#x27;article.title&#x27;</span>).notEmpty().withMessage(<span class="hljs-string">&#x27;文章标题不能为空&#x27;</span>),<br>  body(<span class="hljs-string">&#x27;article.description&#x27;</span>).notEmpty().withMessage(<span class="hljs-string">&#x27;文章摘要不能为空&#x27;</span>),<br>  body(<span class="hljs-string">&#x27;article.body&#x27;</span>).notEmpty().withMessage(<span class="hljs-string">&#x27;文章内容不能为空&#x27;</span>)<br>])<br><br></code></pre></td></tr></table></figure><h3 id="3-2-文章模型"><a href="#3-2-文章模型" class="headerlink" title="3.2 文章模型"></a>3.2 文章模型</h3><p>model \ article.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>)<br><br><span class="hljs-keyword">const</span> baseModel = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./base-model&#x27;</span>)<br><br><span class="hljs-keyword">const</span> Schema = mongoose.Schema<br><br><span class="hljs-comment">// 创建文章模型</span><br><span class="hljs-keyword">const</span> articleSchema = mongoose.Schema(&#123;<br>  ...baseModel,<br>  <span class="hljs-attr">title</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,<br>    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span><br>  &#125;,<br>  <span class="hljs-attr">description</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,<br>    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span><br>  &#125;,<br>  <span class="hljs-attr">body</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,<br>    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span><br>  &#125;,<br>  <span class="hljs-attr">tagList</span>: &#123;<br>    <span class="hljs-attr">type</span>: [<span class="hljs-built_in">String</span>],<br>    <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span><br>  &#125;,<br>  <span class="hljs-attr">favoritesCount</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-built_in">Number</span>,<br>    <span class="hljs-attr">default</span>: <span class="hljs-number">0</span><br>  &#125;,<br>  <span class="hljs-attr">author</span>: &#123;<br>    <span class="hljs-attr">type</span>: Schema.Types.ObjectId,<br>    <span class="hljs-attr">ref</span>: <span class="hljs-string">&#x27;User&#x27;</span>,   <span class="hljs-comment">// 存用户id，之后映射到用户模型去</span><br>    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span><br>  &#125;<br>&#125;)<br><br><span class="hljs-built_in">module</span>.exports = articleSchema<br></code></pre></td></tr></table></figure><p><b style="Color: red">ref中的值需要时，model \ index.js中导出的模型类中启用的名字</b></p><p><img src="https://s2.loli.net/2022/03/06/LgHpIeY5b8FUqdj.png" alt="image-20220214134231860"></p><h3 id="3-3-文章相关路由"><a href="#3-3-文章相关路由" class="headerlink" title="3.3 文章相关路由"></a>3.3 文章相关路由</h3><p><b style="color: red">新增文章部分加上了JWT身份认证和数据验证</b></p><p>router \ article.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>)<br><br><span class="hljs-keyword">const</span> articleController = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../controller/articleController&#x27;</span>)<br><span class="hljs-keyword">const</span> authorization = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../middleware/authorization&#x27;</span>)<br><span class="hljs-keyword">const</span> articleValidate = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../validate/article&#x27;</span>)<br><br><span class="hljs-keyword">const</span> router = express.Router()<br><br><span class="hljs-comment">// 获取所有文章(可增加条件筛选)</span><br>router.get(<span class="hljs-string">&#x27;/&#x27;</span>, articleController.listArticles)<br><br><span class="hljs-comment">// 获取关注用户的所有文章(可增加条件筛选)</span><br>router.get(<span class="hljs-string">&#x27;/feed&#x27;</span>, articleController.feedArticles)<br><br><span class="hljs-comment">// 获取单篇文章</span><br>router.get(<span class="hljs-string">&#x27;/:slug&#x27;</span>, articleController.getArticle)   <span class="hljs-comment">// slug类似id，用于确定特定文章</span><br><br><span class="hljs-comment">// 新增文章</span><br>router.post(<span class="hljs-string">&#x27;/&#x27;</span>, authorization, articleValidate.createArticle, articleController.createArticle)<br><br><span class="hljs-comment">// 更新文章</span><br>router.put(<span class="hljs-string">&#x27;/:slug&#x27;</span>, articleController.updateArticle)<br><br><span class="hljs-comment">// 删除文章</span><br>router.delete(<span class="hljs-string">&#x27;/:slug&#x27;</span>, articleController.deleteArticle)<br><br><span class="hljs-comment">// 增加一篇文章的评论</span><br>router.post(<span class="hljs-string">&#x27;/:slug/comments&#x27;</span>, articleController.addComments)<br><br><span class="hljs-comment">// 获取一篇文章的所有评论</span><br>router.get(<span class="hljs-string">&#x27;/:slug/comments&#x27;</span>, articleController.getComments)<br><br><span class="hljs-comment">// 删除文章的一条评论</span><br>router.delete(<span class="hljs-string">&#x27;/:slug/comments/:id&#x27;</span>, articleController.deleteComment)<br><br><span class="hljs-comment">// 喜欢一篇文章</span><br>router.post(<span class="hljs-string">&#x27;/:slug/favorite&#x27;</span>, articleController.likeArticle)<br><br><span class="hljs-comment">// 取消喜欢一篇文章</span><br>router.delete(<span class="hljs-string">&#x27;/:slug/favorite&#x27;</span>, articleController.unlikeArticle)<br><br><span class="hljs-built_in">module</span>.exports = router<br></code></pre></td></tr></table></figure><h3 id="3-4-处理请求"><a href="#3-4-处理请求" class="headerlink" title="3.4 处理请求"></a>3.4 处理请求</h3><p>controller \  articleController.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; Article &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../model/index&#x27;</span>)<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">articleController</span> </span>&#123;<br><br>  <span class="hljs-comment">// 获取所有文章(可增加条件筛选)</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">listArticles</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;获取所有文章&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 获取关注用户的所有文章(可增加条件筛选)</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">feedArticles</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;获取关注用户的所有文章&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 获取单篇文章</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">getArticle</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;获取单篇文章&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 新增文章</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">createArticle</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">const</span> article = <span class="hljs-keyword">new</span> Article(req.body.article)<br><br>      article.author = req.user._id     <span class="hljs-comment">// 作者在数据库中只存一个用户id，通过id去获取用户</span><br>      article.populate(<span class="hljs-string">&#x27;author&#x27;</span>)        <span class="hljs-comment">// 简单来说，就是通过populate()以及文章模型中的ref: &#x27;User&#x27;，可以通过id把用户信息放到author中</span><br><br>      <span class="hljs-comment">// article.populate(&#x27;author&#x27;).execPopulate()     </span><br><br>      <span class="hljs-keyword">await</span> article.save()<br>      res.status(<span class="hljs-number">201</span>).json(&#123;<br>        article<br>      &#125;)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 更新文章</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">updateArticle</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;更新文章&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 删除文章</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">deleteArticle</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;删除文章&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 增加一篇文章的评论</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">addComments</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;增加一篇文章的评论&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 获取一篇文章的所有评论</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">getComments</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;获取一篇文章的评论&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 删除文章的一条评论</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">deleteComment</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;删除文章的一条评论&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 喜欢一篇文章</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">likeArticle</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;喜欢一篇文章&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 取消喜欢一篇文章</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">unlikeArticle</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;取消喜欢一篇文章&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>&#125;<br><br><span class="hljs-built_in">module</span>.exports = <span class="hljs-keyword">new</span> articleController()<br></code></pre></td></tr></table></figure><p><b style="Color: red">疑点：老师说查询时不需要execPopulate()，new出来时需要，相当于执行一次查询。但是个人试验时发现都不需要execPopulate()，加上反而会出错</b>，类似<code> &quot;article.populate(...).execPopulate is not a function&quot;</code></p><p>可能是时代变了，现在new出来的时候，也执行了</p><p><img src="https://s2.loli.net/2022/03/06/ekR29q7nSZfCylB.png" alt="image-20220214134928849"></p><h2 id="4-查询文章"><a href="#4-查询文章" class="headerlink" title="4. 查询文章"></a>4. 查询文章</h2><h3 id="4-1-数据验证"><a href="#4-1-数据验证" class="headerlink" title="4.1 数据验证"></a>4.1 数据验证</h3><p>model \ article.js（部分）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">exports</span>.getArticle = validate([<br>  param(<span class="hljs-string">&#x27;slug&#x27;</span>).custom(<span class="hljs-keyword">async</span> value =&gt; &#123;<br>    <span class="hljs-keyword">if</span> (!mongoose.isValidObjectId(value)) &#123;<br><br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;文章ID类型错误&#x27;</span>)<br>    &#125;<br><br>  &#125;)<br>])<br></code></pre></td></tr></table></figure><h3 id="4-2-路由"><a href="#4-2-路由" class="headerlink" title="4.2 路由"></a>4.2 路由</h3><p>router \ article.js（部分）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 获取单篇文章</span><br>router.get(<span class="hljs-string">&#x27;/:slug&#x27;</span>, articleValidate.getArticle, articleController.getArticle)   <span class="hljs-comment">// slug类似id，用于确定特定文章</span><br></code></pre></td></tr></table></figure><h3 id="4-3-处理请求"><a href="#4-3-处理请求" class="headerlink" title="4.3 处理请求"></a>4.3 处理请求</h3><p>controller \ articleController.js（部分）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 获取单篇文章</span><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">getArticle</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> article = <span class="hljs-keyword">await</span> Article.findById(req.params.slug).populate(<span class="hljs-string">&#x27;author&#x27;</span>)<br><br>    <span class="hljs-keyword">if</span> (!article) &#123;<br>      <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).end()<br>    &#125;<br><br>    res.status(<span class="hljs-number">200</span>).json(<br>      article<br>    )<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    next(err)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-获取所有文章"><a href="#5-获取所有文章" class="headerlink" title="5. 获取所有文章"></a>5. 获取所有文章</h2><p>controller \ articleController.js（部分）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 获取所有文章(可增加条件筛选)</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">listArticles</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">const</span> &#123;<br>        offset = <span class="hljs-number">0</span>,<span class="hljs-comment">// offset默认为0</span><br>        limit = <span class="hljs-number">20</span>,<br>        tag,<br>        author<br>      &#125; = req.query<br><br>      <span class="hljs-keyword">const</span> filter = &#123;&#125;   <span class="hljs-comment">// 用于筛选</span><br><br>      <span class="hljs-keyword">if</span> (tag) &#123;<br>        filter.tagList = tag<br>      &#125;<br><br>      <span class="hljs-keyword">if</span> (author) &#123;<br>        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> User.findOne(&#123; <span class="hljs-attr">username</span>: author &#125;)<br>        filter.author = user ? user._id : <span class="hljs-literal">null</span>  <span class="hljs-comment">// 如果有这个作者，则获取作者的id用于筛选。没有则为null</span><br>      &#125;<br><br>      <span class="hljs-keyword">const</span> articlesCount = <span class="hljs-keyword">await</span> Article.countDocuments()<br><br>      <span class="hljs-keyword">const</span> articles = <span class="hljs-keyword">await</span> Article.find(filter)   <span class="hljs-comment">// 筛选出有这个标签的文章</span><br>        .skip(<span class="hljs-built_in">Number</span>.parseInt(offset))       <span class="hljs-comment">// 跳过多少条</span><br>        .limit(<span class="hljs-built_in">Number</span>.parseInt(limit))      <span class="hljs-comment">// 取多少条</span><br>        .sort(&#123;       <span class="hljs-comment">// 排序， -1代表倒叙，1代表正序</span><br>          <span class="hljs-attr">createdAt</span>: -<span class="hljs-number">1</span><br>        &#125;)<br><br>      res.status(<span class="hljs-number">200</span>).json(&#123;<br>        articles,<br>        articlesCount<br>      &#125;)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><h2 id="6-更新文章"><a href="#6-更新文章" class="headerlink" title="6. 更新文章"></a>6. 更新文章</h2><h3 id="6-1-封装验证ID是否有效"><a href="#6-1-封装验证ID是否有效" class="headerlink" title="6.1 封装验证ID是否有效"></a>6.1 封装验证ID是否有效</h3><p>修改validate中间件</p><p>middle \ validate.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; validationResult, buildCheckFunction &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;express-validator&quot;</span>)<br><span class="hljs-keyword">const</span> &#123; isValidObjectId &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>)<br><br><span class="hljs-built_in">exports</span> = <span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">validations</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> (req, res, next) =&gt; &#123;<br>    <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all(validations.map(<span class="hljs-function"><span class="hljs-params">validation</span> =&gt;</span> validation.run(req)))<br><br>    <span class="hljs-keyword">const</span> errors = validationResult(req)<br>    <span class="hljs-keyword">if</span> (errors.isEmpty()) &#123;<br>      <span class="hljs-keyword">return</span> next()<br>    &#125;<br><br>    res.status(<span class="hljs-number">400</span>).json(&#123; <span class="hljs-attr">errors</span>: errors.array() &#125;)<br>  &#125;<br>&#125;<br><br><span class="hljs-built_in">exports</span>.isValidObjectId = <span class="hljs-function">(<span class="hljs-params">location, fields</span>) =&gt;</span> &#123;   <span class="hljs-comment">// 第一个参数是验证的数据的位置，第二个参数是验证数据字段</span><br>  <span class="hljs-keyword">return</span> buildCheckFunction(location)(fields).custom(<span class="hljs-keyword">async</span> value =&gt; &#123;<br>    <span class="hljs-keyword">if</span> (!isValidObjectId(value)) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;ID不是有效的ObjectID&#x27;</span>)<br>    &#125;<br>  &#125;)<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="6-2-修改article的验证以及添加更新文章的验证"><a href="#6-2-修改article的验证以及添加更新文章的验证" class="headerlink" title="6.2 修改article的验证以及添加更新文章的验证"></a>6.2 修改article的验证以及添加更新文章的验证</h3><p>validate \ article.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> validate = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;../middleware/validate&quot;</span>)<br><span class="hljs-keyword">const</span> &#123; body, param &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;express-validator&quot;</span>)<br><span class="hljs-keyword">const</span> &#123; Article &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../model&#x27;</span>)<br><br><span class="hljs-built_in">exports</span>.createArticle = validate([<br>  body(<span class="hljs-string">&#x27;article.title&#x27;</span>).notEmpty().withMessage(<span class="hljs-string">&#x27;文章标题不能为空&#x27;</span>),<br>  body(<span class="hljs-string">&#x27;article.description&#x27;</span>).notEmpty().withMessage(<span class="hljs-string">&#x27;文章摘要不能为空&#x27;</span>),<br>  body(<span class="hljs-string">&#x27;article.body&#x27;</span>).notEmpty().withMessage(<span class="hljs-string">&#x27;文章内容不能为空&#x27;</span>)<br>])<br><br><br><span class="hljs-built_in">exports</span>.getArticle = validate([<br>  validate.isValidObjectId([<span class="hljs-string">&#x27;params&#x27;</span>], <span class="hljs-string">&#x27;slug&#x27;</span>)    <span class="hljs-comment">// 第一个参数是验证的数据的位置，第二个参数是验证数据字段</span><br><br>  <span class="hljs-comment">// param(&#x27;slug&#x27;).custom(async value =&gt; &#123;</span><br>  <span class="hljs-comment">//   if (!mongoose.isValidObjectId(value)) &#123;</span><br><br>  <span class="hljs-comment">//     return Promise.reject(&#x27;文章ID类型错误&#x27;)</span><br>  <span class="hljs-comment">//   &#125;</span><br><br>  <span class="hljs-comment">// &#125;)</span><br>])<br><br><span class="hljs-built_in">exports</span>.updateArticle = [<br>  validate([<br>    validate.isValidObjectId([<span class="hljs-string">&#x27;params&#x27;</span>], <span class="hljs-string">&#x27;slug&#x27;</span>)    <span class="hljs-comment">// 第一个参数是验证的数据的位置，第二个参数是验证数据字段</span><br>  ]),<br>  <span class="hljs-keyword">async</span> (req, res, next) =&gt; &#123;<br>    <span class="hljs-comment">// 校验文章是否存在</span><br>    <span class="hljs-keyword">const</span> articleId = req.params.slug<br>    <span class="hljs-keyword">const</span> article = <span class="hljs-keyword">await</span> Article.findById(articleId)<br>    req.article = article     <span class="hljs-comment">// 把article挂载到req上</span><br><br>    <span class="hljs-keyword">if</span> (!article) &#123;   <span class="hljs-comment">// 要修改的文章不存在</span><br>      <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).end()<br>    &#125;<br>    next()    <span class="hljs-comment">// 文章存在，下一个中间件处理</span><br>  &#125;,<br>  <span class="hljs-keyword">async</span> (req, res, next) =&gt; &#123;<br>    <span class="hljs-comment">// 判断文章作者是否是登录用户(禁止修改别人的文章)</span><br><br>    <span class="hljs-keyword">if</span> (req.user._id.toString() !== req.article.author.toString()) &#123;    <span class="hljs-comment">// ObjectId是一个对象，不能直接比较</span><br>      <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">403</span>).end()<br>    &#125;<br>    next()<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><h3 id="6-3-增加article的路由——更新文章"><a href="#6-3-增加article的路由——更新文章" class="headerlink" title="6.3 增加article的路由——更新文章"></a>6.3 增加article的路由——更新文章</h3><p>route \ article.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 更新文章</span><br>router.put(<span class="hljs-string">&#x27;/:slug&#x27;</span>, authorization, articleValidate.updateArticle, articleController.updateArticle)<br></code></pre></td></tr></table></figure><h3 id="6-4-处理请求（更新文章）"><a href="#6-4-处理请求（更新文章）" class="headerlink" title="6.4 处理请求（更新文章）"></a>6.4 处理请求（更新文章）</h3><p>controller \  articleController.js（部分）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 更新文章</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">updateArticle</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">const</span> article = req.article<br>      <span class="hljs-keyword">const</span> bodyArticle = req.body.article<br><br>      article.title = bodyArticle.title || article.title  <span class="hljs-comment">// 有修改的则用修改的，否则用原来的</span><br>      article.description = bodyArticle.description || article.description<br>      article.body = bodyArticle.body || article.body<br><br>      <span class="hljs-keyword">await</span> article.save()<br>      res.status(<span class="hljs-number">200</span>).json(&#123;<br>        article<br>      &#125;)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><h2 id="7-删除文章"><a href="#7-删除文章" class="headerlink" title="7. 删除文章"></a>7. 删除文章</h2><h3 id="7-1-数据验证"><a href="#7-1-数据验证" class="headerlink" title="7.1 数据验证"></a>7.1 数据验证</h3><p>middle \ validate.js（部分）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">exports</span>.deleteArticle = <span class="hljs-built_in">exports</span>.updateArticle<br></code></pre></td></tr></table></figure><h3 id="7-2-路由"><a href="#7-2-路由" class="headerlink" title="7.2 路由"></a>7.2 路由</h3><p>route \ article.js（部分）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 删除文章</span><br>router.delete(<span class="hljs-string">&#x27;/:slug&#x27;</span>, authorization, articleValidate.deleteArticle, articleController.deleteArticle)<br></code></pre></td></tr></table></figure><h3 id="7-3-处理请求"><a href="#7-3-处理请求" class="headerlink" title="7.3 处理请求"></a>7.3 处理请求</h3><p>controller \ articleController.js（部分）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 删除文章</span><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">deleteArticle</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> article = req.article<br>    <span class="hljs-keyword">await</span> article.remove()<br>    res.status(<span class="hljs-number">204</span>).end()<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    next(err)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Express </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Express实战(一)	项目结构搭建及验证、加密</title>
      <link href="/2022/03/06/express-3/"/>
      <url>/2022/03/06/express-3/</url>
      
        <content type="html"><![CDATA[<h1 id="Express实战-一-项目结构搭建及验证、加密"><a href="#Express实战-一-项目结构搭建及验证、加密" class="headerlink" title="Express实战(一)            项目结构搭建及验证、加密"></a>Express实战(一)            项目结构搭建及验证、加密</h1><p>开源项目：</p><ul><li><p><a href="https://github.com/gothinkster/realworld">github仓库</a></p></li><li><p><a href="https://realworld-docs.netlify.app/docs/specs/backend-specs/endpoints">接口文档</a></p></li></ul><br><p><a href="https://clz.vercel.app/2022/02/28/RESTful/">RESTful接口设计规范</a></p><p>最终结果：<a href="https://github.com/13535944743/realworld-api-express-practise-">realworld-api-express-practise- </a></p><h2 id="1-创建项目"><a href="#1-创建项目" class="headerlink" title="1. 创建项目"></a>1. 创建项目</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir realworld-api-express<br>cd realworld-api-express<br>npm init -y<br>npm install express<br></code></pre></td></tr></table></figure><p>目录结构：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">.<br>├── node_modules npm安装的第三方包目录，使用 npm 装包会自动创建<br>├── config# 配置文件<br>|├── config.default.js<br>├── controller# 解析用户的输入，处理后返回相应的结果<br>├── model# 数据持久层<br>├── middleware# 中间件<br>├── router# 配置URL路由<br>├── util# 工具模块<br>├── app.js 服务端程序入口文件，执行该文件会启动我们的 Web 服务器<br>├── package.json 项目包说明文件，存储第三方包依赖等信息<br>└── package-lock.json npm的包锁定文件，用来锁定第三方包的版本和提高npm下载速度<br></code></pre></td></tr></table></figure><h2 id="3-配置常用中间件"><a href="#3-配置常用中间件" class="headerlink" title="3. 配置常用中间件"></a>3. 配置常用中间件</h2><ul><li><strong>解析请求体</strong><ul><li>express.json()</li><li>express.urlencoded()</li></ul></li><li><strong>日志输出</strong><ul><li>morgan()</li></ul></li><li><strong>提供跨域资源请求</strong><ul><li>cors()</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>)<br><span class="hljs-keyword">const</span> morgan = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;morgan&#x27;</span>)<br><span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;cors&#x27;</span>);<br><br><span class="hljs-keyword">const</span> app = express()<br><br><span class="hljs-comment">// 日志输出</span><br>app.use(morgan(<span class="hljs-string">&#x27;dev&#x27;</span>))<br><br><span class="hljs-comment">// 解析请求体的中间件</span><br>app.use(express.json())<br>app.use(express.urlencoded())<br><br><span class="hljs-comment">// 提供跨域资源请求</span><br>app.use(cors())<br><br><br><span class="hljs-keyword">const</span> PORT = process.env.PORT || <span class="hljs-number">3000</span>  <span class="hljs-comment">// process.env.PORT读取当前目录下环境变量port的值，若没有则默认端口为3000</span><br><br>app.post(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(req.body)<br>&#125;)<br><br>app.listen(PORT, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Server is running at http://localhost:<span class="hljs-subst">$&#123;PORT&#125;</span>`</span>)<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/06/1LCVTXJmcyZiSKA.png" alt="image-20220211002712124"></p><h2 id="4-路由设计"><a href="#4-路由设计" class="headerlink" title="4. 路由设计"></a>4. 路由设计</h2><p><a href="https://realworld-docs.netlify.app/docs/specs/backend-specs/endpoints">接口文档</a></p><p>用户相关路由(user.js)：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>)<br><br><span class="hljs-keyword">const</span> router = express.Router()<br><br><span class="hljs-comment">// 用户登录</span><br>router.post(<span class="hljs-string">&#x27;/users/login&#x27;</span>, <span class="hljs-keyword">async</span> (req, res, next) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    res.send(<span class="hljs-string">&#x27;用户登录&#x27;</span>)<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    next(err)<br>  &#125;<br>&#125;)<br><br><span class="hljs-comment">// 用户注册</span><br>router.post(<span class="hljs-string">&#x27;/users&#x27;</span>, <span class="hljs-keyword">async</span> (req, res, next) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    res.send(<span class="hljs-string">&#x27;用户注册&#x27;</span>)<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    next(err)<br>  &#125;<br>&#125;)<br><br><span class="hljs-comment">// 获取当前用户</span><br>router.get(<span class="hljs-string">&#x27;/user&#x27;</span>, <span class="hljs-keyword">async</span> (req, res, next) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    res.send(<span class="hljs-string">&#x27;获取当前用户&#x27;</span>)<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    next(err)<br>  &#125;<br>&#125;)<br><br><span class="hljs-comment">// 更新用户</span><br>router.put(<span class="hljs-string">&#x27;/user&#x27;</span>, <span class="hljs-keyword">async</span> (req, res, next) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    res.send(<span class="hljs-string">&#x27;更新用户&#x27;</span>)<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    next(err)<br>  &#125;<br>&#125;)<br><br><span class="hljs-built_in">module</span>.exports = router<br></code></pre></td></tr></table></figure><p>index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>)<br><br><span class="hljs-keyword">const</span> router = express.Router()<br><br><span class="hljs-comment">// 用户相关路由</span><br>router.use(<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./user&#x27;</span>))<br><br><span class="hljs-comment">// 用户资料相关路由</span><br>router.use(<span class="hljs-string">&#x27;/profiles&#x27;</span>, <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./profile&#x27;</span>))<br><br><br><span class="hljs-built_in">module</span>.exports = router<br></code></pre></td></tr></table></figure><p>app.js挂载路由级别中间件</p><p><img src="https://s2.loli.net/2022/03/06/GjxSF28w5asHzKA.png" alt="image-20220211125351747"></p><p>其他路由做法类似</p><h2 id="5-提取控制器模块"><a href="#5-提取控制器模块" class="headerlink" title="5. 提取控制器模块"></a>5. 提取控制器模块</h2><p>简单来说，就是把路由处理的回调函数单独抽出来，放到另一个地方，方便维护等操作。</p><p>示例(userController)：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 用户登录</span><br><span class="hljs-built_in">exports</span>.login = <span class="hljs-keyword">async</span> (req, res, next) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    res.send(<span class="hljs-string">&#x27;用户登录&#x27;</span>)<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    next(err)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/06/n9uJZeIOog8tMlU.png" alt="image-20220211185051313"></p><p>再优化一下(将控制器封装成类)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">userController</span> </span>&#123;<br><br>  <span class="hljs-comment">// 用户登录</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">login</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;用户登录&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 用户注册</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">register</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;用户注册&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 获取当前用户</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">getCurrentUser</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;获取当前用户&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 更新用户</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">updateUser</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      res.send(<span class="hljs-string">&#x27;更新用户&#x27;</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      next(err)<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-built_in">module</span>.exports = <span class="hljs-keyword">new</span> userController()<br></code></pre></td></tr></table></figure><h2 id="6-配置错误处理中间件"><a href="#6-配置错误处理中间件" class="headerlink" title="6. 配置错误处理中间件"></a>6. 配置错误处理中间件</h2><p>error-handler</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">err, req, res, next</span>) =&gt;</span> &#123;   <span class="hljs-comment">// 错误处理中间件必须要四个参数</span><br>    res.status(<span class="hljs-number">500</span>).json(&#123;<br>      <span class="hljs-attr">error</span>: err.message<br>    &#125;)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/06/lckJVbijDN7ShK8.png" alt="image-20220211210724530"></p><p><b style="color: red">错误处理中间件应该在最后才挂载</b></p><p>测试：<img src="https://s2.loli.net/2022/03/06/UwrY8Ha2xVnSPBX.png" alt="image-20220211210925234"></p><p>​        <img src="https://s2.loli.net/2022/03/06/fV9Y3abCJ1WjneS.png" alt="image-20220211210949033"></p><h2 id="7-统一管理测试接口-postman"><a href="#7-统一管理测试接口-postman" class="headerlink" title="7. 统一管理测试接口(postman)"></a>7. 统一管理测试接口(postman)</h2><p><img src="https://s2.loli.net/2022/03/06/Ewk4XzUAx3MFjyS.png" alt="image-20220211212812413"></p><p>选择对应环境(Development或Production)，没有则点击No Environment，然后点击小眼睛，添加环境</p><p>设置基础路径(选择环境后，点击小眼睛进行编辑，如下图所示)</p><p><img src="https://s2.loli.net/2022/03/06/zwvo7CjGmUr2euN.png" alt="image-20220211213132330"></p><p><img src="https://s2.loli.net/2022/03/06/23lmkYXwPHbdRr5.png" alt="image-20220211213615327"></p><h2 id="8-使用mongodb数据库"><a href="#8-使用mongodb数据库" class="headerlink" title="8. 使用mongodb数据库"></a>8. 使用mongodb数据库</h2><h3 id="8-1-安装mongodb"><a href="#8-1-安装mongodb" class="headerlink" title="8.1 安装mongodb"></a>8.1 安装mongodb</h3><p><a href="https://www.mongodb.com/try/download/community">MongoDB Community Download | MongoDB</a></p><p>先打开MongoDB Compass</p><p><img src="https://s2.loli.net/2022/03/06/zwLaTcpu3FEs6RD.png" alt="image-20220212132611027"></p><h3 id="8-2-连接Mongodb数据库"><a href="#8-2-连接Mongodb数据库" class="headerlink" title="8.2 连接Mongodb数据库"></a>8.2 连接Mongodb数据库</h3><p>首先，需要安装Mongoose，<code> npm install mongoose</code></p><p><a href="http://www.mongoosejs.net/docs/">Mongoose 5.0 中文文档</a></p><p>model \ index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>);<br><br><span class="hljs-keyword">const</span> &#123; dbURL &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../config/config.default&#x27;</span>)<br><br><span class="hljs-comment">// 连接MongoDB数据库</span><br>mongoose.connect(dbURL);<br><br><span class="hljs-keyword">var</span> db = mongoose.connection;<br><br><span class="hljs-comment">// 数据库连接失败</span><br>db.on(<span class="hljs-string">&#x27;error&#x27;</span>, <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;MongoDB 数据库连接失败&#x27;</span>, err)<br>&#125;);<br><br><span class="hljs-comment">// 数据库连接成功</span><br>db.once(<span class="hljs-string">&#x27;open&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;MongoDB 数据库连接成功&#x27;</span>)<br>&#125;);<br></code></pre></td></tr></table></figure><p>数据库地址在配置中(便于上线等操作时直接更换地址)</p><p>config \ config.default.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-string">&quot;dbURL&quot;</span>: <span class="hljs-string">&quot;mongodb://localhost:27017/realworld&quot;</span>   <span class="hljs-comment">// MongoDB默认端口17017</span><br>&#125;<br></code></pre></td></tr></table></figure><p>运行(<code> nodemon app.js</code>)</p><p><img src="https://s2.loli.net/2022/03/06/mr56Ij931dMCGvQ.png" alt="image-20220212133236905"></p><h3 id="8-3-增加数据模块-以user为例"><a href="#8-3-增加数据模块-以user为例" class="headerlink" title="8.3 增加数据模块(以user为例)"></a>8.3 增加数据模块(以user为例)</h3><p>根据接口文档，确定属性</p><p><a href="https://realworld-docs.netlify.app/docs/specs/backend-specs/endpoints">接口文档</a></p><p><img src="https://s2.loli.net/2022/03/06/1U2MkDzV4AmBZHb.png" alt="image-20220212133538143"></p><p>model \ base-model.js（<strong>存放共有的属性</strong>，如创建时间，更新时间等）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">createdAt</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-built_in">Date</span>,<br>    <span class="hljs-attr">default</span>: <span class="hljs-built_in">Date</span>.now<br>  &#125;,<br>  <span class="hljs-attr">updatedAt</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-built_in">Date</span>,<br>    <span class="hljs-attr">default</span>: <span class="hljs-built_in">Date</span>.now<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>model \ user.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>)<br><br><span class="hljs-keyword">const</span> baseModel = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./base-model&#x27;</span>)<br><br><span class="hljs-comment">// 创建用户模型</span><br><span class="hljs-keyword">const</span> userSchema = mongoose.Schema(&#123;<br>  ...baseModel,<br>  <span class="hljs-attr">username</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,<br>    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span><br>  &#125;,<br>  <span class="hljs-attr">email</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,<br>    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span><br>  &#125;,<br>  <span class="hljs-attr">password</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,<br>    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span><br>  &#125;,<br>  <span class="hljs-attr">bio</span>: &#123;    <span class="hljs-comment">// 简介</span><br>    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,<br>    <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span><br>  &#125;,<br>  <span class="hljs-attr">image</span>: &#123;    <span class="hljs-comment">// 头像</span><br>    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,<br>    <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span><br>  &#125;<br>&#125;)<br><br><span class="hljs-built_in">module</span>.exports = userSchema<br></code></pre></td></tr></table></figure><p>module \ index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>);<br><br><span class="hljs-keyword">const</span> &#123; dbURL &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../config/config.default&#x27;</span>)<br><br><span class="hljs-comment">// 连接MongoDB数据库</span><br>mongoose.connect(dbURL);<br><br><span class="hljs-keyword">var</span> db = mongoose.connection;<br><br><span class="hljs-comment">// 数据库连接失败</span><br>db.on(<span class="hljs-string">&#x27;error&#x27;</span>, <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;MongoDB 数据库连接失败&#x27;</span>, err)<br>&#125;);<br><br><span class="hljs-comment">// 数据库连接成功</span><br>db.once(<span class="hljs-string">&#x27;open&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;MongoDB 数据库连接成功&#x27;</span>)<br>&#125;);<br><br><span class="hljs-comment">// 组织导出模型类</span><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">User</span>: mongoose.model(<span class="hljs-string">&#x27;User&#x27;</span>, <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./user&#x27;</span>)),<br>  <span class="hljs-attr">Article</span>: mongoose.model(<span class="hljs-string">&#x27;Article&#x27;</span>, <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./article&#x27;</span>))<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-4-注册，操作数据库"><a href="#8-4-注册，操作数据库" class="headerlink" title="8.4 注册，操作数据库"></a>8.4 注册，操作数据库</h3><p>controller \ userController.js</p><p><img src="https://s2.loli.net/2022/03/06/TDULJdzurGaHR9e.png" alt="image-20220212140140573"></p><p><img src="https://s2.loli.net/2022/03/06/hxuJtTKnz2U61mE.png" alt="image-20220212134443019"></p><h2 id="9-验证"><a href="#9-验证" class="headerlink" title="9. 验证"></a>9. 验证</h2><p>首先，mongodb添加模式时的<code> required: true</code>可以实现一点验证是否缺必需参数。但是，还远远不够，以下提供两个验证的库。</p><ul><li><a href="https://github.com/sindresorhus/awesome-nodejs">awesome-nodejs</a></li><li><a href="https://github.com/express-validator/express-validator">express-validator</a></li></ul><h3 id="9-1-基本使用"><a href="#9-1-基本使用" class="headerlink" title="9.1 基本使用"></a>9.1 基本使用</h3><p>具体使用可查看<a href="https://express-validator.github.io/docs/">文档</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">npm install express-validator<br></code></pre></td></tr></table></figure><p>router \ user.js</p><p><img src="https://s2.loli.net/2022/03/06/B7hdIYKL5UibsrD.png" alt="image-20220212150822951"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 用户注册</span><br>router.post(<span class="hljs-string">&#x27;/users&#x27;</span>, [   <span class="hljs-comment">// 1. 配置验证规则</span><br>  body(<span class="hljs-string">&#x27;user.username&#x27;</span>).notEmpty().withMessage(<span class="hljs-string">&#x27;用户名不能为空&#x27;</span>),   <span class="hljs-comment">// withMessage()定制错误提示消息</span><br>  body(<span class="hljs-string">&#x27;user.email&#x27;</span>)<br>    .notEmpty().withMessage(<span class="hljs-string">&#x27;邮箱不能为空&#x27;</span>)<br>    .isEmail().withMessage(<span class="hljs-string">&#x27;邮箱格式不正确&#x27;</span>)<br>    .bail()    <span class="hljs-comment">// 前面验证失败则不会往后执行</span><br>    .custom(<span class="hljs-keyword">async</span> email =&gt; &#123;  <span class="hljs-comment">// 自定义验证</span><br>      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> User.findOne(&#123; email &#125;)<br>      <span class="hljs-keyword">if</span> (user) &#123;   <span class="hljs-comment">// 有相同邮箱的用户存在</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;邮箱已存在&#x27;</span>)<br>      &#125;<br>    &#125;),<br>  body(<span class="hljs-string">&#x27;user.password&#x27;</span>).notEmpty().withMessage(<span class="hljs-string">&#x27;密码不能为空&#x27;</span>),<br>], <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;    <span class="hljs-comment">// 2. 判断验证结果</span><br>  <span class="hljs-keyword">const</span> errors = validationResult(req);<br>  <span class="hljs-keyword">if</span> (!errors.isEmpty()) &#123;<br>    <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">400</span>).json(&#123; <span class="hljs-attr">errors</span>: errors.array() &#125;);<br>  &#125;<br><br>  next()    <span class="hljs-comment">// 这个一定要加，不然通过验证的情况就会卡住</span><br>&#125;, userController.register)   <span class="hljs-comment">// 3. 通过验证</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/06/SVXpFAc5r1bZGCz.png" alt="image-20220212150745557"></p><h3 id="9-2-提取验证中间件模块"><a href="#9-2-提取验证中间件模块" class="headerlink" title="9.2 提取验证中间件模块"></a>9.2 提取验证中间件模块</h3><p>首先根据官方文档，增加验证中间件</p><p><img src="https://s2.loli.net/2022/03/06/CuIfyMkhGjaBiOF.png" alt="image-20220212151331241"></p><p>middleware \ validate.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; validationResult &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;express-validator&quot;</span>)<br><br><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">validations</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> (req, res, next) =&gt; &#123;<br>    <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all(validations.map(<span class="hljs-function"><span class="hljs-params">validation</span> =&gt;</span> validation.run(req)))<br><br>    <span class="hljs-keyword">const</span> errors = validationResult(req)<br>    <span class="hljs-keyword">if</span> (errors.isEmpty()) &#123;<br>      <span class="hljs-keyword">return</span> next()<br>    &#125;<br><br>    res.status(<span class="hljs-number">400</span>).json(&#123; <span class="hljs-attr">errors</span>: errors.array() &#125;)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>新增文件夹validate(验证业务逻辑代码)</p><p>validate \ user.js(用户的验证逻辑)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> validate = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;../middleware/validate&quot;</span>)<br><span class="hljs-keyword">const</span> &#123; body, validationResult &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express-validator&#x27;</span>);<br><br><span class="hljs-keyword">const</span> &#123; User &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../model&#x27;</span>)<br><br><span class="hljs-built_in">exports</span>.register = validate([   <span class="hljs-comment">// 1. 配置验证规则</span><br>  body(<span class="hljs-string">&#x27;user.username&#x27;</span>).notEmpty().withMessage(<span class="hljs-string">&#x27;用户名不能为空&#x27;</span>),   <span class="hljs-comment">// withMessage()定制错误提示消息</span><br>  body(<span class="hljs-string">&#x27;user.email&#x27;</span>)<br>    .notEmpty().withMessage(<span class="hljs-string">&#x27;邮箱不能为空&#x27;</span>)<br>    .isEmail().withMessage(<span class="hljs-string">&#x27;邮箱格式不正确&#x27;</span>)<br>    .bail()    <span class="hljs-comment">// 前面验证失败则不会往后执行</span><br>    .custom(<span class="hljs-keyword">async</span> email =&gt; &#123;  <span class="hljs-comment">// 自定义验证</span><br>      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> User.findOne(&#123; email &#125;)<br>      <span class="hljs-keyword">if</span> (user) &#123;   <span class="hljs-comment">// 有相同邮箱的用户存在</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;邮箱已存在&#x27;</span>)<br>      &#125;<br>    &#125;),<br>  body(<span class="hljs-string">&#x27;user.password&#x27;</span>).notEmpty().withMessage(<span class="hljs-string">&#x27;密码不能为空&#x27;</span>),<br>])<br></code></pre></td></tr></table></figure><p>修改<code> router \ user.js</code></p><p><img src="https://s2.loli.net/2022/03/06/6tmrvNaL92XyxDs.png" alt="image-20220212151657837"></p><h2 id="10-密码加密处理"><a href="#10-密码加密处理" class="headerlink" title="10. 密码加密处理"></a>10. 密码加密处理</h2><p>开始前，先了解一下，MD5的使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;crypto&#x27;</span>)<br><br><span class="hljs-comment">// 获取crypto支持的散列算法</span><br><span class="hljs-built_in">console</span>.log(crypto.getHashes())<br><br><span class="hljs-keyword">const</span> ret = crypto.createHash(<span class="hljs-string">&#x27;md5&#x27;</span>)  <span class="hljs-comment">// 必须是crypto支持的散列算法</span><br>  .update(<span class="hljs-string">&#x27;456&#x27;</span>)<br>  .digest(<span class="hljs-string">&#x27;hex&#x27;</span>)<span class="hljs-comment">// hex代表生成的序列是十进制的</span><br><br><br><span class="hljs-built_in">console</span>.log(ret)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/06/rbVPspS6oA781fJ.png" alt="image-20220212152639731"></p><p>开搞。</p><ol><li><p>封装md5模块</p><p>util \ md5.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;crypto&#x27;</span>)<br><br><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> &#123;   <span class="hljs-comment">// str是明文，即要加密的数据</span><br>  <span class="hljs-keyword">return</span> crypto.createHash(<span class="hljs-string">&#x27;md5&#x27;</span>)  <span class="hljs-comment">// 必须是crypto支持的散列算法</span><br>    .update(str)       <span class="hljs-comment">// 可以凭借字符串，达到混淆效果，如hunxiao + str</span><br>    .digest(<span class="hljs-string">&#x27;hex&#x27;</span>)<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>使用md5模块</p><p><img src="https://s2.loli.net/2022/03/06/wg6r2EeWGoXsM3d.png" alt="image-20220212155626831"></p><p><img src="https://s2.loli.net/2022/03/06/uaKD8TVZwJgAyoR.png" alt="image-20220212155939195"></p></li><li><p>上面返回给用户的数据中，密码也给返回了，所以有点危险</p><p>用户模型修改：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">password: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,<br>    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">set</span>: <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> md5(value),    <span class="hljs-comment">// 对密码赋值时，会调用md5进行加密</span><br>    <span class="hljs-attr">select</span>: <span class="hljs-literal">false</span>    <span class="hljs-comment">// 查询数据时，不显示出来</span><br><br>  &#125;<br></code></pre></td></tr></table></figure><p>结果还是不对，因为注册的用户是新new出来的对象，而不是查询出来的</p><p>直接删除</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 用户注册</span><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">register</span>(<span class="hljs-params">req, res, next</span>)</span> &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">let</span> user = <span class="hljs-keyword">new</span> User(req.body.user)<br>    <span class="hljs-keyword">await</span> user.save()<br>   <br>    user = user.toJSON()    <span class="hljs-comment">// 因为user是mongodb的对象，不能直接delete，所以先把它转成JSON</span><br>    <span class="hljs-keyword">delete</span> user.password<br>   <br>    <span class="hljs-comment">// 发送成功响应</span><br>    res.status(<span class="hljs-number">201</span>).json(&#123;<br>      user<br>    &#125;)<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    next(err)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/06/c1PziKea9bGo2Iu.png" alt="image-20220212162415623"></p></li></ol><p>视频教程：<a href="https://www.bilibili.com/video/BV1mQ4y1C7Cn">Node.js 系列教程之 Express_哔哩哔哩_bilibili</a></p>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Express </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Promise学习笔记(二)</title>
      <link href="/2022/03/05/promise-2/"/>
      <url>/2022/03/05/promise-2/</url>
      
        <content type="html"><![CDATA[<h1 id="Promise学习笔记-二"><a href="#Promise学习笔记-二" class="headerlink" title="Promise学习笔记(二)"></a>Promise学习笔记(二)</h1><h2 id="1-改变promise的状态"><a href="#1-改变promise的状态" class="headerlink" title="1. 改变promise的状态"></a>1. 改变promise的状态</h2><p>promise的状态一开始是pending，改变promise的状态有三个方法：</p><ul><li>调用resolve函数：pending =&gt; fulfilled(resolved)</li><li>调用reject函数：pending =&gt; rejected</li><li>抛出异常：pending =&gt; rejected</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 0. 初始状态：pending</span><br><span class="hljs-keyword">const</span> p0 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;&#125;)<br><span class="hljs-built_in">console</span>.log(p0)<br><br><span class="hljs-comment">// 1. 调用resolve函数：pending =&gt; fulfilled(resolved)</span><br><span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  resolve(<span class="hljs-string">&#x27;ok&#x27;</span>)<br>&#125;)<br><span class="hljs-built_in">console</span>.log(p1)<br><br><span class="hljs-comment">// 2. 调用reject函数：pending =&gt; rejected</span><br><span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  reject(<span class="hljs-string">&#x27;error&#x27;</span>)<br>&#125;)<br><span class="hljs-built_in">console</span>.log(p2)<br>p2.catch(<span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(reason)<br>&#125;)<br><br><span class="hljs-comment">// 3. 抛出异常：pending =&gt; rejected</span><br><span class="hljs-keyword">const</span> p3 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;抛出异常&#x27;</span><br>&#125;)<br><span class="hljs-built_in">console</span>.log(p3)<br>p3.catch(<span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(reason)<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/4k1fOsAVoqe3Sbi.png" alt="image-20220226173041998"></p><h2 id="2-指定多个回调"><a href="#2-指定多个回调" class="headerlink" title="2. 指定多个回调"></a>2. 指定多个回调</h2><p><strong>当promise改变为对应状态时都会调用</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> p = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&#x27;ok&#x27;</span>)<br>p.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;指定的第一个回调函数&#x27;</span>)<br>&#125;)<br><br>p.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;指定的第二个回调函数&#x27;</span>)<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;%c---------------&#x27;</span>, <span class="hljs-string">&#x27;color: red; font-size: 24px&#x27;</span>)<br>&#125;)<br><br><br><span class="hljs-keyword">const</span> p1 = <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;error&#x27;</span>)<br>p1.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;指定的第一个回调函数&#x27;</span>) <span class="hljs-comment">// 失败的结果，不会调用这个成功时才调用的函数</span><br>&#125;)<br><br>p1.catch(<span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;指定的第二个回调函数&#x27;</span>)<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/nAWPjJdEcqt92si.png" alt="image-20220226174300677"></p><h2 id="3-then方法返回结果"><a href="#3-then方法返回结果" class="headerlink" title="3. then方法返回结果"></a>3. then方法返回结果</h2><p>then()方法返回新的Promise对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> p1 = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&#x27;ok&#x27;</span>)<br><br><span class="hljs-comment">// 1. 抛出异常</span><br><span class="hljs-keyword">let</span> result1 = p1.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;抛出异常&#x27;</span><br>&#125;, <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.warn(reason)<br>&#125;)<br><span class="hljs-built_in">console</span>.log(result1) <span class="hljs-comment">// [[PromiseState]]: &quot;rejected&quot;</span><br><br><span class="hljs-comment">// 2. 非Promise类型的对象</span><br><span class="hljs-keyword">const</span> result2 = p1.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello, CLZ!&#x27;</span> <span class="hljs-comment">// [[PromiseState]]: &quot;fulfilled&quot;</span><br>&#125;)<br><span class="hljs-built_in">console</span>.log(result2)<br><br><span class="hljs-comment">// 3. Promise类型的对象</span><br><span class="hljs-comment">// 3.1 结果成功</span><br><span class="hljs-keyword">const</span> result3 = p1.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    resolve(<span class="hljs-string">&#x27;success&#x27;</span>)<br>  &#125;)<br>&#125;)<br><span class="hljs-built_in">console</span>.log(result3)<br><br><span class="hljs-comment">// 3.2 结果失败</span><br><span class="hljs-keyword">const</span> result4 = p1.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    reject(<span class="hljs-string">&#x27;error&#x27;</span>)<br>  &#125;)<br>&#125;)<br><span class="hljs-built_in">console</span>.log(result4)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/ax9SIO7D6gKcNvj.png" alt="image-20220226203535240"></p><h2 id="4-串联多个任务"><a href="#4-串联多个任务" class="headerlink" title="4. 串联多个任务"></a>4. 串联多个任务</h2><p><strong>链式调用</strong>原理：then()返回的是Promise对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> p1 = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&#x27;ok&#x27;</span>)<br><br>p1.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    resolve(<span class="hljs-string">&#x27;success&#x27;</span>)<br>  &#125;)<br>&#125;).then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(value) <span class="hljs-comment">// success</span><br>  <span class="hljs-keyword">return</span> value<br>&#125;).then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(value) <span class="hljs-comment">// success</span><br>  <span class="hljs-keyword">return</span> value<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="5-异常穿透"><a href="#5-异常穿透" class="headerlink" title="5. 异常穿透"></a>5. 异常穿透</h2><ul><li>当使用Promise的then链式调用时，可以在最后指定失败的回调</li><li>前面任何操作出异常都会传给最后失败的回调处理</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> p1 = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&#x27;ok&#x27;</span>)<br><br>p1.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    resolve(<span class="hljs-string">&#x27;success&#x27;</span>)<br>  &#125;)<br>&#125;).then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(value)<br>  <span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;出现异常&#x27;</span><br>  <span class="hljs-keyword">return</span> value<br>&#125;).then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(value)<br>  <span class="hljs-keyword">return</span> value<br>&#125;).catch(<span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.warn(reason)<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="6-中断Promise链"><a href="#6-中断Promise链" class="headerlink" title="6. 中断Promise链"></a>6. 中断Promise链</h2><p><b style="color: red">有且只有一个方式：返回一个pending状态的Promise对象</b></p><p>因为返回一个pending状态的对象时，后续的回调就不能执行了，因为后面的回调函数只有在状态发生变化时才能执行。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> p1 = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&#x27;ok&#x27;</span>)<br><br>p1.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    resolve(<span class="hljs-string">&#x27;success&#x27;</span>)<br>  &#125;)<br>&#125;).then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>)<br>&#125;).then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>)<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">() =&gt;</span> &#123;&#125;) <span class="hljs-comment">// 只输出1, 2</span><br>  <span class="hljs-comment">// return false    // 无效果</span><br>&#125;).then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>)<br>&#125;).catch(<span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.warn(reason)<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="7-Promise自定义封装"><a href="#7-Promise自定义封装" class="headerlink" title="7. Promise自定义封装"></a>7. Promise自定义封装</h2><h3 id="7-1-基本结构的搭建"><a href="#7-1-基本结构的搭建" class="headerlink" title="7.1 基本结构的搭建"></a>7.1 基本结构的搭建</h3><p>promise.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Promise</span>(<span class="hljs-params">executor</span>) </span>&#123;<br><br>&#125;<br><br><br><span class="hljs-built_in">Promise</span>.prototype.then = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">onResolved, onRejected</span>) </span>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>测试用: index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>手写Promise<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./promise.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="javascript">      resolve(<span class="hljs-string">&#x27;OK&#x27;</span>)</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><br><span class="javascript">    p.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;</span><br><span class="javascript">      <span class="hljs-built_in">console</span>.log(value)</span><br><span class="javascript">    &#125;, <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;</span><br><span class="javascript">      <span class="hljs-built_in">console</span>.warn(reason)</span><br><span class="javascript">    &#125;)</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="7-2-resolve、reject功能实现"><a href="#7-2-resolve、reject功能实现" class="headerlink" title="7.2 resolve、reject功能实现"></a>7.2 resolve、reject功能实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// resolve函数</span><br><span class="hljs-keyword">const</span> resolve = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// 1. 修改对象的状态(promiseState)</span><br>  <span class="hljs-built_in">this</span>.PromiseState = <span class="hljs-string">&#x27;fulfilled&#x27;</span><br><br>  <span class="hljs-comment">// 2. 设置对象结果值(promiseResult)</span><br>  <span class="hljs-built_in">this</span>.PromiseResult = data<br>&#125;<br><br><br><span class="hljs-comment">// reject函数</span><br><span class="hljs-keyword">const</span> reject = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// 1. 修改对象的状态(promiseState)</span><br>  <span class="hljs-built_in">this</span>.PromiseState = <span class="hljs-string">&#x27;rejected&#x27;</span><br><br>  <span class="hljs-comment">// 2. 设置对象结果值(promiseResult)</span><br>  <span class="hljs-built_in">this</span>.PromiseResult = data<br>&#125;<br></code></pre></td></tr></table></figure><p>promise.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Promise</span>(<span class="hljs-params">executor</span>) </span>&#123;<br>  <span class="hljs-built_in">this</span>.PromiseState = <span class="hljs-string">&#x27;pending&#x27;</span><br>  <span class="hljs-built_in">this</span>.PromiseResult = <span class="hljs-literal">null</span><br><br>  <span class="hljs-comment">// resolve函数</span><br>  <span class="hljs-keyword">const</span> resolve = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// 1. 修改对象的状态(promiseState)</span><br>    <span class="hljs-built_in">this</span>.PromiseState = <span class="hljs-string">&#x27;fulfilled&#x27;</span><br><br>    <span class="hljs-comment">// 2. 设置对象结果值(promiseResult)</span><br>    <span class="hljs-built_in">this</span>.PromiseResult = data<br>  &#125;<br><br>  <span class="hljs-comment">// reject函数</span><br>  <span class="hljs-keyword">const</span> reject = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// 1. 修改对象的状态(promiseState)</span><br>    <span class="hljs-built_in">this</span>.PromiseState = <span class="hljs-string">&#x27;rejected&#x27;</span><br><br>    <span class="hljs-comment">// 2. 设置对象结果值(promiseResult)</span><br>    <span class="hljs-built_in">this</span>.PromiseResult = data<br>  &#125;<br><br>  <span class="hljs-comment">// 同步调用执行器函数executor</span><br>  executor(resolve, reject)<br>&#125;<br><br><br><span class="hljs-built_in">Promise</span>.prototype.then = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">onResolved, onRejected</span>) </span>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-3-实现抛出异常改变promise状态"><a href="#7-3-实现抛出异常改变promise状态" class="headerlink" title="7.3 实现抛出异常改变promise状态"></a>7.3 实现抛出异常改变promise状态</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 实现抛出异常改变promise状态</span><br><span class="hljs-keyword">try</span> &#123;<br>  <span class="hljs-comment">// 同步调用执行器函数executor</span><br>  executor(resolve, reject)<br>&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>  reject(e)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-4-实现Promise状态只能修改一次"><a href="#7-4-实现Promise状态只能修改一次" class="headerlink" title="7.4 实现Promise状态只能修改一次"></a>7.4 实现Promise状态只能修改一次</h3><p><code>pending =&gt; fulfilled(resolved)</code>或<code>pending =&gt; rejected</code></p><p>只需要在resolve函数和reject函数最开始加上判断，Promise的状态是不是pending就行，如果不是，直接return</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState !== <span class="hljs-string">&#x27;pending&#x27;</span>) &#123;<br>  <span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-5-实现then方法"><a href="#7-5-实现then方法" class="headerlink" title="7.5 实现then方法"></a>7.5 实现then方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">Promise</span>.prototype.then = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">onResolved, onRejected</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;fulfilled&#x27;</span>) &#123;<br>    onResolved(<span class="hljs-built_in">this</span>.PromiseResult)<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;rejected&#x27;</span>) &#123;<br>    onRejected(<span class="hljs-built_in">this</span>.PromiseResult)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-6-实现异步任务的执行"><a href="#7-6-实现异步任务的执行" class="headerlink" title="7.6 实现异步任务的执行"></a>7.6 实现异步任务的执行</h3><p>当任务是异步任务时，则无法执行成功或失败的回调函数，因为执行then参数时，状态是pending。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    resolve(<span class="hljs-string">&#x27;OK&#x27;</span>)<br>  &#125;, <span class="hljs-number">0</span>)<br>&#125;)<br></code></pre></td></tr></table></figure><p>实现方法：</p><ul><li><p>自定义Promise对象增加一个<code> callback</code>对象，用于存成功、失败的回调函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">this</span>.callback = &#123;&#125;<br></code></pre></td></tr></table></figure></li><li><p><code> then</code>函数增加状态为<code> pending</code>的判断，这时候只是把回调函数存放起来，等到实际调用<code> resolve</code>或<code> reject</code>函数时才调用存起来的回调函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;fulfilled&#x27;</span>) &#123;<br>    onResolved(<span class="hljs-built_in">this</span>.PromiseResult)<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;rejected&#x27;</span>) &#123;<br>    onRejected(<span class="hljs-built_in">this</span>.PromiseResult)<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// 保存回调函数</span><br>    <span class="hljs-built_in">this</span>.callback = &#123;<br>      onResolved,<br>      onRejected<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure></li><li><p>调用<code> resolve</code>或<code> reject</code>函数时，判断是否需要调用存起来的回调函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.callback.onResolved) &#123;  <span class="hljs-comment">// ` resolve`或` reject`函数最后</span><br>  <span class="hljs-built_in">this</span>.callback.onResolved(data)<span class="hljs-comment">// reject函数对应修改为onRejected</span><br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="7-7-指定多个回调函数"><a href="#7-7-指定多个回调函数" class="headerlink" title="7.7 指定多个回调函数"></a>7.7 指定多个回调函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    resolve(<span class="hljs-string">&#x27;OK&#x27;</span>)<br>  &#125;, <span class="hljs-number">1000</span>)<br>&#125;)<br><br>p.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(value)<br>&#125;, <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.warn(reason)<br>&#125;)<br><br>p.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  alert(value)<br>&#125;, <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>  alert(reason)<br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>会发现，最后只会弹出OK，而不会在控制台输出。</strong>只是因为前面保存的callback属性是对象，所以后面的会覆盖掉前面的，改进只需要把callback变为数组即可</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">this</span>.callbacks = []<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">Promise</span>.prototype.then = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">onResolved, onRejected</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;fulfilled&#x27;</span>) &#123;<br>    onResolved(<span class="hljs-built_in">this</span>.PromiseResult)<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;rejected&#x27;</span>) &#123;<br>    onRejected(<span class="hljs-built_in">this</span>.PromiseResult)<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">this</span>.callbacks.push(&#123;<br>      onResolved,<br>      onRejected<br>    &#125;)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">this</span>.callbacks.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123; <span class="hljs-comment">// ` resolve`或` reject`函数最后</span><br>  item.onResolved(data)<span class="hljs-comment">// reject函数对应修改为onRejected</span><br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="7-8-then方法返回结果"><a href="#7-8-then方法返回结果" class="headerlink" title="7.8 then方法返回结果"></a>7.8 then方法返回结果</h3><p>成功时的代码修改如下图，失败的类似</p><p><strong>只实现同步</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;fulfilled&#x27;</span>) &#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// 获取回调函数的执行结果</span><br>        <span class="hljs-keyword">const</span> result = onResolved(<span class="hljs-built_in">this</span>.PromiseResult)<br><br>        <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span>) &#123;<br>          <span class="hljs-comment">// 结果是Promise类型对象 </span><br>          result.then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>            resolve(v)<br>          &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>            reject(r)<br>          &#125;)<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          resolve(result)<br>        &#125;<br><br>      &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        reject(e)<br>      &#125;<br>    &#125;<br>    <span class="hljs-comment">// else if (this.PromiseState === &#x27;rejected&#x27;) &#123;</span><br>    <span class="hljs-comment">//   onRejected(this.PromiseResult)</span><br>    <span class="hljs-comment">// &#125; else &#123;</span><br>    <span class="hljs-comment">//   this.callbacks.push(&#123;</span><br>    <span class="hljs-comment">//     onResolved,</span><br>    <span class="hljs-comment">//     onRejected</span><br>    <span class="hljs-comment">//   &#125;)</span><br>    <span class="hljs-comment">// &#125;</span><br>  &#125;)<br></code></pre></td></tr></table></figure><p><strong>实现异步</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> self = <span class="hljs-built_in">this</span><br><br><span class="hljs-built_in">this</span>.callbacks.push(&#123;<br>  <span class="hljs-attr">onResolved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">let</span> result = onResolved(self.PromiseResult)<br>      <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span>) &#123;<br>        result.then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>          resolve(v)<br>        &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>          reject(r)<br>        &#125;)<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        resolve(result)<br>      &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>      reject(e)<br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">onRejected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-comment">// 类似上面</span><br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="7-9-then方法封装优化"><a href="#7-9-then方法封装优化" class="headerlink" title="7.9 then方法封装优化"></a>7.9 then方法封装优化</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callback</span>(<span class="hljs-params">type</span>) </span>&#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">// 获取回调函数的执行结果</span><br>    <span class="hljs-keyword">const</span> result = type(self.PromiseResult)<br><br>    <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span>) &#123;<br>      <span class="hljs-comment">// 结果是Promise类型对象 </span><br>      result.then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>        resolve(v)<br>      &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>        reject(r)<br>      &#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      resolve(result)<br>    &#125;<br><br>  &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>    reject(e)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">Promise</span>.prototype.then = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">onResolved, onRejected</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> self = <span class="hljs-built_in">this</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callback</span>(<span class="hljs-params">type</span>) </span>&#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// 获取回调函数的执行结果</span><br>        <span class="hljs-keyword">const</span> result = type(self.PromiseResult)<br><br>        <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span>) &#123;<br>          <span class="hljs-comment">// 结果是Promise类型对象 </span><br>          result.then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>            resolve(v)<br>          &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>            reject(r)<br>          &#125;)<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          resolve(result)<br>        &#125;<br><br>      &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        reject(e)<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;fulfilled&#x27;</span>) &#123;<br>      callback(onResolved)<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState ===   <span class="hljs-string">&#x27;rejected&#x27;</span>) &#123;<br>      callback(onRejected)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-built_in">this</span>.callbacks.push(&#123;<br>        <span class="hljs-attr">onResolved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>          callback(onResolved)<br>        &#125;,<br>        <span class="hljs-attr">onRejected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>          callback(onRejected)<br>        &#125;<br>      &#125;)<br>    &#125;<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-10-catch方法"><a href="#7-10-catch方法" class="headerlink" title="7.10 catch方法"></a>7.10 catch方法</h3><p><strong>异常穿透</strong>：因为catch方法支持只传一个参数<code> reason =&gt; &#123;&#125;</code>，而then方法第二个参数才是<code> reason =&gt; &#123;&#125;</code>，所以会出问题：最后调用catch时没有onRejected方法</p><p>所以，需要在then方法开始的时候添加以下判断</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> onRejected !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>  onRejected = <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">throw</span> reason<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>catch方法还应实现值传递，即then可以不传参数，那么和上面的原理一样，还需要添加当onResolved不存在的情况</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> onResolved !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>  onResolved = <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value<br>&#125;<br></code></pre></td></tr></table></figure><p>测试用:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>手写Promise<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./promise.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="javascript">      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">        resolve(<span class="hljs-string">&#x27;ok&#x27;</span>)</span><br><span class="javascript">      &#125;, <span class="hljs-number">1000</span>)</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><br><span class="javascript">    p.then()</span><br><span class="javascript">      .then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-number">222</span>)</span><br><span class="javascript">      &#125;).then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-number">333</span>)</span><br><span class="javascript">      &#125;).catch(<span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.warn(reason)</span><br><span class="javascript">      &#125;)</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="7-11-API"><a href="#7-11-API" class="headerlink" title="7.11 API"></a>7.11 API</h3><h4 id="7-11-1-resolve方法和reject方法"><a href="#7-11-1-resolve方法和reject方法" class="headerlink" title="7.11.1 resolve方法和reject方法"></a>7.11.1 resolve方法和reject方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// resolve方法</span><br><span class="hljs-built_in">Promise</span>.resolve = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span>) &#123;<br>      value.then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>        resolve(v)<br>      &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>        reject(r)<br>      &#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      resolve(value)<br>    &#125;<br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// reject方法</span><br><span class="hljs-built_in">Promise</span>.reject = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">reason</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    reject(reason)<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="7-11-2-all方法"><a href="#7-11-2-all方法" class="headerlink" title="7.11.2 all方法"></a>7.11.2 all方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// all方法</span><br><span class="hljs-built_in">Promise</span>.all = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">promises</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">let</span> arr = []<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; promises.length; i++) &#123;<br>      promises[i].then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>        arr[i] = v<br>        <span class="hljs-keyword">if</span> (arr.length === promises.length) &#123;<br>          resolve(arr)<br>        &#125;<br>      &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>        reject(r)<br>      &#125;)<br>    &#125;<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>测试：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>手写Promise<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./promise.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="javascript">      resolve(<span class="hljs-string">&#x27;p1: OK&#x27;</span>)</span><br><span class="javascript">    &#125;)</span><br><span class="javascript">    <span class="hljs-keyword">const</span> p2 = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&#x27;p2: OK&#x27;</span>)</span><br><span class="javascript">    <span class="hljs-keyword">const</span> p3 = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&#x27;p3: OK&#x27;</span>)</span><br><span class="javascript">    <span class="hljs-keyword">const</span> result1 = <span class="hljs-built_in">Promise</span>.all([p1, p2, p3]) <span class="hljs-comment">// 所有Promise的结果都成功</span></span><br><span class="javascript">    <span class="hljs-built_in">console</span>.log(result1)</span><br><span class="javascript"></span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> p4 = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&#x27;p4: OK&#x27;</span>)</span><br><span class="javascript">    <span class="hljs-keyword">const</span> p5 = <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;p5: Err&#x27;</span>)</span><br><span class="javascript">    <span class="hljs-keyword">const</span> p6 = <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;p6: Err&#x27;</span>)</span><br><span class="javascript">    <span class="hljs-keyword">const</span> result2 = <span class="hljs-built_in">Promise</span>.all([p4, p5, p6]) <span class="hljs-comment">// 有Promise的结果失败</span></span><br><span class="javascript">    <span class="hljs-built_in">console</span>.log(result2)</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/n7BaoepVFNtulUS.png" alt="image-20220227171844700"></p><h4 id="7-11-3-race方法"><a href="#7-11-3-race方法" class="headerlink" title="7.11.3 race方法"></a>7.11.3 race方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// race方法</span><br><span class="hljs-built_in">Promise</span>.race = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">promises</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; promises.length; i++) &#123;<br>      promises[i].then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>        resolve(v)<br>      &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>        reject(r)<br>      &#125;)<br>    &#125;<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-12-then方法回调是异步执行"><a href="#7-12-then方法回调是异步执行" class="headerlink" title="7.12 then方法回调是异步执行"></a>7.12 then方法回调是异步执行</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1 3 2：then方法异步执行，得等同步方法执行完才执行</span><br><span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  resolve(<span class="hljs-string">&#x27;ok&#x27;</span>)<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>)<br>&#125;)<br><br>p1.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>)<br>&#125;)<br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure><p><strong>自定义Promise实现then方法回调异步执行</strong>：就是把原本调用成功、失败时的回调函数变为异步的就行了</p><p>如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;fulfilled&#x27;</span>) &#123;<br>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    callback(onResolved)<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/JWv3BpfiebkuGth.png" alt="image-20220227175150352"></p><h3 id="7-13-完整代码"><a href="#7-13-完整代码" class="headerlink" title="7.13. 完整代码"></a>7.13. 完整代码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Promise</span>(<span class="hljs-params">executor</span>) </span>&#123;<br>  <span class="hljs-built_in">this</span>.PromiseState = <span class="hljs-string">&#x27;pending&#x27;</span><br>  <span class="hljs-built_in">this</span>.PromiseResult = <span class="hljs-literal">null</span><br>  <span class="hljs-built_in">this</span>.callbacks = []<br><br>  <span class="hljs-comment">// resolve函数</span><br>  <span class="hljs-keyword">const</span> resolve = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState !== <span class="hljs-string">&#x27;pending&#x27;</span>) &#123;<br>      <span class="hljs-keyword">return</span><br>    &#125;<br><br>    <span class="hljs-comment">// 1. 修改对象的状态(promiseState)</span><br>    <span class="hljs-built_in">this</span>.PromiseState = <span class="hljs-string">&#x27;fulfilled&#x27;</span><br><br>    <span class="hljs-comment">// 2. 设置对象结果值(promiseResult)</span><br>    <span class="hljs-built_in">this</span>.PromiseResult = data<br><br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-built_in">this</span>.callbacks.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>        item.onResolved(data)<br>      &#125;)<br>    &#125;)<br><br>  &#125;<br><br>  <span class="hljs-comment">// reject函数</span><br>  <span class="hljs-keyword">const</span> reject = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState !== <span class="hljs-string">&#x27;pending&#x27;</span>) &#123;<br>      <span class="hljs-keyword">return</span><br>    &#125;<br><br>    <span class="hljs-comment">// 1. 修改对象的状态(promiseState)</span><br>    <span class="hljs-built_in">this</span>.PromiseState = <span class="hljs-string">&#x27;rejected&#x27;</span><br><br>    <span class="hljs-comment">// 2. 设置对象结果值(promiseResult)</span><br>    <span class="hljs-built_in">this</span>.PromiseResult = data<br><br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-built_in">this</span>.callbacks.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>        item.onRejected(data)<br>      &#125;)<br>    &#125;)<br><br>  &#125;<br><br>  <span class="hljs-comment">// 实现抛出异常改变promise状态</span><br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">// 同步调用执行器函数executor</span><br>    executor(resolve, reject)<br>  &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>    reject(e)<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// then方法</span><br><span class="hljs-built_in">Promise</span>.prototype.then = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">onResolved, onRejected</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> onRejected !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>    onRejected = <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>      <span class="hljs-keyword">throw</span> reason<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> onResolved !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>    onResolved = <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> self = <span class="hljs-built_in">this</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callback</span>(<span class="hljs-params">type</span>) </span>&#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// 获取回调函数的执行结果</span><br>        <span class="hljs-keyword">const</span> result = type(self.PromiseResult)<br><br>        <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span>) &#123;<br>          <span class="hljs-comment">// 结果是Promise类型对象 </span><br>          result.then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>            resolve(v)<br>          &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>            reject(r)<br>          &#125;)<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          resolve(result)<br>        &#125;<br><br>      &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        reject(e)<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;fulfilled&#x27;</span>) &#123;<br>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        callback(onResolved)<br>      &#125;)<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;rejected&#x27;</span>) &#123;<br>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        callback(onRejected)<br>      &#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-built_in">this</span>.callbacks.push(&#123;<br>        <span class="hljs-attr">onResolved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>          callback(onResolved)<br>        &#125;,<br>        <span class="hljs-attr">onRejected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>          callback(onRejected)<br>        &#125;<br>      &#125;)<br>    &#125;<br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// catch方法</span><br><span class="hljs-built_in">Promise</span>.prototype.catch = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">onRejected</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.then(<span class="hljs-literal">undefined</span>, onRejected)<br>&#125;<br><br><span class="hljs-comment">// resolve方法</span><br><span class="hljs-built_in">Promise</span>.resolve = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span>) &#123;<br>      value.then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>        resolve(v)<br>      &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>        reject(r)<br>      &#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      resolve(value)<br>    &#125;<br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// reject方法</span><br><span class="hljs-built_in">Promise</span>.reject = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">reason</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    reject(reason)<br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// all方法</span><br><span class="hljs-built_in">Promise</span>.all = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">promises</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">let</span> arr = []<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; promises.length; i++) &#123;<br>      promises[i].then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>        arr[i] = v<br>        <span class="hljs-keyword">if</span> (arr.length === promises.length) &#123;<br>          resolve(arr)<br>        &#125;<br>      &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>        reject(r)<br>      &#125;)<br>    &#125;<br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// race方法</span><br><span class="hljs-built_in">Promise</span>.race = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">promises</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; promises.length; i++) &#123;<br>      promises[i].then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>        resolve(v)<br>      &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>        reject(r)<br>      &#125;)<br>    &#125;<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>封装成类版本：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Promise</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">executor</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.PromiseState = <span class="hljs-string">&#x27;pending&#x27;</span><br>    <span class="hljs-built_in">this</span>.PromiseResult = <span class="hljs-literal">null</span><br>    <span class="hljs-built_in">this</span>.callbacks = []<br><br>    <span class="hljs-comment">// resolve函数</span><br>    <span class="hljs-keyword">const</span> resolve = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState !== <span class="hljs-string">&#x27;pending&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span><br>      &#125;<br><br>      <span class="hljs-comment">// 1. 修改对象的状态(promiseState)</span><br>      <span class="hljs-built_in">this</span>.PromiseState = <span class="hljs-string">&#x27;fulfilled&#x27;</span><br><br>      <span class="hljs-comment">// 2. 设置对象结果值(promiseResult)</span><br>      <span class="hljs-built_in">this</span>.PromiseResult = data<br><br>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-built_in">this</span>.callbacks.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>          item.onResolved(data)<br>        &#125;)<br>      &#125;)<br><br>    &#125;<br><br>    <span class="hljs-comment">// reject函数</span><br>    <span class="hljs-keyword">const</span> reject = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState !== <span class="hljs-string">&#x27;pending&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span><br>      &#125;<br><br>      <span class="hljs-comment">// 1. 修改对象的状态(promiseState)</span><br>      <span class="hljs-built_in">this</span>.PromiseState = <span class="hljs-string">&#x27;rejected&#x27;</span><br><br>      <span class="hljs-comment">// 2. 设置对象结果值(promiseResult)</span><br>      <span class="hljs-built_in">this</span>.PromiseResult = data<br><br>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-built_in">this</span>.callbacks.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>          item.onRejected(data)<br>        &#125;)<br>      &#125;)<br><br>    &#125;<br><br>    <span class="hljs-comment">// 实现抛出异常改变promise状态</span><br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-comment">// 同步调用执行器函数executor</span><br>      executor(resolve, reject)<br>    &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>      reject(e)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">then</span>(<span class="hljs-params">onResolved, onRejected</span>)</span> &#123;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> onRejected !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>      onRejected = <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>        <span class="hljs-keyword">throw</span> reason<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> onResolved !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>      onResolved = <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> self = <span class="hljs-built_in">this</span><br><br>      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callback</span>(<span class="hljs-params">type</span>) </span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-comment">// 获取回调函数的执行结果</span><br>          <span class="hljs-keyword">const</span> result = type(self.PromiseResult)<br><br>          <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span>) &#123;<br>            <span class="hljs-comment">// 结果是Promise类型对象 </span><br>            result.then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>              resolve(v)<br>            &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>              reject(r)<br>            &#125;)<br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            resolve(result)<br>          &#125;<br><br>        &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>          reject(e)<br>        &#125;<br>      &#125;<br><br>      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;fulfilled&#x27;</span>) &#123;<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          callback(onResolved)<br>        &#125;)<br>      &#125;<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.PromiseState === <span class="hljs-string">&#x27;rejected&#x27;</span>) &#123;<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          callback(onRejected)<br>        &#125;)<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">this</span>.callbacks.push(&#123;<br>          <span class="hljs-attr">onResolved</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>            callback(onResolved)<br>          &#125;,<br>          <span class="hljs-attr">onRejected</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>            callback(onRejected)<br>          &#125;<br>        &#125;)<br>      &#125;<br>    &#125;)<br><br>  &#125;<br><br>  <span class="hljs-keyword">catch</span>(onRejected) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.then(<span class="hljs-literal">undefined</span>, onRejected)<br>  &#125;<br><br>  <span class="hljs-comment">// resolve方法(静态方法，属于类而不是属于实例对象)</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-title">resolve</span>(<span class="hljs-params">value</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span>) &#123;<br>        value.then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>          resolve(v)<br>        &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>          reject(r)<br>        &#125;)<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        resolve(value)<br>      &#125;<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-comment">// reject方法</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-title">reject</span>(<span class="hljs-params">reason</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>      reject(reason)<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-comment">// all方法</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-title">all</span>(<span class="hljs-params">promises</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">let</span> arr = []<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; promises.length; i++) &#123;<br>        promises[i].then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>          arr[i] = v<br>          <span class="hljs-keyword">if</span> (arr.length === promises.length) &#123;<br>            resolve(arr)<br>          &#125;<br>        &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>          reject(r)<br>        &#125;)<br>      &#125;<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-comment">// race方法</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-title">race</span>(<span class="hljs-params">promises</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; promises.length; i++) &#123;<br>        promises[i].then(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> &#123;<br>          resolve(v)<br>        &#125;, <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;<br>          reject(r)<br>        &#125;)<br>      &#125;<br>    &#125;)<br>  &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h2 id="8-async和await"><a href="#8-async和await" class="headerlink" title="8. async和await"></a>8. async和await</h2><h3 id="8-1-async函数"><a href="#8-1-async函数" class="headerlink" title="8.1 async函数"></a>8.1 async函数</h3><ul><li>函数的返回值是Promise对象</li><li>Promise对象的结果由async函数执行的返回值决定</li></ul><p>和then方法一样</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1. 返回值为一个非Promise类型的数据</span><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test1</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">123</span><br>&#125;<br><span class="hljs-keyword">let</span> result1 = test1()<br><span class="hljs-built_in">console</span>.log(result1)<br><br><span class="hljs-comment">// 2. 返回值为一个Promise对象，结果为成功</span><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test2</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    resolve(<span class="hljs-string">&#x27;ok&#x27;</span>)<br>  &#125;)<br>&#125;<br><span class="hljs-keyword">let</span> result2 = test2()<br><span class="hljs-built_in">console</span>.log(result2)<br><br><span class="hljs-comment">// 3. 返回值为一个Promise对象，结果为失败</span><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test3</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    reject(<span class="hljs-string">&#x27;error&#x27;</span>)<br>  &#125;)<br>&#125;<br><span class="hljs-keyword">let</span> result3 = test3()<br><span class="hljs-built_in">console</span>.log(result3)<br><br><span class="hljs-comment">// 4. 抛出异常</span><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test4</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;抛出异常&#x27;</span><br>&#125;<br><span class="hljs-keyword">let</span> result4 = test4()<br><span class="hljs-built_in">console</span>.log(result4)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/TqvdYSm5NwipCaf.png" alt="image-20220227192621644"></p><h3 id="8-2-await表达式"><a href="#8-2-await表达式" class="headerlink" title="8.2 await表达式"></a>8.2 await表达式</h3><ul><li>await右侧的表达式一般是Promise对象，但也可以是其他值</li><li>如果右侧的表达式是promise对象，await返回的是promise成功的值</li><li>如果右侧的表达式是其他值，await返回的就是该值</li></ul><p>注意：</p><ul><li><b style="color: red">await必须写在async函数中，但async函数中不一定要await</b></li><li>如果await的promise失败，则会抛出异常，所以需要通过<code> try...catch</code>捕捉处理</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> test = <span class="hljs-keyword">async</span> () =&gt; &#123;<br>  <span class="hljs-comment">// 1. await右侧为其他类型的情况</span><br>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> <span class="hljs-number">123</span><br>  <span class="hljs-built_in">console</span>.log(result) <span class="hljs-comment">// 123</span><br><br>  <span class="hljs-comment">// 2. await右侧为Promise的情况</span><br>  <span class="hljs-comment">// 2.1 成功</span><br>  result = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    resolve(<span class="hljs-string">&#x27;ok&#x27;</span>)<br>  &#125;)<br>  <span class="hljs-built_in">console</span>.log(result) <span class="hljs-comment">// ok</span><br><br>  <span class="hljs-comment">// 2.2 失败</span><br>  <span class="hljs-keyword">try</span> &#123;<br>    result = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>      reject(<span class="hljs-string">&#x27;error&#x27;</span>)<br>    &#125;)<br>    <span class="hljs-built_in">console</span>.log(result) <span class="hljs-comment">// ok</span><br>  &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>    <span class="hljs-built_in">console</span>.log(e)<br>  &#125;<br>&#125;<br><br>test()<br></code></pre></td></tr></table></figure><h3 id="8-3-async和await使用"><a href="#8-3-async和await使用" class="headerlink" title="8.3 async和await使用"></a>8.3 async和await使用</h3><h4 id="8-3-1-读取文件"><a href="#8-3-1-读取文件" class="headerlink" title="8.3.1 读取文件"></a>8.3.1 读取文件</h4><p>情景：读取resource文件夹下的数据(1.txt，2.txt，3.txt)，分别是111、222、333。并把数据拼接后在控制台打印出来。</p><p><strong>回调函数版本</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>)<br><br>fs.readFile(<span class="hljs-string">&#x27;./resource/1.txt&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data1</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-keyword">throw</span> err<br>  &#125;<br>  fs.readFile(<span class="hljs-string">&#x27;./resource/2.txt&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data2</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (err) &#123;<br>      <span class="hljs-keyword">throw</span> err<br>    &#125;<br>    fs.readFile(<span class="hljs-string">&#x27;./resource/3.txt&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data3</span>) =&gt;</span> &#123;<br>      <span class="hljs-built_in">console</span>.log(data1 + data2 + data3)<br>    &#125;)<br>  &#125;)<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/2t65LCcdgmM7lwE.png" alt="image-20220227194850320"></p><p><strong>async+await版本</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>)<br><span class="hljs-keyword">const</span> &#123; promisify &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;util&#x27;</span>)<br><br><span class="hljs-keyword">const</span> readFile = promisify(fs.readFile)<br><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myReadFile</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">let</span> data1 = <span class="hljs-keyword">await</span> readFile(<span class="hljs-string">&#x27;./resource/1.txt&#x27;</span>)<br>    <span class="hljs-keyword">let</span> data2 = <span class="hljs-keyword">await</span> readFile(<span class="hljs-string">&#x27;./resource/2.txt&#x27;</span>)<br>    <span class="hljs-keyword">let</span> data3 = <span class="hljs-keyword">await</span> readFile(<span class="hljs-string">&#x27;./resource/3.txt&#x27;</span>)<br><br>    <span class="hljs-built_in">console</span>.log(data1 + data2 + data3)<br>  &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>    <span class="hljs-built_in">console</span>.log(e)<br>  &#125;<br>&#125;<br><br>myReadFile()<br></code></pre></td></tr></table></figure><h4 id="8-3-2-axios使用"><a href="#8-3-2-axios使用" class="headerlink" title="8.3.2 axios使用"></a>8.3.2 axios使用</h4><p>安装：<code> npm install axios</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;axios&#x27;</span>)<br><br>  <span class="hljs-keyword">const</span> &#123; data &#125; = <span class="hljs-keyword">await</span> axios.get(<span class="hljs-string">&#x27;https://qcgx2i.api.cloudendpoint.cn/hello&#x27;</span>)<br>  <span class="hljs-built_in">console</span>.log(data)<br>&#125;())<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/5Q6GFRT9nSvuPoI.png" alt="image-20220227195827006"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Promise </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Promise学习笔记(一)</title>
      <link href="/2022/03/05/promise-1/"/>
      <url>/2022/03/05/promise-1/</url>
      
        <content type="html"><![CDATA[<h1 id="Promise学习笔记-一"><a href="#Promise学习笔记-一" class="headerlink" title="Promise学习笔记(一)"></a>Promise学习笔记(一)</h1><p>一直有在用Promise，但是没有系统学过Promise，自然也不知道原理。现在就来学习一波。</p><h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1. 介绍"></a>1. 介绍</h2><p>Promise是JS中进行异步编程的新解决方案。在这之前使用过回调函数进行异步编程。</p><p>Promise是一个构造函数，Promise对象用来封装一个异步操作并可以获取其成功或失败的结果值</p><h3 id="Promise优点"><a href="#Promise优点" class="headerlink" title="Promise优点"></a>Promise优点</h3><ol><li><p>支持链式调用，可解决回调地狱问题</p><p> <strong>回调地狱</strong>：回调函数嵌套使用</p></li></ol><p><img src="https://s2.loli.net/2022/03/05/NL5nd3WekJmDZSU.png" alt="image-20220225162417514"></p><pre><code>**回调地狱导致的问题**：</code></pre><ul><li><p>阅读困难（后期维护麻烦）</p></li><li><p>不便于异常处理</p></li></ul><ol start="2"><li>指定回调函数的方式更灵活<ul><li>Promise：启动异步任务 =&gt; 返回Promise对象 =&gt; Promise对象绑定回调函数</li><li>纯用回调函数：必须在启动异步任务前指定</li></ul></li></ol><h2 id="2-Promise-体验"><a href="#2-Promise-体验" class="headerlink" title="2. Promise 体验"></a>2. Promise 体验</h2><h3 id="2-1-抽奖"><a href="#2-1-抽奖" class="headerlink" title="2.1 抽奖"></a>2.1 抽奖</h3><p>先来一个抽奖示例(隔1s后出结果)</p><h4 id="2-1-1-回调函数版本"><a href="#2-1-1-回调函数版本" class="headerlink" title="2.1.1 回调函数版本"></a>2.1.1 回调函数版本</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Promise初体验<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>抽奖<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rand</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">100</span> + <span class="hljs-number">1</span>) <span class="hljs-comment">// 返回1到100之前的随机数</span></span><br><span class="javascript">      &#125;</span><br><span class="javascript"></span><br><span class="javascript">      <span class="hljs-keyword">const</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;#btn&quot;</span>)</span><br><span class="javascript"></span><br><span class="javascript">      btn.addEventListener(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">          <span class="hljs-keyword">let</span> n = rand()</span><br><span class="javascript"></span><br><span class="javascript">          <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">50</span>) &#123;</span><br><span class="javascript">            alert(<span class="hljs-string">&quot;恭喜你中奖了&quot;</span>)</span><br><span class="javascript">          &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="javascript">            alert(<span class="hljs-string">&quot;很遗憾，你没有中奖&quot;</span>)</span><br><span class="javascript">          &#125;</span><br><span class="javascript">        &#125;, <span class="hljs-number">1000</span>)</span><br><span class="javascript">      &#125;)</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/CWhbzNoZcHAutRi.gif" alt="promise"></p><h4 id="2-1-2-Promise版本"><a href="#2-1-2-Promise版本" class="headerlink" title="2.1.2 Promise版本"></a>2.1.2 Promise版本</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Promise初体验<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>抽奖<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rand</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">100</span> + <span class="hljs-number">1</span>) <span class="hljs-comment">// 返回1到100之前的随机数</span></span><br><span class="javascript">    &#125;</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;#btn&quot;</span>)</span><br><span class="javascript"></span><br><span class="javascript">    btn.addEventListener(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">      <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-comment">// resolve 成功后执行的函数</span></span><br><span class="javascript">        <span class="hljs-comment">// reject 失败后执行的函数</span></span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-keyword">let</span> n = rand()</span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">          <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">50</span>) &#123;</span><br><span class="javascript">            resolve(n) <span class="hljs-comment">// 可以将Promise的状态设置为成功</span></span><br><span class="javascript">          &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="javascript">            reject(n) <span class="hljs-comment">// 可以将Promise的状态设置为失败</span></span><br><span class="javascript">          &#125;</span><br><span class="javascript">        &#125;, <span class="hljs-number">1000</span>)</span><br><span class="javascript">      &#125;)</span><br><span class="javascript"></span><br><span class="javascript">      p.then(</span><br><span class="javascript">        <span class="hljs-comment">// 通过then方法指定成功或失败时的回调函数，第一个参数是成功时的回调，第二个参数是失败时的回调</span></span><br><span class="javascript">        <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;</span><br><span class="javascript">          alert(<span class="hljs-string">`恭喜你，中奖了，中奖号码是<span class="hljs-subst">$&#123;value&#125;</span>`</span>)</span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;</span><br><span class="javascript">          alert(<span class="hljs-string">`真遗憾，你没有中奖，中奖号码是<span class="hljs-subst">$&#123;value&#125;</span>`</span>)</span><br><span class="javascript">        &#125;</span><br><span class="javascript">      )</span><br><span class="javascript">    &#125;)</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-2-文件读取"><a href="#2-2-文件读取" class="headerlink" title="2.2 文件读取"></a>2.2 文件读取</h3><h4 id="2-2-1-回调函数版本"><a href="#2-2-1-回调函数版本" class="headerlink" title="2.2.1 回调函数版本"></a>2.2.1 回调函数版本</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>)<br><br>fs.readFile(<span class="hljs-string">&#x27;./resource/content.txt&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-keyword">throw</span> err<br>  &#125;<br><br>  <span class="hljs-built_in">console</span>.log(data.toString())<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="2-2-2-Promise版本"><a href="#2-2-2-Promise版本" class="headerlink" title="2.2.2 Promise版本"></a>2.2.2 Promise版本</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>)<br><br><span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  fs.readFile(<span class="hljs-string">&#x27;./resource/content1.txt&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (err) &#123;<br>      reject(err)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      resolve(data)<br>    &#125;<br>  &#125;)<br>&#125;)<br><br>p.then(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(value.toString())<br>&#125;, <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(reason)<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/nabwDJqGQHfRF3l.png" alt="image-20220225172452214"></p><h3 id="2-3-AJAX"><a href="#2-3-AJAX" class="headerlink" title="2.3  AJAX"></a>2.3  AJAX</h3><h4 id="2-3-1-原生版本-回调函数"><a href="#2-3-1-原生版本-回调函数" class="headerlink" title="2.3.1 原生版本(回调函数)"></a>2.3.1 原生版本(回调函数)</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Promise封装AJAX<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">      <span class="hljs-comment">// 1. 创建对象</span></span><br><span class="javascript">      <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()</span><br><span class="javascript"></span><br><span class="javascript">      <span class="hljs-comment">// 2. 初始化</span></span><br><span class="javascript">      xhr.open(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;https://qcgx2i.api.cloudendpoint.cn/hello&#x27;</span>)<span class="hljs-comment">// 接口可能会无效，换一个有效的就行</span></span><br><span class="javascript"></span><br><span class="javascript">      <span class="hljs-comment">// 3. 发送</span></span><br><span class="javascript">      xhr.send()</span><br><span class="javascript"></span><br><span class="javascript">      <span class="hljs-comment">// 4. 处理响应结果</span></span><br><span class="javascript">      xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">4</span>) &#123;</span><br><span class="javascript">          <span class="hljs-keyword">if</span> (xhr.status &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.status &lt; <span class="hljs-number">300</span>) &#123;</span><br><span class="javascript">            <span class="hljs-built_in">console</span>.log(xhr.response)</span><br><span class="javascript">          &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="javascript">            <span class="hljs-built_in">console</span>.log(xhr.status)</span><br><span class="javascript">          &#125;</span><br><span class="javascript">        &#125;</span><br><span class="javascript">      &#125;</span><br><span class="javascript">    &#125;)()</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/MAZxnHgewTQrY9o.png" alt="image-20220225174738518"></p><h4 id="2-3-2-Promise版本"><a href="#2-3-2-Promise版本" class="headerlink" title="2.3.2 Promise版本"></a>2.3.2 Promise版本</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Promise封装AJAX<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">      <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();</span><br><span class="javascript"></span><br><span class="javascript">        xhr.open(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;https://qcgx2i.api.cloudendpoint.cn/hello&#x27;</span>);</span><br><span class="javascript"></span><br><span class="javascript">        xhr.send();</span><br><span class="javascript"></span><br><span class="javascript">        xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">4</span>) &#123;</span><br><span class="javascript">            <span class="hljs-keyword">if</span> (xhr.status &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.status &lt; <span class="hljs-number">300</span>) &#123;</span><br><span class="javascript">              resolve(xhr.response) <span class="hljs-comment">// 成功</span></span><br><span class="javascript">            &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="javascript">              reject(xhr.status)</span><br><span class="javascript">            &#125;</span><br><span class="javascript">          &#125;</span><br><span class="javascript">        &#125;;</span><br><span class="javascript">      &#125;)</span><br><span class="javascript"></span><br><span class="javascript">      p.then(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(data)</span><br><span class="javascript">      &#125;, <span class="hljs-function">(<span class="hljs-params">statusCode</span>) =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.warn(statusCode)</span><br><span class="javascript">      &#125;)</span><br><span class="javascript">    &#125;)()</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="3-转化为Promise风格-promisify"><a href="#3-转化为Promise风格-promisify" class="headerlink" title="3. 转化为Promise风格(promisify)"></a>3. 转化为Promise风格(promisify)</h2><p>**util.promisify()**：传入一个遵循常见的错误优先的回调风格的函数(即以<code> (err, value) =&gt; &#123;...&#125;</code>作为最后一个参数)，并返回Promise版本。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>)<br><span class="hljs-keyword">const</span> &#123; promisify &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;util&#x27;</span>)<br><br><span class="hljs-keyword">let</span> pReadfile = promisify(fs.readFile)  <span class="hljs-comment">// 把callback形式的异步api转化成promise形式的</span><br><br>pReadfile(<span class="hljs-string">&#x27;./resource/content.txt&#x27;</span>)<br>  .then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(value.toString())<br>  &#125;)<br></code></pre></td></tr></table></figure><h2 id="4-Promise属性"><a href="#4-Promise属性" class="headerlink" title="4. Promise属性"></a>4. Promise属性</h2><h3 id="4-1-Promise状态"><a href="#4-1-Promise状态" class="headerlink" title="4.1 Promise状态"></a>4.1 Promise状态</h3><p>实例对象中的一个属性<code> [[PromiseState]]</code>，有三个值</p><ul><li>pending：未决定</li><li>resolved(fulfilled)：成功</li><li>rejected：失败</li></ul><p><strong>Promise的状态改变只有两种可能，且只能改变一次</strong>：</p><ul><li>pending变为resolved</li><li>pending变为rejected</li></ul><p>成功的结果数据一般称为<code> value</code>，失败的结果一般称为<code> reason</code></p><h3 id="4-2-Promise对象的值"><a href="#4-2-Promise对象的值" class="headerlink" title="4.2. Promise对象的值"></a>4.2. Promise对象的值</h3><p>实例对象中的一个属性<code> [[PromiseResult]]</code>，保存着异步任务成功或失败的结果</p><p>只能通过<code>resolve()</code>或<code>reject()</code>对<code> PromiseResult</code>进行修改</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>)<br><br><span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  fs.readFile(<span class="hljs-string">&#x27;./resource/content1.txt&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (err) &#123;<br>      reject(err)<span class="hljs-comment">// 通过reject()设置PromiseResult的值</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      resolve(data)<br>    &#125;<br>  &#125;)<br>&#125;)<br><br>p.then(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<span class="hljs-comment">// 把PromiseResult的值取出来，进行相关操作</span><br>  <span class="hljs-built_in">console</span>.log(value.toString())<br>&#125;, <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(reason)<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="5-Promise工作流程"><a href="#5-Promise工作流程" class="headerlink" title="5. Promise工作流程"></a>5. Promise工作流程</h2><p><img src="https://s2.loli.net/2022/03/05/97yj6Mev2ZS1gBw.png" alt="image-20220226145957472"></p><h2 id="6-Promise-API"><a href="#6-Promise-API" class="headerlink" title="6. Promise API"></a>6. Promise API</h2><h3 id="6-1-构造函数-Promise-excutor"><a href="#6-1-构造函数-Promise-excutor" class="headerlink" title="6.1 构造函数 Promise(excutor)"></a>6.1 构造函数 Promise(excutor)</h3><p><strong>excutor函数</strong>：执行器, <code> (resolve, reject) =&gt; &#123;&#125;</code></p><p><strong>resolve函数</strong>：内部定义成功后调用的函数</p><p><strong>reject函数</strong>：内部定义失败后调用的函数</p><p><strong>构造函数会在Promise立即同步调用，异步操作在执行器中执行</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>)<br>&#125;)<br><br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>)<br><br><span class="hljs-comment">// 先输出1，再输出2</span><br></code></pre></td></tr></table></figure><h3 id="6-2-Promise-prototype-then方法"><a href="#6-2-Promise-prototype-then方法" class="headerlink" title="6.2 Promise.prototype.then方法"></a>6.2 Promise.prototype.then方法</h3><p>语法：<code> promise.then(onResolved, onRejected)</code></p><p><strong>onResolved函数</strong>：成功的回调函数, <code> value =&gt; &#123;&#125;</code></p><p><strong>onRejected函数</strong>：失败的回调函数, <code> reason =&gt; &#123;&#125;</code></p><p><strong>返回新的Promise对象</strong></p><h3 id="6-3-Promise-prototype-catch方法"><a href="#6-3-Promise-prototype-catch方法" class="headerlink" title="6.3 Promise.prototype.catch方法"></a>6.3 Promise.prototype.catch方法</h3><p>**与上面的then()类似，不过只能指定失败的回调函数</p><h3 id="6-4-Promise-resolve方法"><a href="#6-4-Promise-resolve方法" class="headerlink" title="6.4 Promise.resolve方法"></a>6.4 Promise.resolve方法</h3><p>作用：接受一个参数，返回一个成功或失败的Promise对象。能够快速封装一个值，将这个值转化为Promise对象</p><ul><li><p>如果传入的参数是<strong>非Promise类型的对象</strong>，如字符串、数字等，则放回的结果是成功的Promise对象</p></li><li><p>如果传入的参数是<strong>Promise对象</strong>，则参数的结果决定resolve的结果，即参数是成功的Promise对象的话，resolve的结果是成功的，反之是失败的</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> p1 = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">123</span>) <span class="hljs-comment">// Promise &#123; 123 &#125;</span><br><br><span class="hljs-built_in">console</span>.log(p1)<br><br><br><span class="hljs-keyword">const</span> p2 = <span class="hljs-built_in">Promise</span>.resolve(p1) <span class="hljs-comment">// 参数为成功的Promise对象</span><br><br><span class="hljs-built_in">console</span>.log(p2)<br><br><span class="hljs-keyword">const</span> p3 = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123; <span class="hljs-comment">// 参数为失败的Promise对象</span><br>  reject(<span class="hljs-string">&#x27;Error&#x27;</span>)<br>&#125;))<br><br>p3.catch(<span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(reason)<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="6-5-Promise-reject方法"><a href="#6-5-Promise-reject方法" class="headerlink" title="6.5 Promise.reject方法"></a>6.5 Promise.reject方法</h3><p>接受一个参数，返回一个失败的Promise对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> p1 = <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-number">123</span>)<br><span class="hljs-built_in">console</span>.log(p1)<br><br><span class="hljs-keyword">const</span> p2 = <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  resolve(<span class="hljs-string">&#x27;传参为成功的Promise对象&#x27;</span>)<br>&#125;))<br><br><span class="hljs-built_in">console</span>.log(p2)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/2ECksUOuDadvfeg.png" alt="image-20220226153204273"></p><h3 id="6-5-Promise-all方法"><a href="#6-5-Promise-all方法" class="headerlink" title="6.5 Promise.all方法"></a>6.5 Promise.all方法</h3><p>参数：promises，promise的数组</p><p>返回一个新的Promise，当所有的promise都成功才成功，且结果为成功的结果组成的数组；有一个失败就<strong>直接</strong>失败，返回的结果就是失败的那一个的结果</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  resolve(<span class="hljs-string">&#x27;p1: OK&#x27;</span>)<br>&#125;)<br><span class="hljs-keyword">const</span> p2 = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&#x27;p2: OK&#x27;</span>)<br><span class="hljs-keyword">const</span> result1 = <span class="hljs-built_in">Promise</span>.all([p1, p2]) <span class="hljs-comment">// 所有Promise的结果都成功</span><br><span class="hljs-built_in">console</span>.log(result1)<br><br><br><span class="hljs-keyword">const</span> p3 = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&#x27;p3: OK&#x27;</span>)<br><span class="hljs-keyword">const</span> p4 = <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;p4: Err&#x27;</span>)<br><span class="hljs-keyword">const</span> p5 = <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;p5: Err&#x27;</span>)<br><span class="hljs-keyword">const</span> result2 = <span class="hljs-built_in">Promise</span>.all([p3, p4, p5]) <span class="hljs-comment">// 有Promise的结果失败</span><br><span class="hljs-built_in">console</span>.log(result2)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/HxUQCL3VSXhbo2Y.png" alt="image-20220226170629148"></p><p>如果想要捕捉异常，直接链式调用即可</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> p3 = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">&#x27;p3: OK&#x27;</span>)<br><span class="hljs-keyword">const</span> p4 = <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;p4: Err&#x27;</span>)<br><span class="hljs-keyword">const</span> p5 = <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;p5: Err&#x27;</span>)<br><span class="hljs-keyword">const</span> result2 = <span class="hljs-built_in">Promise</span>.all([p3, p4, p5])<br><span class="hljs-built_in">console</span>.log(result2)<br><br>result2.catch(<span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(reason)<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/05/ipGftrdm5kWMVlZ.png" alt="image-20220226170913348"></p><p>Promise.all()传入一个空数组，立即返回成功。</p><br><h3 id="6-6-Promise-race方法"><a href="#6-6-Promise-race方法" class="headerlink" title="6.6 Promise.race方法"></a>6.6 Promise.race方法</h3><p>参数：promises，promise的数组</p><p>返回一个新的Promise，第一个完成的结果是成功则成功，反之则失败</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    resolve(<span class="hljs-string">&#x27;p1: OK&#x27;</span>)<br>  &#125;)<br>&#125;)<br><span class="hljs-keyword">const</span> p2 = <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-string">&#x27;p2: Err&#x27;</span>)<br><span class="hljs-keyword">const</span> result1 = <span class="hljs-built_in">Promise</span>.race([p1, p2])<br><span class="hljs-built_in">console</span>.log(result1) <span class="hljs-comment">// [[PromiseResult]]: &quot;p2: Err&quot;</span><br><br>result1.catch(<span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(reason)<br>&#125;)<br></code></pre></td></tr></table></figure><p>Promise.race()传入空数组不做任何操作</p><br><p>本次学习是视频学习：<a href="https://www.bilibili.com/video/BV1GA411x7z1">尚硅谷Web前端Promise教程从入门到精通</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Promise </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Express(二) ——中间件</title>
      <link href="/2022/03/01/express-2/"/>
      <url>/2022/03/01/express-2/</url>
      
        <content type="html"><![CDATA[<h1 id="Express-二-——中间件"><a href="#Express-二-——中间件" class="headerlink" title="Express(二) ——中间件"></a>Express(二) ——中间件</h1><p>在Express中，中间件是一个可以访问请求对象、响应对象和调用next方法的一个函数。</p><h2 id="1-简单例子-打印请求日志"><a href="#1-简单例子-打印请求日志" class="headerlink" title="1. 简单例子(打印请求日志)"></a>1. 简单例子(打印请求日志)</h2><p>一个 Express 应用，就是由许许多多的中间件来完成的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br><span class="hljs-keyword">const</span> app = express();<br><br>app.use(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`请求日志：<span class="hljs-subst">$&#123;req.method&#125;</span> <span class="hljs-subst">$&#123;req.url&#125;</span> <span class="hljs-subst">$&#123;<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()&#125;</span>`</span>);<br>  next(); <span class="hljs-comment">// 放行</span><br>&#125;)<br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <br>  res.send(<span class="hljs-string">&#x27;get / &#x27;</span>);<br>&#125;)<br><br>app.post(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;post / &#x27;</span>);<br>&#125;)<br><br>app.delete(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;delete /&#x27;</span>)<br>&#125;)<br><br><span class="hljs-keyword">const</span> port = <span class="hljs-number">3000</span>;<br><br>app.listen(port, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`http://localhost:<span class="hljs-subst">$&#123;port&#125;</span>/`</span>);<br>&#125;)<br><br></code></pre></td></tr></table></figure><p>可以发现：任何请求进来都会先打印请求日志，然后才会执行具体的业务处理函数</p><p><img src="https://s2.loli.net/2022/03/01/cmV8f4dyuF3RCn5.png" alt="image-20220209221247946"></p><h2 id="2-中间件的组成"><a href="#2-中间件的组成" class="headerlink" title="2. 中间件的组成"></a>2. 中间件的组成</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">app.use(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;  <span class="hljs-comment">// 其中use可以是get、post等，用于限定请求路径</span><br>    next();<span class="hljs-comment">// 这个例子就是所有请求路径为根路径的请求都会通过这个中间件</span><br>    <span class="hljs-comment">// 如果当前中间件没有结束请求相应周期，则需要通过next()调用下一个中间件，否则，该请求将会被挂起</span><br>&#125;)<br></code></pre></td></tr></table></figure><p><b style="color:red">如果当前中间件没有结束请求相应周期，则需要通过next()调用下一个中间件，否则，该请求将会被挂起</b></p><h2 id="3-中间件功能"><a href="#3-中间件功能" class="headerlink" title="3. 中间件功能"></a>3. 中间件功能</h2><ul><li>执行任何代码</li><li>修改request或response对象</li><li>结束请求响应周期</li><li>调用下一个中间件</li></ul><h2 id="4-中间件分类"><a href="#4-中间件分类" class="headerlink" title="4. 中间件分类"></a>4. 中间件分类</h2><h3 id="4-1-应用程序级别中间件"><a href="#4-1-应用程序级别中间件" class="headerlink" title="4.1 应用程序级别中间件"></a>4.1 应用程序级别中间件</h3><h4 id="4-1-1-不做任何限定的中间件"><a href="#4-1-1-不做任何限定的中间件" class="headerlink" title="4.1.1 不做任何限定的中间件"></a>4.1.1 不做任何限定的中间件</h4><p>即所有请求都会通过该中间件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">app.use(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&#x27;不做任何限定的中间件&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="4-1-2-限定请求路径"><a href="#4-1-2-限定请求路径" class="headerlink" title="4.1.2 限定请求路径"></a>4.1.2 限定请求路径</h4><p>即只有请求路径匹配才会通过该中间件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">app.use(<span class="hljs-string">&#x27;/user/:id&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&#x27;限定请求路径的中间件&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="4-1-3-限定请求方法-请求路径"><a href="#4-1-3-限定请求方法-请求路径" class="headerlink" title="4.1.3 限定请求方法 + 请求路径"></a>4.1.3 限定请求方法 + 请求路径</h4><p>不能只限定请求方法，因为app.get()第一个参数必须</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;限定请求方法 + 请求路径的中间件&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="4-1-4-多个处理函数"><a href="#4-1-4-多个处理函数" class="headerlink" title="4.1.4 多个处理函数"></a>4.1.4 多个处理函数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">app.use(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;第一次处理&#x27;</span>);<br>  next();    <span class="hljs-comment">// 这个next()之后就是第二个处理函数</span><br>&#125;, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;第二次处理&#x27;</span>);<br>  next();    <span class="hljs-comment">// 这个next()之后则是脱离当前处理栈，往后寻找匹配调用</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>也可以通过回调函数数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> first = <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;第一次处理&#x27;</span>);<br>  next();<br>&#125;;<br><br><span class="hljs-keyword">const</span> second = <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;第二次处理&#x27;</span>);<br>  next();<br>&#125;;<br><br>app.use([first, second]);<br></code></pre></td></tr></table></figure><h4 id="4-1-5-多个路由处理函数"><a href="#4-1-5-多个路由处理函数" class="headerlink" title="4.1.5 多个路由处理函数"></a>4.1.5 多个路由处理函数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">app.use(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;第一个路由处理函数&#x27;</span>);<br>  next();   <span class="hljs-comment">// 如果这里是res.end()，那么就会结束响应。第二个路由处理函数就没有机会执行</span><br>&#125;)<br>app.use(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;第二个路由处理函数&#x27;</span>);<br>  res.end();<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="4-1-6-显示一个中间件子堆栈"><a href="#4-1-6-显示一个中间件子堆栈" class="headerlink" title="4.1.6 显示一个中间件子堆栈"></a>4.1.6 显示一个中间件子堆栈</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">app.get(<span class="hljs-string">&#x27;/:id&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (req.params.id === <span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>    next(<span class="hljs-string">&#x27;route&#x27;</span>);  <span class="hljs-comment">// 跳过当前堆栈之后的所有中间件。即不执行后面的处理函数，而是直接去执行后面的路由处理函数</span><br>         <span class="hljs-comment">// (处理函数和路由处理函数看上面的例子)</span><br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    next();<br>  &#125;<br>&#125;, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&#x27;regular&#x27;</span>);<br>&#125;)<br><br>app.get(<span class="hljs-string">&#x27;/:id&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&#x27;special&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><p>上面例子中，动态参数id不为0时，第一个处理函数会调用next()，然后会执行第二个处理函数，然后会收到regular的响应。而当id为0时，会调用next(‘route’)，会跳过当前堆栈之后的所有中间件。即不执行后面的处理函数，而是直接去执行后面的路由处理函数。所以不会打印regular，而是打印special。</p><h3 id="4-2-路由级别中间件"><a href="#4-2-路由级别中间件" class="headerlink" title="4.2 路由级别中间件"></a>4.2 路由级别中间件</h3><p>router.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br><span class="hljs-comment">// 1.创建路由实例</span><br><span class="hljs-keyword">const</span> router = express.Router();<br><br><span class="hljs-comment">// 2. 配置路由</span><br>router.get(<span class="hljs-string">&#x27;/aaa&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;get /aaa&#x27;</span>);<br>&#125;)<br><br>router.post(<span class="hljs-string">&#x27;/bbb&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;post /bbb&#x27;</span>);<br>&#125;)<br><br><span class="hljs-comment">// 3. 导出路由实例</span><br><span class="hljs-built_in">module</span>.exports = router<br><br><span class="hljs-comment">// 4. 将路由挂载(集成)到Express实例应用中(见app.js)</span><br></code></pre></td></tr></table></figure><p>app.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><span class="hljs-keyword">const</span> app = express();<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./router.js&#x27;</span>);<br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;Hello World!&#x27;</span>);<br>&#125;)<br><br><span class="hljs-comment">// 4. 将路由挂载(集成)到Express实例应用中</span><br>app.use(<span class="hljs-string">&#x27;/abc&#x27;</span>, router);<span class="hljs-comment">// 给路由限定访问前缀/abc</span><br><br>app.listen(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:3000/&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/01/2lUS43vHrokDjqp.gif" alt="路由级别中间件"></p><p><strong>链式路由处理程序</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">app.route(<span class="hljs-string">&#x27;/abc&#x27;</span>)<br>  .get(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>    res.send(<span class="hljs-string">&#x27;get&#x27;</span>);<br>  &#125;)<br>  .post(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>    res.send(<span class="hljs-string">&#x27;post&#x27;</span>);<br>  &#125;)<br></code></pre></td></tr></table></figure><h3 id="4-3-错误处理中间件"><a href="#4-3-错误处理中间件" class="headerlink" title="4.3 错误处理中间件"></a>4.3 错误处理中间件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">app.use(<span class="hljs-function">(<span class="hljs-params">err, req, res, next</span>) =&gt;</span> &#123;   <span class="hljs-comment">// 四个参数都要有才是错误处理中间件。如果只有err、req、res，则err实际上是req对象</span><br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;错误: &#x27;</span>, err);<br>  res.status(<span class="hljs-number">500</span>).json(&#123;<br>    <span class="hljs-attr">error</span>: err.message<br>  &#125;)<br>&#125;)<br></code></pre></td></tr></table></figure><p><b style="color: red">四个参数都要有才是错误处理中间件。如果只有err、req、res，则err实际上是req对象</b></p><p>app.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><span class="hljs-keyword">const</span> app = express();<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./router.js&#x27;</span>);<br><br>app.use(router);<br><br>app.use(<span class="hljs-function">(<span class="hljs-params">err, req, res, next</span>) =&gt;</span> &#123;   <span class="hljs-comment">// 四个参数都要有才是错误处理中间件。如果只有err、req、res，则err实际上是req对象</span><br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;错误: &#x27;</span>, err);<br>  res.status(<span class="hljs-number">500</span>).json(&#123;<br>    <span class="hljs-attr">error</span>: err.message<br>  &#125;)<br>&#125;)<br><br>app.listen(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:3000/&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><p>router.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br><span class="hljs-comment">// 1.创建路由实例</span><br><span class="hljs-keyword">const</span> router = express.Router();<br><br><span class="hljs-comment">// 2. 配置路由</span><br>router.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> d = b + <span class="hljs-number">1</span>;<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    next(err);  <span class="hljs-comment">// 跳过所有剩余的无错误处理路由和中间件函数</span><br>  &#125;<br>&#125;)<br><br>router.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;第二个路由处理函数&#x27;</span>);<br>  res.end();<br>&#125;)<br><br><span class="hljs-comment">// 3. 导出路由实例</span><br><span class="hljs-built_in">module</span>.exports = router<br><br><span class="hljs-comment">// 4. 将路由挂载(集成)到Express实例应用中</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/01/Nanp5BT98fPM4Fr.png" alt="image-20220210103104627"></p><h3 id="4-4-内置中间件"><a href="#4-4-内置中间件" class="headerlink" title="4.4 内置中间件"></a>4.4 内置中间件</h3><ul><li>**express.json()**：解析Content-Type为<code> application/json</code>格式的请求体</li><li>**express.urlencoded()**：解析Content-Type为<code> application/x-www-form-urlencoded</code>格式的请求体</li><li>**express.raw()**：解析Content-Type为<code> application/octet-stream</code>格式的请求体</li><li>**express.text()**：解析Content-Type为<code> text/plain</code>格式的请求体</li><li>**express.static()**：托管静态资源文件</li></ul><h3 id="4-5-第三方中间件"><a href="#4-5-第三方中间件" class="headerlink" title="4.5 第三方中间件"></a>4.5 第三方中间件</h3><p><a href="https://www.expressjs.com.cn/resources/middleware.html">Express middleware</a></p><p>使用示例：morgan日志中间件</p><ol><li><p><code> npm install morgan</code></p></li><li><pre><code class="js">const express = require(&#39;express&#39;);const morgan = require(&#39;morgan&#39;);   // 1. 引入const app = express();app.use(morgan(&#39;tiny&#39;));      // 2. 挂载app.get(&#39;/&#39;, (req, res) =&gt; &#123;  res.send(&#39;Hello World!&#39;);&#125;)app.listen(3000, () =&gt; &#123;  console.log(&#39;http://localhost:3000/&#39;);&#125;)</code></pre></li><li><p>每次请求都会打印出请求日志</p><p><img src="https://s2.loli.net/2022/03/01/Ol7QrKS9HZB8Yin.png" alt="image-20220210105212413"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Express </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue3快速入门(二)</title>
      <link href="/2022/03/01/vue3-2/"/>
      <url>/2022/03/01/vue3-2/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue3快速入门-二"><a href="#Vue3快速入门-二" class="headerlink" title="Vue3快速入门(二)"></a>Vue3快速入门(二)</h1><p><a href="https://clz.vercel.app/2022/02/21/vue3-1/">Vue3快速入门(一)</a></p><h2 id="1-父子组件间的数据共享"><a href="#1-父子组件间的数据共享" class="headerlink" title="1. 父子组件间的数据共享"></a>1. 父子组件间的数据共享</h2><h3 id="1-1-props父传子"><a href="#1-1-props父传子" class="headerlink" title="1.1 props父传子"></a>1.1 props父传子</h3><p>子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;&#123;&#123;props.name&#125;&#125;&lt;/h2&gt;<br>  &lt;!-- 可省略prop. --&gt;<br>  &lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;<br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>  const props = defineProps(&#123; // defineProps在&lt;script setup&gt;中可直接使用，无需引入<br>    name: &#123;<br>      type: String,<br>      default: &#x27;&#x27;<br>    &#125;<br>  &#125;)<br><br>  // 也可以用下面数组的形式<br>  // const props = defineProps([&#x27;name&#x27;])  <br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>父组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;Son name=&quot;clz&quot;&gt;&lt;/Son&gt;<br>&lt;/template&gt;<br><br><br>&lt;script setup&gt;<br>  import Son from &#x27;./components/Son.vue&#x27; // 组件自动注册<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/01/lwhcFbBG27vEZQA.png" alt="image-20220301103045960"></p><h3 id="1-2-emit子传父"><a href="#1-2-emit子传父" class="headerlink" title="1.2 emit子传父"></a>1.2 emit子传父</h3><p>子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;子组件数据：&#123;&#123;msg&#125;&#125;&lt;/h2&gt;<br>  &lt;button @click=&quot;send&quot;&gt;发送数据给父组件&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>  const msg = &quot;我是子组件的数据&quot;<br><br>  const emit = defineEmits([&#x27;getMessage&#x27;])<br><br>  const send = (() =&gt; &#123;<br>    emit(&#x27;getMessage&#x27;, msg)<br>  &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>父组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;子组件数据：&#123;&#123;msg&#125;&#125;&lt;/h2&gt;<br>  &lt;button @click=&quot;send&quot;&gt;发送数据给父组件&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>  const msg = &quot;我是子组件的数据&quot;<br><br>  const emit = defineEmits([&#x27;getMessage&#x27;])<br><br>  const send = (() =&gt; &#123;<br>    emit(&#x27;getMessage&#x27;, msg)<br>  &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/01/aEslPySCN5o4GtH.gif" alt="vue3"></p><h3 id="1-3-v-model实现父子互传"><a href="#1-3-v-model实现父子互传" class="headerlink" title="1.3 v-model实现父子互传"></a>1.3 v-model实现父子互传</h3><p>默认情况下，组件上的 <code>v-model</code> 使用 <code>modelValue</code> 作为 prop 和 <code>update:modelValue</code> 作为事件。可以通过向 <code>v-model</code> 传递参数来修改这些默认名称</p><p>子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;姓名：&#123;&#123;modelValue&#125;&#125;&lt;/h2&gt;<br>  &lt;button @click=&quot;changeName&quot;&gt;改名&lt;/button&gt;<br>  &lt;h2&gt;年龄：&#123;&#123;age&#125;&#125;&lt;/h2&gt;<br>  &lt;button @click=&quot;changeAge&quot;&gt;年龄&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>  defineProps(&#123;<br>    modelValue: String,<br>    age: Number<br>  &#125;)<br><br>  const emit = defineEmits([&#x27;update:modelValue&#x27;, &#x27;update:age&#x27;])<br>  const changeName = () =&gt; &#123;<br>    emit(&#x27;update:modelValue&#x27;, &#x27;赤蓝紫&#x27;)<br>  &#125;<br><br>  const changeAge = () =&gt; &#123;<br>    emit(&#x27;update:age&#x27;, 999)<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>父组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;Son v-model=&quot;person.name&quot; v-model:age=&quot;person.age&quot;&gt;&lt;/Son&gt;<br>&lt;/template&gt;<br><br><br>&lt;script setup&gt;<br>  import &#123;<br>    reactive<br>  &#125; from &#x27;vue&#x27;<br><br>  import Son from &#x27;./components/Son.vue&#x27; // 组件自动注册<br><br>  const person = reactive(&#123;<br>    name: &#x27;clz&#x27;,<br>    age: 21<br>  &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/01/L9CNuhbZmwEe1Vi.gif" alt="vue3"></p><h3 id="1-4-子组件ref变量子传父"><a href="#1-4-子组件ref变量子传父" class="headerlink" title="1.4 子组件ref变量子传父"></a>1.4 子组件ref变量子传父</h3><p>子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>  import &#123;<br>    ref,<br>    toRefs<br>  &#125; from &#x27;vue&#x27;<br><br>  export default &#123;<br>    setup() &#123;<br>      const name = ref(&#x27;clz&#x27;)<br>      const changeName = () =&gt; &#123;<br>        name.value = &#x27;赤蓝紫&#x27;<br>      &#125;<br><br>      return &#123;<br>        name,<br>        changeName<br>      &#125;<br>    &#125;<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>父组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;Son ref=&quot;sonRef&quot;&gt;&lt;/Son&gt;<br>&lt;/template&gt;<br><br><br>&lt;script setup&gt;<br>  import &#123;<br>    nextTick,<br>    ref<br>  &#125; from &#x27;vue&#x27;<br><br>  import Son from &#x27;./components/Son.vue&#x27; // 组件自动注册<br><br>  const sonRef = ref(&#x27;sonRef&#x27;)<br><br>  nextTick(() =&gt; &#123;<br>    console.log(sonRef.value.name)<br><br>    setTimeout(() =&gt; &#123;<br>      sonRef.value.changeName()<br>    &#125;, 1000)<br><br>  &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/01/rOU97DXxPIEcKWk.gif" alt="vue3"></p><p>上面会发现用回了setup函数，这是因为需要引入一下<code> defineExpose</code></p><p>首先，变成<code> &lt;script setup&gt;</code>，发现无法得到相同效果，甚至会报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;<br>&lt;/template&gt;<br>&lt;script setup&gt;<br>  import &#123;<br>    ref,<br>    toRefs<br>  &#125; from &#x27;vue&#x27;<br><br>  const name = ref(&#x27;clz&#x27;)<br>  const changeName = () =&gt; &#123;<br>    name.value = &#x27;赤蓝紫&#x27;<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>这是因为，标准组件写法中，子组件的数据都默认隐式暴露给父组件了，而在<code>&lt;script setup&gt;</code>模式下，所有数据只是默认return给template使用而已，不会暴露到组件外，所以父组件无法直接通过挂载ref变量获取子组件的数据。</p><p>可以通过<code> defineExpose</code>将子组件显示暴露出来，父组件才能通过ref变量获取子组件的数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;<br>&lt;/template&gt;<br>&lt;script setup&gt;<br>  import &#123;<br>    ref,<br>    toRefs<br>  &#125; from &#x27;vue&#x27;<br><br>  const name = ref(&#x27;clz&#x27;)<br>  const changeName = () =&gt; &#123;<br>    name.value = &#x27;赤蓝紫&#x27;<br>  &#125;<br><br>  defineExpose(&#123;<br>    name,<br>    changeName<br>  &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h3 id="1-5-provide和inject"><a href="#1-5-provide和inject" class="headerlink" title="1.5 provide和inject"></a>1.5 provide和inject</h3><p>使用<code> provide</code>和<code> inject</code>，无论组件层次结构多深，父组件都可以作为其所有子组件的依赖提供者。</p><p><b style="color: red">父组件通过provide来提供数据，子组件通过inject来使用这些数据</b></p><p>父组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;father&quot;&gt;<br>    &lt;h2&gt;父组件&lt;/h2&gt;<br>    &lt;Son&gt;&lt;/Son&gt;<br>  &lt;/div&gt;<br><br>&lt;/template&gt;<br><br>&lt;script&gt;<br>// 父组件通过provide来提供数据，子组件通过inject来使用这些数据<br><br>import &#123; reactive, toRefs, provide &#125; from &quot;vue&quot;<br>import Son from &quot;./components/Son.vue&quot;<br><br>export default &#123;<br>  name: &quot;App&quot;,<br>  components: &#123;<br>    Son<br>  &#125;,<br><br>  setup() &#123;<br>    let person = reactive(&#123; name: &quot;赤蓝紫&quot;, age: 21 &#125;)<br>    provide(&quot;person&quot;, person) //给自己的后代组件传递数据<br>    return &#123; ...toRefs(person) &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.father &#123;<br>  width: 300px;<br>  height: 300px;<br>  background-color: #666;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;son&quot;&gt;<br>    &lt;h2&gt;子组件&lt;/h2&gt;<br>    &#123;&#123;person&#125;&#125;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123; inject &#125; from &quot;vue&quot;<br><br>export default &#123;<br>  setup() &#123;<br>    let person = inject(&quot;person&quot;)<br>    return &#123; person &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.son &#123;<br>  background-color: #eee;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/21/LBPortQcey89CGa.png" alt="image-20220220131546539"></p><h2 id="2-插槽slot"><a href="#2-插槽slot" class="headerlink" title="2. 插槽slot"></a>2. 插槽slot</h2><p>子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;!-- 匿名插槽 --&gt;<br>  &lt;slot /&gt;<br><br>  &lt;!-- 具名插槽 --&gt;<br>  &lt;slot name=&quot;title&quot; /&gt;<br><br>  &lt;!-- 作用域插槽 --&gt;<br>  &lt;slot name=&quot;footer&quot; :scope=&quot;person&quot; /&gt;<br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>  import &#123;<br>    reactive<br>  &#125; from &#x27;vue&#x27;<br><br>  const person = reactive(&#123;<br>    name: &#x27;clz&#x27;,<br>    age: 21<br>  &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>父组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;Son&gt;<br>    &lt;h2 class=&quot;default&quot;&gt;匿名插槽&lt;/h2&gt;<br><br>    &lt;template #title&gt;<br>      &lt;h2 class=&quot;name&quot;&gt;具名插槽&lt;/h2&gt;<br>      &lt;h2 class=&quot;name&quot;&gt;具名插槽&lt;/h2&gt;<br>    &lt;/template&gt;<br><br>    &lt;template #footer=&quot;&#123; scope &#125;&quot;&gt;<br>      &lt;h2 class=&quot;area&quot;&gt;作用域插槽&lt;/h2&gt;<br>      &lt;footer class=&quot;area&quot;&gt;姓名：&#123;&#123;scope.name&#125;&#125;&lt;/footer&gt;<br>      &lt;footer class=&quot;area&quot;&gt;年龄&#123;&#123;scope.age&#125;&#125;&lt;/footer&gt;<br>    &lt;/template&gt;<br>  &lt;/Son&gt;<br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>  import Son from &#x27;./components/Son.vue&#x27;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>  .default &#123;<br>    color: red;<br>  &#125;<br><br>  .name &#123;<br>    color: blue;<br>  &#125;<br><br>  .area &#123;<br>    color: purple;<br>  &#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/01/sEuYfkAc592HaQG.png" alt="image-20220221002538205"></p><h2 id="3-CSS变量注入"><a href="#3-CSS变量注入" class="headerlink" title="3. CSS变量注入"></a>3. CSS变量注入</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;CLZ&lt;/h2&gt;<br>&lt;/template&gt;<br>&lt;script setup&gt;<br>  import &#123;<br>    ref<br>  &#125; from &#x27;vue&#x27;<br><br>  const color = ref(&#x27;red&#x27;)<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>  h2 &#123;<br>    /* 使用v-bind绑定变量 */<br>    color: v-bind(&#x27;color&#x27;)<br>  &#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h2 id="4-定义组件的name"><a href="#4-定义组件的name" class="headerlink" title="4. 定义组件的name"></a>4. 定义组件的name</h2><p>用单独的<code> &lt;script&gt;</code>块定义即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;CLZ&lt;/h2&gt;<br>&lt;/template&gt;<br>&lt;script setup&gt;<br>  import &#123;<br>    ref<br>  &#125; from &#x27;vue&#x27;<br><br>  const color = ref(&#x27;red&#x27;)<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  export default &#123;<br>    name: &#x27;Test&#x27;<br>  &#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>  h2 &#123;<br>    /* 使用v-bind绑定变量 */<br>    color: v-bind(&#x27;color&#x27;)<br>  &#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/01/S8x2g4jJszlRDfK.png" alt="image-20220221001111236"></p><h2 id="5-Vuex的简单使用"><a href="#5-Vuex的简单使用" class="headerlink" title="5. Vuex的简单使用"></a>5. Vuex的简单使用</h2><p>之前在字节的青训营里，有老师建议不要再学Vuex了，要就学<code> pinia</code>。然后实习要先搞一手老项目，用的就是<code> Vuex</code>，自然还是得学一下的。当然，之后再学一下<code> pinia</code>，看能不能自己悟出来，为什么老师更建议<code> pinia</code></p><h3 id="5-1-介绍"><a href="#5-1-介绍" class="headerlink" title="5.1 介绍"></a>5.1 介绍</h3><p>Vuex 是一个专为 Vue.js 应用程序开发的<strong>状态管理模式 + 库</strong>。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</p><p>状态管理模式：</p><ul><li><strong>状态</strong>：驱动应用的数据源</li><li><strong>视图</strong>：以声明方式将状态映射到视图</li><li><strong>操作</strong>：响应在视图上的用户输入导致的状态变化</li></ul><p><img src="https://s2.loli.net/2022/03/01/JDqct9xvlMngdUC.png" alt="image-20220221220827405"></p><p>但是，当需要<strong>多个组件共享状态时</strong>，单向数据流的简洁性很容易被破坏。因为：</p><ul><li>多个视图依赖于同一状态</li><li>来自不同视图的行为需要变更同一状态</li></ul><p>Vuex就是将组件的共享状态抽离出来，是代码变得更结构化且易维护</p><h3 id="5-2-State和Mutation"><a href="#5-2-State和Mutation" class="headerlink" title="5.2 State和Mutation"></a>5.2 State和Mutation</h3><p><strong>State</strong>：存储共享状态</p><p><strong>Mutation</strong>： 修改状态。更改Vuex的store中的状态的唯一方法是提交 mutation</p><p>store \ index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><br><span class="hljs-keyword">const</span> store = createStore(&#123;<br>  <span class="hljs-function"><span class="hljs-title">state</span>(<span class="hljs-params"></span>)</span> &#123;<span class="hljs-comment">// 存储状态</span><br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">// 或下面的形式，注意：() =&gt; (&#123;&#125;), 右边有括号包住。因为要说明右面是对象形式，而不是函数形式</span><br>  <span class="hljs-comment">// state: () =&gt; (&#123;</span><br>  <span class="hljs-comment">//   count: 0</span><br>  <span class="hljs-comment">// &#125;),</span><br>  <span class="hljs-attr">mutations</span>: &#123;<span class="hljs-comment">//  修改状态。更改Vuex的store中的状态的唯一方法是提交 mutation</span><br>    <span class="hljs-function"><span class="hljs-title">increment</span>(<span class="hljs-params">state</span>)</span> &#123;<br>      state.count++<br>    &#125;<br>  &#125;<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store<br></code></pre></td></tr></table></figure><p>main.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store&#x27;</span><br><br>createApp(App)<br>  .use(store)<br>  .mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure><p>App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;&#123;&#123;store.state.count&#125;&#125;&lt;/h2&gt;<br>  &lt;button @click=&quot;add&quot;&gt;+1&lt;/button&gt;<br>  &lt;h2&gt;---------以下是子组件----------&lt;/h2&gt;<br>  &lt;Son&gt;&lt;/Son&gt;<br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>  import &#123;<br>    useStore<br>  &#125; from &#x27;vuex&#x27;<br><br>  import Son from &#x27;./components/Son.vue&#x27;<br><br>  const store = useStore()// 通过useStore()获取store，类似于useRoute()，之前是通过this.$store<br><br>  const add = () =&gt; &#123;<br>    store.commit(&#x27;increment&#x27;)// 通过store.commit()提交 mutation， 修改状态<br>     <br>    // 可以携带参数，只要mutations下的函数有两个参数，第二个便是携带的参数<br>    // increment(state, n) &#123;<br>    //     state.count += n<br>    // &#125;<br>    // store.commit(&#x27;increment&#x27;, 10)<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>components \ Son.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;&#123;&#123;store.state.count&#125;&#125;&lt;/h2&gt;<br><br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>  import &#123;<br>    useStore<br>  &#125; from &#x27;vuex&#x27;<br><br>  const store = useStore()<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/01/37g2hntF9GQSCz1.gif" alt="vue3"></p><p>又有问题了，不通过<code>store.commit()</code>来修改，而是通过<code> store.state.***</code>来修改，会发现展示的效果不一样，但是呢，实际上存储的状态那边是没有更新的，所以<b style="color: red">状态的修改必须通过<code>mutations</code>下的方法修改</b>。下面就来瞧一瞧是不是真的。</p><p>add方法变化：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> add = <span class="hljs-function">() =&gt;</span> &#123;<br>  store.state.count++<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/01/3NbMzkdTFxnmU5t.gif" alt="vue3"></p><p>可以发现，状态确实没有发生变化，只是视图发生了变化</p><h3 id="5-3-Getter"><a href="#5-3-Getter" class="headerlink" title="5.3 Getter"></a>5.3 Getter</h3><p><strong>Getter</strong>：访问State存储的状态</p><h4 id="5-3-1-通过属性访问"><a href="#5-3-1-通过属性访问" class="headerlink" title="5.3.1 通过属性访问"></a>5.3.1 通过属性访问</h4><p>Getter 会暴露为 <code>store.getters</code> 对象，可以以属性的形式访问这些值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">store.getters.count<br></code></pre></td></tr></table></figure><p>store \ index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><br><span class="hljs-keyword">const</span> store = createStore(&#123;<br>  <span class="hljs-function"><span class="hljs-title">state</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">getters</span>: &#123;<br>    <span class="hljs-attr">count</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> state.count<br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">mutations</span>: &#123;<br>    <span class="hljs-function"><span class="hljs-title">increment</span>(<span class="hljs-params">state</span>)</span> &#123;<br>      state.count++<br>    &#125;<br>  &#125;<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store<br></code></pre></td></tr></table></figure><p>main.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store&#x27;</span><br><br>createApp(App)<br>  .use(store)<br>  .mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure><p>App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>   &lt;!--  注意这里 --&gt;<br>  &lt;h2&gt;&#123;&#123;store.getters.count&#125;&#125;&lt;/h2&gt;<br><br>  &lt;button @click=&quot;add&quot;&gt;+1&lt;/button&gt;<br>  &lt;h2&gt;---------以下是子组件----------&lt;/h2&gt;<br>  &lt;Son&gt;&lt;/Son&gt;<br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>  import &#123;<br>    useStore<br>  &#125; from &#x27;vuex&#x27;<br><br>  import Son from &#x27;./components/Son.vue&#x27;<br><br>  const store = useStore()<br><br>  const add = () =&gt; &#123;<br>    store.commit(&#x27;increment&#x27;)<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>components \ Son.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>   &lt;!--  注意这里 --&gt;<br>  &lt;h2&gt;&#123;&#123;store.getters.count&#125;&#125;&lt;/h2&gt;<br><br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>  import &#123;<br>    useStore<br>  &#125; from &#x27;vuex&#x27;<br><br>  const store = useStore()<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>正常结果，Vue Devtools下也实时更新</p><h4 id="5-3-2-通过方法访问"><a href="#5-3-2-通过方法访问" class="headerlink" title="5.3.2 通过方法访问"></a>5.3.2 通过方法访问</h4><p>通过让 getter 返回一个函数，来实现给 getter 传参。</p><p>如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">getters: &#123;<br>  <span class="hljs-attr">getTodo</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> state.todos.find(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.id === id)<br>  &#125;<br>&#125;,<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/01/D6VOnUgrJkfhNxp.png" alt="image-20220222111921712"></p><p><img src="https://s2.loli.net/2022/03/01/t5ZcqXydFIrPCkU.png" alt="image-20220222111935625"></p><h3 id="5-4-Action"><a href="#5-4-Action" class="headerlink" title="5.4 Action"></a>5.4 Action</h3><p><strong>Action</strong>：Action 类似于 mutation，不同在于：</p><ul><li>Action 提交的是 mutation，而不是直接变更状态。</li><li>Action 可以包含任意异步操作。</li></ul><h4 id="5-4-1-简单使用"><a href="#5-4-1-简单使用" class="headerlink" title="5.4.1 简单使用"></a>5.4.1 简单使用</h4><p>Action 函数接受一个与 store 实例具有相同方法和属性的 context 对象，因此你可以调用 <code>context.commit</code> 提交一个 mutation，或者通过 <code>context.state</code> 和 <code>context.getters</code> 来获取 state 和 getters。</p><p>Action通过<code> store.dispatch</code>方法触发</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">store.dispatch(<span class="hljs-string">&#x27;increment&#x27;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/22/ZIOAYERkWKGybx9.png" alt="image-20220222121825636"></p><h4 id="5-4-2-Action支持异步"><a href="#5-4-2-Action支持异步" class="headerlink" title="5.4.2 Action支持异步"></a>5.4.2 Action支持异步</h4><p>为什么要通过Action提交<code> mutation</code>呢？都直接提交不行吗?</p><p>这是因为<b style="color: red">mutation必须同步执行，而Action不受约束</b></p><p><strong>mutation异步</strong>：在 mutation 中使用异步更新状态，虽然也会使状态正常更新，但是会导致开发者工具有时无法追踪到状态的变化，调试起来就会很困难</p><p><img src="https://s2.loli.net/2022/03/01/9m6Y38f27MPrJhR.png" alt="image-20220222122627684"></p><p><img src="https://s2.loli.net/2022/03/01/bhSdMKfVGTCOY29.gif" alt="vue3"></p><p>视图更新，存储的状态没有实时更新</p><p><strong>action异步</strong>：</p><p><img src="https://s2.loli.net/2022/03/01/fkwUN9mu8yh3Vp1.png" alt="image-20220222123511145"></p><p><img src="https://s2.loli.net/2022/03/01/3sBjHlm9XbI5DQz.gif" alt="vue3"></p><h3 id="5-5-Module"><a href="#5-5-Module" class="headerlink" title="5.5 Module"></a>5.5 Module</h3><p><strong>Module</strong>：Vuex允许将store分割成**模块(module)**。每个模块拥有自己的<code> state</code>、<code> mutation</code>、<code> getter</code>、<code> action</code>，以及嵌套子模块</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> moduleA = &#123;<br>  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> (&#123;<br>    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span><br>  &#125;),<br>  <span class="hljs-attr">mutations</span>: &#123;<br>    <span class="hljs-function"><span class="hljs-title">increment</span>(<span class="hljs-params">state</span>)</span> &#123;<br>      <span class="hljs-comment">// 这里的 `state` 对象是模块的局部状态</span><br>      state.count++<br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">getters</span>: &#123; ... &#125;,<br>  <span class="hljs-attr">actions</span>: &#123;<br>    <span class="hljs-comment">// 对于模块内部的 action，局部状态通过 context.state 暴露出来，根节点状态则为 context.rootState：</span><br>    <span class="hljs-function"><span class="hljs-title">add</span>(<span class="hljs-params">&#123; state, commit, rootState &#125;</span>)</span> &#123;<br>      <span class="hljs-built_in">console</span>.log(state.count)<br>      <span class="hljs-built_in">console</span>.log(rootState.count)<br><br>      commit(<span class="hljs-string">&#x27;increment&#x27;</span>)<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> moduleB = &#123;<br>  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> (&#123; ... &#125;),<br>  <span class="hljs-attr">mutations</span>: &#123; ... &#125;,<br>  <span class="hljs-attr">actions</span>: &#123; ... &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> store = createStore(&#123;<br>  <span class="hljs-attr">modules</span>: &#123;<br>    <span class="hljs-attr">a</span>: moduleA,<br>    <span class="hljs-attr">b</span>: moduleB<br>  &#125;<br>&#125;)<br><br>store.state.a <span class="hljs-comment">// -&gt; moduleA 的状态</span><br>store.state.b <span class="hljs-comment">// -&gt; moduleB 的状态</span><br></code></pre></td></tr></table></figure><h4 id="5-2-1-示例"><a href="#5-2-1-示例" class="headerlink" title="5.2.1 示例"></a>5.2.1 示例</h4><p>store \ module \ user.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> user = &#123;<br>  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> (&#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;clz&#x27;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">21</span><br>  &#125;),<br>  <span class="hljs-attr">mutations</span>: &#123;<br>    <span class="hljs-function"><span class="hljs-title">increment</span>(<span class="hljs-params">state</span>)</span> &#123;<br>      state.age++<br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">getters</span>: &#123;<br>    <span class="hljs-function"><span class="hljs-title">doubleAge</span>(<span class="hljs-params">state</span>)</span> &#123;<br>      <span class="hljs-keyword">return</span> state.age * <span class="hljs-number">2</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">actions</span>: &#123;<br>    <span class="hljs-function"><span class="hljs-title">add</span>(<span class="hljs-params">&#123; state, commit, rootState &#125;</span>)</span> &#123;<br>      <span class="hljs-built_in">console</span>.log(state.name)<br>      <span class="hljs-built_in">console</span>.log(rootState.number)<br><br>      commit(<span class="hljs-string">&#x27;increment&#x27;</span>)<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> user<br></code></pre></td></tr></table></figure><p>store \ index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><br><span class="hljs-keyword">import</span> user <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./module/user&#x27;</span><br><br><span class="hljs-keyword">const</span> store = createStore(&#123;<br>  <span class="hljs-function"><span class="hljs-title">state</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">number</span>: <span class="hljs-number">10</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">modules</span>: &#123;<br>    <span class="hljs-attr">user</span>: user<br>  &#125;<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store<br></code></pre></td></tr></table></figure><p>App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;姓名: &#123;&#123; user.name &#125;&#125;&lt;/h2&gt;<br>  &lt;h2&gt;年龄: &#123;&#123; user.age &#125;&#125;&lt;/h2&gt;<br>  &lt;button @click=&quot;add&quot;&gt;年龄+1&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script setup&gt;<br>import &#123;<br>  useStore<br>&#125; from &#x27;vuex&#x27;<br><br>const store = useStore()<br>const user = store.state.user<br><br>const add = () =&gt; &#123;<br>  store.dispatch(&#x27;add&#x27;)<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>main.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store/index&#x27;</span><br><br>createApp(App)<br>  .use(store)<br>  .mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/01/9aPoUXI8mztfeSO.png" alt="image-20220222211011517"></p><p><strong>学习参考链接</strong>：<a href="https://juejin.cn/post/7006108454028836895">Vue3.2 setup语法糖、Composition API归纳总结</a></p><p><a href="https://vuex.vuejs.org/zh/">Vuex</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Vue3 </tag>
            
            <tag> Vuex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RESTful接口设计规范</title>
      <link href="/2022/02/28/RESTful/"/>
      <url>/2022/02/28/RESTful/</url>
      
        <content type="html"><![CDATA[<h1 id="RESTful接口设计规范"><a href="#RESTful接口设计规范" class="headerlink" title="RESTful接口设计规范"></a>RESTful接口设计规范</h1><ul><li><p><strong>协议</strong>：API与用户的通信协议，尽量使用HTTPS</p></li><li><p><strong>域名</strong>：尽量将API部署在专用域名下，如<code> https://api.example.com</code>。如果API很简单，不会有进一步的扩展，则可以放在主域名下，如<code> https://example.com/api/</code></p></li><li><p><strong>版本</strong>：将API的版本号放到URL中，如<code> https://api.example.com/v1/</code>。或将版本号放在HTTP头信息中。</p></li><li><p><strong>路径</strong>：在RESTful架构中，每个网址代表一种资源，即网址中不能有动词，只能有名词，而且使用的名词一般和数据库的表格名对应。如<code>  https://api.example.com/v1/users</code></p></li><li><p><strong>HTTP动词</strong>：资源的具体操作类型</p><ul><li>GET(读取)：从服务器读取资源</li><li>POST(创建)：在服务器新建资源</li><li>PUT(完整更新)：在服务器更新资源(客户端提供改变后的完整资源，包括不改变的属性)</li><li>PATCH(部分更新)：在服务器更新资源(客户端提供改变的属性)</li><li>DELETE(删除)：从服务器删除资源</li></ul><p>不常用的两个：</p><ul><li><p>HEAD：获取资源的元数据(和GET类似，只是没有响应体)</p></li><li><p>OPTIONS：获取信息(关于资源的哪些属性是客户端可以改变的</p></li></ul><p><img src="https://s2.loli.net/2022/02/28/IJUrwTfCnqXvF89.png" alt="image-20220210134816272"></p></li><li><p><strong>过滤信息</strong>：如果记录数量很多，API应该提供参数，过滤返回结果。</p><p>常见参数：</p><ul><li>?limit=10：指定返回记录的数量</li><li>?offset=10：指定返回记录的开始位置</li><li>?page=2$per_page=50：指定第几页，以及每页的记录数</li><li>?sortby=name&amp;order=asc：指定返回结果按哪个属性排序，以及排序是升序还是降序</li><li>?id=1：指定筛选条件</li></ul></li><li><p><strong>状态码</strong>：客户端的每一次请求，服务器都应该给出响应。响应包括HTTP状态码和数据两部分</p></li><li><p><strong>返回结果</strong>：API返回的数据格式，不应该是纯文本，而应该是JSON对象，这样才可以放回标准的格式化数据。服务器回应的HTTP头部的<code> Content-Type</code>属性也应该设为<code> application/json</code></p><p><img src="https://s2.loli.net/2022/02/28/vDzmrRVoL3Wajsf.png" alt="image-20220210135856605"></p></li><li><p><strong>错误处理</strong>：状态码反应发生的错误，具体的错误信息放在数据体中</p><p><img src="https://s2.loli.net/2022/02/28/CFru1mcIayXP8Nl.png" alt="image-20220210140039430"></p></li><li><p><strong>身份认证</strong>：例如基于JWT的接口权限认证</p><ul><li>字段名：<code> Authorization</code></li><li>字段值：<code> Bearer token数据</code></li></ul></li><li><p><strong>跨端处理</strong>：在服务端设置CORS以允许客户端跨域资源请求</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode刷题(一)</title>
      <link href="/2022/02/28/leetcode-1/"/>
      <url>/2022/02/28/leetcode-1/</url>
      
        <content type="html"><![CDATA[<h1 id="LeetCode刷题-一"><a href="#LeetCode刷题-一" class="headerlink" title="LeetCode刷题(一)"></a>LeetCode刷题(一)</h1><p>LeetCode刷题，提升算法能力(dddd)</p><h2 id="两数之和"><a href="#两数之和" class="headerlink" title="两数之和"></a>两数之和</h2><p><a href="https://leetcode-cn.com/problems/two-sum/">两数之和</a></p><p>初级版本( 时间复杂度<code>O(n2)</code> )</p><p>没什么要在意的，就是有种情况：nums=[3, 4, 5]， target=6，所以需要限制两次的下标不能相同</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> twoSum = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, target</span>) </span>&#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; nums.length &amp;&amp; i !== j; j++) &#123;<br>      <span class="hljs-keyword">if</span> (nums[i] + nums[j] === target) &#123;<br>        <span class="hljs-keyword">return</span> [i, j]<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>进阶版本</strong>(时间复杂度小于 <code>O(n2)</code> )：</p><p>利用map，把之前出现过的数字，以及下标存储起来，只需要遍历一次，如果有出现过符合条件的，直接返回结果，没有则继续存，继续遍历。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> twoSum = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, target</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> map = &#123;&#125;    <span class="hljs-comment">// 用来存出现过的数字，其中键是出现过的数字，值是数组下标</span><br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">let</span> result = target - nums[i]<br>    <span class="hljs-keyword">if</span> (map[result] !== <span class="hljs-literal">undefined</span>) &#123;    <span class="hljs-comment">// 之前有出现过符合条件的</span><br>      <span class="hljs-keyword">return</span> [map[result], i]<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      map[nums[i]] = i<br>    &#125;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="回文数"><a href="#回文数" class="headerlink" title="回文数"></a>回文数</h2><p><a href="https://leetcode-cn.com/problems/palindrome-number/">回文数</a></p><p>初级版本：转化成字符串再判断</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isPalindrome = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> str = x.toString()    <span class="hljs-comment">// 转换成字符串</span><br>  <span class="hljs-keyword">let</span> reverseStr = str.split(<span class="hljs-string">&#x27;&#x27;</span>).reverse().join(<span class="hljs-string">&#x27;&#x27;</span>)   <span class="hljs-comment">// 先转换成数组，反转后再变回字符串</span><br><br>  <span class="hljs-keyword">if</span> (str === reverseStr) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>  &#125;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>进阶版本</strong>：</p><ul><li><p>定义一个除数div，主要用于获取首位。</p></li><li><p>循环遍历div每次乘以10，直到x / div &gt;= 10</p><ul><li>例如，x=1234，要获取首位，那么就需要先得到1000，然后通过1234 / 1000（整除），就能获取首位</li></ul></li><li><p>通过循环，一直获取首尾，直到符合条件，或x===0,即是回文数后退出循环</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isPalindrome = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">0</span>) &#123;<span class="hljs-comment">// 小于0直接返回</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>  &#125;<br><br>  <span class="hljs-keyword">let</span> div = <span class="hljs-number">1</span><br>  <span class="hljs-keyword">while</span> (x / div &gt;= <span class="hljs-number">10</span>) &#123;<br>    div *= <span class="hljs-number">10</span>         <span class="hljs-comment">// 用于x / div来获取第一位</span><br>  &#125;<br><br>  <span class="hljs-keyword">while</span> (x &gt; <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-keyword">let</span> left = <span class="hljs-built_in">Number</span>.parseInt(x / div) <span class="hljs-comment">// 获取第一位</span><br>    <span class="hljs-keyword">let</span> right = x % <span class="hljs-number">10</span><span class="hljs-comment">// 获取最后一位</span><br>    <span class="hljs-keyword">if</span> (left !== right) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<br><br>    x = <span class="hljs-built_in">Number</span>.parseInt((x % div) / <span class="hljs-number">10</span>)    <span class="hljs-comment">// 新的x去掉已经符合条件的首尾</span><br>    div = <span class="hljs-built_in">Number</span>.parseInt(div / <span class="hljs-number">100</span>)  <span class="hljs-comment">// 新的x变化了，对应的div也要变化，除以100是因为x去掉了首尾</span><br>  &#125;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="罗马数字转整数"><a href="#罗马数字转整数" class="headerlink" title="罗马数字转整数"></a>罗马数字转整数</h2><p><a href="https://leetcode-cn.com/problems/roman-to-integer/">罗马数字转整数</a></p><p>手动建一个map，键是罗马数字，值是对应的整数，遍历一遍，遇到特殊情况，如IX，则减，否则加</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> romanToInt = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> luoma = &#123;<br>    <span class="hljs-string">&#x27;I&#x27;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&#x27;V&#x27;</span>: <span class="hljs-number">5</span>,<br>    <span class="hljs-string">&#x27;X&#x27;</span>: <span class="hljs-number">10</span>,<br>    <span class="hljs-string">&#x27;L&#x27;</span>: <span class="hljs-number">50</span>,<br>    <span class="hljs-string">&#x27;C&#x27;</span>: <span class="hljs-number">100</span>,<br>    <span class="hljs-string">&#x27;D&#x27;</span>: <span class="hljs-number">500</span>,<br>    <span class="hljs-string">&#x27;M&#x27;</span>: <span class="hljs-number">1000</span><br>  &#125;<br><br>  <span class="hljs-keyword">let</span> fin = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">let</span> len = s.length<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>    <span class="hljs-keyword">let</span> left = luoma[s[i]]<br>    <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span> &lt; len &amp;&amp; left &lt; luoma[s[i + <span class="hljs-number">1</span>]]) &#123;<br>      fin -= left     <span class="hljs-comment">// 特殊情况是减</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      fin += left<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> fin<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="最长公共前缀"><a href="#最长公共前缀" class="headerlink" title="最长公共前缀"></a>最长公共前缀</h2><p><a href="https://leetcode-cn.com/problems/longest-common-prefix/">最长公共前缀</a></p><p>解法较弱：通过两个循环，第一层循环获取字符串，第二层循环获取字符，而公共前缀一开始默认是第一个字符串，通过循环遍历，得到最长公共前缀</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> longestCommonPrefix = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">strs</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> common = strs[<span class="hljs-number">0</span>]<br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; strs.length; i++) &#123;<br>    common = common.slice(<span class="hljs-number">0</span>, strs[i].length)    <span class="hljs-comment">// 用于排除第一个字符串较长，后面的字符串较短的情况</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; strs[i].length; j++) &#123;<br>      <span class="hljs-keyword">if</span> (common[j] !== strs[i][j]) &#123;<br>        common = common.slice(<span class="hljs-number">0</span>, j)<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> common<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="有效的括号"><a href="#有效的括号" class="headerlink" title="有效的括号"></a>有效的括号</h2><p><a href="https://leetcode-cn.com/problems/valid-parentheses/">有效的括号</a>：先建立一个对象和一个空栈，键是右括号，值是左括号，然后遍历字符串。如果是左括号，则入栈。如果是右括号，则判断与栈顶括号是否是一对，是则出栈，否则直接返回false，因为没有成功匹配。遍历完之后，如果栈不为空，即没有完全匹配，返回false。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isValid = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> arr = []<br>  <span class="hljs-keyword">let</span> len = s.length<br>  <span class="hljs-keyword">let</span> pair = &#123;<br>    <span class="hljs-string">&#x27;)&#x27;</span>: <span class="hljs-string">&#x27;(&#x27;</span>,<br>    <span class="hljs-string">&#x27;]&#x27;</span>: <span class="hljs-string">&#x27;[&#x27;</span>,<br>    <span class="hljs-string">&#x27;&#125;&#x27;</span>: <span class="hljs-string">&#x27;&#123;&#x27;</span><br>  &#125;<br><br>  <span class="hljs-keyword">if</span> (len % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>  &#125;<br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; s.length; i++) &#123;<br>    <span class="hljs-keyword">if</span> (s[i] === <span class="hljs-string">&quot;(&quot;</span> || s[i] === <span class="hljs-string">&#x27;[&#x27;</span> || s[i] === <span class="hljs-string">&#x27;&#123;&#x27;</span>) &#123;<br>      arr.push(s[i])<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">if</span> (pair[s[i]] === arr[arr.length - <span class="hljs-number">1</span>]) &#123;<br>        arr.pop()<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>      &#125;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">if</span> (arr.length === <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>  &#125;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="实现strStr"><a href="#实现strStr" class="headerlink" title="实现strStr"></a>实现strStr</h2><p><a href="https://leetcode-cn.com/problems/implement-strstr/">实现strStr</a></p><p>暴力解法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> strStr = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">haystack, needle</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> hLen = haystack.length<br>  <span class="hljs-keyword">let</span> nLen = needle.length<br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i + nLen &lt;= hLen; i++) &#123;<span class="hljs-comment">// 不需要考虑后面的长度不够匹配需要的情况</span><br>    <span class="hljs-keyword">let</span> flag = <span class="hljs-literal">true</span>               <span class="hljs-comment">// 每一次从新的地方开始匹配，都需要重置flag为true</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; nLen; j++) &#123;<br>      <span class="hljs-keyword">if</span> (haystack[i + j] !== needle[j]) &#123;    <span class="hljs-comment">// 不匹配，直至跳出循环，并置flag为false</span><br>        flag = <span class="hljs-literal">false</span><br>        <span class="hljs-keyword">break</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (flag) &#123;<br>      <span class="hljs-keyword">return</span> i<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>uni-app开发和常规Vue开发</title>
      <link href="/2022/02/24/uniapp-vue/"/>
      <url>/2022/02/24/uniapp-vue/</url>
      
        <content type="html"><![CDATA[<h1 id="uni-app开发和常规Vue开发"><a href="#uni-app开发和常规Vue开发" class="headerlink" title="uni-app开发和常规Vue开发"></a>uni-app开发和常规Vue开发</h1><p><code>uni-app</code> 是一个使用 <a href="https://vuejs.org/">Vue.js</a> 开发所有前端应用的框架，开发一次，可以发行为App、小程序、网站，</p><p>常规Web开发只能发行为网站。</p><h2 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h2><ul><li><p>Vue中的div标签对应于uni-app是view</p></li><li><p>Vue中的span标签对应于uni-app中是text</p></li></ul><h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p><b style="color: red">uni-app中有三种类型的生命周期，应用生命周期、页面生命周期、组件生命周期</b></p><h3 id="应用生命周期"><a href="#应用生命周期" class="headerlink" title="应用生命周期"></a>应用生命周期</h3><p><strong>应用生命周期只在<code> App.vue</code>中有效</strong></p><p><code> uni-app</code>支持以下生命周期函数（部分）</p><table><thead><tr><th>函数名</th><th>说明</th></tr></thead><tbody><tr><td>onLaunch</td><td>当<code> uni-app</code>初始化完成时触发（全局只触发一次）</td></tr><tr><td>onShow</td><td>当<code> uni-app</code>启动时，或从后台进入前台时显示</td></tr><tr><td>onHide</td><td>当<code> uni-app</code>从前台进入后台</td></tr><tr><td>onError</td><td>当<code> uni-app</code>报错时触发</td></tr></tbody></table><p>app.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script&gt;<br>export default &#123;<br>onLaunch: function() &#123;<br>console.log(&#x27;App Launch&#x27;)<br>&#125;,<br>onShow: function() &#123;<br>console.log(&#x27;App Show&#x27;)<br>&#125;,<br>onHide: function() &#123;<br>console.log(&#x27;App Hide&#x27;)<br>&#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>/*每个页面公共css */<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><h3 id="页面生命周期"><a href="#页面生命周期" class="headerlink" title="页面生命周期"></a>页面生命周期</h3><p><a href="https://uniapp.dcloud.net.cn/collocation/frame/lifecycle?id=page">页面生命周期</a></p><h3 id="组件生命周期"><a href="#组件生命周期" class="headerlink" title="组件生命周期"></a>组件生命周期</h3><p><a href="https://clz.vercel.app/2021/10/08/vue-2/#toc-heading-9">Vue组件生命周期</a></p><p><code>uni-app</code> 组件支持的生命周期，与vue标准组件的生命周期相同</p><p><img src="https://s2.loli.net/2022/02/25/HDmvkn6If12ZPcx.png" alt="image-20220224165359762"></p><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><h3 id="uni-app"><a href="#uni-app" class="headerlink" title="uni-app"></a>uni-app</h3><p><code>uni-app</code>页面路由为框架统一管理，开发者需要在<a href="https://uniapp.dcloud.net.cn/collocation/pages?id=pages">pages.json</a>里配置每个路由页面的路径及页面样式。</p><p>新建页面时，会在<code> pages.json</code>中自动生成路由</p><p>pages.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;pages&quot;</span>: [ <span class="hljs-comment">//pages数组中第一项表示应用启动页，参考：https://uniapp.dcloud.io/collocation/pages</span><br>&#123;<br><span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;pages/index/index&quot;</span>,<br><span class="hljs-attr">&quot;style&quot;</span>: &#123;<br><span class="hljs-attr">&quot;navigationBarTitleText&quot;</span>: <span class="hljs-string">&quot;uni-app&quot;</span><br>&#125;<br>&#125;<br>        ,&#123;<br>            <span class="hljs-attr">&quot;path&quot;</span> : <span class="hljs-string">&quot;pages/login/login&quot;</span>,<br>            <span class="hljs-attr">&quot;style&quot;</span> :                                                                                    <br>            &#123;<br>                <span class="hljs-attr">&quot;navigationBarTitleText&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                <span class="hljs-attr">&quot;enablePullDownRefresh&quot;</span>: <span class="hljs-literal">false</span><br>            &#125;<br>            <br>        &#125;<br>    ]<br></code></pre></td></tr></table></figure><p><strong><code>uni-app</code> 有两种页面路由跳转方式：使用<a href="https://uniapp.dcloud.net.cn/component/navigator">navigator</a>组件跳转、调用<a href="https://uniapp.dcloud.net.cn/api/router">API</a>跳转。</strong></p><ul><li><p>使用<a href="https://uniapp.dcloud.net.cn/component/navigator">navigator</a>组件跳转</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">navigator</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;link&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">navigator</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>调用<a href="https://uniapp.dcloud.net.cn/api/router">API</a>跳转</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">uni.navigateTo(&#123;<br><span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/pages/login/login&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure></li></ul><p>pages \ index.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;view class=&quot;index&quot;&gt;<br>&lt;text class=&quot;text&quot;&gt;首页&lt;/text&gt; <br>&lt;button class=&quot;btn&quot; @click=&quot;login&quot;&gt;登录&lt;/button&gt;<br>&lt;/view&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>methods: &#123;<br>login() &#123;<br>uni.navigateTo(&#123;<br>url: &#x27;/pages/login/login&#x27;<br>&#125;)<br>&#125;<br>&#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot; scoped&gt;<br>.index &#123;<br>text-align: center;<br><br>.btn &#123;<br>width: 100px;<br>height: 50px;<br>&#125;<br>&#125;<br><br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p>pages \ login \ login.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;view class=&quot;login&quot;&gt;<br>login<br>&lt;navigator url=&quot;/&quot; class=&quot;link&quot;&gt;首页&lt;/navigator&gt;<br>&lt;/view&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>data() &#123;<br>return &#123;<br><br>&#125;<br>&#125;,<br>methods: &#123;<br><br>&#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>.login &#123;<br>text-align: center;<br>&#125;<br>.link &#123;<br>color: blue;<br>&#125;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/25/amgiZdwJkLOhrS4.gif" alt="uniapp"></p><p>插一嘴：HBuilderX感觉挺人性化的，缺少的插件保存时会自动帮你安装</p><p><img src="https://s2.loli.net/2022/02/25/zWogary5BFfTLnq.png" alt="image-20220224161236235"></p><h3 id="Vue路由"><a href="#Vue路由" class="headerlink" title="Vue路由"></a>Vue路由</h3><p><a href="https://clz.vercel.app/2021/10/15/vue-3/#toc-heading-9">Vue路由</a></p><p>相对uni-app的路由设置来说，Vue的路由配置稍稍麻烦一点，先安装vue-router，再建router文件夹，设置路由规则，并导出路由给Vue使用。详情点击上面的链接</p><p>Vue3相对于Vue2,也有所变化：<a href="https://clz.vercel.app/2022/02/21/vue3-1/#toc-heading-15">Vue3路由</a></p><h2 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h2><p>通过安装<code> uni-simple-router</code>插件，实现路由守卫功能</p><p><strong>安装</strong>：<code> npm install uni-simple-router</code></p><p><strong>文档</strong>：<a href="https://hhyang.cn/">uni-simple-router</a></p><p>使用：<a href="https://hhyang.cn/v2/start/quickstart.html">快速上手</a></p><h2 id="页面之间传值"><a href="#页面之间传值" class="headerlink" title="页面之间传值"></a>页面之间传值</h2><h3 id="通过查询参数"><a href="#通过查询参数" class="headerlink" title="通过查询参数"></a>通过查询参数</h3><p><strong>首页</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;view class=&quot;index&quot;&gt;<br>首页<br>&lt;navigator :url=&quot;&#x27;/pages/login/login?msg=&#x27;+msg&quot; class=&quot;login&quot;&gt;登录&lt;/navigator&gt;<br>&lt;/view&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>data() &#123;<br>return &#123;<br>msg: &#x27;Hello, login Pages&#x27;<br>&#125;<br>&#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot; scoped&gt;<br>.index &#123;<br>width: 500px;<br>text-align: center;<br>margin: 20px auto;<br>&#125;<br>.login &#123;<br>color: blue;<br>&#125;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p><strong>登录页</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;view class=&quot;login&quot;&gt;<br>&lt;h2&gt;登录&lt;/h2&gt;<br>首页发送的信息: &#123;&#123;msg&#125;&#125;<br>&lt;/view&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>data() &#123;<br>return &#123;<br>msg: &#x27;&#x27;<br>&#125;<br>&#125;,<br>methods: &#123;<br><br>&#125;,<br>onLoad(options) &#123;// 其参数为上个页面传递的数据，参数类型为 Object（用于页面传参）<br>this.msg = options.msg<br>&#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.login &#123;<br>text-align: center;<br>width: 300px;<br>margin: 20px auto;<br>&#125;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/25/LMoHn8hr4meK3BC.png" alt="image-20220225104643142"></p><p><b style="color: red">以下部分，uni-app和常规Vue开发一样，属于是复习内容</b></p><h2 id="父子组件传值"><a href="#父子组件传值" class="headerlink" title="父子组件传值"></a>父子组件传值</h2><p>和Vue一样，顺便复习一下</p><p><a href="https://clz.vercel.app/2021/10/08/vue-2/#toc-heading-21">Vue组件间的数据共享</a></p><h3 id="父传子-props"><a href="#父传子-props" class="headerlink" title="父传子(props)"></a>父传子(props)</h3><p>子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;view class=&quot;son&quot;&gt;<br>子组件: 父组件发送的信息:&#123;&#123;msg&#125;&#125;<br>&lt;/view&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>name:&quot;Son&quot;,<br>props: &#123;<br>msg: &#123;<br>type: String,<br>default: &#x27;&#x27;<br>&#125;<br>&#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.son &#123;<br>width: 300px;<br>height: 150px;<br>line-height: 150px;<br>background-color: pink;<br>margin: 20px auto;<br>&#125;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p>父组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;view class=&quot;index&quot;&gt;<br>&lt;text class=&quot;text&quot;&gt;父组件: &#123;&#123;msg&#125;&#125;&lt;/text&gt; <br>&lt;Son :msg=&quot;msg&quot;&gt;&lt;/Son&gt;<br>&lt;/view&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import Son from &#x27;../../components/Son.vue&#x27;<br>export default &#123;<br>components: &#123;<br>Son<br>&#125;,<br>data() &#123;<br>return &#123;<br>msg: &#x27;Hello, Son&#x27;<br>&#125;<br>&#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot; scoped&gt;<br>.index &#123;<br>width: 500px;<br>height: 250px;<br>text-align: center;<br>background-color: skyblue;<br>margin: 0 auto;<br>&#125;<br><br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/25/iwh4M7AxaVQBTPg.png" alt="image-20220224181528797"></p><h3 id="子传父-emit"><a href="#子传父-emit" class="headerlink" title="子传父(emit)"></a>子传父(emit)</h3><p>子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;view class=&quot;son&quot;&gt;<br>子组件: &#123;&#123;msg&#125;&#125;<br>&lt;button @click=&quot;sendMsg&quot;&gt;发送信息给父组件&lt;/button&gt;<br>&lt;/view&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>name:&quot;Son&quot;,<br>data() &#123;<br>return &#123;<br>msg: &#x27;Hello Father&#x27;<br>&#125;<br>&#125;,<br>methods: &#123;<br>sendMsg() &#123;<br>this.$emit(&#x27;getMsg&#x27;, this.msg)<br>&#125;<br>&#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.son &#123;<br>width: 300px;<br>height: 150px;<br>line-height: 150px;<br>background-color: pink;<br>margin: 20px auto;<br>&#125;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p>父组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;view class=&quot;index&quot;&gt;<br>&lt;text class=&quot;text&quot;&gt;父组件: 子组件发送的信息: &#123;&#123;msg&#125;&#125;&lt;/text&gt; <br>&lt;Son @getMsg=&quot;getMsg&quot;&gt;&lt;/Son&gt;<br>&lt;/view&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import Son from &#x27;../../components/Son.vue&#x27;<br>export default &#123;<br>components: &#123;<br>Son<br>&#125;,<br>data() &#123;<br>return &#123;<br>msg: &#x27;&#x27;<br>&#125;<br>&#125;,<br>methods: &#123;<br>getMsg(msg) &#123;<br>this.msg = msg<br>&#125;<br>&#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot; scoped&gt;<br>.index &#123;<br>width: 500px;<br>height: 250px;<br>text-align: center;<br>background-color: skyblue;<br>margin: 0 auto;<br>&#125;<br><br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/25/fwIDAingrLjJKcu.gif" alt="uniapp"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>右键打开VScode</title>
      <link href="/2022/02/21/open-with-vscode/"/>
      <url>/2022/02/21/open-with-vscode/</url>
      
        <content type="html"><![CDATA[<h1 id="右键打开VScode"><a href="#右键打开VScode" class="headerlink" title="右键打开VScode"></a>右键打开VScode</h1><h2 id="右键打开文件"><a href="#右键打开文件" class="headerlink" title="右键打开文件"></a>右键打开文件</h2><ol><li><p><code> win + R</code>，输入<code> regedit</code>，打开注册表编辑器</p></li><li><p>在<code> HKEY_CLASSES_ROOT \ * \ shell</code>下新建项<code> VSCode</code></p></li><li><p>在<code> VSCode</code>下新建项<code> command</code></p><p><img src="https://s2.loli.net/2022/02/21/YMrKETtlfQXkcRs.png" alt="image-20220221211953677"></p></li><li><p>点击<code> command</code>项，双击右边的<code> (默认)</code>，数值数据变为VSCode的安装路径 + “%1”</p><p><img src="https://s2.loli.net/2022/02/21/dvuhkpO2tYjHyJQ.png" alt="image-20220221212426269"></p></li><li><p>点击<code> VSCode</code>项，双击右边的<code> (默认)</code>，数值数据变为你想要的提示信息，如<code> Open with Code</code></p></li><li><p>在<code> VSCode</code>下新建<code> 可扩充字符串值</code>，命名为<code> Icon</code>，更改数值数据为VSCode的安装路径</p><p><img src="https://s2.loli.net/2022/02/21/BmC2pDZLawGPRn7.png" alt="image-20220221213111724"></p></li></ol><h2 id="右键打开文件夹"><a href="#右键打开文件夹" class="headerlink" title="右键打开文件夹"></a>右键打开文件夹</h2><p>同理，就是位置不一样而已，在<code> HKEY_CLASSES_ROOT\Directory\shell</code>下</p><p><img src="https://s2.loli.net/2022/02/21/hIrp9VEPWwsuizZ.png" alt="image-20220221213828789"></p><p>另外，<code> command</code>项的数据数值后的参数<code> &quot;%1&quot;</code>变为<code> &quot;%V&quot;</code></p><h2 id="右键文件夹空白处，打开文件夹"><a href="#右键文件夹空白处，打开文件夹" class="headerlink" title="右键文件夹空白处，打开文件夹"></a>右键文件夹空白处，打开文件夹</h2><p>同理，就是位置不一样而已，在<code> HKEY_CLASSES_ROOT\Directory\Background\shell</code>下</p><p><img src="https://s2.loli.net/2022/02/21/uKi2AJ7Z1moXwHv.png" alt="image-20220221214201643"></p><p>另外，<code> command</code>项的数据数值后的参数也是<code> &quot;%V&quot;</code></p><p>其实，有个快捷方法的，我之前就是跟着网上的教程一次操作，三个都配置好了，只不过我忘记了，也没记下来，又没收藏，真是悔不当初啊。知道的人可以说一下。</p>]]></content>
      
      
      <categories>
          
          <category> 小技能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VSCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue3快速入门(一)</title>
      <link href="/2022/02/21/vue3-1/"/>
      <url>/2022/02/21/vue3-1/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue3快速入门-一"><a href="#Vue3快速入门-一" class="headerlink" title="Vue3快速入门(一)"></a>Vue3快速入门(一)</h1><p>实习进入公司后，简单安装vscode、node、git等必备工具后，导师直接问有没有学过vue3，说了只学过vue2后，就给我分享了两篇文章，以及让我查看文档，快速从vue2加速到vue3。本文将参考到很多文章、文档，部分借用的可能没有备注出来，侵权请联系。(不过就算是参考，例子我很多按自己的理解弄成自己以后看更容易理解的了，虽然也差不了多少)</p><p>顺带附上以前的笔记：<a href="https://clz.vercel.app/tags/Vue/">Vue2</a></p><h2 id="1-构建项目"><a href="#1-构建项目" class="headerlink" title="1. 构建项目"></a>1. 构建项目</h2><p>开始的第一步，当然就是构建项目啦。这里就有一个重大的区别了，vue3使用web开发构建工具<a href="https://clz.vercel.app/">vite</a>，而不是webpack</p><p>vite优点：</p><ul><li>无需打包，快速的冷服务器启动</li><li>HMR(热更新)</li><li>按需编译</li></ul><p>另外，vite开启的服务器端口默认是3000，而不是8080</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm init vite@latest<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> 使用yarn</span><br>yarn create vite<br></code></pre></td></tr></table></figure><p>按需选择</p><p><img src="https://s2.loli.net/2022/03/02/ZRuVP9eHDmi4Wqs.png" alt="image-20220219154708582"></p><p><b style="color: red">项目启动的方式不再是<code> npm run serve</code>了，而是<code> npm run dev</code></b></p><p><img src="https://s2.loli.net/2022/02/21/j4pBO5MFQqJnV89.png" alt="image-20220219155029403"></p><h2 id="2-入口文件变化"><a href="#2-入口文件变化" class="headerlink" title="2. 入口文件变化"></a>2. 入口文件变化</h2><p><strong>Vue2</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><br>Vue.config.productionTip = <span class="hljs-literal">false</span><br><br><span class="hljs-keyword">new</span> Vue(&#123;<br>  router,<br>  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> h(App),<br>&#125;).$mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br><br></code></pre></td></tr></table></figure><p><strong>Vue3</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><br>createApp(App)<br>  .use(router)<br>  .mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure><p>Vue3引入的不再是Vue构造函数，而是<code> createApp</code>工厂函数。</p><h2 id="3-组合式API"><a href="#3-组合式API" class="headerlink" title="3. 组合式API"></a>3. 组合式API</h2><h3 id="3-1-set-up"><a href="#3-1-set-up" class="headerlink" title="3.1 set up"></a>3.1 set up</h3><p>setup函数是Composition API(组合API)的入口</p><p><b style="color: red">在setup函数中定义的变量和方法需要return出去，才能在模板中使用</b></p><p>实际上和vue2类似，只不过在vue2中数据在data函数中，方法在methods节点中，而vue3则是”更有人情味了”，和原生js更相似，数据和方法就是普通的变量和方法，只需要return出去，就能在模板中使用。</p><p><strong>Vue3</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;button @click=&quot;alertName&quot;&gt;alert name&lt;/button&gt;<br>  &lt;p&gt;<br>    &#123;&#123; nickname &#125;&#125;<br>  &lt;/p&gt;<br>&lt;/template&gt;<br><br><br>&lt;script&gt;<br>export default &#123;<br>  name: &quot;App&quot;,<br><br>  setup() &#123;<br>    let nickname = &quot;赤蓝紫&quot;<br><br>    function alertName() &#123;<br>      alert(`我是$&#123;nickname&#125;`)<br>    &#125;<br><br>    return &#123;<br>      nickname,<br>      alertName<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br><br><br></code></pre></td></tr></table></figure><p><b style="color: red">template里不再必须要一个唯一的根标签了</b>，这个改进个人感觉很舒服。查了一下资料，发现是虽然看似没有根节点，但是只是vue3的根节点是一个虚拟节点，不会映射到一个具体节点。因为一棵树必须有一个根节点，所以使用虚拟节点作为根节点非常有用。</p><p><strong>Vue2</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div id=&quot;app&quot;&gt;<br>    &lt;button @click=&quot;alertName&quot;&gt;alert nickname&lt;/button&gt;<br>    &lt;p&gt;<br>      &#123;&#123; nickname &#125;&#125;<br>    &lt;/p&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: &quot;App&quot;,<br>  data() &#123;<br>    return &#123;<br>      nickname: &quot;赤蓝紫&quot;<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    alertName() &#123;<br>      alert(`我是$&#123;this.nickname&#125;`)<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><h3 id="3-2-ref"><a href="#3-2-ref" class="headerlink" title="3.2 ref"></a>3.2 ref</h3><p>先看一下，下面这个例子</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;button @click=&quot;changeName&quot;&gt;change name&lt;/button&gt;<br>  &lt;p&gt;<br>    &#123;&#123; nickname &#125;&#125;<br>  &lt;/p&gt;<br>&lt;/template&gt;<br><br><br>&lt;script&gt;<br>export default &#123;<br>  name: &quot;App&quot;,<br>  setup() &#123;<br>    let nickname = &quot;赤蓝紫&quot;<br><br>    function changeName() &#123;<br>      nickname = &quot;clz&quot;<br>      console.log(nickname)<br>    &#125;<br><br>    return &#123;<br>      nickname,<br>      changeName<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>点击后，发现数据改变了，但是p标签中的名字却没变，难道是vue的<strong>数据驱动视图</strong>失效了。</p><p>当然，并不是，只是vue3中多出了响应式数据和普通数据的区别，只有响应式数据才能驱动视图的改变。而上面的nickname只是字符串，不是响应式数据，试图自然也不会发生改变。</p><p>而将字符串变成响应式数据也非常简单，只需要引入并使用<code> ref</code>即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;button @click=&quot;changeName&quot;&gt;change name&lt;/button&gt;<br>  &lt;p&gt;<br>    &#123;&#123; nickname &#125;&#125;<br>  &lt;/p&gt;<br>&lt;/template&gt;<br><br><br>&lt;script&gt;<br>import &#123; ref &#125; from &quot;vue&quot;<br><br>export default &#123;<br>  name: &quot;App&quot;,<br>  setup() &#123;<br>    let nickname = ref(&quot;赤蓝紫&quot;)<br><br>    function changeName() &#123;<br>      nickname = &quot;clz&quot;<br>      console.log(nickname)<br>    &#125;<br><br>    return &#123;<br>      nickname,<br>      changeName<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>然而，还是不行，这是为什么呢？原因就是ref把nickname变成RefImpl的实例对象了，修改的时候要<code> .value</code>去修改，底层还是用的get和set去操作。</p><p>把上面changeName方法中的<code> nickname = &quot;clz&quot;</code>注释掉后，再点击按钮，就能知道变成RefImpl的实例对象了</p><p><img src="https://s2.loli.net/2022/02/21/NbxsXdIfng37UDA.png" alt="image-20220219171513259"></p><p>最终版本：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;button @click=&quot;changeName&quot;&gt;change name&lt;/button&gt;<br>  &lt;p&gt;<br>    &#123;&#123; nickname &#125;&#125;<br>  &lt;/p&gt;<br>&lt;/template&gt;<br><br><br>&lt;script&gt;<br>import &#123; ref &#125; from &quot;vue&quot;<br><br>export default &#123;<br>  name: &quot;App&quot;,<br>  setup() &#123;<br>    let nickname = ref(&quot;赤蓝紫&quot;)<br><br>    function changeName() &#123;<br>      nickname.value = &quot;clz&quot;<br>      // console.log(nickname)<br>    &#125;<br><br>    return &#123;<br>      nickname,<br>      changeName<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>修改要用<code> .value</code>来修改，为什么显示时不用<code> &#123;&#123; nickname.value &#125;&#125;</code>来显示呢？这是因为vue3检测到是ref对象后，直接给你nickname.value了（还挺人性化）</p><h3 id="3-3-reactive"><a href="#3-3-reactive" class="headerlink" title="3.3 reactive"></a>3.3 reactive</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;button @click=&quot;changeName&quot;&gt;change name&lt;/button&gt;<br>  &lt;p&gt;<br>    name: &#123;&#123; people.name &#125;&#125;<br>  &lt;/p&gt;<br>  &lt;p&gt;<br>    age: &#123;&#123; people.age &#125;&#125;<br>  &lt;/p&gt;<br>&lt;/template&gt;<br><br><br>&lt;script&gt;<br>import &#123; ref &#125; from &quot;vue&quot;<br><br>export default &#123;<br>  name: &quot;App&quot;,<br>  setup() &#123;<br>    let people = ref(&#123;<br>      name: &quot;赤蓝紫&quot;,<br>      age: 21<br>    &#125;)<br><br>    function changeName() &#123;<br>      people.value.name = &quot;clz&quot;<br>    &#125;<br><br>    return &#123;<br>      people,<br>      changeName<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>乍一看和上面的ref中一样，但是实际上如果是将对象类型转换成响应式数据是应该使用函数<code> reactive</code>的，只是如果ref中是对象的话，会自动调用<code> reactive</code>而已。打印<code> people.value</code>可以发现不再是<code> RefImpl</code>对象了，而是<code> Proxy</code>对象。</p><p><img src="https://s2.loli.net/2022/02/21/MRLKGiglNEsDhjf.png" alt="image-20220219173758962"></p><ul><li>基本数据类型：根据<code> Object.defineProperty</code>里的<code> get</code>和<code> set</code>进行数据劫持来实现响应式</li><li>对象类型：通过<code> Proxy</code>来实现响应式</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;button @click=&quot;changeName&quot;&gt;change name&lt;/button&gt;<br>  &lt;p&gt;<br>    name: &#123;&#123; people.name &#125;&#125;<br>  &lt;/p&gt;<br>  &lt;p&gt;<br>    age: &#123;&#123; people.age &#125;&#125;<br>  &lt;/p&gt;<br>  &lt;p&gt;hobby: &#123;&#123;hobbys[0]&#125;&#125;, &#123;&#123;hobbys[1]&#125;&#125;&lt;/p&gt;<br>&lt;/template&gt;<br><br><br>&lt;script&gt;<br>import &#123; reactive &#125; from &quot;vue&quot;<br><br>export default &#123;<br>  name: &quot;App&quot;,<br>  setup() &#123;<br>    let people = reactive(&#123;<br>      name: &quot;赤蓝紫&quot;,<br>      age: 21<br>    &#125;)<br>    let hobbys = reactive([&quot;音乐&quot;, &quot;动漫&quot;])<br>    // let hobbys = [&quot;音乐&quot;, &quot;动漫&quot;]<br><br>    function changeName() &#123;<br>      people.name = &quot;clz&quot;<br>      hobbys[0] = &quot;学习&quot;<br>    &#125;<br><br>    return &#123;<br>      people,<br>      changeName,<br>      hobbys<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>上面有个问题：<b style="color: red">数组形式的不通过reactive()转换成响应式也是响应式数据</b>，暂不知道原因</p><p>也可以按vue2中data的形式来写</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;button @click=&quot;changeName&quot;&gt;change name&lt;/button&gt;<br>  &lt;p&gt;<br>    name: &#123;&#123; data.people.name &#125;&#125;<br>  &lt;/p&gt;<br>  &lt;p&gt;<br>    age: &#123;&#123; data.people.age &#125;&#125;<br>  &lt;/p&gt;<br>  &lt;p&gt;hobby: &#123;&#123;data.hobbys[0]&#125;&#125;, &#123;&#123;data.hobbys[1]&#125;&#125;&lt;/p&gt;<br>&lt;/template&gt;<br><br><br>&lt;script&gt;<br>import &#123; reactive &#125; from &quot;vue&quot;<br><br>export default &#123;<br>  name: &quot;App&quot;,<br>  setup() &#123;<br>    let data = reactive(&#123;<br>      people: &#123;<br>        name: &quot;赤蓝紫&quot;,<br>        age: 21<br>      &#125;,<br>      hobbys: [&quot;音乐&quot;, &quot;动漫&quot;]<br>    &#125;)<br><br>    function changeName() &#123;<br>      data.people.name = &quot;clz&quot;<br>      data.hobbys[0] = &quot;学习&quot;<br>    &#125;<br><br>    return &#123;<br>      data,<br>      changeName<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p><strong>ref和reactive的区别</strong>：</p><table><thead><tr><th align="center">ref</th><th align="center">reactive</th></tr></thead><tbody><tr><td align="center">定义<strong>基本类型数据</strong></td><td align="center">定义<strong>对象或数组类型数据</strong></td></tr><tr><td align="center">通过<code> Object.defineProperty()</code>的<code> get</code>和<code> set</code>来实现响应式(数据劫持)</td><td align="center">通过<code> Proxy</code>实现响应式(数据劫持)，通过<code> Reflect</code>操作源代码内部数据</td></tr><tr><td align="center">操作数据需要<code> .value</code>，读取不需要</td><td align="center">操作个读取数据都不需要<code> .value</code></td></tr></tbody></table><h3 id="3-3-computed"><a href="#3-3-computed" class="headerlink" title="3.3 computed"></a>3.3 computed</h3><p>计算属性，和vue2差不多</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  r: &lt;input type=&quot;text&quot; v-model.number=&quot;color.r&quot;&gt;&lt;br&gt;<br>  g: &lt;input type=&quot;text&quot; v-model.number=&quot;color.g&quot;&gt;&lt;br&gt;<br>  b: &lt;input type=&quot;text&quot; v-model.number=&quot;color.b&quot;&gt;&lt;br&gt;<br>  rgb: &lt;input type=&quot;text&quot; v-model=&quot;color.rgb&quot; :style=&quot;&#123;color: color.rgb&#125;&quot;&gt;<br>&lt;/template&gt;<br><br><br>&lt;script&gt;<br>import &#123; reactive, computed &#125; from &quot;vue&quot;<br><br>export default &#123;<br>  name: &quot;App&quot;,<br>  setup() &#123;<br>    let color = reactive(&#123;<br>      r: 255,<br>      g: 0,<br>      b: 0<br>    &#125;)<br><br>    color.rgb = computed(() =&gt; &#123;<br>      return `rgb($&#123;color.r&#125;, $&#123;color.g&#125;, $&#123;color.b&#125;)`<br>    &#125;)<br><br>    return &#123;<br>      color<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p>如果修改计算出来的东西，会报警告，因为计算属性是只读属性</p><p><img src="https://s2.loli.net/2022/02/21/kGNxTC5dpZ19M3A.png" alt="image-20220219200708560"></p><p>实现可修改：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  r: &lt;input type=&quot;text&quot; v-model=&quot;color.r&quot;&gt;&lt;br&gt;<br>  g: &lt;input type=&quot;text&quot; v-model=&quot;color.g&quot;&gt;&lt;br&gt;<br>  b: &lt;input type=&quot;text&quot; v-model=&quot;color.b&quot;&gt;&lt;br&gt;<br>  rgb: &lt;input type=&quot;text&quot; v-model=&quot;color.rgb&quot; :style=&quot;&#123;color: color.rgb&#125;&quot;&gt;<br>&lt;/template&gt;<br><br><br>&lt;script&gt;<br>import &#123; reactive, computed &#125; from &quot;vue&quot;<br><br>export default &#123;<br>  name: &quot;App&quot;,<br>  setup() &#123;<br>    let color = reactive(&#123;<br>      r: 255,<br>      g: 0,<br>      b: 0<br>    &#125;)<br><br>    color.rgb = computed(&#123;<br>      get() &#123;<br>        console.log(color.r)<br>        return `rgb($&#123;color.r&#125;,$&#123;color.g&#125;,$&#123;color.b&#125;)`<br>      &#125;,<br>      set(value) &#123;<br>        let rgbList = value.split(&quot;,&quot;)<br>        color.r = rgbList[0].slice(4)<br>        color.g = rgbList[1]<br>        color.b = rgbList[2].slice(0, -1)<br>      &#125;<br>    &#125;)<br><br>    return &#123;<br>      color<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p><b style="color: red">实现计算属性可修改的关键</b>：computed()参数为一个对象，对象中有一个get方法用来获取值，set方法用来修改值</p><h3 id="3-4-watch"><a href="#3-4-watch" class="headerlink" title="3.4 watch"></a>3.4 watch</h3><p>监听器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;home&quot;&gt;<br>    &lt;h1&gt;当前数字为：&#123;&#123;num&#125;&#125;&lt;/h1&gt;<br>    &lt;button @click=&quot;num++&quot;&gt;+1&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123; ref, watch &#125; from &quot;vue&quot;<br><br>export default &#123;<br>  name: &quot;Home&quot;,<br>  setup() &#123;<br>    let num = ref(0)<br>    watch(<br>      num, // 如果想监听多个数据，则第一个参数是要监听的数据数组，其中newValue、oldValue也是数组，第一个元素就是监听的第一个参数<br>      (newValue, oldValue) =&gt; &#123;<br>        console.log(`数字增加了，现在的值$&#123;newValue&#125;, 原值$&#123;oldValue&#125;`)<br>      &#125;<br>      // &#123;<br>      //   immediate: true,<br>      //   deep: true<br>      // &#125; // 第三个参数就是选项设置，可设置立即监听、深度监听<br>    )<br><br>    return &#123;<br>      num<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;home&quot;&gt;<br>    &lt;h1&gt;age:&#123;&#123;people.age&#125;&#125;&lt;/h1&gt;<br>    &lt;button @click=&quot;people.age++&quot;&gt;年龄加1&lt;/button&gt;<br>    &lt;h1&gt;salary:&#123;&#123;people.job.salary&#125;&#125;&lt;/h1&gt;<br>    &lt;button @click=&quot;people.job.salary+=100&quot;&gt;薪水加100&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123; reactive, watch &#125; from &quot;vue&quot;<br>export default &#123;<br>  name: &quot;Home&quot;,<br>  setup() &#123;<br>    let people = reactive(&#123;<br>      name: &quot;赤蓝紫&quot;,<br>      age: 21,<br>      job: &#123;<br>        salary: -10<br>      &#125;<br>    &#125;)<br>    watch(<br>      people,<br>      (newValue, oldValue) =&gt; &#123;<br>        console.log(`信息改变了`, newValue, oldValue) // 直接监听reactive所定义的一个响应式数据，会出现oldValue也是更新后的值，且默认开启深度监听，还无法关闭<br>      &#125;,<br>      &#123;<br>        deep: false<br>      &#125;<br>    )<br><br>    // 监听reactive所定义的一个响应式数据中的某个属性<br>    // 如果是对象还需要开启深度监听，才能监听到变化。<br>    // 或者变为监听people.job.salary(直接手动直接指出最终的目标)<br>    // watch(<br>    //   () =&gt; people.job,<br>    //   (newValue, oldValue) =&gt; &#123;<br>    //     console.log(`工作信息改变了`, newValue, oldValue)<br>    //   &#125;,<br>    //   &#123;<br>    //     deep: true<br>    //   &#125;<br>    // )<br><br>    return &#123;<br>      people<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/21/ZBVr5nihTLOuwmp.png" alt="image-20220219220716205"></p><p><b style="color: red">如果监听器用来监听reactive定义的响应式数据，那么无法获取到旧数据，而且默认开启深度监听，无法关闭深度监听</b></p><p><strong>watchEffect</strong>：</p><ul><li>默认开启了立即更新(<code>immediate: true</code>)</li><li>用到谁就监听谁</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;home&quot;&gt;<br>    &lt;h1&gt;age:&#123;&#123;people.age&#125;&#125;&lt;/h1&gt;<br>    &lt;button @click=&quot;people.age++&quot;&gt;年龄加1&lt;/button&gt;<br>    &lt;h1&gt;salary:&#123;&#123;people.job.salary&#125;&#125;&lt;/h1&gt;<br>    &lt;button @click=&quot;people.job.salary+=100&quot;&gt;薪水加100&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123; reactive, watchEffect &#125; from &quot;vue&quot;<br>export default &#123;<br>  name: &quot;Home&quot;,<br>  setup() &#123;<br>    let people = reactive(&#123;<br>      name: &quot;赤蓝紫&quot;,<br>      age: 21,<br>      job: &#123;<br>        salary: -10<br>      &#125;<br>    &#125;)<br>    watchEffect(() =&gt; &#123;<br>      const salary = people.job.salary<br>      console.log(&quot;工资变更&quot;)<br>    &#125;)<br><br>    return &#123;<br>      people<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h3 id="3-5-生命周期钩子"><a href="#3-5-生命周期钩子" class="headerlink" title="3.5 生命周期钩子"></a>3.5 生命周期钩子</h3><p><img src="https://s2.loli.net/2022/02/21/ecLryuxfdEZmqhM.png" alt="image-20220219223623431"></p><p>vue3中，<strong>beforeDestroy</strong>改为<strong>beforeUnmount</strong>，<strong>destroyed</strong>改为<strong>unmounte</strong></p><p><b style="color: red">beforeCreate和created没有API，因为setup实际上就相当于这两个生命周期函数</b></p><p>使用示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;&#123;&#123;num&#125;&#125;&lt;/h2&gt;<br>  &lt;button @click=&quot;num++&quot;&gt;+1&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123; onMounted, onUpdated &#125; from &quot;vue&quot;<br>import &#123; ref &#125; from &quot;vue&quot;<br><br>export default &#123;<br>  name: &quot;Home&quot;,<br>  setup() &#123;<br>    onMounted(() =&gt; &#123;<br>      console.log(&quot;onMounted&quot;)<br>    &#125;),<br>      onUpdated(() =&gt; &#123;<br>        console.log(&quot;数据更新啦&quot;)<br>      &#125;)<br><br>    let num = ref(0)<br><br>    return &#123;<br>      num<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h3 id="3-6-toRef和toRefs"><a href="#3-6-toRef和toRefs" class="headerlink" title="3.6 toRef和toRefs"></a>3.6 toRef和toRefs</h3><p>toRef就是把数据变成ref类型的数据，<code> toRefs</code>就是将多个数转换成响应式数据</p><p>先引用一下之前的例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;home&quot;&gt;<br>    &lt;h1&gt;age:&#123;&#123;people.age&#125;&#125;&lt;/h1&gt;<br>    &lt;button @click=&quot;people.age++&quot;&gt;年龄加1&lt;/button&gt;<br>    &lt;h1&gt;salary:&#123;&#123;people.job.salary&#125;&#125;&lt;/h1&gt;<br>    &lt;button @click=&quot;people.job.salary+=100&quot;&gt;薪水加100&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123; reactive, watchEffect &#125; from &quot;vue&quot;<br>export default &#123;<br>  name: &quot;Home&quot;,<br>  setup() &#123;<br>    let people = reactive(&#123;<br>      name: &quot;赤蓝紫&quot;,<br>      age: 21,<br>      job: &#123;<br>        salary: -10<br>      &#125;<br>    &#125;)<br>    watchEffect(() =&gt; &#123;<br>      const salary = people.job.salary<br>      console.log(&quot;工资变更&quot;)<br>    &#125;)<br><br>    return &#123;<br>      people<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>仔细观察，可以发现<code> template</code>中，使用了很多次<code> people.</code>，于是想偷一下懒,return的时候耍点小聪明</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-attr">age</span>: people.age,<br>  <span class="hljs-attr">salary</span>: people.job.salary<br>&#125;<br></code></pre></td></tr></table></figure><p>哦豁，点击按钮不再能改变数据了，原因就是因为return出去的数据不是响应式，而是number，自然不能改变。验证也很简单，只要在<code> watchEffect()</code>中顺便打印出<code> people.age</code>就行了。</p><p>通过<code> toRef</code>就可以实现自动修改<code> people</code>里的数据，不要忘记引入<code> toRef</code>了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-attr">age</span>: toRef(people, <span class="hljs-string">&#x27;age&#x27;</span>),<br>  <span class="hljs-attr">salary</span>: toRef(people.job, <span class="hljs-string">&#x27;salary&#x27;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>这种时候，有可能会想到使用ref就可以了，即以下形式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-attr">age</span>: ref(people.age),<span class="hljs-comment">// ref()不会改变people里的数据，而toRef可以修改</span><br>  <span class="hljs-attr">salary</span>: ref(people.job.salary)<br>&#125;<br></code></pre></td></tr></table></figure><p>这样子，乍一看，效果确实一样，但是，实际上的数据并没有发现改变，通过监听器就可以发现</p><p><img src="https://s2.loli.net/2022/02/21/CBnTzxYiJtmjEDs.gif" alt="vue3"></p><p>为什么呢？实际上使用ref的话，有类似于new出来一个对象，new出来的对象自然和原来的数据没有什么实质上的联系</p><p>使用<code> toRefs</code>就可以稍微偷一下懒</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">return</span> &#123;<br>  ...toRefs(people), <span class="hljs-comment">// 解构，只能解构一层，所以深层的还是要写</span><br>  ...toRefs(people.job)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-其他改变"><a href="#4-其他改变" class="headerlink" title="4. 其他改变"></a>4. 其他改变</h2><ul><li><p>移除<code> keyCode</code>作为<code> v-on</code>的修饰符</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-on:keyup.13</span>=<span class="hljs-string">&quot;submit&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-on:keyup.enter</span>=<span class="hljs-string">&quot;submit&quot;</span> /&gt;</span><br><br><span class="hljs-comment">&lt;!-- vue2上面两种形式都支持，vue3只支持下面那种，即只能通过按钮别名 --&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>移除<code> native</code>作为<code> v-on</code>的修饰符</p></li><li><p>移除<code> filter</code>过滤器</p></li></ul><p><a href="https://blog.csdn.net/weixin_44869002/category_10771155.html">Vue 3 迁移策略笔记</a></p><h3 id="4-1-refs"><a href="#4-1-refs" class="headerlink" title="4.1 $refs"></a>4.1 $refs</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;button @click=&quot;getValue&quot; ref=&quot;btn&quot;&gt;点击&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123; getCurrentInstance, nextTick, reactive, ref &#125; from &quot;vue&quot;<br><br>export default &#123;<br>  setup() &#123;<br>    const ci = getCurrentInstance()<br>    const &#123; proxy &#125; = getCurrentInstance()<br>    // console.log(getCurrentInstance())    //只有在setup()这一直接块才可以，如果在函数中，则会得到null<br><br>    function getValue() &#123;<br>      console.log(ci.refs.btn)<br>      console.log(proxy.$refs.btn) // 也可以通过proxy.$refs来获取<br>    &#125;<br><br>    return &#123;<br>      getValue<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h3 id="4-2-nextTick"><a href="#4-2-nextTick" class="headerlink" title="4.2 nextTick"></a>4.2 nextTick</h3><p>nextTick()：在下次 DOM 更新循环结束之后执行延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;button @click=&quot;change&quot; ref=&quot;btn&quot;&gt;&#123;&#123;msg&#125;&#125;&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123; getCurrentInstance, nextTick, ref &#125; from &quot;vue&quot;<br><br>export default &#123;<br>  setup() &#123;<br>    let &#123; proxy &#125; = getCurrentInstance()<br><br>    let msg = ref(&quot;Hi&quot;)<br>    function change() &#123;<br>      const btn = proxy.$refs.btn<br>      msg.value = &quot;Hello&quot;<br><br>      console.log(&quot;直接打印:&quot;, btn.innerText)<br><br>      nextTick(() =&gt; &#123;<br>        console.log(&quot;nextTick：&quot;, btn.innerText)<br>      &#125;)<br>    &#125;<br><br>    return &#123;<br>      msg,<br>      change<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><h3 id="4-3-teleport"><a href="#4-3-teleport" class="headerlink" title="4.3 teleport"></a>4.3 teleport</h3><p>使用<code>&lt;teleport&gt;</code>，可以通过<code>to</code>将teleport下的html传送到指定位置(如传送到<code>body</code>中)。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;one&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;two&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">teleport</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;body&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;three&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;four&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">teleport</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;App&quot;</span></span><br><span class="javascript">&#125;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/20/c86uJK35AQOhm2f.png" alt="image-20220220141404043"></p><h3 id="4-4-路由"><a href="#4-4-路由" class="headerlink" title="4.4 路由"></a>4.4 路由</h3><p>app.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;router-view&gt;&lt;/router-view&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br>import &#123; useRoute, useRouter &#125; from &quot;vue-router&quot;<br><br>export default &#123;<br>  setup() &#123;<br>    const route = useRoute()<br>    const router = useRouter()<br><br>    console.log(route.path)<br>    router.push(&quot;/home&quot;)<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>main.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><br>createApp(App)<br>  .use(router)<br>  .mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure><p>router \ index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span><br><br><br><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/home&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;home&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;../components/home.vue&quot;</span>)<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/login&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;login&quot;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;../components/login.vue&quot;</span>)<br>  &#125;<br>]<br><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> createRouter(&#123;<br>  <span class="hljs-attr">history</span>: createWebHashHistory(),<br>  routes<br>&#125;)<br></code></pre></td></tr></table></figure><p><b style="color: red">注意：</b></p><ul><li><p><b style="color: red">在模板中仍然可以访问 <code>$router</code> 和 <code>$route</code>，所以不需要在 <code>setup</code> 中返回 <code>router</code> 或 <code>route</code></b></p></li><li><p>从<code> vue-router</code>中引入的<code>useRoute</code>,<code>useRouter</code>相当于vue2的 <code>this.$route</code>，<code>this.$router</code></p></li><li><p>引入组件时，<strong>必须</strong>加上<code> .vue</code>后缀</p></li></ul><p>编程式导航传参</p><p><strong><code>params</code> 不能与 <code>path</code> 一起使用，而应该使用<code>name</code></strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;router-view&gt;&lt;/router-view&gt;<br>&lt;/template&gt;<br>&lt;script&gt;<br>import &#123; useRoute, useRouter &#125; from &quot;vue-router&quot;<br><br>export default &#123;<br>  setup() &#123;<br>    const route = useRoute()<br>    const router = useRouter()<br><br>    // query编程式导航传参<br>    // router.push(&#123;<br>    //   path: &quot;/home&quot;,<br>    //   query: &#123;<br>    //     id: 666<br>    //   &#125;<br>    // &#125;)<br><br>    // params编程式导航传参<br>    router.push(&#123;<br>      name: &quot;login&quot;,// 需要使用命名路由<br>      params: &#123;<br>        // 路由规则那里也要配成path: &quot;/login/:id&quot;,<br>        id: 666<br>      &#125;<br>    &#125;)<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><h3 id="4-5-导航守卫"><a href="#4-5-导航守卫" class="headerlink" title="4.5 导航守卫"></a>4.5 导航守卫</h3><h4 id="4-5-1-局部导航守卫"><a href="#4-5-1-局部导航守卫" class="headerlink" title="4.5.1 局部导航守卫"></a>4.5.1 局部导航守卫</h4><p>home.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  home<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123; onBeforeRouteLeave &#125; from &quot;vue-router&quot;<br><br>export default &#123;<br>  setup() &#123;<br>    onBeforeRouteLeave((to, from) =&gt; &#123;// 默认可前往，可通过return false禁止前往<br>      console.log(&quot;去&quot;, to)<br>      console.log(&quot;来自&quot;, from)<br>    &#125;)<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h4 id="4-5-2-全局导航守卫"><a href="#4-5-2-全局导航守卫" class="headerlink" title="4.5.2 全局导航守卫"></a>4.5.2 全局导航守卫</h4><p>main.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><br>router.beforeEach(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> &#123; <span class="hljs-comment">// next是可选参数，可写可不写，return false是取消导航，否则意味着通过验证</span><br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;去&#x27;</span>, to)<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;来自&#x27;</span>, <span class="hljs-keyword">from</span>)<br>  <span class="hljs-comment">// return false</span><br>&#125;)<br><br>createApp(App)<br>  .use(router)<br>  .mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="5-法宝-setup语法糖"><a href="#5-法宝-setup语法糖" class="headerlink" title="5. 法宝(setup语法糖)"></a>5. 法宝(setup语法糖)</h2><p><b style="color: red">Vue3.0通过setup()函数，需要把数据和方法return出去才能使用</b>，但是Vue3.2中，只需要在srcipt标签上加上<code> setup</code>属性，这样子就无需return，template就可以直接使用了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;button @click=&quot;alertName&quot;&gt;alert name&lt;/button&gt;<br>  &lt;p&gt;&#123;&#123; nickname &#125;&#125;&lt;/p&gt;<br>&lt;/template&gt;<br><br><br>&lt;script setup&gt;<br>  let nickname = &quot;赤蓝紫&quot;<br><br>  function alertName() &#123;<br>    alert(`我是$&#123;nickname&#125;`)<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>参考：</p><p><a href="https://juejin.cn/post/7030992475271495711">vue3保姆级教程</a></p><p><a href="https://v3.cn.vuejs.org/">官方文档</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git命令——少用但有用</title>
      <link href="/2022/02/19/git-useful/"/>
      <url>/2022/02/19/git-useful/</url>
      
        <content type="html"><![CDATA[<h1 id="git命令——少用但有用"><a href="#git命令——少用但有用" class="headerlink" title="git命令——少用但有用"></a>git命令——少用但有用</h1><p>实习开始了，新环境、新电脑，git添加公钥等操作自然也是需要重新设置，为了避免之后还要查找，自己写一下笔记，方便日后使用。</p><p><a href="https://clz.vercel.app/2021/11/20/git-order/">git常用命令</a></p><p><b style="color: red">以下命令在Git  Bash中执行</b></p><h2 id="1-设置用户名和email"><a href="#1-设置用户名和email" class="headerlink" title="1. 设置用户名和email"></a>1. 设置用户名和email</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">git config --global user.name 用户名<br>git config --global user.email 邮箱<br></code></pre></td></tr></table></figure><h2 id="2-查看用户名和email"><a href="#2-查看用户名和email" class="headerlink" title="2. 查看用户名和email"></a>2. 查看用户名和email</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">git config user.name<br>git config user.email<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> 也可以把所有信息都列出来，再找</span><br>git config --list<br></code></pre></td></tr></table></figure><h2 id="3-配置ssh公私钥"><a href="#3-配置ssh公私钥" class="headerlink" title="3. 配置ssh公私钥"></a>3. 配置ssh公私钥</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh-keygen -o# 要输入的话直接Enter<br>cat ~/.ssh/id_rsa.pub# 查看并复制公钥(复制是手动复制全部)<br></code></pre></td></tr></table></figure><p>github进入<code>setting -&gt; SSH and GPG keys -&gt; New SSH key</code></p><p><img src="https://s2.loli.net/2022/02/18/lbWKsfAohLqZiDz.png" alt="image-20220218231701335"></p><p>输入标题(自定义)以及复制的公钥</p><p>测试</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh -T git@github.com# 不要改成自己的邮箱，弹出提示的话，输入yes，回车<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/19/r6j1N7wcPkaO8gx.png" alt="image-20220218232334720"></p><h2 id="4-清空暂存区"><a href="#4-清空暂存区" class="headerlink" title="4. 清空暂存区"></a>4. 清空暂存区</h2><h3 id="4-1-git-rm-–cached-文件"><a href="#4-1-git-rm-–cached-文件" class="headerlink" title="4.1 git rm –cached  文件"></a>4.1 git rm –cached  文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">git status# 查看暂存区文件<br>git rm --cached 文件# 一次删除，知道空。效率极低<br></code></pre></td></tr></table></figure><h3 id="4-2-rm-git-index"><a href="#4-2-rm-git-index" class="headerlink" title="4.2 rm .git/index"></a>4.2 rm .git/index</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">rm .git/index# 暂存区仅仅是.git目录下的一个index文件,所以只要删除这个文件，就清空暂存区了<br></code></pre></td></tr></table></figure><h3 id="4-2-git-reset"><a href="#4-2-git-reset" class="headerlink" title="4.2 git reset"></a>4.2 git reset</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git reset# 后面什么都不跟<br></code></pre></td></tr></table></figure><h2 id="5-撤销提交"><a href="#5-撤销提交" class="headerlink" title="5. 撤销提交"></a>5. 撤销提交</h2><p>场景：提交完后，发现漏掉文件没有添加，或者提交信息写错了</p><h3 id="5-1-修改提交信息"><a href="#5-1-修改提交信息" class="headerlink" title="5.1 修改提交信息"></a>5.1 修改提交信息</h3><p>现在提交了一次</p><p><img src="https://s2.loli.net/2022/02/19/l5Jr7X3WLiQ9kwE.png" alt="image-20220218235143317"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git commit --amend<br></code></pre></td></tr></table></figure><p>进入类似vim的页面</p><ul><li>输入<code>i</code>，进入编辑模式</li><li>移动光标，修改信息</li><li>esc退出编辑模式</li><li><code>:wq</code>保存</li></ul><p><img src="https://s2.loli.net/2022/02/19/GwLEyRIMX25fJ6H.png" alt="image-20220218235618176"></p><h3 id="5-2-添加漏掉的文件"><a href="#5-2-添加漏掉的文件" class="headerlink" title="5.2 添加漏掉的文件"></a>5.2 添加漏掉的文件</h3><ul><li>直接新增文件</li><li><code> git add .</code></li><li><code> git commit --amend</code>(<b style="color: red">不修改，直接保存</b>)</li><li>提交记录只有一条</li></ul>]]></content>
      
      
      <categories>
          
          <category> 小技能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Express(一) ——简单入门</title>
      <link href="/2022/02/16/express-1/"/>
      <url>/2022/02/16/express-1/</url>
      
        <content type="html"><![CDATA[<h1 id="Express-一-——简单入门"><a href="#Express-一-——简单入门" class="headerlink" title="Express(一) ——简单入门"></a>Express(一) ——简单入门</h1><p>背景：参加的青训营项目，使用Express来实现后端，个人被分配到后端去。于是，简单速通了下Express。项目结束，回头写下笔记，沉淀一下。</p><p>Express是基于 <a href="https://nodejs.org/en/">Node.js</a> 平台，快速、开放、极简的 Web 开发框架。</p><p>开始前可以先安装<a href="https://www.postman.com/">Postman</a>，很好用的<strong>接口测试工具</strong>。</p><h2 id="1-Hello-World"><a href="#1-Hello-World" class="headerlink" title="1. Hello World"></a>1. Hello World</h2><p>首先，安装express到项目中<code> npm i express</code></p><p>然后，开始代码世界。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1. 加载express</span><br><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br><span class="hljs-comment">// 2. 调用express()获取。express()函数是express模块​​导出的顶级函数</span><br><span class="hljs-keyword">const</span> app = express();<br><br><span class="hljs-comment">// 3. 设置请求对应的处理函数。下面的例子中，当客户端以GET方法请求/时就会调用处理函数</span><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;Hello World!&#x27;</span>);<br>&#125;)<br><br><span class="hljs-comment">// 4. 启动web服务</span><br>app.listen(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:8080/&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><p>最后，命令行执行<code> nodemon app.js</code>或<code> node app.js</code>。<code>nodemon</code>支持热更新。</p><p><img src="https://s2.loli.net/2022/02/16/boPURrd42Yap6Cv.png" alt="image-20220207151828081"></p><h2 id="2-路由"><a href="#2-路由" class="headerlink" title="2. 路由"></a>2. 路由</h2><p>路由是指服务器端应用程序如何响应特定端点的客户端请求。由一个URI(路径标识)和一个特定的HTTP方法(GET、POST等)组成的。</p><p>路由的定义结构：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">app.METHOD(PATH, HANDLER);<br></code></pre></td></tr></table></figure><ul><li>app：express实例</li><li>METHOD：是一个HTTP请求方法</li><li>PATH：服务端路径</li><li>HANDLER：当路由匹配到时执行的处理函数。参数：<code> request</code>和<code> response</code>对象分别处理请求和响应数据</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br><span class="hljs-keyword">const</span> app = express();<br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<span class="hljs-comment">// GET请求</span><br>  res.send(<span class="hljs-string">&#x27;Hello World!&#x27;</span>);<br>&#125;)<br><br>app.post(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<span class="hljs-comment">// POST请求</span><br>  res.send(<span class="hljs-string">&#x27;post /&#x27;</span>);<br>&#125;)<br><br>app.put(<span class="hljs-string">&#x27;/user&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<span class="hljs-comment">// PUT请求</span><br>  res.send(<span class="hljs-string">&#x27;put user&#x27;</span>);<br>&#125;)<br><br>app.delete(<span class="hljs-string">&#x27;/user&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123; <span class="hljs-comment">// DELETE请求</span><br>  res.send(<span class="hljs-string">&#x27;delete user&#x27;</span>);<br>&#125;)<br><br>app.listen(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:8080/&#x27;</span>);<br>&#125;)<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/nRrPuxaXsd4gqtb.png" alt="image-20220207161937956"></p><h3 id="2-1-请求对象"><a href="#2-1-请求对象" class="headerlink" title="2.1 请求对象"></a>2.1 请求对象</h3><p>req对象代表HTTP请求。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br><span class="hljs-keyword">const</span> app = express();<br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;请求地址: &quot;</span>, req.url);<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;请求方法: &quot;</span>, req.method);<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;请求头: &quot;</span>, req.headers);<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;请求参数: &quot;</span>, req.query);<br><br>  res.end();  <span class="hljs-comment">// 结束响应。没有的话，客户端会一直等待回应</span><br>&#125;)<br><br>app.listen(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:8080/&#x27;</span>);<br>&#125;)<br><br></code></pre></td></tr></table></figure><p>postman测试用：<a href="http://localhost:8080/?name=clz">http://localhost:8080/?name=clz</a></p><p><img src="https://s2.loli.net/2022/02/16/ESJXsLO63ZnQ4gC.png" alt="image-20220207162928596"></p><h3 id="2-2-响应对象"><a href="#2-2-响应对象" class="headerlink" title="2.2 响应对象"></a>2.2 响应对象</h3><p>res对象表示收到HTTP请求后发送的HTTP响应。</p><h4 id="2-2-1-状态码及状态信息"><a href="#2-2-1-状态码及状态信息" class="headerlink" title="2.2.1 状态码及状态信息"></a>2.2.1 状态码及状态信息</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br><span class="hljs-keyword">const</span> app = express();<br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br><br>  res.statusCode = <span class="hljs-number">404</span>;   <span class="hljs-comment">// 设置响应状态码</span><br>  res.statusMessage = <span class="hljs-string">&quot;test&quot;</span>;    <span class="hljs-comment">// 设置响应状态信息。这里是测试，理论上来说404应该对应Not Found，这样子才有意义</span><br><br>  res.end();  <span class="hljs-comment">// 结束响应</span><br>&#125;)<br><br>app.listen(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:8080/&#x27;</span>);<br>&#125;)<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/QzX3ZEjpxmIRPDS.png" alt="image-20220207163814050"></p><h4 id="2-2-2-发送多段文本"><a href="#2-2-2-发送多段文本" class="headerlink" title="2.2.2 发送多段文本"></a>2.2.2 发送多段文本</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br><span class="hljs-keyword">const</span> app = express();<br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.write(<span class="hljs-string">&#x27;hello &#x27;</span>);<br>  res.write(<span class="hljs-string">&#x27;world&#x27;</span>);   <span class="hljs-comment">// res.write()只是发送数据，还是需要res.end()来结束响应</span><br><br>  <span class="hljs-comment">// res.end(&#x27;hello world&#x27;);   // 结束相应的同时发送数据</span><br><br>  res.end();  <span class="hljs-comment">// 结束响应</span><br>&#125;)<br><br>app.listen(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:8080/&#x27;</span>);<br>&#125;)<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/RSh3NW4JLPxUk5F.png" alt="image-20220207165808608"></p><h4 id="2-2-3-cookie"><a href="#2-2-3-cookie" class="headerlink" title="2.2.3 cookie"></a>2.2.3 cookie</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br><span class="hljs-keyword">const</span> app = express();<br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.cookie(<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;clz&#x27;</span>);  <span class="hljs-comment">// 设置cookie</span><br><br>  res.end();  <span class="hljs-comment">// 结束响应</span><br>&#125;)<br><br>app.listen(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:8080/&#x27;</span>);<br>&#125;)<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/67rI4xtqigCc51a.png" alt="image-20220207164941307"></p><h3 id="2-3-路由路径"><a href="#2-3-路由路径" class="headerlink" title="2.3 路由路径"></a>2.3 路由路径</h3><p>可以使用正则表达式语法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 匹配根路径</span><br>app.get(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&quot;root&quot;</span>);<br>&#125;);<br><br><span class="hljs-comment">// 匹配/abc</span><br>app.get(<span class="hljs-string">&quot;/abc&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&quot;abc&quot;</span>);<br>&#125;);<br><br><span class="hljs-comment">// 匹配/test.text</span><br>app.get(<span class="hljs-string">&quot;/test.text&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&quot;test.text&quot;</span>);<br>&#125;);<br><br><br><br><span class="hljs-comment">// 匹配/acd、/abcd</span><br>app.get(<span class="hljs-string">&quot;/ab?cd&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&quot;ab?cd&quot;</span>);<br>&#125;);<br><br><span class="hljs-comment">// 匹配/abcd、/abxxxxcd</span><br>app.get(<span class="hljs-string">&quot;/ab*cd&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&quot;ab?cd&quot;</span>);<br>&#125;);<br><br><span class="hljs-comment">// 匹配/abe、/abcde</span><br>app.get(<span class="hljs-string">&quot;/ab(cd)?e&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&quot;ab?cd&quot;</span>);<br>&#125;);<br><br><span class="hljs-comment">// 匹配所有包含a</span><br>app.get(<span class="hljs-regexp">/a/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&quot;/a/&quot;</span>);<br>&#125;);<br><br><span class="hljs-comment">// 匹配以fly结尾的，包括/test.fly，/test/aaa/fly等</span><br>app.get(<span class="hljs-regexp">/.*fly$/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&quot;/.*fly$/&quot;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="2-4-动态路径"><a href="#2-4-动态路径" class="headerlink" title="2.4 动态路径"></a>2.4 动态路径</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">app.get(<span class="hljs-string">&quot;/users/:userId/books/:bookId&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(req.params);<br>&#125;);<br><br><br><span class="hljs-comment">// 限制动态参数</span><br>app.get(<span class="hljs-string">&quot;/:a(\\d+)&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(req.params);<br>&#125;);<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/3qNmKThznV87fob.png" alt="image-20220210123301562"></p><h2 id="3-案例"><a href="#3-案例" class="headerlink" title="3. 案例"></a>3. 案例</h2><p>创建一个简单的CRUD接口服务。增加(Create)、读取查询(Retrieve)、更新(Update)和删除(Delete)</p><ul><li>查询任务列表：<code> GET /todos</code></li><li>根据ID查询单个任务：<code>GET /todos/:id</code></li><li>添加任务：<code> POST /todos</code></li><li>修改任务：<code> PATCH /todos</code></li><li>删除任务：<code> DELETE /todos/:id</code></li></ul><h3 id="3-1-路由设计"><a href="#3-1-路由设计" class="headerlink" title="3.1 路由设计"></a>3.1 路由设计</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br><span class="hljs-keyword">const</span> app = express();<br><br><br>app.get(<span class="hljs-string">&#x27;/todos&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;查询任务列表&#x27;</span>);<br>&#125;)<br><br>app.get(<span class="hljs-string">&#x27;/todos/:id&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">`根据ID查询单个任务, id是<span class="hljs-subst">$&#123;req.params.id&#125;</span>`</span>);   <span class="hljs-comment">// 通过req.params.id来获取动态的路径参数id</span><br>&#125;)<br><br>app.post(<span class="hljs-string">&#x27;/todos&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;添加任务&#x27;</span>);<br>&#125;)<br><br>app.patch(<span class="hljs-string">&#x27;/todos/:id&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">`修改任务, id是<span class="hljs-subst">$&#123;req.params.id&#125;</span>`</span>);<br>&#125;)<br><br>app.delete(<span class="hljs-string">&#x27;/todos/:id&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">`删除任务, id是<span class="hljs-subst">$&#123;req.params.id&#125;</span>`</span>);<br>&#125;)<br><br><br>app.listen(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:8080/&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/ZeclNIh5qajyfBV.png" alt="image-20220207172638141"></p><h3 id="3-2-获取任务列表"><a href="#3-2-获取任务列表" class="headerlink" title="3.2 获取任务列表"></a>3.2 获取任务列表</h3><p>数据文件db.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;todos&quot;</span>: [<br>    &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;express&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">2</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;笔记&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">3</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;更新博客&quot;</span><br>    &#125;<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">app.get(<span class="hljs-string">&#x27;/todos&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  fs.readFile(<span class="hljs-string">&#x27;./db.json&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (err) &#123;<br>      <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">500</span>).json(&#123;  <span class="hljs-comment">// res.json()专门发送json格式的数据，不是json格式会报错</span><br>        <span class="hljs-attr">error</span>: err.message<br>      &#125;)<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> db = <span class="hljs-built_in">JSON</span>.parse(data);    <span class="hljs-comment">// 把字符串转成JSON对象</span><br>    res.status(<span class="hljs-number">200</span>).json(db.todos);<br>  &#125;)<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/eZxBPAKo6lLyUg9.png" alt="image-20220207184102851"></p><h3 id="3-3-根据ID查询单个任务"><a href="#3-3-根据ID查询单个任务" class="headerlink" title="3.3 根据ID查询单个任务"></a>3.3 根据ID查询单个任务</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js">app.get(<span class="hljs-string">&#x27;/todos/:id&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  fs.readFile(<span class="hljs-string">&#x27;./db.json&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (err) &#123;<br>      <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">500</span>).json(&#123;<br>        <span class="hljs-attr">error</span>: err.message<br>      &#125;)<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> db = <span class="hljs-built_in">JSON</span>.parse(data);<br>    <span class="hljs-keyword">const</span> todo = db.todos.find(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.id === <span class="hljs-built_in">Number</span>.parseInt(req.params.id));   <span class="hljs-comment">// url中的动态参数是字符串</span><br><br>    <span class="hljs-keyword">if</span> (!todo) &#123;    <span class="hljs-comment">// 任务id不存在</span><br>      <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).end();   <span class="hljs-comment">// 需要return阻止代码继续往下执行，否则会出现既发送404又发送200</span><br>    &#125;<br><br>    res.status(<span class="hljs-number">200</span>).json(todo);<br>  &#125;)<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/OXaKcMJbZq8D5SI.png" alt="image-20220208231000242"></p><h3 id="3-4-封装db模块"><a href="#3-4-封装db模块" class="headerlink" title="3.4 封装db模块"></a>3.4 封装db模块</h3><p>从上面的代码中可以发现，读取数据文件部分逻辑一样，即可以封装成单独的模块db.js</p><p>db.js </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><span class="hljs-keyword">const</span> &#123; promisify &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;util&#x27;</span>);  <span class="hljs-comment">// 把callback形式的异步api转化成promise形式的</span><br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-keyword">const</span> readFile = promisify(fs.readFile);<br><br><span class="hljs-keyword">const</span> dbPath = path.join(__dirname, <span class="hljs-string">&#x27;./db.json&#x27;</span>);<br><br><span class="hljs-built_in">exports</span>.getDb = <span class="hljs-keyword">async</span> () =&gt; &#123;<br>  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> readFile(dbPath, <span class="hljs-string">&#x27;utf8&#x27;</span>);<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.parse(data)<br>&#125;<br></code></pre></td></tr></table></figure><p>封装后的app.js(后面的路由没有变化)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br><span class="hljs-keyword">const</span> &#123; getDb &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./db.js&#x27;</span>);<br><br><span class="hljs-keyword">const</span> app = express();<br><br><br>app.get(<span class="hljs-string">&#x27;/todos&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;   <span class="hljs-comment">// 处理异常的必要性：没有抛出异常的话，可能会一直在等待响应</span><br>    <span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> getDb();   <span class="hljs-comment">// 因为getDb是async的，所以所有形式都会被封装成Promise，所以获取数据都要await</span><br>    res.status(<span class="hljs-number">200</span>).json(db.todos);   <span class="hljs-comment">// // res.json()专门发送json格式的数据，不是json格式会报错</span><br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    res.status(<span class="hljs-number">500</span>).json(&#123;<br>      <span class="hljs-attr">error</span>: err.message<br>    &#125;)<br>  &#125;<br>&#125;)<br><br>app.get(<span class="hljs-string">&#x27;/todos/:id&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> getDb();<br>    <span class="hljs-keyword">const</span> todo = db.todos.find(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.id === <span class="hljs-built_in">Number</span>.parseInt(req.params.id));   <span class="hljs-comment">// url中的动态参数是字符串</span><br><br>    <span class="hljs-keyword">if</span> (!todo) &#123;    <span class="hljs-comment">// 任务id不存在</span><br>      <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).end();   <span class="hljs-comment">// 需要return阻止代码继续往下执行，否则会出现既发送404又发送200</span><br>    &#125;<br><br>    res.status(<span class="hljs-number">200</span>).json(todo);<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    res.status(<span class="hljs-number">500</span>).json(&#123;<br>      <span class="hljs-attr">error</span>: err.message<br>    &#125;)<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="3-5-添加任务"><a href="#3-5-添加任务" class="headerlink" title="3.5 添加任务"></a>3.5 添加任务</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">app.post(<span class="hljs-string">&#x27;/todos&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// 1. 获取客户端请求体参数</span><br>  <span class="hljs-built_in">console</span>.log(req.body);<br><br>  res.end();<br>&#125;)<br></code></pre></td></tr></table></figure><p>然后，会发现很恐怖的事情</p><p><img src="https://s2.loli.net/2022/02/16/9kbuOrwlJ4NnVEc.png" alt="image-20220208231856994"></p><p>那么，这个时候就需要配置表单请求体来解决上述问题</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">app.use(express.json())   <span class="hljs-comment">// 配置解析表单请求体：application/json。将json格式转成js对象</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/2TIgyXGsfwQka7i.png" alt="image-20220208232402601"></p><p>完美!!!(然而，并不是)</p><p><img src="https://s2.loli.net/2022/02/16/8GC1QZHcbnvDRie.png" alt="image-20220208233059259"></p><p>换种形式，就要换汤了。因为express.json()只能解析json形式的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">app.use(express.urlencoded())   <span class="hljs-comment">// 配置解析表单请求体：application/x-www-form-urlencoded</span><br></code></pre></td></tr></table></figure><p>然后，因为需要保存到db.json中，所以也应该在db.js中封装一个saveDb()方法（<strong>app.js自然也要引入saveDb</strong>，这部分就不行出来了）</p><p>db.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><span class="hljs-keyword">const</span> &#123; promisify &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;util&#x27;</span>);  <span class="hljs-comment">// 把callback形式的异步api转化成promise形式的</span><br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-keyword">const</span> readFile = promisify(fs.readFile);<br><span class="hljs-keyword">const</span> writeFile = promisify(fs.writeFile);<br><br><span class="hljs-keyword">const</span> dbPath = path.join(__dirname, <span class="hljs-string">&#x27;./db.json&#x27;</span>);<br><br><span class="hljs-built_in">exports</span>.getDb = <span class="hljs-keyword">async</span> () =&gt; &#123;<br>  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> readFile(dbPath, <span class="hljs-string">&#x27;utf8&#x27;</span>);<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.parse(data)<br>&#125;<br><br><span class="hljs-built_in">exports</span>.saveDb = <span class="hljs-keyword">async</span> db =&gt; &#123;<br>  <span class="hljs-keyword">const</span> data = <span class="hljs-built_in">JSON</span>.stringify(db);<br>  <span class="hljs-keyword">await</span> writeFile(dbPath, data)<br>&#125;<br></code></pre></td></tr></table></figure><p>添加任务的代码部分</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js">app.post(<span class="hljs-string">&#x27;/todos&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">// 1. 获取客户端请求体参数</span><br>    <span class="hljs-keyword">const</span> todo = req.body;<br><br>    <span class="hljs-comment">// 2. 数据验证</span><br>    <span class="hljs-keyword">if</span> (!todo.title) &#123;<br>      <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">422</span>).json(&#123;<br>        <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;The field title is required.&#x27;</span><br>      &#125;)<br>    &#125;<br><br>    <span class="hljs-comment">// 3. 数据验证通过后，把数据存储到db.json中</span><br>    <span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> getDb();<br>    <span class="hljs-keyword">const</span> lastTodo = db.todos[db.todos.length - <span class="hljs-number">1</span>];   <span class="hljs-comment">// 获取最后一个todo</span><br><br>    todo.id = lastTodo ? lastTodo.id + <span class="hljs-number">1</span> : <span class="hljs-number">1</span>;   <span class="hljs-comment">// 如果一个todo都没有，则添加的todo的id是1</span><br>    db.todos.push(todo)<br><br>    <span class="hljs-keyword">await</span> saveDb(db);<br><br>    <span class="hljs-comment">// 4. 发送响应</span><br>    res.status(<span class="hljs-number">200</span>).json(todo);<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    res.status(<span class="hljs-number">500</span>).json(&#123;<br>      <span class="hljs-attr">error</span>: err.message<br>    &#125;)<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/aLlj7UR4mMhOczG.png" alt="image-20220208235418267"></p><p><strong>小优化</strong>：上面可以发现，添加任务后，db.json格式很丑。其实就是把JavaScript 对象转换为 JSON 字符串时的问题，所以只需要在<code>JSON.stringify()</code>上下点功夫就行。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify">JSON.stringify()</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">exports</span>.saveDb = <span class="hljs-keyword">async</span> db =&gt; &#123;<br>  <span class="hljs-keyword">const</span> data = <span class="hljs-built_in">JSON</span>.stringify(db, <span class="hljs-literal">null</span>, <span class="hljs-string">&#x27;  &#x27;</span>);    <span class="hljs-comment">// 这里第三个参数是两个空格，就是缩进按两个空格来</span><br>  <span class="hljs-keyword">await</span> writeFile(dbPath, data)<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/f6CvMnG3bHw2F7t.png" alt="image-20220209000445369"></p><p>眼尖的同学可能发现，添加的任务id和之前的位置不太一样。那么，有点小强迫症的我自然还是要在微操一手。</p><p><img src="https://s2.loli.net/2022/02/16/Un1avz8kDLJFisb.png" alt="image-20220209001337659"></p><p>终于。。。</p><p><img src="https://s2.loli.net/2022/02/16/JoHXaw8uz4Fxd61.png" alt="image-20220209001401680"></p><h3 id="3-6-修改任务"><a href="#3-6-修改任务" class="headerlink" title="3.6 修改任务"></a>3.6 修改任务</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js">app.patch(<span class="hljs-string">&#x27;/todos/:id&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">// 1. 获取客户端请求体参数</span><br>    <span class="hljs-keyword">const</span> todo = req.body;<br><br>    <span class="hljs-comment">// 2. 查找到要修改的todo</span><br>    <span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> getDb();<br>    <span class="hljs-keyword">const</span> ret = db.todos.find(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.id === <span class="hljs-built_in">Number</span>.parseInt(req.params.id))<br><br>    <span class="hljs-keyword">if</span> (!ret) &#123;   <span class="hljs-comment">// 要修改的todo不存在</span><br>      <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).end();<br>    &#125;<br><br>    <span class="hljs-built_in">Object</span>.assign(ret, todo)    <span class="hljs-comment">// 返回一个对象。如果添加的todo中有原本就有的属性，则修改属性值。如果没有，则新增属性</span><br><br>    <span class="hljs-keyword">await</span> saveDb(db);<br>    res.status(<span class="hljs-number">200</span>).json(ret);<br><br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    res.status(<span class="hljs-number">500</span>).json(&#123;<br>      <span class="hljs-attr">error</span>: err.message<br>    &#125;)<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>修改原有属性：</p><p><img src="https://s2.loli.net/2022/02/16/nJ8f3jVFRbQSOMl.png" alt="image-20220209003447970"></p><p>新增属性</p><p><img src="https://s2.loli.net/2022/02/16/ldx8WTQUqnHFKiz.png" alt="image-20220209003636418"></p><h3 id="3-7-删除任务"><a href="#3-7-删除任务" class="headerlink" title="3.7 删除任务"></a>3.7 删除任务</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js">app.delete(<span class="hljs-string">&#x27;/todos/:id&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> todoId = <span class="hljs-built_in">Number</span>.parseInt(req.params.id);<br>    <span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> getDb();<br><br>    <span class="hljs-keyword">const</span> index = db.todos.findIndex(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.id === todoId);   <span class="hljs-comment">// 造出要删除的todo的索引</span><br><br>    <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span>) &#123;   <span class="hljs-comment">// 要删除的todo压根不存在</span><br>      <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).end();<br>    &#125;<br><br>    db.todos.splice(index, <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">await</span> saveDb(db);<br>    res.status(<span class="hljs-number">200</span>).end()<br><br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    res.status(<span class="hljs-number">500</span>).json(&#123;<br>      <span class="hljs-attr">error</span>: err.message<br>    &#125;)<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/Ldr7TchUJQ45DHm.png" alt="image-20220209004455315"></p><h2 id="4-res-end-和res-send-区别"><a href="#4-res-end-和res-send-区别" class="headerlink" title="4. res.end()和res.send()区别"></a>4. res.end()和res.send()区别</h2><p>官方说明：</p><ul><li><p>res.end() 终结响应处理流程。(不过，也可以在结束的同时发送响应)</p></li><li><p>res.send() 发送各种类型的响应。</p></li></ul><h3 id="4-1-res-end"><a href="#4-1-res-end" class="headerlink" title="4.1 res.end()"></a>4.1 res.end()</h3><p>结束响应流程。用于在没有任何数据的情况下快速结束响应。</p><ul><li><b style="color: red">参数可以是buffer对象、字符串</b></li><li><b style="color: red">只接受服务器响应数据，如果是中文会乱码</b></li></ul><h3 id="4-2-res-send"><a href="#4-2-res-send" class="headerlink" title="4.2 res.send()"></a>4.2 res.send()</h3><p>发送HTTP响应。</p><ul><li><b style="color: red">参数可以是buffer对象、字符串、对象、数组</b></li><li><b style="color: red">发送给服务端时，会自动发送更多的响应报文头，包括Content-Type: text/html;charset=utf-8，所以中文不会乱码</b></li></ul><p><strong>res.send()发送对象响应</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br><span class="hljs-keyword">const</span> app = express();<br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(&#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;clz&#x27;</span><br>  &#125;)<br>&#125;)<br><br>app.listen(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:3000/&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/16/1IPGzkad7fSLpRb.png" alt="image-20220209213846401"></p><p><strong>改为用res.end()发送</strong></p><p><img src="https://s2.loli.net/2022/02/09/GHvOkV5D68yld1i.png" alt="image-20220209214613515"></p><p><strong>res.send()发送中文</strong>(使用浏览器查看，postman可能自动设置了响应头)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">res.send(<span class="hljs-string">&quot;测试&quot;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/09/oeydE6RNjT58pX2.png" alt="image-20220209215019228"></p><p>**改为res.edn()**：</p><p><img src="https://s2.loli.net/2022/02/09/tqXpfQwc3yFCPj2.png" alt="image-20220209215053732"></p><p>学习参考视频：</p><p><a href="https://www.bilibili.com/video/BV1mQ4y1C7Cn">Node.js 系列教程之 Express</a></p>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Express </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue 按条件添加类</title>
      <link href="/2022/02/13/vue-addClass/"/>
      <url>/2022/02/13/vue-addClass/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue-按条件添加类"><a href="#Vue-按条件添加类" class="headerlink" title="Vue 按条件添加类"></a>Vue 按条件添加类</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;el-card class=&quot;box-card&quot;&gt;<br>      &lt;div class=&quot;question&quot; ref=&quot;question&quot; v-for=&quot;(question, index) in questionList&quot; :key=&quot;question.id&quot;&gt;<br>        &lt;h4&gt;&#123;&#123;(index+1) +10*(currentPage-1)&#125;&#125;. &#123;&#123;question.ques&#125;&#125;&lt;/h4&gt;<br>        &lt;div v-for=&quot;option in question.options&quot; :key=&quot;option.id&quot; :class=&quot;[<br>                                                                    &#123;&#x27;choose&#x27;: true&#125;,<br>                                                                    &#123;&#x27;wrong&#x27;: option.value[0] === question.useranswer&#125;, <br>                                                                    &#123;&#x27;right&#x27;: option.value[0] === question.answer&#125;<br>                                                                  ]&quot;&gt;<br>          &lt;label&gt;<br>            &lt;span&gt;&#123;&#123;option.value&#125;&#125;&lt;/span&gt;<br>          &lt;/label&gt;<br>        &lt;/div&gt;<br>      &lt;/div&gt;<br>      &lt;el-pagination background layout=&quot;prev, pager, next, jumper&quot; :total=&quot;total&quot; :page-size=&quot;pageLimit&quot; :hide-on-single-page=&quot;noPagination&quot; @current-change=&quot;currentChange&quot;&gt;<br>      &lt;/el-pagination&gt;<br>    &lt;/el-card&gt;<br></code></pre></td></tr></table></figure><p>项目中直接抽出来的(人菜勿喷)</p><p><strong>关键</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;div :class=&quot;[<br>             &#123;&#x27;red&#x27;: true&#125;,<br>             &#123;&#x27;blue&#x27;: false&#125;<br>             ]&quot;&gt;红色&lt;/div&gt;<br><br>&lt;div :class=&quot;[<br>             &#123;&#x27;red&#x27;: false&#125;,<br>             &#123;&#x27;blue&#x27;: true&#125;<br>             ]&quot;&gt;蓝色&lt;/div&gt;<br></code></pre></td></tr></table></figure><p><strong>css</strong>：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.red</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br><br><span class="hljs-selector-class">.blue</span> &#123;<br>  <span class="hljs-attribute">color</span>: blue;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/13/G1XUM8Z2fgPj3uV.png" alt="image-20220213191710083"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript笔记</title>
      <link href="/2022/02/09/yc-typescript/"/>
      <url>/2022/02/09/yc-typescript/</url>
      
        <content type="html"><![CDATA[<h1 id="TypeScript笔记"><a href="#TypeScript笔记" class="headerlink" title="TypeScript笔记"></a>TypeScript笔记</h1><p>参加字节跳动的青训营时写的笔记。这部分是林皇老师讲的课。(过年偷懒，项目爆肝后，重新整理笔记)</p><p><strong>个人博客</strong>(欢迎光临)：<a href="">TypeScript笔记</a></p><h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h2><ul><li><strong>静态类型</strong><ul><li>可读性增强：基于语法解析TS Doc，IDE增强</li><li>可维护性增强：在编译阶段暴露大部分的错误(类型匹配错误、拼写错误等)</li></ul></li><li><strong>JS的超集</strong><ul><li>包含兼容所有JS特性</li><li>支持渐进式引入和升级，支持与JS共存</li></ul></li></ul><p><img src="https://s2.loli.net/2022/01/24/Oq5kaANnRpWg4Pu.png" alt="image-20220124100758987"></p><p>动态类型：数据类型不是在编译阶段决定的，而是在运行阶段决定的</p><p>静态类型：数据类型是在编译期间或运行之前确定的，即编写代码时需要定义变量的类型。</p><p>强类型：变量指定了数据类型之后，如果不经过强制类型转换，那么该变量永远是这个数据类型</p><p>弱类型：数据类型可以被忽略，一个变量可以赋予不同数据类型的值。即如果给整型变量a赋值字符串，则a变成字符串类型。</p><p><a href="https://www.cnblogs.com/zy1987/p/3784753.html">更多</a></p><h2 id="2-基本语法"><a href="#2-基本语法" class="headerlink" title="2. 基本语法"></a>2. 基本语法</h2><h3 id="2-1-基础数据类型"><a href="#2-1-基础数据类型" class="headerlink" title="2.1 基础数据类型"></a>2.1 基础数据类型</h3><p><strong>JS</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/* 字符串 */</span><br><span class="hljs-keyword">const</span> s = <span class="hljs-string">&#x27;Hello&#x27;</span>;<br><br><span class="hljs-comment">/* 数字 */</span><br><span class="hljs-keyword">const</span> num = <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">/* 布尔值 */</span><br><span class="hljs-keyword">const</span> b = <span class="hljs-literal">true</span>;<br><br><span class="hljs-comment">/* null */</span><br><span class="hljs-keyword">const</span> n = <span class="hljs-literal">null</span>;<br><br><span class="hljs-comment">/* undefined */</span><br><span class="hljs-keyword">const</span> u = <span class="hljs-literal">undefined</span>;<br></code></pre></td></tr></table></figure><p><strong>TS</strong>：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* 字符串 */</span><br><span class="hljs-keyword">const</span> s:<span class="hljs-built_in">string</span> = <span class="hljs-string">&#x27;Hello&#x27;</span>;<br><br><span class="hljs-comment">/* 数字 */</span><br><span class="hljs-keyword">const</span> num:<span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">/* 布尔值 */</span><br><span class="hljs-keyword">const</span> b:<span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;<br><br><span class="hljs-comment">/* null */</span><br><span class="hljs-keyword">const</span> n:<span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;<br><br><span class="hljs-comment">/* undefined */</span><br><span class="hljs-keyword">const</span> u:<span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;<br></code></pre></td></tr></table></figure><h3 id="2-2-对象类型"><a href="#2-2-对象类型" class="headerlink" title="2.2 对象类型"></a>2.2 对象类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> IPeople &#123;<br>  <span class="hljs-keyword">readonly</span> id: <span class="hljs-built_in">number</span>;    <span class="hljs-comment">// 只读属性</span><br>  name: <span class="hljs-built_in">string</span>;<br>  sex: <span class="hljs-string">&#x27;male&#x27;</span> | <span class="hljs-string">&#x27;female&#x27;</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;<br>  hobby?: <span class="hljs-built_in">string</span>;       <span class="hljs-comment">// 可选属性</span><br>  [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>;   <span class="hljs-comment">// 对象可以有任意属性，键是字符串类型的，值是任意类型的</span><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/01/26/KXsNIl9v12ROkw5.png" alt="image-20220126130542691"></p><p><img src="https://s2.loli.net/2022/01/26/ABfOmuJXQi4IpCZ.png" alt="image-20220126130327610"></p><p><img src="https://s2.loli.net/2022/01/26/mqoEcT5Q3uKSWNv.png" alt="image-20220126130918252"></p><h3 id="2-3-函数类型"><a href="#2-3-函数类型" class="headerlink" title="2.3 函数类型"></a>2.3 函数类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* 1 */</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">number</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> x + y;<br>&#125;<br><br><span class="hljs-comment">/* 2 */</span><br><span class="hljs-keyword">const</span> add: <span class="hljs-function">(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span> = <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> x + y;<br><br><span class="hljs-comment">/* 3 */</span><br><span class="hljs-keyword">interface</span> IAdd &#123;<br>    (x: <span class="hljs-built_in">number</span>, <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>;<br>&#125;<br><span class="hljs-keyword">const</span> add: IAdd = <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> x + y;<br></code></pre></td></tr></table></figure><h4 id="2-3-1-函数重载"><a href="#2-3-1-函数重载" class="headerlink" title="2.3.1 函数重载"></a>2.3.1 函数重载</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDate</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-string">&#x27;string&#x27;</span>, timestamp?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">string</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDate</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-string">&#x27;date&#x27;</span>, timestamp?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Date</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDate</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>: <span class="hljs-string">&#x27;string&#x27;</span> | <span class="hljs-string">&#x27;date&#x27;</span>, timestamp?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Date</span> | <span class="hljs-title">string</span> </span>&#123;<br>    <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(timestamp);<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">type</span> === <span class="hljs-string">&#x27;string&#x27;</span> ? date.toLocaleDateString() : date;<br>&#125;<br><br><span class="hljs-keyword">const</span> x = getDate(<span class="hljs-string">&#x27;date&#x27;</span>);<span class="hljs-comment">// x: Date</span><br><span class="hljs-keyword">const</span> y = getDate(<span class="hljs-string">&#x27;string&#x27;</span>, <span class="hljs-string">&#x27;2022-02-01&#x27;</span>);<span class="hljs-comment">// y: string</span><br><br></code></pre></td></tr></table></figure><p>上面的函数的目的就是第一个参数是<code> date</code>时，返回Date对象；是<code> string</code>的话，则返回时间戳字符串。</p><p>没有上面两个定义函数的情况：</p><p><img src="https://s2.loli.net/2022/02/05/qxJn1BGjMik3lAL.png" alt="image-20220205182147044"></p><p><img src="https://s2.loli.net/2022/01/24/B8jeEh7nMd2alok.png" alt="image-20220124103048922"></p><h3 id="2-4-数组类型"><a href="#2-4-数组类型" class="headerlink" title="2.4 数组类型"></a>2.4 数组类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 1. 类型 + []表示 </span><br><span class="hljs-keyword">type</span> IArr1 = <span class="hljs-built_in">number</span>[];<span class="hljs-comment">// type关键字定义了IArr1的别名类型</span><br><br><span class="hljs-comment">// 2. 泛型表示</span><br><span class="hljs-keyword">type</span> IArr2 = <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt;&gt;;<span class="hljs-comment">// Record：对象类型的简化写法</span><br><br><span class="hljs-comment">// 3. 元组表示</span><br><span class="hljs-keyword">type</span> IArr3 = [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>];<br><br><span class="hljs-comment">// 4. 接口表示</span><br><span class="hljs-keyword">interface</span> IArr4 &#123;<br>    [key: <span class="hljs-built_in">number</span>]: <span class="hljs-built_in">any</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> arr1: IArr1 = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>];<br><span class="hljs-keyword">const</span> arr2: IArr2 = [<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;hello&#x27;</span>, &#123; <span class="hljs-attr">age</span>: <span class="hljs-number">21</span> &#125;];<br><span class="hljs-keyword">const</span> arr3: IArr3 = [<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;hello&#x27;</span>, <span class="hljs-number">1</span>];<br><span class="hljs-keyword">const</span> arr4: IArr4 = [<span class="hljs-string">&#x27;string&#x27;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>, []];<br></code></pre></td></tr></table></figure><h3 id="2-5-泛型"><a href="#2-5-泛型" class="headerlink" title="2.5 泛型"></a>2.5 泛型</h3><p>泛型：不提前指定具体类型，而是在使用时才指定类型</p><h4 id="2-5-1-泛型函数"><a href="#2-5-1-泛型函数" class="headerlink" title="2.5.1 泛型函数"></a>2.5.1 泛型函数</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> IGetArr = &lt;T&gt;<span class="hljs-function">(<span class="hljs-params">target: T</span>) =&gt;</span> T[];<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRepeatArr</span>(<span class="hljs-params">target</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">10</span>).fill(target);<br>&#125;<br><br><br><span class="hljs-keyword">type</span> IGetArr = &lt;T&gt;<span class="hljs-function">(<span class="hljs-params">target: T</span>) =&gt;</span> T[];<br><br><span class="hljs-keyword">const</span> GetArr: IGetArr = getRepeatArr;<br><br><span class="hljs-keyword">const</span> stringArr = GetArr(<span class="hljs-string">&#x27;Hello&#x27;</span>);<br><span class="hljs-keyword">const</span> numArr = GetArr(<span class="hljs-number">10</span>);<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/05/BcdV7AfF6yPEuk4.png" alt="image-20220205215955096"></p><h4 id="2-5-2-泛型接口"><a href="#2-5-2-泛型接口" class="headerlink" title="2.5.2 泛型接口"></a>2.5.2 泛型接口</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> IX&lt;T, U&gt; &#123;<br>    <span class="hljs-attr">key</span>: T;<br>    val: U;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-5-3-泛型类"><a href="#2-5-3-泛型类" class="headerlink" title="2.5.3 泛型类"></a>2.5.3 泛型类</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IX</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;<br>    <span class="hljs-attr">key</span>: T;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-5-4-泛型别名"><a href="#2-5-4-泛型别名" class="headerlink" title="2.5.4 泛型别名"></a>2.5.4 泛型别名</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> ITypeArr&lt;T&gt; = <span class="hljs-built_in">Array</span>&lt;T&gt;;<br></code></pre></td></tr></table></figure><h4 id="2-5-5-泛型约束"><a href="#2-5-5-泛型约束" class="headerlink" title="2.5.5 泛型约束"></a>2.5.5 泛型约束</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> IGetRepeatStringArr = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">T</span> <span class="hljs-attr">extends</span> <span class="hljs-attr">string</span>&gt;</span>(target: T) =&gt; T[];    // 限制泛型必须符合字符串(demo，实际上使用应该不会只限制成字符串这种)</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/05/Q5FSaX9o2qbGyON.png" alt="image-20220205220434379"></p><h4 id="2-5-6-泛型参数默认"><a href="#2-5-6-泛型参数默认" class="headerlink" title="2.5.6 泛型参数默认"></a>2.5.6 泛型参数默认</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> IGetRepeatArr&lt;T = <span class="hljs-built_in">number</span>&gt; = <span class="hljs-function">(<span class="hljs-params">target: T</span>) =&gt;</span> T[];    <br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/05/7vglhHGkBdNxfyV.png" alt="image-20220205220835362"></p><h3 id="2-6-其他类型"><a href="#2-6-其他类型" class="headerlink" title="2.6 其他类型"></a>2.6 其他类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 空类型，表示勿赋值</span><br><span class="hljs-keyword">type</span> IEmptyFunction = <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;<br><br><br><span class="hljs-comment">// 任意类型，是所有类型的子类型</span><br><span class="hljs-keyword">type</span> IAnyArr = <span class="hljs-built_in">any</span>;<br><br><span class="hljs-comment">// 枚举类型：支持枚举值到枚举名的正反映射</span><br><span class="hljs-built_in">enum</span> EnumExample &#123;<br>    add = <span class="hljs-string">&#x27;+&#x27;</span>,<br>    mul = <span class="hljs-string">&#x27;*&#x27;</span><br>&#125;<br><br>EnumExample[<span class="hljs-string">&#x27;add&#x27;</span>] === <span class="hljs-string">&#x27;+&#x27;</span>;<br>EnumExample[<span class="hljs-string">&#x27;+&#x27;</span>] === <span class="hljs-string">&#x27;add&#x27;</span>;<br><br><span class="hljs-comment">// 指定固定值</span><br><span class="hljs-keyword">type</span> IOddNum = <span class="hljs-number">1</span> | <span class="hljs-number">3</span> | <span class="hljs-number">5</span> | <span class="hljs-number">7</span> | <span class="hljs-number">9</span>;<span class="hljs-comment">// IOddNum必须是1、3、5、7、9中的数</span><br></code></pre></td></tr></table></figure><h2 id="3-高级类型"><a href="#3-高级类型" class="headerlink" title="3. 高级类型"></a>3. 高级类型</h2><h3 id="3-1-联合-交叉类型"><a href="#3-1-联合-交叉类型" class="headerlink" title="3.1 联合/交叉类型"></a>3.1 联合/交叉类型</h3><p>首先，假设一个情景，你有收藏书籍的兴趣，但是只收藏历史书和故事书，而且历史书需要记录历史范围，而故事书则是需要记录主题。</p><p><img src="https://s2.loli.net/2022/02/06/Sq3fNnFa1KeyHE9.png" alt="image-20220206164054320"></p><p>为书籍列表编写类型(如下图所示)：可以发现类型声明繁琐，存在较多变量</p><p><img src="https://s2.loli.net/2022/02/06/2cCJBaNAyW4Kbfq.png" alt="image-20220206164140324"></p><p><b style="color: red">通过联合/交叉类型可以实现优化</b></p><ul><li><strong>联合类型</strong>：IA | IB，表示一个值可以是IA类型或IB类型</li><li><strong>交叉类型</strong>：IA &amp; IB，多种类型叠加成一种类型，包含了所需的所有类型的特性</li></ul><p>优化后：</p><p><img src="https://s2.loli.net/2022/02/06/7PMQzpVkjwORFhn.png" alt="image-20220206164516232"></p><h3 id="3-2-类型保护和类型守卫"><a href="#3-2-类型保护和类型守卫" class="headerlink" title="3.2 类型保护和类型守卫"></a>3.2 类型保护和类型守卫</h3><h4 id="3-2-1-类型保护"><a href="#3-2-1-类型保护" class="headerlink" title="3.2.1 类型保护"></a>3.2.1 类型保护</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reverse</span>(<span class="hljs-params">target: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">any</span>&gt;</span>) </span>&#123;<br>    <span class="hljs-comment">// 作用：把字符串或数组反转</span><br>    <br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> target === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<span class="hljs-comment">// typeof类型保护</span><br>        <span class="hljs-keyword">return</span> target.split(<span class="hljs-string">&#x27;&#x27;</span>).reverse().join(<span class="hljs-string">&#x27;&#x27;</span>);<br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span>(target <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span>) &#123;<span class="hljs-comment">// instance类型保护(只考虑字符串和数组两种情况)</span><br>        <span class="hljs-keyword">return</span> terget.reverse();<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>联合/交叉类型中的书籍只有历史和故事两种类型，所以可以实现自动类型推断</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logBook</span>(<span class="hljs-params">book: IBookList</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span>(book.type === <span class="hljs-string">&#x27;history&#x27;</span>) &#123;<span class="hljs-comment">// 联合类型 + 类型保护 = 自动类型推断</span><br>        <span class="hljs-built_in">console</span>.log(book.range);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">console</span>.log(book.theme);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-2-2-类型守卫"><a href="#3-2-2-类型守卫" class="headerlink" title="3.2.2 类型守卫"></a>3.2.2 类型守卫</h4><p><b style="color: red">访问联合类型时，仅能访问联合类型中的交集部分。</b>所以下面的例子会报错</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> IA &#123;<br>    <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <br>    <span class="hljs-attr">a1</span>: <span class="hljs-number">2</span><br>&#125;<br><br><span class="hljs-keyword">interface</span> IB &#123;<br>    <span class="hljs-attr">b</span>: <span class="hljs-number">1</span>, <br>    <span class="hljs-attr">b1</span>: <span class="hljs-number">2</span><br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">log</span>(<span class="hljs-params">arg: IA | IB</span>) </span>&#123;<br>    <span class="hljs-comment">// 报错，因为类型IA | IB上不存在属性a、a1、b、b1。访问联合类型时，仅能访问联合类型中的交集部分。</span><br>    <span class="hljs-keyword">if</span> (arg.a) &#123;<br>        <span class="hljs-built_in">console</span>.log(arg.a1);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">console</span>.log(arg.b1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>通过类型守卫则可以解决问题。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> IA &#123;<br>    <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <br>    <span class="hljs-attr">a1</span>: <span class="hljs-number">2</span><br>&#125;<br><br><span class="hljs-keyword">interface</span> IB &#123;<br>    <span class="hljs-attr">b</span>: <span class="hljs-number">1</span>, <br>    <span class="hljs-attr">b1</span>: <span class="hljs-number">2</span><br>&#125;<br><br><br><span class="hljs-comment">// 类型守卫：定义一个函数，返回值是一个类型谓词</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getIsIA</span>(<span class="hljs-params">arg: IA | IB</span>): <span class="hljs-title">arg</span> <span class="hljs-title">is</span> <span class="hljs-title">IA</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> !!(arg <span class="hljs-keyword">as</span> IA).a;     <span class="hljs-comment">// as是类型断言的语法。(arg as IA).a表示存在a，则一定是IA。</span><br>                                <span class="hljs-comment">// !!是用于转换成为boolen类型</span><br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">log</span>(<span class="hljs-params">arg: IA | IB</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (getIsIA(arg)) &#123;<br>        <span class="hljs-built_in">console</span>.log(arg.a1);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">console</span>.log(arg.b1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 青训营 </tag>
            
            <tag> TypeScript笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web多媒体笔记</title>
      <link href="/2022/02/09/yc-multi-media/"/>
      <url>/2022/02/09/yc-multi-media/</url>
      
        <content type="html"><![CDATA[<h1 id="Web多媒体笔记"><a href="#Web多媒体笔记" class="headerlink" title="Web多媒体笔记"></a>Web多媒体笔记</h1><p>参加字节跳动的青训营时写的笔记。这部分是刘立国老师讲的课。</p><h2 id="1-前置知识"><a href="#1-前置知识" class="headerlink" title="1. 前置知识"></a>1. 前置知识</h2><h3 id="1-1-图像基本概念"><a href="#1-1-图像基本概念" class="headerlink" title="1.1 图像基本概念"></a>1.1 图像基本概念</h3><p><strong>图像分辨率</strong>：图像的像素数据，指在水平和垂直方向上图像所具有的像素个数</p><p><strong>图像深度</strong>：指存储每个像素所需要的比特数。图像深度决定了图像的每个像素可能的颜色数，或可能的灰度数(单色图像)。例如彩色图像每个像素用R, G, B三个分量来表示，每个分量用8为所以像素深度是24位，可以表示的颜色数目是2^24。单色图像每个像素需要8位，则图像的像素深度是8位，灰度数目为2^8。</p><p><strong>图像的大小不仅要看图像的分辨率，还要看图像深度</strong></p><h3 id="1-2-视频基本概念"><a href="#1-2-视频基本概念" class="headerlink" title="1.2 视频基本概念"></a>1.2 视频基本概念</h3><p><strong>分辨率</strong>：每一帧的图像分辨率</p><p><strong>帧率</strong>：视频单位时间内包含的视频帧的数量</p><p><strong>码率</strong>：视频单位时间内传输的数据量，一般用kbps(千位每秒)表示。</p><p><strong>视频的大小不仅要看图像的分辨率，还要看码率</strong></p><h2 id="2-编码"><a href="#2-编码" class="headerlink" title="2. 编码"></a>2. 编码</h2><h3 id="2-1-为什么需要编码"><a href="#2-1-为什么需要编码" class="headerlink" title="2.1 为什么需要编码"></a>2.1 为什么需要编码</h3><p><strong>如果不编码</strong>：</p><p>假设一部电影的每一帧的分辨率都是1920 × 1080。</p><p>那么每一帧的大小为1920 * 1080 * 24 / 8 = 6220800 byte = 5.9M (24就是上面的图像像素深度)</p><p>假设帧率为30FPS，时长为90分钟，那么这部电影大小就是 5.9 * 30 * 60 * 90 = 933G(我的电脑竟一部电影都下不了)</p><h3 id="2-2-DTS和PTS"><a href="#2-2-DTS和PTS" class="headerlink" title="2.2 DTS和PTS"></a>2.2 DTS和PTS</h3><p><strong>DTS</strong>：解码时间戳，用来告诉播放器该在什么时候解码这一帧的数据</p><p><strong>PTS</strong>：显示时间戳，用来告诉播放器该在什么时候显示这一帧的数据。</p><p><strong>I帧</strong>：帧内编码帧、关键帧，不需要参考其他帧。</p><p><strong>P帧</strong>：前向预测编码帧。P帧由它的<strong>前一P帧或I帧</strong>预测而来。</p><p><strong>B帧</strong>：双向预测内插编码帧。B帧由它的**前一帧以及后一帧预测而来。</p><p>实例：</p><p><img src="https://s2.loli.net/2022/01/26/OyhRCjGIPgB5Xz8.png" alt="image-20220126205313369"></p><p>首先，<b style="color: red">PTS是1、2、3、4、5、6</b></p><p>因为P帧需要由前一P帧或I帧预测而来，I帧不需要参考其他帧。所以先解码第1帧，解码完第1帧后，第2帧的P帧才可以解码，依次类推。所以，<b style="color: red">DTS是1、2、3、4、5、6</b></p><p><img src="https://s2.loli.net/2022/02/09/2Xchkan9CtLxoAs.png" alt="image-20220126205857425"></p><p>首先，<b style="color: red">PTS是1、2、3、4、5、6</b></p><p>由上一个例子，依次解码第1帧、第2帧，想继续解码第3帧，发现第3帧是B帧，所以就去解码第3帧的后一帧(第4帧)，所以DTS的前面部份是1、2、4、3。同理，解码第5帧又会先去解码第6帧。所以，<b style="color: red">DTS是1、2、4、3、6、5</b></p><h3 id="2-3-GOP"><a href="#2-3-GOP" class="headerlink" title="2.3 GOP"></a>2.3 GOP</h3><p>GOP(group of picture)：两个I帧之间的间隔</p><p><img src="https://s2.loli.net/2022/02/09/cJTMGYsK6gHxQRw.png" alt="image-20220126210639852"></p><p><strong>每个group的第一帧是I帧(关键帧)，每个GOP内的帧的解码不依赖于其他GOP的帧。</strong></p><p>GOP一般2到4s。首先，I帧是帧内压缩，占用存储空间大。所以I帧不适宜过多。如果I帧太少，也不行。比如一共有1000帧，我需要解码第500帧，如果只有一个I帧，则要解码第1帧、第2帧…第499帧。(这个场景可能是用户点击进度条时)</p><h3 id="2-4-各种冗余"><a href="#2-4-各种冗余" class="headerlink" title="2.4 各种冗余"></a>2.4 各种冗余</h3><h4 id="2-4-1-空间冗余"><a href="#2-4-1-空间冗余" class="headerlink" title="2.4.1 空间冗余"></a>2.4.1 空间冗余</h4><p><img src="https://s2.loli.net/2022/01/26/yXjMlaoPzBJ4Q95.png" alt="image-20220126212737399"></p><p><b style="color: red">重复的只存储一次</b></p><h4 id="2-4-2-时间冗余"><a href="#2-4-2-时间冗余" class="headerlink" title="2.4.2 时间冗余"></a>2.4.2 时间冗余</h4><p><img src="https://s2.loli.net/2022/02/09/o1bQ2UROdHTaijE.png" alt="image-20220126212937820"></p><p><b style="color: red">只多存储有变化的</b></p><h4 id="2-4-3-编码冗余"><a href="#2-4-3-编码冗余" class="headerlink" title="2.4.3 编码冗余"></a>2.4.3 编码冗余</h4><p><img src="https://s2.loli.net/2022/01/26/VZ4dhGtQ6nrz9FD.png" alt="image-20220126213139572"></p><p><b style="color: red">不同像素值出现的概率不同，概率高的用的字节少，概率低的用的字节多</b>(霍夫曼编码)</p><p>上面的demo：每一个像素值需要24位。上面例子，蓝色用1表示，白色用0表示。则只需要2位。</p><h4 id="2-4-4-视觉冗余"><a href="#2-4-4-视觉冗余" class="headerlink" title="2.4.4 视觉冗余"></a>2.4.4 视觉冗余</h4><p><img src="https://s2.loli.net/2022/02/09/2ki7t8WZadsrzq6.png" alt="image-20220126213341161"></p><p><b style="color: red">人的视觉系统对某些细节不敏感，所以可以把人眼看不到的部分去除掉。</b></p><h3 id="2-5-编码流程"><a href="#2-5-编码流程" class="headerlink" title="2.5 编码流程"></a>2.5 编码流程</h3><p><img src="https://s2.loli.net/2022/01/26/WDFAz7kehPiut34.png" alt="image-20220126213622028"></p><h3 id="2-6-编码格式"><a href="#2-6-编码格式" class="headerlink" title="2.6 编码格式"></a>2.6 编码格式</h3><p><img src="https://s2.loli.net/2022/01/26/1xE6IotejvUFGrp.png" alt="image-20220126213747091"></p><h2 id="3-封装"><a href="#3-封装" class="headerlink" title="3. 封装"></a>3. 封装</h2><p>封装格式的主要作用是把视频码流和音频码流按照一定的格式存储在一个文件中。(可能还有字幕信息)</p><p><img src="https://s2.loli.net/2022/01/26/ZoDWdyXTUgjA4LN.png" alt="image-20220126214123491"></p><h2 id="4-多媒体元素和扩展API"><a href="#4-多媒体元素和扩展API" class="headerlink" title="4. 多媒体元素和扩展API"></a>4. 多媒体元素和扩展API</h2><h3 id="4-1-video和audio"><a href="#4-1-video和audio" class="headerlink" title="4.1 video和audio"></a>4.1 video和audio</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;getLength()&quot;</span>&gt;</span>获取视频长度<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/byted-player-videos/1.0.0/xgplayer-demo.mp4&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;540px&quot;</span> <span class="hljs-attr">controls</span> <span class="hljs-attr">muted</span> <span class="hljs-attr">autoplay</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">let</span> v = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;video&quot;</span>)[<span class="hljs-number">0</span>]</span><br><span class="javascript">    v.playbackRate = <span class="hljs-string">&quot;1.5&quot;</span></span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLength</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">      <span class="hljs-keyword">let</span> length = <span class="hljs-built_in">Math</span>.floor(v.duration)</span><br><span class="javascript"></span><br><span class="javascript">      <span class="hljs-keyword">let</span> minute = <span class="hljs-built_in">Math</span>.floor(length / <span class="hljs-number">60</span>)</span><br><span class="javascript">      <span class="hljs-keyword">let</span> second = length % <span class="hljs-number">60</span></span><br><span class="javascript"></span><br><span class="javascript">      <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;p&quot;</span>)[<span class="hljs-number">0</span>].innerHTML = <span class="hljs-string">`视频长度为<span class="hljs-subst">$&#123;minute&#125;</span>分<span class="hljs-subst">$&#123;second&#125;</span>秒`</span></span><br><span class="javascript">    &#125;</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/01/26/lwsW9KXdOIhrbLD.gif" alt="video"></p><p>除了上面的形式还可以用下面的source的形式，这样就可以添加多个不同格式的视频。当浏览器不支持时，可以换一个。</p><p><img src="https://s2.loli.net/2022/01/26/HqOh8E7wL6mzPlB.png" alt="image-20220126222501539"></p><p>audio和video类似就不多说了。</p><p>属性、事件不多说了，链接奉上。<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/video">MDN video</a>、<a href="https://www.runoob.com/tags/ref-av-dom.html">表格版</a></p><p><strong>缺陷</strong>：</p><ul><li>不支持直接播放hls、flv等视频格式</li><li>视频资源的请求和加载无法通过代码控制<ul><li>分段加载(节省流量)</li><li>清晰度无缝切换</li><li>精确预加载</li></ul></li></ul><h3 id="4-2-MSE"><a href="#4-2-MSE" class="headerlink" title="4.2 MSE"></a>4.2 MSE</h3><p>媒体源扩展API(Media Source Extensions)</p><ul><li>无插件在web端播放流媒体</li><li>支持hls、flv、mp4等格式视频</li><li>可实现视频分段加载、清晰度无缝切换、自适应码率、精确加载</li></ul><h4 id="4-2-1-使用"><a href="#4-2-1-使用" class="headerlink" title="4.2.1 使用"></a>4.2.1 使用</h4><p><img src="https://s2.loli.net/2022/01/26/BA2k8ULI6xqh3DF.png" alt="image-20220126220350669"></p><h4 id="4-2-2-MSE播放流程"><a href="#4-2-2-MSE播放流程" class="headerlink" title="4.2.2 MSE播放流程"></a>4.2.2 MSE播放流程</h4><p><img src="https://s2.loli.net/2022/01/26/ayB9zSTvZtGdCm2.png" alt="image-20220126220416302"></p><h3 id="4-3-播放器播放流程"><a href="#4-3-播放器播放流程" class="headerlink" title="4.3 播放器播放流程"></a>4.3 播放器播放流程</h3><p><img src="https://s2.loli.net/2022/01/26/42flrz8tH3s1oZq.png" alt="image-20220126220523143"></p><h2 id="5-流媒体协议"><a href="#5-流媒体协议" class="headerlink" title="5. 流媒体协议"></a>5. 流媒体协议</h2><p><strong>流媒体</strong>是指将一连串数据压缩后，经过网络分段发送，即时传输以供观看音视频的一种技术。</p><p><strong>流媒体协议</strong>是一种标准化的传递方法，用于将视频分解为多个块，将其发送给视频播放器，播放器重新组合播放。</p><p>例子：HLS(HTTP Live Streaming)，是Apple公司提出的基于HTTP的媒体流传输协议，用于实时音视频流的传输。目前被广泛用于视频点播和直播领域。</p><p><img src="https://s2.loli.net/2022/01/26/q2ZkJcIUAhGHXBY.png" alt="image-20220126221619029"></p><h2 id="6-应用场景"><a href="#6-应用场景" class="headerlink" title="6. 应用场景"></a>6. 应用场景</h2><p><img src="https://s2.loli.net/2022/01/26/pwvlXYhBHb4zQxi.png" alt="image-20220126221925477"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 青训营 </tag>
            
            <tag> Web多媒体 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node.js笔记</title>
      <link href="/2022/02/09/yc-nodejs/"/>
      <url>/2022/02/09/yc-nodejs/</url>
      
        <content type="html"><![CDATA[<h1 id="Node-js笔记"><a href="#Node-js笔记" class="headerlink" title="Node.js笔记"></a>Node.js笔记</h1><p>参加字节跳动的青训营时写的笔记。这部分是欧阳亚东老师讲的课。</p><h2 id="1-应用场景"><a href="#1-应用场景" class="headerlink" title="1. 应用场景"></a>1. 应用场景</h2><ul><li>前端工程化</li><li>Web服务端应用<ul><li>运行效率接近常见的编译语言</li><li>社区生态丰富、工具链成熟(npm，V8 inspector)</li><li>与前端结合的场景有优势(服务端渲染 SSR)</li></ul></li><li>Electron跨端桌面应用<ul><li>商业应用：vscode, slack, discord</li><li>大型公司内的效率工具</li></ul></li></ul><h2 id="2-运行时结构"><a href="#2-运行时结构" class="headerlink" title="2. 运行时结构"></a>2. 运行时结构</h2><ul><li>V8：JavaScript Runtime，诊断调试工具(inspector)</li><li>libuv：eventloop(事件循环)，syscall(系统调用)</li></ul><h3 id="2-1-特点"><a href="#2-1-特点" class="headerlink" title="2.1 特点"></a>2.1 特点</h3><ul><li><p>异步I/O：当Node.js执行I/O操作时，会在响应返回后恢复操作，而不需要阻塞线程(占用额外线程)。</p></li><li><p>单线程：</p><ul><li><p>JS单线程</p><ul><li>实际：JS线程+uv线程池+V8任务线程池+V8 inspector 线程</li></ul></li><li><p>worker_thread可以单独起独立线程，每一个线程的模型没有太大变化</p></li><li><p>优点：不需要考虑多线程状态同步问题(不需要锁)，能够高效地利用系统资源</p></li><li><p>缺点：阻塞会产生更多的负面影响， 解决方法：多进程或多线程</p></li></ul></li><li><p>跨平台(大部分功能， api)：开发成本低(大部分情景不需要考虑跨平台问题)，学习成本低</p><ul><li>Node.js 跨平台 + JavaScript无需编译环境 + Web跨平台 + 诊断工具跨平台</li></ul></li></ul><h2 id="3-编写Http-Server"><a href="#3-编写Http-Server" class="headerlink" title="3. 编写Http Server"></a>3. 编写Http Server</h2><p><a href="https://13535944743.github.io/2021/11/18/node/">之前的笔记</a></p><h3 id="3-1-Hello"><a href="#3-1-Hello" class="headerlink" title="3.1 Hello"></a>3.1 Hello</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;http&quot;</span>);<br><br><span class="hljs-keyword">const</span> port = <span class="hljs-number">8081</span>;<br><br><span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.end(<span class="hljs-string">&quot;Hello&quot;</span>);<br>&#125;);<br><br>server.listen(port, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Listen at <span class="hljs-subst">$&#123;port&#125;</span>`</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/09/NePcG1S2Io8QT5b.png" alt="image-20220120145018966"></p><h3 id="3-2-JSON数据"><a href="#3-2-JSON数据" class="headerlink" title="3.2 JSON数据"></a>3.2 JSON数据</h3><p>用户把JSON数据POST给服务器，服务器再把数据中的msg取出来，返回给用户</p><p><strong>服务器端</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;http&quot;</span>);<br><br><span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> bufs = [];<br>  req.on(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">buf</span>) =&gt;</span> &#123;<br>    bufs.push(buf);   <span class="hljs-comment">// 把数据收集起来</span><br>  &#125;);<br><br>  req.on(<span class="hljs-string">&quot;end&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> buf = Buffer.concat(bufs).toString(<span class="hljs-string">&quot;utf8&quot;</span>);<br>    <span class="hljs-keyword">let</span> msg = <span class="hljs-string">&#x27;Hello&#x27;</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">const</span> ret = <span class="hljs-built_in">JSON</span>.parse(buf);  <span class="hljs-comment">// 转换成JSON对象</span><br>      msg = ret.msg;<br><br>    &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>      <span class="hljs-comment">// 如果抛出异常的话，则msg是初始值Hello，无需处理异常</span><br>    &#125;<br><br>    <span class="hljs-keyword">const</span> responseJson = &#123;<br>      <span class="hljs-attr">msg</span>: <span class="hljs-string">`receive: <span class="hljs-subst">$&#123;msg&#125;</span>`</span><br>    &#125;;<br>    res.setHeader(<span class="hljs-string">&#x27;Content-Type&#x27;</span>, <span class="hljs-string">&#x27;application/json&#x27;</span>)<br>    res.end(<span class="hljs-built_in">JSON</span>.stringify(responseJson));<span class="hljs-comment">// JSON对象转换为字符串</span><br>  &#125;)<br>&#125;);<br><br><br><span class="hljs-keyword">const</span> port = <span class="hljs-number">8081</span>;<br><br>server.listen(port, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Listen at <span class="hljs-subst">$&#123;port&#125;</span>`</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>客户端</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><br><span class="hljs-keyword">const</span> body = <span class="hljs-built_in">JSON</span>.stringify(&#123;<br>  <span class="hljs-attr">msg</span>: <span class="hljs-string">&#x27;Hello from client&#x27;</span><br>&#125;);<br><br><span class="hljs-keyword">const</span> req = http.request(<span class="hljs-string">&#x27;http:/127.0.0.1:8081&#x27;</span>, &#123;<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>  <span class="hljs-attr">headers</span>: &#123;<br>    <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span><br>  &#125;<br>&#125;, <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> bufs = [];<br>  res.on(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">buf</span>) =&gt;</span> &#123;<br>    bufs.push(buf);<br>  &#125;);<br><br>  res.on(<span class="hljs-string">&#x27;end&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> buf = Buffer.concat(bufs);<br>    <span class="hljs-keyword">const</span> json = <span class="hljs-built_in">JSON</span>.parse(buf);<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;json msg is: &#x27;</span>, json.msg);<br>  &#125;)<br>&#125;);<br><br>req.end(body);<br><br></code></pre></td></tr></table></figure><p>先打开服务器端，再打开客户端。(第一个文件为json.js，第二个为client.js。则先执行<code> node json.js</code>，再执行<code> node client.js</code>)</p><p>收到返回信息：</p><p><img src="https://s2.loli.net/2022/02/09/vVEG134JCUOFs5e.png" alt="image-20220120190645660"></p><h3 id="3-3-用Promise-async-await-重写3-2"><a href="#3-3-用Promise-async-await-重写3-2" class="headerlink" title="3.3 用Promise + async await 重写3.2"></a>3.3 用Promise + async await 重写3.2</h3><p>技巧：将callback转换成promise</p><p>不是所有的回调函数都适合转换成promise，而是只调用一次的回调函数才适合转换为promise。即createServer()不适合转换为promise。</p><p>json.js修改后(输出结果一样)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;http&quot;</span>);<br><br><span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-keyword">async</span> (req, res) =&gt; &#123;<br>  <span class="hljs-comment">// 从客户端接收数据</span><br>  <span class="hljs-keyword">const</span> msg = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> bufs = [];<br><br>    req.on(<span class="hljs-string">&#x27;error&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>      reject(err)<br>    &#125;)<br><br>    req.on(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">buf</span>) =&gt;</span> &#123;<br>      bufs.push(buf);   <span class="hljs-comment">// 把数据收集起来</span><br>    &#125;);<br><br>    req.on(<span class="hljs-string">&quot;end&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> buf = Buffer.concat(bufs).toString(<span class="hljs-string">&quot;utf8&quot;</span>);<br>      <span class="hljs-keyword">let</span> msg = <span class="hljs-string">&#x27;Hello&#x27;</span>;<br>      <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">const</span> ret = <span class="hljs-built_in">JSON</span>.parse(buf);  <span class="hljs-comment">// 转换成JSON对象</span><br>        msg = ret.msg;<br><br>      &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>        <span class="hljs-comment">// console.log(err);</span><br>      &#125;<br><br>      resolve(msg); <span class="hljs-comment">// 返回msg</span><br>    &#125;)<br>  &#125;)<br><br>  <span class="hljs-comment">// 响应</span><br>  <span class="hljs-keyword">const</span> responseJson = &#123;<br>    <span class="hljs-attr">msg</span>: <span class="hljs-string">`receive: <span class="hljs-subst">$&#123;msg&#125;</span>`</span><br>  &#125;;<br>  res.setHeader(<span class="hljs-string">&#x27;Content-Type&#x27;</span>, <span class="hljs-string">&#x27;application/json&#x27;</span>)<br>  res.end(<span class="hljs-built_in">JSON</span>.stringify(responseJson));<br>&#125;);<br><br><br><span class="hljs-keyword">const</span> port = <span class="hljs-number">8081</span>;<br><br>server.listen(port, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Listen at <span class="hljs-subst">$&#123;port&#125;</span>`</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="3-4-静态文件服务"><a href="#3-4-静态文件服务" class="headerlink" title="3.4 静态文件服务"></a>3.4 静态文件服务</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">      alert(<span class="hljs-string">&quot;Hello&quot;</span>)</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>static_server.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;http&quot;</span>);<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><span class="hljs-keyword">const</span> url = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;url&#x27;</span>);<br><br><span class="hljs-keyword">const</span> folderPath = path.join(__dirname, <span class="hljs-string">&#x27;static&#x27;</span>);<br><br><span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">const</span> info = url.parse(req.url);<br><span class="hljs-keyword">const</span> filePath = path.join(folderPath, info.path);<br><br><span class="hljs-keyword">const</span> filestream = fs.createReadStream(filePath);<br><span class="hljs-comment">// createReadStream好处: 减少占用内存空间</span><br><br>filestream.pipe(res);<br><br>&#125;);<br><br><br><span class="hljs-keyword">const</span> port = <span class="hljs-number">8081</span>;<br><br>server.listen(port, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Listen at <span class="hljs-subst">$&#123;port&#125;</span>`</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/01/26/1pfIKGNvWD38HjU.png" alt="image-20220120201216995"></p><p>执行<code>  node static_server.js</code> 后，打开<a href="http://localhost:8081/index.html">http://localhost:8081/index.html</a></p><p><img src="https://s2.loli.net/2022/02/09/OQagcVCHJFqjykA.png" alt="image-20220120201343572"></p><p>之后会报点小错，因为没有ico图标(忽视就好)</p><h3 id="3-5-React-SSR"><a href="#3-5-React-SSR" class="headerlink" title="3.5 React SSR"></a>3.5 React SSR</h3><p>SSR(server side rendering)：服务端渲染</p><ul><li>相对于传统HTML模板引擎：可以避免重复编写代码</li><li>相比于SPA：首屏渲染更快，SEO友好(SPA应用需要加载完所有的js代码后，才可以给用户返回数据)</li></ul><p><b style="color: red">首先要先安装react相关的包</b>，<code> npm i react react-dom</code></p><p>下面就是通过React SSR实现显示Hello的代码(有一点不太明白，还是得等会用ReactDOM、ReactDOMServer模块)</p><p>ssr.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> React = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;react&#x27;</span>);<br><span class="hljs-keyword">const</span> ReactDOMServer = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;react-dom/server&#x27;</span>)<br><br><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;http&quot;</span>);<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params">props</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> React.createElement(<span class="hljs-string">&#x27;div&#x27;</span>, &#123;&#125;, props.children || <span class="hljs-string">&#x27;Hello&#x27;</span>);<br>&#125;<br><br><span class="hljs-keyword">const</span> port = <span class="hljs-number">8081</span>;<br><br><span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.end(<span class="hljs-string">`</span><br><span class="hljs-string">    &lt;!DOCTYPE html&gt;</span><br><span class="hljs-string">    &lt;html lang=&quot;en&quot;&gt;</span><br><span class="hljs-string">      &lt;head&gt;</span><br><span class="hljs-string">        &lt;title&gt;App&lt;/title&gt;</span><br><span class="hljs-string">      &lt;/head&gt;</span><br><span class="hljs-string">      &lt;body&gt;</span><br><span class="hljs-string">        <span class="hljs-subst">$&#123;ReactDOMServer.renderToString(</span></span><br><span class="hljs-subst"><span class="hljs-string">    React.createElement(App, &#123;&#125;, <span class="hljs-string">&#x27;Hello&#x27;</span>))&#125;</span></span><br><span class="hljs-string">      &lt;/body&gt;</span><br><span class="hljs-string">    &lt;/html&gt;</span><br><span class="hljs-string">  `</span>);<br>&#125;);<br><br>server.listen(port, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Listen at <span class="hljs-subst">$&#123;port&#125;</span>`</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="3-6-Debug"><a href="#3-6-Debug" class="headerlink" title="3.6 Debug"></a>3.6 Debug</h3><p>V8 Inspector：开箱即用、与前端开发已知、跨平台</p><p>场景：</p><ul><li>查看console.log内容</li><li>breakpoint</li><li>性能分析</li></ul><p>使用：</p><ol><li><p><code>node --inspect ssr.js</code></p></li><li><p>打开<a href="http://127.0.0.1:9229/json">http://127.0.0.1:9229/json</a></p></li><li><p>复制打开下图红框内容</p><p><img src="https://s2.loli.net/2022/01/26/iyUwYbxmZqzfe2L.png" alt="image-20220120204024901"></p></li><li><p>进入下图界面</p><p><img src="https://s2.loli.net/2022/01/26/LqloF6ZD1JUEBbm.png" alt="image-20220120204058030"></p><p>控制台显示连接上</p><p><img src="https://s2.loli.net/2022/01/26/THy9sv7ERPwlO3i.png" alt="image-20220120204152109"></p></li><li><p>对于阻塞的情况，可以使用log point，相当于console.log</p><p><img src="https://s2.loli.net/2022/02/09/oCiFzcSsamvT9u2.gif" alt="动画"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> 青训营 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP笔记</title>
      <link href="/2022/02/09/yc-http/"/>
      <url>/2022/02/09/yc-http/</url>
      
        <content type="html"><![CDATA[<h1 id="HTTP笔记"><a href="#HTTP笔记" class="headerlink" title="HTTP笔记"></a>HTTP笔记</h1><p>参加字节跳动的青训营时写的笔记。这部分是杨超男老师讲的课。</p><h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h2><ul><li>超文本协议(Hyper Text Transfer Protocol)</li></ul><p><strong>特点</strong>：</p><ul><li>应用层协议，基于TCP协议</li><li>请求响应：遵循客户端-服务端模型，客户端打开一个连接发出请求，然后等待服务器响应</li><li>简单可扩展</li><li>无状态</li></ul><h2 id="2-发展"><a href="#2-发展" class="headerlink" title="2. 发展"></a>2. 发展</h2><p><img src="https://s2.loli.net/2022/01/26/KQnWyJSZYCeNHj6.png" alt="image-20220120171110994"></p><h2 id="3-请求方法"><a href="#3-请求方法" class="headerlink" title="3. 请求方法"></a>3. 请求方法</h2><table><thead><tr><th>方法</th><th>解释</th></tr></thead><tbody><tr><td>GET</td><td>请求一个指定资源的表示形式，用于获取数据</td></tr><tr><td>POST</td><td>用于将实体提交到指定的资源。会导致在服务器上的状态变化或副作用</td></tr><tr><td>PUT</td><td>对服务器的数据进行修改。与POST方法的区别是POST方法侧重于数据的增加，而PUT方法侧重于数据的修改</td></tr><tr><td>DELETE</td><td>删除指定的资源</td></tr><tr><td>HEAD</td><td>类似GET，不过没有响应体</td></tr><tr><td>CONNECT</td><td>建立一个由目标资源标识地服务器的隧道</td></tr><tr><td>OPTIONS</td><td>用于描述目标资源的通信选项(比如预请求允不允许跨域请求跨域请求)</td></tr><tr><td>TRACE</td><td>沿着到目标资源的路径执行一个消息环回测试，主要用于测试</td></tr><tr><td>PATCH</td><td>对资源应用部分修改</td></tr></tbody></table><ul><li><strong>安全</strong>：不会修改服务器的数据的方法<ul><li>GET</li><li>HEAD</li><li>OPTIONS</li></ul></li><li><strong>幂等</strong>：同样的请求被执行一次与连续执行多次的效果一样，服务器的状态也一样。所有安全的请求方法都是幂等的。<ul><li>GET</li><li>HEAD</li><li>OPTIONS</li><li>PUT</li><li>DELETE</li></ul></li></ul><h2 id="4-状态码"><a href="#4-状态码" class="headerlink" title="4. 状态码"></a>4. 状态码</h2><table><thead><tr><th>状态码</th><th>解释</th></tr></thead><tbody><tr><td>1xx</td><td>指示信息。表示请求已接收，继续处理</td></tr><tr><td>2xx</td><td>成功。表示请求已被成功接收、理解、接受</td></tr><tr><td>3xx</td><td>重定向。表示要完成请求必须进行更进一步的操作</td></tr><tr><td>4xx</td><td>客户端错误。表示请求有语法错误或请求无法实现</td></tr><tr><td>5xx</td><td>服务器错误。表示服务器处理请求时发生内部错误</td></tr></tbody></table><h2 id="5-报文"><a href="#5-报文" class="headerlink" title="5. 报文"></a>5. 报文</h2><p>示例：</p><p><img src="https://s2.loli.net/2022/01/26/8l2PKBJhsu1WFHw.png" alt="image-20220120171634175"></p><h3 id="5-1-请求报文"><a href="#5-1-请求报文" class="headerlink" title="5.1 请求报文"></a>5.1 请求报文</h3><ul><li><p>请求行：说明请求类型、要访问的资源以及HTTP版本</p></li><li><p>请求头：说明服务器要使用的信息，如HOST表示请求的主机名，User-Agent表示</p><p>请求的浏览器类型等</p></li><li><p>空行：必须，即使请求数据为空，也必须要有空行。空行的作用是用来通知服务器</p><p>请求头已经结束，接下来是请求数据部分</p></li><li><p>请求数据：请求数据是在POST方法中使用，而不是在GET方法中使用，因为GET方法的请求数据在URL中。</p></li></ul><h3 id="5-2-响应报文"><a href="#5-2-响应报文" class="headerlink" title="5.2 响应报文"></a>5.2 响应报文</h3><ul><li>状态行：由HTTP协议版本号、状态码、状态消息三部分组成</li><li>响应头：说明客户端要使用的信息，如Date表示生成响应报文的日期和时间，Content-Type表示返回的内容的内容类型以及编码类型</li><li>空行：必须，即使响应报文主体为空，也必须要有空行。空行的作用是用来通知客户端响应头已经结束，接下来是响应正文部分</li><li>响应正文：服务器返回给客户端的文本信息</li></ul><h3 id="5-3-常用请求头"><a href="#5-3-常用请求头" class="headerlink" title="5.3 常用请求头"></a>5.3 常用请求头</h3><p><img src="https://s2.loli.net/2022/01/26/x3WI6ziu9sjEfDL.png" alt="image-20220120180206746"></p><h3 id="5-4-常用响应头"><a href="#5-4-常用响应头" class="headerlink" title="5.4 常用响应头"></a>5.4 常用响应头</h3><p><img src="https://s2.loli.net/2022/01/26/uhtAFRbTDS7NfPj.png" alt="image-20220120180305049"></p><h3 id="5-5-缓存"><a href="#5-5-缓存" class="headerlink" title="5.5 缓存"></a>5.5 缓存</h3><ul><li>强缓存<ul><li>Expires</li><li>Cache-Control：可缓存性<ul><li>no-cache：协商缓存验证</li><li>no-store：不使用任何缓存</li></ul></li><li>max-age：到期。单位是秒，存储的最大周期</li><li>must-revalidate：重新验证、重新加载。一旦资源过期，在成功向原始服务器验证之前，不能使用</li></ul></li><li>协商缓存<ul><li>ETag/If-None-Match：资源特定版本的标识符</li><li>Last-Modified/If-Modified-Since：最后修改时间</li></ul></li></ul><p><img src="https://s2.loli.net/2022/01/26/O6QhbtIAUyZGSgF.png" alt="image-20220120210942019"></p><h3 id="5-6-Cookie"><a href="#5-6-Cookie" class="headerlink" title="5.6 Cookie"></a>5.6 Cookie</h3><p><img src="https://s2.loli.net/2022/02/09/P2iRQtWpNIvKHnm.png" alt="image-20220120210132326"></p><h2 id="6-发展"><a href="#6-发展" class="headerlink" title="6. 发展"></a>6. 发展</h2><h3 id="6-1-HTTP-2"><a href="#6-1-HTTP-2" class="headerlink" title="6.1 HTTP/2"></a>6.1 HTTP/2</h3><p>更快、更稳定、更简单</p><ul><li>HTTP/2连接都是永久的，每个来源只需一个连接</li><li>流控制：阻止发送方向接收方发送大量数据的机制</li><li>服务器推送(可选)：收到html后，里面用到的css、js可以在客户端发送请求前主动推送给客户端(预判)</li></ul><h3 id="6-2-HTTPS"><a href="#6-2-HTTPS" class="headerlink" title="6.2 HTTPS"></a>6.2 HTTPS</h3><p>经过TSL/SSL加密</p><ul><li><p>HTTPS：默认端口443</p></li><li><p>HTTP：默认端口80</p></li></ul><h2 id="7-RESTful-API"><a href="#7-RESTful-API" class="headerlink" title="7. RESTful API"></a>7. RESTful API</h2><p><img src="https://s2.loli.net/2022/01/26/dmDTlY6ekp2zSb8.png" alt="image-20220120175816312"></p><h2 id="8-场景"><a href="#8-场景" class="headerlink" title="8. 场景"></a>8. 场景</h2><h3 id="8-1-跨域"><a href="#8-1-跨域" class="headerlink" title="8.1 跨域"></a>8.1 跨域</h3><ul><li><p>CORS：先发送预请求，查看服务器是否允许该跨域请求</p><p><img src="https://s2.loli.net/2022/02/09/Y8CP5pbhEsjAHVe.png" alt="image-20220120212928435"></p><p>相关协议头</p><p><img src="https://s2.loli.net/2022/02/09/sAx3WQuLvdfZYmF.png" alt="image-20220120213000877"></p></li><li><p>代理服务器：原理：同源策略是浏览器的安全策略，不是HTTP的</p><p><img src="https://s2.loli.net/2022/02/09/kBScIN2VF9dEYw1.png" alt="image-20220118155230783"></p></li></ul><h3 id="8-2-登录"><a href="#8-2-登录" class="headerlink" title="8.2 登录"></a>8.2 登录</h3><p><img src="https://s2.loli.net/2022/02/09/gJfaoPdqyle1zFN.png" alt="image-20220120212010182"></p><h2 id="9-优化"><a href="#9-优化" class="headerlink" title="9. 优化"></a>9. 优化</h2><p><img src="https://s2.loli.net/2022/02/09/Bg6Y7UZpezH3RV8.png" alt="image-20220120212241150"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 青训营 </tag>
            
            <tag> http </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webpack笔记</title>
      <link href="/2022/02/06/yc-webpack/"/>
      <url>/2022/02/06/yc-webpack/</url>
      
        <content type="html"><![CDATA[<h1 id="Webpack笔记"><a href="#Webpack笔记" class="headerlink" title="Webpack笔记"></a>Webpack笔记</h1><p>参加字节跳动的青训营时写的笔记。这部分是范文杰老师讲的课。</p><p>插一嘴：范文杰老师的公众号<strong>Tecvan</strong>有很多干活，可以关注一下。(下面的部分有好多都有很有用的扩展链接，偷懒，就直接把老师的公众号贴出来)</p><h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h2><p><img src="https://s2.loli.net/2022/02/06/IkXns8yYKHgZrzp.png" alt="image-20220123215526028"></p><p>Webpack本质上是一种前端资源编译、打包工具。</p><p>功能：</p><ul><li>多份资源文件打包成一个Bundle</li><li>支持Less、Babel、Eslint、TypeScript</li><li>支持模块化处理css、图片等资源文件</li><li>支持HMR(热更新)</li><li>支持Tree-shaking</li><li>支持SourceMap</li><li>,,,</li></ul><h2 id="2-使用Webpack"><a href="#2-使用Webpack" class="headerlink" title="2. 使用Webpack"></a>2. 使用Webpack</h2><h3 id="2-1-使用步骤"><a href="#2-1-使用步骤" class="headerlink" title="2.1 使用步骤"></a>2.1 使用步骤</h3><ol><li><p>安装，<code> npm install webpack webpack-cli -D</code></p></li><li><p>编辑配置文件(webpack.config.js)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: path.join(__dirname, <span class="hljs-string">&#x27;src&#x27;</span>, <span class="hljs-string">&#x27;index.js&#x27;</span>),<br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,<br>    <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>)<br>  &#125;,<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>执行编译命令，<code> npx webpack</code></p></li></ol><h3 id="2-2-核心流程"><a href="#2-2-核心流程" class="headerlink" title="2.2 核心流程"></a>2.2 核心流程</h3><ol><li><strong>入口处理</strong>：从入口文件开始启动编译流程</li><li><strong>依赖解析</strong>：根据<code> require</code>或<code> import</code>等语句找到依赖资源</li><li><strong>资源解析</strong>：根据<code> module</code>配置，调用资源加载器，把css、less、png等非标准JS资源转译成JS内容(Webpack只认识JS)</li><li><strong>资源合并打包</strong>：将转译后的资源合并打包为可以直接在浏览器运行的JS文件，包括代码混淆、代码压缩等操作。</li></ol><p><b style="color: red">递归调用2、3，直到所有资源处理完毕。因为依赖资源可能也会依赖其他资源。</b></p><h3 id="2-3-分类"><a href="#2-3-分类" class="headerlink" title="2.3 分类"></a>2.3 分类</h3><p>Webpack的使用基本都围绕<strong>配置</strong>展开，而配置大致可分为两类：</p><ul><li><strong>流程类</strong>：作用于流程中，直接影响打包效果的配置项</li><li><strong>工具类</strong>：主流程之外，提供更多工程化能力的配置项</li></ul><p><img src="https://s2.loli.net/2022/02/06/bpg3fRc2SeoEBXz.png" alt="image-20220124174806526"></p><h3 id="2-4-练习"><a href="#2-4-练习" class="headerlink" title="2.4 练习"></a>2.4 练习</h3><h4 id="2-4-1-简单使用"><a href="#2-4-1-简单使用" class="headerlink" title="2.4.1 简单使用"></a>2.4.1 简单使用</h4><p><b style="color: red">模块在上一层。(为了不影响观感)</b></p><ol><li>编写代码</li></ol><p><img src="https://s2.loli.net/2022/02/06/6tYolBpqW85Niab.png" alt="image-20220124174656480"></p><ol start="2"><li><p>编辑webpack配置文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: path.join(__dirname, <span class="hljs-string">&#x27;src&#x27;</span>, <span class="hljs-string">&#x27;index.js&#x27;</span>),<br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,<br>    <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>)<br>  &#125;,<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>执行<code> npx webpack</code></p><p><img src="https://s2.loli.net/2022/02/06/Vf2e5YPjGB6QHNc.png" alt="image-20220124175243382"></p></li></ol><h4 id="2-4-2-处理CSS"><a href="#2-4-2-处理CSS" class="headerlink" title="2.4.2 处理CSS"></a>2.4.2 处理CSS</h4><p><img src="https://s2.loli.net/2022/02/06/hdKWLnOr4SicsN7.png" alt="image-20220124180035396"></p><p>按2.4.1的步骤直接执行，会发现出错</p><p><img src="https://s2.loli.net/2022/02/06/qfrm5LzBx7YMtCD.png" alt="image-20220124180151225"></p><p><b style="color: red">原因：Webpack只认识JS，所以需要使用Loader将对应非JS资源转译成JS</b></p><ol><li><p>安装Loader</p><p><code> npm install css-loader style-loader -D</code></p></li><li><p>添加<code> module</code>，使用Loader处理CSS文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: path.join(__dirname, <span class="hljs-string">&#x27;src&#x27;</span>, <span class="hljs-string">&#x27;index.js&#x27;</span>),<br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,<br>    <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>)<br>  &#125;,<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,<br>        use: [<span class="hljs-string">&#x27;style-loader&#x27;</span>, <span class="hljs-string">&#x27;css-loader&#x27;</span>]<br>      &#125;<br>    ]<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>执行<code> npx webpack</code>，成功</p><p><img src="https://s2.loli.net/2022/02/06/k2VSJy5rPZ8jpYA.png" alt="image-20220124180951673"></p></li></ol><h4 id="2-4-3-使用Babel"><a href="#2-4-3-使用Babel" class="headerlink" title="2.4.3 使用Babel"></a>2.4.3 使用Babel</h4><p>Babel用于将使用ES6语法编写的JS代码转换为向后兼容的JavaScript语法，以便能够运行在当前和旧版本的浏览器或其他环境中。</p><ol><li><p>安装依赖。</p><p><code> npm install @babel/core @babel/preset-env babel-loader</code></p></li><li><p>配置。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: path.join(__dirname, <span class="hljs-string">&#x27;src&#x27;</span>, <span class="hljs-string">&#x27;index.js&#x27;</span>),<br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,<br>    <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>)<br>  &#125;,<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,<br>        use: [&#123;<br>          <span class="hljs-attr">loader</span>: <span class="hljs-string">&#x27;babel-loader&#x27;</span>,<br>          <span class="hljs-attr">options</span>: &#123;<br>            <span class="hljs-attr">presets</span>: [<br>              [<br>                <span class="hljs-string">&#x27;@babel/preset-env&#x27;</span><br>              ]<br>            ]<br>          &#125;<br>        &#125;]<br>      &#125;<br>    ]<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><code> npx webpack</code></p><p><strong>源代码</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> add = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b;<br></code></pre></td></tr></table></figure><p><strong>转换后的</strong>：</p><p><img src="https://s2.loli.net/2022/02/06/H3SOZeTbsQWc1af.png" alt="image-20220124191225084"></p></li></ol><h4 id="2-4-4-生成HTML"><a href="#2-4-4-生成HTML" class="headerlink" title="2.4.4 生成HTML"></a>2.4.4 生成HTML</h4><ol><li><p>安装依赖</p><p><code> npm install html-webpack-plugin -D</code></p></li><li><p>配置。因为这个不是loader，而是plugin(插件)，所以配置需要引入插件，然后在<code> plugins</code>中实例化插件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><span class="hljs-keyword">const</span> HtmlWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;html-webpack-plugin&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: path.join(__dirname, <span class="hljs-string">&#x27;src&#x27;</span>, <span class="hljs-string">&#x27;index.js&#x27;</span>),<br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,<br>    <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>)<br>  &#125;,<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-keyword">new</span> HtmlWebpackPlugin()]<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><code>npx webpack</code> </p><p><img src="https://s2.loli.net/2022/02/06/dI1ilLcGVvgxU2k.png" alt="image-20220124192212302"></p></li></ol><h4 id="2-4-5-HMR-热更新"><a href="#2-4-5-HMR-热更新" class="headerlink" title="2.4.5 HMR(热更新)"></a>2.4.5 HMR(热更新)</h4><p>热更新简单来说就是可以在应用运行的时候,不需要刷新页面,就可以实时查看到修改的效果</p><ol><li><p>安装依赖</p><p><code> npm install webpack-dev-server -D</code></p></li><li><p>开启HMR</p></li></ol><p><img src="https://s2.loli.net/2022/02/06/YUXrOxTcFPyupEk.png" alt="image-20220124193400240"></p><ol start="3"><li>启动Webpack</li></ol><p><code> npx webpack serve</code> </p><p><img src="https://s2.loli.net/2022/02/06/uIROe6HBP1vUSVa.gif" alt="动画"></p><p><img src="https://s2.loli.net/2022/02/06/lsMdryi2bhXZnI6.png" alt="image-20220124194101445"></p><h4 id="2-4-6-Tree-Shaking"><a href="#2-4-6-Tree-Shaking" class="headerlink" title="2.4.6 Tree-Shaking"></a>2.4.6 Tree-Shaking</h4><p><strong>Tree-shaking</strong>：树摇，用于删除Dead Code</p><p>Dead Code：</p><ul><li>代码没有被用到</li><li>代码只读不写</li></ul><p>Dead Code例子：</p><p><img src="https://s2.loli.net/2022/02/06/ngbMeHsGUJpLSBQ.png" alt="image-20220124232306850"></p><p>没有使用Tree-Shaking时：</p><p><img src="https://s2.loli.net/2022/02/06/YHcrp6QUniOGWo3.png" alt="image-20220124232435821"></p><p>修改配置文件，开启Tree-Shaking：</p><p><img src="https://s2.loli.net/2022/02/06/cCYBrLUlqyxI7fk.png" alt="image-20220124233227128"></p><p>结果：</p><p><img src="https://s2.loli.net/2022/02/06/XBPMrJuknAVjYFD.png" alt="image-20220124233301693"></p><h3 id="2-5-更多功能"><a href="#2-5-更多功能" class="headerlink" title="2.5 更多功能"></a>2.5 更多功能</h3><ul><li>缓存</li><li>Sourcemap</li><li>性能监控</li><li>日志</li><li>代码压缩</li><li>分包</li></ul><h2 id="3-Loader"><a href="#3-Loader" class="headerlink" title="3. Loader"></a>3. Loader</h2><p>作用：<strong>将资源转译成标准JS</strong>。(因为Webpack只认识JS)</p><h3 id="3-1-Loader使用示例"><a href="#3-1-Loader使用示例" class="headerlink" title="3.1 Loader使用示例"></a>3.1 Loader使用示例</h3><p>使用Loader(处理less)：</p><ol><li><p>安装Loader</p><p><code> npm install style-loader css-loader less-loader -D</code></p></li><li><p>添加<code> module</code>处理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: path.join(__dirname, <span class="hljs-string">&#x27;src&#x27;</span>, <span class="hljs-string">&#x27;index.js&#x27;</span>),<br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,<br>    <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>)<br>  &#125;,<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.less$/</span>,<br>        use: [<span class="hljs-string">&#x27;style-loader&#x27;</span>, <span class="hljs-string">&#x27;css-loader&#x27;</span>, <span class="hljs-string">&#x27;less-loader&#x27;</span>]<br>      &#125;<br>    ]<br>  &#125;,<br><br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p>分析：</p><ul><li>less-loader：实现less -&gt; css的转换</li><li>css-loader：将css转换成module.eports = “${css}”的形式，符合JS的语法(直截了当来说的话，就是把css用js表示)</li><li>style-loader：将css模块包进require语句，并在运行时调用injectStyle等函数<b style="color: red">将内容注入到页面的style标签</b></li></ul><h3 id="3-2-Loader其他特性"><a href="#3-2-Loader其他特性" class="headerlink" title="3.2 Loader其他特性"></a>3.2 Loader其他特性</h3><p><img src="https://s2.loli.net/2022/02/06/Vh7MUkZBvEDjNwT.png" alt="image-20220124235232348"></p><ul><li><strong>链式执行</strong>(过程的输出刚好是下一个过程的输入)</li><li><strong>支持异步执行</strong></li><li>分normal、pitch两种模式(<b style="color: red">这部分没有什么概念</b>)</li></ul><h3 id="3-3-编写简单Loader"><a href="#3-3-编写简单Loader" class="headerlink" title="3.3 编写简单Loader"></a>3.3 编写简单Loader</h3><h4 id="3-3-1-Loader形式"><a href="#3-3-1-Loader形式" class="headerlink" title="3.3.1 Loader形式"></a>3.3.1 Loader形式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">source, sourceMap?, data?</span>) </span>&#123;<span class="hljs-comment">// ?代表参数可有可无</span><br>    <span class="hljs-comment">// source是loader的输入。可能是文件内容或上一个loader处理的结果</span><br>    <br>    <span class="hljs-comment">// ......</span><br>    <br>    <span class="hljs-keyword">return</span> source;<span class="hljs-comment">// 此时的source是指经loader处理后的source(不处理则是原来的source，如eslint-loader)</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-3-2-开始动手"><a href="#3-3-2-开始动手" class="headerlink" title="3.3.2 开始动手"></a>3.3.2 开始动手</h4><p><strong>目录结构</strong></p><p><img src="https://s2.loli.net/2022/02/06/ekhqvYgz78Topy1.png" alt="image-20220125154719915"></p><p><strong>index.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> t1 = <span class="hljs-string">&quot;Hello&quot;</span>;<br></code></pre></td></tr></table></figure><p><strong>自编简单loader</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">source</span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(source);<br>  source += <span class="hljs-string">` let t2 = &#x27; World&#x27;;</span><br><span class="hljs-string">              console.log(t1 + t2);`</span><br>  <span class="hljs-keyword">return</span> source;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>配置文件</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">entry</span>: path.join(__dirname, <span class="hljs-string">&#x27;src&#x27;</span>, <span class="hljs-string">&#x27;index.js&#x27;</span>),<br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;production&#x27;</span>,<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,<br>    <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>)<br>  &#125;,<br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,<br>        use: path.join(__dirname, <span class="hljs-string">&#x27;loader&#x27;</span>, <span class="hljs-string">&#x27;myloader.js&#x27;</span>)<br>      &#125;<br>    ]<br>  &#125;,<br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/02/06/rzc7MKgAXqlEebV.png" alt="image-20220125154908116"></p><p><img src="https://s2.loli.net/2022/02/06/HLW1AXUMh3u9QNI.png" alt="image-20220125154931895"></p><h3 id="3-4-常见Loader"><a href="#3-4-常见Loader" class="headerlink" title="3.4 常见Loader"></a>3.4 常见Loader</h3><p><img src="https://s2.loli.net/2022/01/25/s2kMWbN3cOEwtrf.png" alt="image-20220125155015086"></p><h2 id="4-Plugin-插件"><a href="#4-Plugin-插件" class="headerlink" title="4. Plugin(插件)"></a>4. Plugin(插件)</h2><p>使用如2.4.4所示</p><p>写插件，暂时无能为力，先把课件上的干货放出来(方便以后查看)</p><p><img src="https://s2.loli.net/2022/01/25/v9gXo8siF7eDmct.png" alt="image-20220125155439723"></p><p><img src="https://s2.loli.net/2022/01/25/xMPJvrSybXOgkBz.png" alt="image-20220125155456498"></p><h2 id="5-更多"><a href="#5-更多" class="headerlink" title="5. 更多"></a>5. 更多</h2><p>在老师的公众号可能没有的(老师分享的)</p><p><a href="https://github.com/Tecvan-fe/awesome-webpack-4plus">Awesome Webpack4+ 优秀学习资源</a></p><p><a href="https://webpack.wuhaolin.cn/">深入浅出 Webpack</a></p><p><a href="https://gitmind.cn/app/doc/fac1c196e29b8f9052239f16cff7d4c7">Webpack 5 知识体系</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 青训营 </tag>
            
            <tag> Webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web开发安全</title>
      <link href="/2022/02/06/yc-web-security/"/>
      <url>/2022/02/06/yc-web-security/</url>
      
        <content type="html"><![CDATA[<h1 id="Web开发安全"><a href="#Web开发安全" class="headerlink" title="Web开发安全"></a>Web开发安全</h1><p>参加字节跳动的青训营时写的笔记。这部分是刘宇晨老师讲的课。</p><h2 id="1-攻击"><a href="#1-攻击" class="headerlink" title="1. 攻击"></a>1. 攻击</h2><h3 id="1-1-跨站脚本攻击-XSS"><a href="#1-1-跨站脚本攻击-XSS" class="headerlink" title="1.1 跨站脚本攻击(XSS)"></a>1.1 跨站脚本攻击(XSS)</h3><p>XSS攻击通常指的是通过利用网页开发时留下的漏洞，通过巧妙的方法注入恶意指令代码到网页，使用户加载并执行攻击者恶意制造的网页程序。</p><p>如填写表单信息时，如果盲目相信用户的提交内容，那么假如用户填写了类似<code> &lt;script&gt;alert(&quot;注入恶意代码&quot;)&lt;/script&gt;</code>的信息，然后直接通过element.innerHTML把用户提交的代码存起来的话，那么工具者就可以实现攻击了。</p><p>比较巧妙的攻击方式：</p><p><img src="https://s2.loli.net/2022/02/06/pB7uNcWPvFAMtG9.png" alt="image-20220127180108501"></p><p><strong>XSS特点</strong>：</p><ul><li>通常难以从UI上发现，因为是在暗地里执行脚本</li><li>可以窃取用户信息(cookie、token)</li><li>还可以绘制UI(如弹窗)，诱骗用户点击</li></ul><p>demo：</p><p><img src="https://s2.loli.net/2022/02/06/KBule7Yj8ypvJXN.png" alt="image-20220127173357726"></p><h4 id="1-1-1-Stored-XSS"><a href="#1-1-1-Stored-XSS" class="headerlink" title="1.1.1 Stored XSS"></a>1.1.1 Stored XSS</h4><p>把恶意脚本存储在被攻击网站的数据库中。当其他人访问页面时，回去读数据，然后就会执行到数据库中的恶意脚本，从而被攻击。<b style="color: red">危害最大，对全部用户可见</b></p><h4 id="1-1-2-Reflected-XSS"><a href="#1-1-2-Reflected-XSS" class="headerlink" title="1.1.2 Reflected XSS"></a>1.1.2 Reflected XSS</h4><ul><li>不涉及数据库</li><li>从URL上进行攻击</li></ul><p><img src="https://s2.loli.net/2022/02/06/P9ufYFds2biRKwS.png" alt="image-20220127174047613"></p><h4 id="1-1-3-DOM-based-XSS"><a href="#1-1-3-DOM-based-XSS" class="headerlink" title="1.1.3 DOM-based XSS"></a>1.1.3 DOM-based XSS</h4><ul><li>不需要服务器的参与</li><li>恶意攻击的发起、执行，都在浏览器完成</li></ul><p><img src="https://s2.loli.net/2022/02/06/5agcRdhjMuPqxD1.png" alt="image-20220127174625118"></p><p><b style="color: red">和Reflected XSS很像，不过，Reflected XSS的恶意脚本是注入到服务器中，而DOM-based XSS的恶意脚本是注入到浏览器中，而且攻击不需要服务器的参与</b></p><h4 id="1-1-4-Mutation-based-XSS"><a href="#1-1-4-Mutation-based-XSS" class="headerlink" title="1.1.4 Mutation-based XSS"></a>1.1.4 Mutation-based XSS</h4><ul><li>利用浏览器渲染DOM的特性(独特优化)</li><li>按浏览器进行攻击</li></ul><h3 id="2-跨站伪造请求CSRF"><a href="#2-跨站伪造请求CSRF" class="headerlink" title="2. 跨站伪造请求CSRF"></a>2. 跨站伪造请求CSRF</h3><p><strong>CSRF攻击</strong>：在用户不知情的前提下，利用用户权限(cookie)，构造HTTP请求，窃取或修改用户敏感信息。</p><p><img src="https://s2.loli.net/2022/02/06/L35BGtUMJaleTpj.png" alt="image-20220127180459599"></p><p>经典例子：银行转账</p><p>首先，a为了转账给b10000元，于是a登录银行页面进行转账操作, <b style="color: red">还没有推出登录</b>，又收到中奖通知链接(假的或者是只有小额鱼饵)，a点击链接，并点击领奖按钮。然后发现钱被转走了100000元了。</p><p>CSRF攻击原理：利用<b style="Color: red">cookie的自动携带特性</b>，在其他网站向你的网站发送请求时，如果网站中的用户没有退出登录，而发送的请求又是一些敏感的操作请求(如转账)，则会给用户带来巨大的损失。</p><h3 id="3-注入攻击injection"><a href="#3-注入攻击injection" class="headerlink" title="3. 注入攻击injection"></a>3. 注入攻击injection</h3><h4 id="3-1-SQL注入"><a href="#3-1-SQL注入" class="headerlink" title="3.1 SQL注入"></a>3.1 SQL注入</h4><p><img src="https://s2.loli.net/2022/02/06/b3rvj1keGdLSUs7.png" alt="image-20220127202310672"></p><p>demo</p><p><img src="https://s2.loli.net/2022/02/06/MZgyfvjwKi4d3C7.png" alt="image-20220127202606829"></p><h3 id="4-Dos"><a href="#4-Dos" class="headerlink" title="4. Dos"></a>4. Dos</h3><p>通过某种方式(构造特定请求)，导致服务器资源被显著消耗，来不及响应更多请求，导致请求挤压，进而引起雪崩效应。</p><h3 id="4-1-ReDoS"><a href="#4-1-ReDoS" class="headerlink" title="4.1 ReDoS"></a>4.1 ReDoS</h3><p>例子：上网找到了讲的非常好的文章</p><p><a href="https://blog.csdn.net/systemino/article/details/89913551">正则表达式所引发的DoS攻击(ReDoS)</a></p><h3 id="4-2-Distributed-DOS-DDoS"><a href="#4-2-Distributed-DOS-DDoS" class="headerlink" title="4.2 Distributed DOS(DDoS)"></a>4.2 Distributed DOS(DDoS)</h3><p>短时间内，来自大量僵尸设备的请求，服务器不能及时响应全部请求，导致请求堆积，进而引发雪崩效应，无法响应新请求。</p><p>攻击特点：</p><ul><li>直接访问IP</li><li>任意API</li><li>消耗大量带宽(耗尽)</li></ul><p>DDoS攻击 demo：SYN Flood</p><p>原理：TCP的三次握手</p><p><img src="https://s2.loli.net/2022/02/06/a4FQpvyedsrHW3g.png" alt="image-20220127205207771"></p><p>如果客户端给服务器发送的ACK丢失的话，服务器不知道丢失，会等客户端的ACK，超时后重新发送SYN-ACK消息给客户端，直到重试超过一定次数才会放弃。</p><p>而SYN Flood就是通过发送大量的SYN，但是不给服务器发送ACK，从而耗尽服务器的资源。</p><p><img src="https://s2.loli.net/2022/01/27/wmpI8bKUcugOQnJ.png" alt="image-20220127205705566"></p><h3 id="5-中间人攻击"><a href="#5-中间人攻击" class="headerlink" title="5. 中间人攻击"></a>5. 中间人攻击</h3><p><img src="https://s2.loli.net/2022/01/27/o6qOfQANlgRWmJY.png" alt="image-20220127205738271"></p><h2 id="2-防御"><a href="#2-防御" class="headerlink" title="2. 防御"></a>2. 防御</h2><h3 id="2-1-XSS"><a href="#2-1-XSS" class="headerlink" title="2.1 XSS"></a>2.1 XSS</h3><p>方案：</p><ul><li>永远不信任用户的提交内容</li><li>不把用户提交内容直接转换成DOM</li></ul><p>现成工具：</p><ul><li>前端：<ul><li>主流框架默认防御XSS</li><li>google-closure-library</li></ul></li><li>服务端(Node)：<ul><li>DOMPurify</li></ul></li></ul><h3 id="2-2-CSRF"><a href="#2-2-CSRF" class="headerlink" title="2.2 CSRF"></a>2.2 CSRF</h3><h4 id="2-2-1-同源政策"><a href="#2-2-1-同源政策" class="headerlink" title="2.2.1 同源政策"></a>2.2.1 同源政策</h4><p><strong>浏览器的同源政策</strong>：A网页设置的 Cookie，B网页不能打开，除非这两个网页”同源”。所谓”同源”指的是”三个相同”。(出自阮一峰的网络日志)</p><ul><li>协议相同</li><li>域名相同</li><li>端口相同</li></ul><p>同源政策的目的，是为了保证用户信息的安全，防止恶意的网站窃取数据。</p><p><img src="https://s2.loli.net/2022/01/27/mJVtw9pxQGkoCz2.png" alt="image-20220127230913468"></p><h4 id="2-2-2-CSP"><a href="#2-2-2-CSP" class="headerlink" title="2.2.2 CSP"></a>2.2.2 CSP</h4><p>CSP(Content Security Policy)：内容安全策略</p><ul><li>决定好哪些源(域名)是安全的</li><li>来自安全源的脚本可以执行，否则直接报错</li><li>对于eval / inline script 直接禁止</li></ul><p>两种形式：</p><ul><li><p>服务器的响应头部：</p><p><img src="https://s2.loli.net/2022/01/27/o7XIRZhdkUWPGx9.png" alt="image-20220127232201451"></p></li><li><p>浏览器meta</p><p><img src="https://s2.loli.net/2022/01/27/cLzb9X4HDhJx1yQ.png" alt="image-20220127232216808"></p></li></ul><h4 id="2-2-3-CSRF防御-token"><a href="#2-2-3-CSRF防御-token" class="headerlink" title="2.2.3 CSRF防御(token)"></a>2.2.3 CSRF防御(token)</h4><p><img src="https://s2.loli.net/2022/01/27/1OJQuRLCISD6qig.png" alt="image-20220127232639659"></p><h4 id="2-2-4-SameSite-Cookie"><a href="#2-2-4-SameSite-Cookie" class="headerlink" title="2.2.4 SameSite Cookie"></a>2.2.4 SameSite Cookie</h4><p>避免用户信息被携带</p><p>下面的部分参考自<a href="https://www.ruanyifeng.com/blog/2019/09/cookie-samesite.html">Cookie 的 SameSite 属性</a></p><p>Cookie的SameSite属性用来限制第三方Cookie，从而减少安全风险。</p><p>可以设置成三个值：</p><ul><li><p><strong>Strict</strong>：最严格。完全禁止第三方Cookie，跨站点时，任何情况都不会发送Cookie</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Set-Cookie: CookieName=CookieValue; SameSite=Strict;<br></code></pre></td></tr></table></figure><p>用户体验不会很好。比如访问别人的项目网站时，有个fork me链接到github，然后点击跳转不会带有github的token，所以跳转过后，都会是未登录状态</p></li><li><p><strong>Lax</strong>：大多数情况不发送第三方Cookie，但是<b style="color: red">导航到目标地址的GET请求</b>会发送。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Set-Cookie: CookieName=CookieValue; SameSite=Lax;<br></code></pre></td></tr></table></figure><p>导航到目标地址的GET请求：<b style="color: red">链接、预加载、GET表单</b></p><p><img src="https://s2.loli.net/2022/01/27/Hl86by42ZdqEUYm.png" alt="image-20220127234433512"></p><p><b style="color: red">设置了Strict或Lax之后，基本杜绝了CSRF攻击。</b></p></li><li><p><strong>None</strong>：显示关闭SameSite属性。前提是需要同时设置Secure属性(Cookie只能通过HTTPS协议发送)，否则无效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Set-Cookie: widget_session=abc123; SameSite=None; Secure<br></code></pre></td></tr></table></figure><p>应用场景是依赖Cookie的第三方服务：如网站内嵌其他网站的播放器，开启SameSite属性后，就识别不了用户的登录态，也就发不了弹幕了</p></li></ul><h4 id="2-2-5-SameSite和CORS的区别"><a href="#2-2-5-SameSite和CORS的区别" class="headerlink" title="2.2.5 SameSite和CORS的区别"></a>2.2.5 SameSite和CORS的区别</h4><p><img src="https://s2.loli.net/2022/01/27/MBQCtgd3Z4wA187.png" alt="image-20220127235222723"></p><h3 id="2-3-Injection"><a href="#2-3-Injection" class="headerlink" title="2.3 Injection"></a>2.3 Injection</h3><p><img src="https://s2.loli.net/2022/01/27/SaQpwdnDfh2PzOG.png" alt="image-20220127235528020"></p><p>貌似是Java中的，我没用过，也不好说。不过查了下资料，prepareStatement对象防止sql注入的方式是<strong>把用户非法输入的单引号用\反斜杠做了转义</strong>，从而达到了防止sql注入的目的。</p><p><strong>在SQL语句外做的防御</strong>：</p><p><img src="https://s2.loli.net/2022/01/27/8JgET6bfKeABWuy.png" alt="image-20220127235830052"></p><h3 id="2-4-Dos"><a href="#2-4-Dos" class="headerlink" title="2.4 Dos"></a>2.4 Dos</h3><h4 id="2-4-1-ReDoS"><a href="#2-4-1-ReDoS" class="headerlink" title="2.4.1 ReDoS"></a>2.4.1 ReDoS</h4><ul><li>Review代码</li><li>代码扫描 + 正则性能测试</li><li>拒绝使用用户提供的正则</li></ul><h4 id="2-4-2-DDoS"><a href="#2-4-2-DDoS" class="headerlink" title="2.4.2 DDoS"></a>2.4.2 DDoS</h4><p><img src="https://s2.loli.net/2022/01/28/aPq9HzvyMGAENFb.png" alt="image-20220128000235944"></p><h3 id="2-5-防御中间人攻击"><a href="#2-5-防御中间人攻击" class="headerlink" title="2.5 防御中间人攻击"></a>2.5 防御中间人攻击</h3><p><b style="color: red">HTTPS防止中间人攻击</b></p><p>HTTPS 其实是<code>SSL+HTTP</code>的简称,当然现在<code>SSL</code>基本已经被<code>TLS</code>取代了</p><p><img src="https://s2.loli.net/2022/01/28/BdbPkZ7gx3uJiLV.png" alt="image-20220128000730701"></p><p><strong>HTTPS的一些特性</strong>：</p><ul><li>可靠性：加密(非明文)</li><li>完整性：MAC验证(防篡改)，通过hash算法来实现，所以就算只有很小的改变，hash输出结果也会变化很大</li><li>不可抵赖性：数字签名(确定身份)</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 青训营 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端动画实现笔记</title>
      <link href="/2022/01/25/yc-animation/"/>
      <url>/2022/01/25/yc-animation/</url>
      
        <content type="html"><![CDATA[<h1 id="前端动画实现笔记"><a href="#前端动画实现笔记" class="headerlink" title="前端动画实现笔记"></a>前端动画实现笔记</h1><p>参加字节跳动的青训营时个人写的笔记。这部分是蒋翔老师讲的课。</p><p>动画：动画是通过快速连续排列彼此差异极小的连续图像来制造运动错觉和变化错觉的过程。</p><ul><li>快速</li><li>连续排列</li><li>彼此差异极小</li><li>制造错觉</li></ul><p><img src="https://clz.vercel.app/medias/my_comment_bg.jpg" alt="duck"></p><p><strong>动画都需要定义两个基本状态，即起始状态和结束状态，然后填补两者之间的空白，让动画连贯。</strong></p><p>空白的补全方法有两种：</p><ul><li><strong>补间动画</strong>：传统动画。主画师绘制关键帧，补间动画师补充关键帧。(而在前端中，补间动画师就由浏览器来当，如keyframe和transition)</li><li><strong>逐帧动画</strong>：每一帧都由主画师绘制。(如由steps实现的精灵动画)</li></ul><p>常见的前端动画技术：Sprite动画、CSS动画、JS动画、SVG动画、WebGL动画</p><h2 id="1-CSS动画"><a href="#1-CSS动画" class="headerlink" title="1. CSS动画"></a>1. CSS动画</h2><p>CSS animation是常见的CSS动画实现方式</p><ul><li>animation-name：应用的一系列动画。每个名称代表一个由<code> @keyframes</code>定义的动画序列</li><li>animation-duration：一个动画周期的时长(默认是0s，表示无动画)</li><li>animation-timing-function：CSS动画在每一动画周期中执行的节奏</li><li>animation-delay：动画延时播放</li><li>animation-iteration-count：动画在结束前运行的次数，可以是1次，也可以是无限循环</li><li>animation-direction：动画是否反向播放</li><li>animation-play-state：定义一个动画是否运行或暂停</li></ul><h3 id="1-1-translate-移动"><a href="#1-1-translate-移动" class="headerlink" title="1.1 translate(移动)"></a>1.1 translate(移动)</h3><p>定义元素的平移变换。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">background-color</span>: red;<br>  <span class="hljs-attribute">animation</span>: Translate infinite <span class="hljs-number">4s</span> linear;<br>&#125;<br><br><span class="hljs-keyword">@keyframes</span> Translate &#123;<br>  <span class="hljs-number">0%</span> &#123;<br>    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>  &#125;<br>  <span class="hljs-number">25%</span> &#123;<br>    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(<span class="hljs-number">0</span>, <span class="hljs-number">200px</span>);<br>  &#125;<br>  <span class="hljs-number">50%</span> &#123;<br>    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(<span class="hljs-number">200px</span>, <span class="hljs-number">200px</span>);<br>  &#125;<br>  <span class="hljs-number">75%</span> &#123;<br>    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(<span class="hljs-number">200px</span>, <span class="hljs-number">0</span>);<br>  &#125;<br>  <span class="hljs-number">100%</span> &#123;<br>    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/01/25/uHF3YfOLzotbG1l.gif" alt="动画"></p><h3 id="1-2-scale-缩放"><a href="#1-2-scale-缩放" class="headerlink" title="1.2 scale(缩放)"></a>1.2 scale(缩放)</h3><p>定义元素的缩小放大</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">background-color</span>: red;<br>  <span class="hljs-attribute">animation</span>: Scale infinite <span class="hljs-number">2s</span> linear;<br>  <span class="hljs-attribute">transform-origin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span>; <span class="hljs-comment">/*缩放基准点*/</span><br>&#125;<br><br><span class="hljs-keyword">@keyframes</span> Scale &#123;<br>  <span class="hljs-selector-tag">from</span> &#123;<br>    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br>  &#125;<br>  <span class="hljs-selector-tag">to</span> &#123;<br>    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>);<span class="hljs-comment">/*第一个、第二个参数分别是x轴、y轴缩放的倍数*/</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/01/25/NmUHI8zh4fOw1xF.gif" alt="动画1"></p><h3 id="1-3-rotate-旋转"><a href="#1-3-rotate-旋转" class="headerlink" title="1.3 rotate(旋转)"></a>1.3 rotate(旋转)</h3><p>定义元素的旋转</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">background-color</span>: red;<br>  <span class="hljs-attribute">animation</span>: Scale infinite <span class="hljs-number">4s</span> linear;<br>&#125;<br><br><span class="hljs-keyword">@keyframes</span> Scale &#123;<br>  <span class="hljs-selector-tag">from</span> &#123;<br>    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">0</span>);<br>  &#125;<br>  <span class="hljs-number">100%</span> &#123;<br>    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">360deg</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/01/25/mHpSAQilKRXtwuc.gif" alt="动画"></p><h3 id="1-4-skew-倾斜"><a href="#1-4-skew-倾斜" class="headerlink" title="1.4 skew(倾斜)"></a>1.4 skew(倾斜)</h3><p>定义元素的倾斜</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">background-color</span>: red;<br>  <span class="hljs-attribute">animation</span>: Translate <span class="hljs-number">1s</span> linear forwards;<br>&#125;<br><br><span class="hljs-keyword">@keyframes</span> Translate &#123;<br>  <span class="hljs-selector-tag">from</span> &#123;<br>    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">skew</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>  &#125;<br>  <span class="hljs-selector-tag">to</span> &#123;<br>    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">skew</span>(<span class="hljs-number">0</span>, <span class="hljs-number">45deg</span>); <span class="hljs-comment">/* 第一个参数是水平方向的倾斜角度，第二个参数是垂直方向的倾斜角度 */</span><br>    <span class="hljs-comment">/* transform: skew(45deg, 0); */</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/01/25/8OZCty5rSQKXsNx.gif" alt="动画"></p><h3 id="1-5-CSS-精灵动画"><a href="#1-5-CSS-精灵动画" class="headerlink" title="1.5 CSS 精灵动画"></a>1.5 CSS 精灵动画</h3><p><a href="https://codepen.io/jiangxiang/pen/GRmarxE">CSS steps实现逐帧动画</a></p><p>效果(直接打开可能会看不了，可能要科学上网，蒋翔老师的这张图片好像是放到github上的)</p><p><img src="https://s2.loli.net/2022/01/25/9gUBVTw8yD5Outs.gif" alt="动画"></p><h3 id="1-6-CSS动画优缺点"><a href="#1-6-CSS动画优缺点" class="headerlink" title="1.6 CSS动画优缺点"></a>1.6 CSS动画优缺点</h3><p>优点：简单、高效。不依赖于主线程，采用硬件加速(GPU)。</p><p>缺点：不能动态修改或定义动画的内容，不同的动画无法实现同步，多个动画无法堆叠</p><p>使用场景：简单的H5活动/宣传页</p><p>相关库：animation.css、shake.css</p><h3 id="1-7-CSS属性"><a href="#1-7-CSS属性" class="headerlink" title="1.7 CSS属性"></a>1.7 CSS属性</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/filter">filter CSS属性</a></p><p>这部分不知道为什么放在了SVG部分，不过个人又放到了CSS这边。(感觉以后可能能用上)</p><h2 id="2-SVG动画"><a href="#2-SVG动画" class="headerlink" title="2. SVG动画"></a>2. SVG动画</h2><p>SVG是基于XML的矢量图形描述语言，可以和CSS、JS很好的配合。</p><p>实现SVG动画有三种方式：</p><ul><li>SMIL</li><li>JS</li><li>CSS</li></ul><h3 id="2-1-line"><a href="#2-1-line" class="headerlink" title="2.1 line"></a>2.1 line</h3><p>JS笔画的原理：stroke-dashoffset、stroke-dasharray配合使用实现笔画效果。</p><ul><li>属性stroke-dasharray可控制用来描边的点画线的图案。它是一个数列，指定短划线和空白的长度。如果提供奇数个值，则这个值的数列重复一次。如1,2,3等同于1,2,3,1,2,3</li><li>属性stroke-dashoffset属性指定dash模式到路径开始的距离</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;line stroke-dasharray=&quot;10, 5&quot;<br>      x1=&quot;10&quot; y1=&quot;10&quot; x2=&quot;100&quot; y2=&quot;10&quot; /&gt;<br>&lt;!--  10像素短划线，5像素空白。起点是(10, 10), 终点是(100, 10)  --&gt;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/01/25/MmXsOeSiEj1u9C6.png" alt="image-20220122184357682"></p><p><a href="https://codepen.io/jiangxiang/pen/LYzvvxd">更多例子</a></p><h3 id="2-2-path"><a href="#2-2-path" class="headerlink" title="2.2 path"></a>2.2 path</h3><p><strong>这部分待后续填坑</strong></p><p><img src="https://s2.loli.net/2022/01/25/ceImrnOgFi9S6XH.png" alt="image-20220122184551802"></p><p><a href="https://codepen.io/jiangxiang/pen/eYWagxq">例子</a></p><h3 id="2-3-演示"><a href="#2-3-演示" class="headerlink" title="2.3 演示"></a>2.3 演示</h3><p><b style="color: red">不是本人写的。属于是分享链接</b></p><p><a href="https://codepen.io/jiangxiang/pen/MWmdjeY">文字变形</a></p><p><a href="https://codepen.io/jiangxiang/pen/rNmgjqX">写字效果</a></p><h3 id="2-4-SVG优点与缺点"><a href="#2-4-SVG优点与缺点" class="headerlink" title="2.4 SVG优点与缺点"></a>2.4 SVG优点与缺点</h3><ul><li><strong>优点</strong>：通过矢量元素实现动画，不同的屏幕下都有较好的清晰度。可以实现描字、形变等特殊效果</li><li><strong>缺点</strong>：使用复杂(个人现阶段属于是一头雾水)</li></ul><h2 id="3-JS动画"><a href="#3-JS动画" class="headerlink" title="3. JS动画"></a>3. JS动画</h2><p>JS可以实现很多复杂的动画，还可以操作canvas进行绘制。</p><p><strong>JS动画函数封装</strong>(蒋翔老师讲课用上的)：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">animate</span> (<span class="hljs-params">&#123;easing, draw, duration&#125;</span>) </span>&#123;<br><br>  <span class="hljs-keyword">let</span> start = performance.now();<span class="hljs-comment">// 不使用Date.now()的原因是performance.now()以恒定速度自增，精确到微秒级别，不易被篡改</span><br>  <br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> &#123;<br>     requestAnimationFrame(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">animate</span>(<span class="hljs-params">time</span>) </span>&#123;<br>        <span class="hljs-comment">// timeFraction goes from 0 to 1</span><br>        <span class="hljs-keyword">let</span> timeFraction = (time - start) / duration;<br>        <span class="hljs-keyword">if</span> (timeFraction &gt; <span class="hljs-number">1</span>) timeFraction = <span class="hljs-number">1</span>;<br><br>        <span class="hljs-comment">// calculate the current animation state</span><br>        <span class="hljs-keyword">let</span> progress = easing(timeFraction)<br><br>        draw(progress); <span class="hljs-comment">// draw it</span><br><br>        <span class="hljs-keyword">if</span> (timeFraction &lt; <span class="hljs-number">1</span>) &#123;<br>          requestAnimationFrame(animate);<br>           <span class="hljs-comment">/*</span><br><span class="hljs-comment">           * 使用RequestAnimationFrame而不是使用setTimeout或setInterval的原因：</span><br><span class="hljs-comment">           * 该方法允许回调函数在浏览器准备重绘时运行，而且很快</span><br><span class="hljs-comment">           * 当页面在后台时，也就不会有重绘，所以回调函数也不会运行，所以动画会暂停，不会消耗资源</span><br><span class="hljs-comment">           */</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          resolve();<br>        &#125;<br><br>     &#125;);<br>  &#125;);<br><br>&#125;<br></code></pre></td></tr></table></figure><p>参数：</p><ul><li><p><strong>easing</strong>：缓动函数。决定执行进度在时间增加的过程中的变化，可以是线性的，也可以是非线性的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-title">easing</span>(<span class="hljs-params">timeFraction</span>)</span> &#123;<br>  <span class="hljs-keyword">return</span> timeFraction * <span class="hljs-number">100</span>;<br>&#125;,<br></code></pre></td></tr></table></figure></li><li><p><strong>draw</strong>：绘制函数。相当于画笔，会一直反复被调用。入参是当前执行的进度progress，是一个介于0到1之间的数字</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> draw = <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> &#123;<br>  ball.style.transform = <span class="hljs-string">`translate(<span class="hljs-subst">$&#123;progress&#125;</span>px, 0)`</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>duration</strong>：持续时间</p></li></ul><h3 id="3-1-匀速运动"><a href="#3-1-匀速运动" class="headerlink" title="3.1 匀速运动"></a>3.1 匀速运动</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> draw = <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> &#123;<br>  ball.style.transform = <span class="hljs-string">`translate(<span class="hljs-subst">$&#123;progress * <span class="hljs-number">100</span>&#125;</span>px, 0)`</span>;   <span class="hljs-comment">// 一秒走100像素</span><br>&#125;<br><br>animate(&#123;<br>    <span class="hljs-function"><span class="hljs-title">easing</span>(<span class="hljs-params">timeFraction</span>)</span> &#123;<br>  <span class="hljs-keyword">return</span> timeFraction;<br>&#125;,<br>    draw,<br>    <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span><br>&#125;)<br></code></pre></td></tr></table></figure><p><a href="https://codepen.io/jiangxiang/pen/rNmgVKK">更多</a></p><p>这部分还不是很明白，和数学挂上钩了(累)。</p><h2 id="4-优化"><a href="#4-优化" class="headerlink" title="4. 优化"></a>4. 优化</h2><p>性能角度：页面渲染的一般过程：JS -&gt; CSS -&gt; 计算样式 -&gt; 布局 -&gt; 绘制-&gt;渲染层合并。其中，布局(重排)和绘制(重绘)是最耗时的两部分，所以应尽可能减少这两部分。</p><p><img src="https://s2.loli.net/2022/01/25/TZVLP8nfoyhHmb2.png" alt="image-20220122215918667"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 青训营 </tag>
            
            <tag> 动画 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WebGL基础笔记</title>
      <link href="/2022/01/24/yc-WebGL/"/>
      <url>/2022/01/24/yc-WebGL/</url>
      
        <content type="html"><![CDATA[<h1 id="WebGL基础笔记"><a href="#WebGL基础笔记" class="headerlink" title="WebGL基础笔记"></a>WebGL基础笔记</h1><p>个人参加字节跳动的青训营时写的笔记。这部分是月影老师讲的WebGL基础。</p><h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h2><p>WebGL代码有两部分：</p><ul><li>运行在CPU上的JavaScript</li><li>运行在GPU上的GLSL</li></ul><p><strong>CPU和GPU</strong>：</p><ul><li>CPU适合比较复杂的任务，不适合量大但每个单元比较简单的任务</li><li>GPU有大量的小运算单元构成，每个运算单元只负责处理<strong>简单</strong>的计算，每个运算单元彼此独立。所有计算可以并行处理。适合量大但每个单元比较简单的任务。</li></ul><p>图像的处理适合交给GPU，因为图像会有很多的像素点需要处理。</p><h2 id="2-流程"><a href="#2-流程" class="headerlink" title="2. 流程"></a>2. 流程</h2><p>这部分只能说似懂非懂(任重而道远啊)，先贴一下课上的示例代码，方便之后看。</p><p><img src="https://s2.loli.net/2022/01/24/c4mPWogj9vIVfR6.png" alt="image-20220121161752150"></p><ol><li><p>创建WebGL上下文</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;canvas&#x27;</span>);<br><span class="hljs-keyword">const</span> gl = canvas.getContext(<span class="hljs-string">&#x27;webgl&#x27;</span>);<br></code></pre></td></tr></table></figure></li><li><p>创建WebGL程序(GLSL，顶点着色器、片元着色器)</p><p><strong>顶点着色器</strong>(Vertex Shader)：</p><p><img src="https://s2.loli.net/2022/01/24/tapPx5QJwurCEX4.png" alt="image-20220121163200070"></p><p><strong>片元着色器</strong>(Fragment Shader)：顶点之间的轮廓中的所有像素都会经过片元着色器处理。(并行处理)</p><p><img src="https://s2.loli.net/2022/01/24/r19PV7sUClEGcDY.png" alt="image-20220121163223930"></p><p><img src="https://s2.loli.net/2022/01/24/jnvh4zaoqIReFJ5.png" alt="image-20220121163501575"></p></li><li><p>将数据存入缓冲区</p><p><img src="https://s2.loli.net/2022/01/24/3lp5OzrWq9ZIJCA.png" alt="image-20220121163750505"></p></li><li><p>将缓冲区数据读取到GPU</p><p><img src="https://s2.loli.net/2022/01/24/lDbBEtJQh6Paio7.png" alt="image-20220121164109751"></p></li><li><p>GPU执行WebGL程序，输出结果</p><p><img src="https://s2.loli.net/2022/01/24/3p1A2IRkV9BZJPX.png" alt="image-20220121164208556"></p></li></ol><p>完整代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1. 创建WebGL上下文</span><br><span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;canvas&#x27;</span>);<br><span class="hljs-keyword">const</span> gl = canvas.getContext(<span class="hljs-string">&#x27;webgl&#x27;</span>);<br><br><span class="hljs-comment">// 2. 创建WebGL程序</span><br><br><span class="hljs-comment">// 2.1 顶点着色器</span><br><span class="hljs-keyword">const</span> vertex = <span class="hljs-string">`</span><br><span class="hljs-string">  attribute vec2 position;</span><br><span class="hljs-string"></span><br><span class="hljs-string">  void main() &#123;</span><br><span class="hljs-string">    gl_PointSize = 1.0;</span><br><span class="hljs-string">    gl_Position = vec4(position, 1.0, 1.0);</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string">`</span>;<br><br><span class="hljs-comment">// 2.2 片元着色器</span><br><span class="hljs-keyword">const</span> fragment = <span class="hljs-string">`</span><br><span class="hljs-string">  precision mediump float;</span><br><span class="hljs-string"></span><br><span class="hljs-string">  void main()</span><br><span class="hljs-string">  &#123;</span><br><span class="hljs-string">    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);// 类似rgba</span><br><span class="hljs-string">  &#125;    </span><br><span class="hljs-string">`</span>;<br><br><span class="hljs-comment">// 2.3 加载、编译、使用着色器</span><br><span class="hljs-keyword">const</span> vertexShader = gl.createShader(gl.VERTEX_SHADER);<br>gl.shaderSource(vertexShader, vertex);<br>gl.compileShader(vertexShader);<br><br><span class="hljs-keyword">const</span> fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);<br>gl.shaderSource(fragmentShader, fragment);<br>gl.compileShader(fragmentShader);<br><br><br><span class="hljs-keyword">const</span> program = gl.createProgram();<br>gl.attachShader(program, vertexShader);<br>gl.attachShader(program, fragmentShader);<br>gl.linkProgram(program);<br>gl.useProgram(program);<br><br><span class="hljs-keyword">const</span> points = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Float32Array</span>([<br>  -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>,<br>  <span class="hljs-number">0</span>, <span class="hljs-number">1</span>,<br>  <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>,<br>]);<br><br><span class="hljs-comment">// 3. 将数据存入缓存区</span><br><span class="hljs-keyword">const</span> bufferId = gl.createBuffer();<br>gl.bindBuffer(gl.ARRAY_BUFFER, bufferId);<br>gl.bufferData(gl.ARRAY_BUFFER, points, gl.STATIC_DRAW);<br><br><span class="hljs-comment">// 4. 将缓冲区数据读取到GPU</span><br><span class="hljs-keyword">const</span> vPosition = gl.getAttribLocation(program, <span class="hljs-string">&#x27;position&#x27;</span>);<br>gl.vertexAttribPointer(vPosition, <span class="hljs-number">2</span>, gl.FLOAT, <span class="hljs-literal">false</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>gl.enableVertexAttribArray(vPosition);<br><br><span class="hljs-comment">// 5. GPU执行WebGL程序</span><br>gl.clear(gl.COLOR_BUFFER_BIT);<br>gl.drawArrays(gl.TRIANGLES, <span class="hljs-number">0</span>, points.length / <span class="hljs-number">2</span>);  <span class="hljs-comment">// points中有六个点，实际上只有三个点，所以需要除以2</span><br></code></pre></td></tr></table></figure><p>效果：</p><p><img src="https://s2.loli.net/2022/01/24/hj6JoKRS4AQau2t.png" alt="image-20220121165503382"></p><p>canvas 2D版本：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;canvas&#x27;</span>);<br><span class="hljs-keyword">const</span> ctx = canvas.getContext(<span class="hljs-string">&#x27;2d&#x27;</span>);<br><br>ctx.beginPath();<br>ctx.moveTo(<span class="hljs-number">250</span>, <span class="hljs-number">0</span>);<br>ctx.lineTo(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>);<br>ctx.lineTo(<span class="hljs-number">0</span>, <span class="hljs-number">500</span>);<br>ctx.fillStyle = <span class="hljs-string">&#x27;red&#x27;</span>;<br>ctx.fill();<br></code></pre></td></tr></table></figure><p>效果和上图所示一样。(比原生WebGL简单好多)</p><h2 id="3-多边形"><a href="#3-多边形" class="headerlink" title="3. 多边形"></a>3. 多边形</h2><p>多边形需要进行三角划分</p><p><img src="https://s2.loli.net/2022/01/24/bl275FqhsRkruVN.png" alt="image-20220121175100166"></p><p><a href="https://github.com/mapbox/earcut">Earcut</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1. 创建WebGL上下文</span><br><span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;canvas&#x27;</span>);<br><span class="hljs-keyword">const</span> gl = canvas.getContext(<span class="hljs-string">&#x27;webgl&#x27;</span>);<br><br><span class="hljs-comment">// 2. 创建WebGL程序</span><br><br><span class="hljs-comment">// 2.1 顶点着色器</span><br><span class="hljs-keyword">const</span> vertex = <span class="hljs-string">`</span><br><span class="hljs-string">  attribute vec2 position;</span><br><span class="hljs-string"></span><br><span class="hljs-string">  void main() &#123;</span><br><span class="hljs-string">    gl_PointSize = 1.0;</span><br><span class="hljs-string">    gl_Position = vec4(position, 1.0, 1.0);</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string">`</span>;<br><br><span class="hljs-comment">// 2.2 片元着色器</span><br><span class="hljs-keyword">const</span> fragment = <span class="hljs-string">`</span><br><span class="hljs-string">  precision mediump float;</span><br><span class="hljs-string"></span><br><span class="hljs-string">  void main()</span><br><span class="hljs-string">  &#123;</span><br><span class="hljs-string">    gl_FragColor = vec4(0.0, 1.0, 1.0, 1.0);</span><br><span class="hljs-string">  &#125;    </span><br><span class="hljs-string">`</span>;<br><br><span class="hljs-comment">// 2.3 加载、编译、使用着色器</span><br><span class="hljs-keyword">const</span> vertexShader = gl.createShader(gl.VERTEX_SHADER);<br>gl.shaderSource(vertexShader, vertex);<br>gl.compileShader(vertexShader);<br><br><span class="hljs-keyword">const</span> fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);<br>gl.shaderSource(fragmentShader, fragment);<br>gl.compileShader(fragmentShader);<br><br><br><span class="hljs-keyword">const</span> program = gl.createProgram();<br>gl.attachShader(program, vertexShader);<br>gl.attachShader(program, fragmentShader);<br>gl.linkProgram(program);<br>gl.useProgram(program);<br><br><span class="hljs-comment">// 顶点集</span><br><span class="hljs-keyword">const</span> vertices = [<br>  [-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>],<br>  [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>],<br>  [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>  [<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>],<br>];  <br><br><span class="hljs-keyword">const</span> points = vertices.flat();  <span class="hljs-comment">// 点集</span><br><span class="hljs-keyword">const</span> triangles = earcut(points);  <span class="hljs-comment">// 三角形集(三角划分后的三角性)</span><br><br><span class="hljs-keyword">const</span> position = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Float32Array</span>(points);<br><span class="hljs-keyword">const</span> cells = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint16Array</span>(triangles);<br><br><span class="hljs-comment">// 3. 将数据存入缓存区，这时候需要分点和三角形来分别存</span><br><span class="hljs-keyword">const</span> pointBuffer = gl.createBuffer();<br>gl.bindBuffer(gl.ARRAY_BUFFER, pointBuffer);<br>gl.bufferData(gl.ARRAY_BUFFER, position, gl.STATIC_DRAW);<br><br><span class="hljs-keyword">const</span> cellsBuffer = gl.createBuffer();<br>gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cellsBuffer);<br>gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, cells, gl.STATIC_DRAW);<br><br><span class="hljs-comment">// 4. 将缓冲区数据读取到GPU</span><br><span class="hljs-keyword">const</span> vPosition = gl.getAttribLocation(program, <span class="hljs-string">&#x27;position&#x27;</span>);<br>gl.vertexAttribPointer(vPosition, <span class="hljs-number">2</span>, gl.FLOAT, <span class="hljs-literal">false</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>gl.enableVertexAttribArray(vPosition);<br><br><span class="hljs-comment">// 5. GPU执行WebGL程序</span><br>gl.clear(gl.COLOR_BUFFER_BIT);<br>gl.drawElements(gl.TRIANGLES, cells.length, gl.UNSIGNED_SHORT, <span class="hljs-number">0</span>);  <span class="hljs-comment">// 这部分还不是很明白</span><br><br></code></pre></td></tr></table></figure><p>效果：</p><p><img src="https://s2.loli.net/2022/01/24/Chzl9qIcwPTYSHU.png" alt="image-20220121184608412"></p><h2 id="4-变换"><a href="#4-变换" class="headerlink" title="4. 变换"></a>4. 变换</h2><ul><li>平移</li><li>旋转</li><li>缩放</li></ul><p><img src="https://s2.loli.net/2022/01/24/dxmy2MaYjuCgec7.png" alt="image-20220121203813648"></p><h2 id="5-3D标准模型的四个齐次矩阵"><a href="#5-3D标准模型的四个齐次矩阵" class="headerlink" title="5.  3D标准模型的四个齐次矩阵"></a>5.  3D标准模型的四个齐次矩阵</h2><ul><li>投影矩阵</li><li>模型矩阵</li><li>视图矩阵</li><li>法向量矩阵</li></ul><p><strong>挖了个大坑</strong></p><h2 id="6-相关链接"><a href="#6-相关链接" class="headerlink" title="6. 相关链接"></a>6. 相关链接</h2><ul><li><a href="https://thebookofshaders.com/">The Book of Shaders</a></li><li><a href="https://www.shadertoy.com/">着色器分享</a></li><li><a href="https://github.com/mesh-js/mesh.js">Mesh.js</a></li><li><a href="https://doodle.webgl.group/">glsl-doodle</a></li><li><a href="http://spritejs.com/">SpriteJS</a></li><li><a href="https://threejs.org/">three.js</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 青训营 </tag>
            
            <tag> WebGL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python(五)</title>
      <link href="/2022/01/23/python-5/"/>
      <url>/2022/01/23/python-5/</url>
      
        <content type="html"><![CDATA[<h1 id="python-五"><a href="#python-五" class="headerlink" title="python(五)"></a>python(五)</h1><h2 id="1-GUI编程"><a href="#1-GUI编程" class="headerlink" title="1. GUI编程"></a>1. GUI编程</h2><h3 id="tkinter标准库"><a href="#tkinter标准库" class="headerlink" title="tkinter标准库"></a>tkinter标准库</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> tkinter<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show</span>():</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-number">1</span>)<br><br>root = tkinter.Tk()     <span class="hljs-comment"># 创建tkinter应用程序主窗口</span><br>button = tkinter.Button(root, text=<span class="hljs-string">&quot;点击&quot;</span>, command=show)<br>button.place(x=<span class="hljs-number">10</span>, y=<span class="hljs-number">20</span>, width=<span class="hljs-number">100</span>, height=<span class="hljs-number">100</span>)<br><br>root.mainloop()         <span class="hljs-comment"># 启动主循环，启动应用程序</span><br><br><br></code></pre></td></tr></table></figure><h2 id="2-多线程与多线程编程"><a href="#2-多线程与多线程编程" class="headerlink" title="2. 多线程与多线程编程"></a>2. 多线程与多线程编程</h2><h4 id="2-1Thread对象"><a href="#2-1Thread对象" class="headerlink" title="2.1Thread对象"></a>2.1Thread对象</h4><p><strong>threading模块</strong>是Python支持多线程编程的重要模块</p><p>Thread类支持使用两种方法来创建线程</p><ul><li>使用一个可调用对象做参数创建对象</li><li>继承Thread类，并在派生类中重写<code>__init__()</code>和<code>run()</code>方法</li></ul><p>创建线程对象以后，可以调用它的start()方法来启动，该方法自动调用该类对象的run()方法。</p><p><strong>创建多线程</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fun1</span>(<span class="hljs-params">x, y</span>):</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(x, y):<br>        <span class="hljs-built_in">print</span>(i)<br>        time.sleep(<span class="hljs-number">1</span>)<br><br><br>t1 = threading.Thread(target=fun1, args=(<span class="hljs-number">15</span>, <span class="hljs-number">20</span>))<br>t1.start()<br><br>t2 = threading.Thread(target=fun1, args=(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>))<br>t2.start()<br></code></pre></td></tr></table></figure><p>结果不一，因为多线程不是同步执行，而是异步执行</p><h3 id="2-2-线程同步技术"><a href="#2-2-线程同步技术" class="headerlink" title="2.2 线程同步技术"></a>2.2 线程同步技术</h3><h4 id="2-2-1-Lock-RLock对象"><a href="#2-2-1-Lock-RLock对象" class="headerlink" title="2.2.1 Lock/RLock对象"></a>2.2.1 Lock/RLock对象</h4><p>一个锁有两个状态：locked和unlocked。</p><p>如果锁处于unlocked状态，<strong>acquire()方法</strong>将其修改为locked并立即返回，如果锁已经处于locked状态，则阻塞当前线程并等待其他线程锁解锁，然后将其修改为locked并立即返回。</p><p><strong>release()方法</strong>用来将锁的状态由locked修改为unclocked并立即返回，如果锁的状态已经是unclocked，调用该方法会抛出异常</p><p>RLock对象可被同一个线程**acquire()**多次，RLock对象的acquire()/release()调用对可以嵌套，仅当最后一个或最外层的release()执行结束后，锁才会被设置为unclocked状态</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">myThread</span>(<span class="hljs-params">threading.Thread</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        threading.Thread.__init__(self)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">global</span> x<br>        lock.acquire()      <span class="hljs-comment"># 上锁， 没开锁之前，会阻塞其他线程，直到开锁</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):<br>            x += i<br>        time.sleep(<span class="hljs-number">2</span>)<br>        <span class="hljs-built_in">print</span>(x)<br>        lock.release()      <span class="hljs-comment"># 开锁</span><br><br>lock = threading.RLock()<br>t1 = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>    t = myThread()<br>    t1.append(t)<br>x = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> t1:<br>    i.start()<br></code></pre></td></tr></table></figure><h4 id="2-2-2-Condition对象"><a href="#2-2-2-Condition对象" class="headerlink" title="2.2.2 Condition对象"></a>2.2.2 Condition对象</h4><p>使用Condition对象可以在某些事件触发后才处理数据，可以用于不同线程之间的通信或通知，以实现更高级别的同步。</p><p>生产者消费者问题</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Producer</span>(<span class="hljs-params">threading.Thread</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, threadName</span>):</span><br>        threading.Thread.__init__(self, name=threadName)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">global</span> x<br>        con.acquire()           <span class="hljs-comment"># 类似上锁</span><br>        <span class="hljs-keyword">if</span> x == <span class="hljs-number">20</span>:<br>            con.wait()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Producer: &#x27;</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>):<br>            <span class="hljs-built_in">print</span>(x, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>            x = x + <span class="hljs-number">1</span><br>        <span class="hljs-built_in">print</span>(x)<br>        con.notify()    <span class="hljs-comment"># 唤醒在等待的单个线程</span><br>        con.release()           <span class="hljs-comment"># 类似开锁</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Consumer</span>(<span class="hljs-params">threading.Thread</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, threadName</span>):</span><br>        threading.Thread.__init__(self, name=threadName)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">global</span> x<br>        con.acquire()<br>        <span class="hljs-keyword">if</span> x == <span class="hljs-number">0</span>:<br>            con.wait()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Consumer: &#x27;</span>, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>):<br>            <span class="hljs-built_in">print</span>(x, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>            x = x - <span class="hljs-number">1</span><br>        <span class="hljs-built_in">print</span>(x)<br>        con.notify()<br>        con.release()<br><br>con = threading.Condition()<br>x = <span class="hljs-number">0</span><br>p = Producer(<span class="hljs-string">&#x27;Producer&#x27;</span>)<br>c = Consumer(<span class="hljs-string">&#x27;Consumer&#x27;</span>)<br>p.start()<br>c.start()<br>p.join()<br>c.join()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;After Producer and Consumer all done: &#x27;</span>, x)<br></code></pre></td></tr></table></figure><h4 id="2-2-3-queue对象"><a href="#2-2-3-queue对象" class="headerlink" title="2.2.3 queue对象"></a>2.2.3 queue对象</h4><p>queue模块实现了多生产者-多消费者队列，非常适合需要在多个线程之间进行信息交换的场所。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> queue<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Producer</span>(<span class="hljs-params">threading.Thread</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, threadName</span>):</span><br>        threading.Thread.__init__(self, name=threadName)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">global</span> myqueue<br>        myqueue.put(self.name)     <span class="hljs-comment"># 在队列尾部追加元素</span><br>        <span class="hljs-built_in">print</span>(self.name, <span class="hljs-string">&#x27;put &#x27;</span>, self.name, <span class="hljs-string">&#x27; to queue.&#x27;</span>)<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Consumer</span>(<span class="hljs-params">threading.Thread</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, threadName</span>):</span><br>        threading.Thread.__init__(self, name=threadName)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">global</span> myqueue<br>        <span class="hljs-built_in">print</span>(self.name, <span class="hljs-string">&#x27;get &#x27;</span>, myqueue.get(), <span class="hljs-string">&#x27; from queue.&#x27;</span>) <span class="hljs-comment"># get()获取队列头部的元素</span><br><br>myqueue = queue.Queue()<br>plist = []<br>clist = []<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>    p = Producer(<span class="hljs-string">&#x27;Producer&#x27;</span> + <span class="hljs-built_in">str</span>(i))<br>    plist.append(p)<br>    c = Consumer(<span class="hljs-string">&#x27;Consumer&#x27;</span>+<span class="hljs-built_in">str</span>(i))<br>    clist.append(c)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> plist:<br>    i.start()<br>    i.join()<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> clist:<br>    i.start()<br>    i.join()<br></code></pre></td></tr></table></figure><h3 id="2-3-多进程编程"><a href="#2-3-多进程编程" class="headerlink" title="2.3 多进程编程"></a>2.3 多进程编程</h3><h4 id="2-3-1-创建与启动进程"><a href="#2-3-1-创建与启动进程" class="headerlink" title="2.3.1 创建与启动进程"></a>2.3.1 创建与启动进程</h4><ul><li><strong>通过创建Process对象来创建一个进程</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> multiprocessing <span class="hljs-keyword">import</span> Process<br><span class="hljs-keyword">import</span> os<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>(<span class="hljs-params">name</span>):</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;module name: &#x27;</span>, __name__)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;parent process: &#x27;</span>, os.getppid())  <span class="hljs-comment"># 查看父进程ID</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;process id: &#x27;</span>, os.getpid())  <span class="hljs-comment"># 查看当前进程ID</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;hello &#x27;</span>, name)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    p = Process(target=f, args=(<span class="hljs-string">&#x27;bob&#x27;</span>,))<br>    p.start()<br>    p.join()<br><br></code></pre></td></tr></table></figure><ul><li><strong>创建自定义类并继承Process类，并实现run()方法</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> multiprocessing <span class="hljs-keyword">import</span> Process<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyProcess</span>(<span class="hljs-params">Process</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        Process.__init__(self)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ok&#x27;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    p = MyProcess()<br>    p.start()<br></code></pre></td></tr></table></figure><h2 id="3-网络编程"><a href="#3-网络编程" class="headerlink" title="3. 网络编程"></a>3. 网络编程</h2><h3 id="3-1-UDP编程"><a href="#3-1-UDP编程" class="headerlink" title="3.1 UDP编程"></a>3.1 UDP编程</h3><p>接收端代码:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br>s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br><br>s.bind((<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-number">5000</span>))<br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    data, addr = s.recvfrom(<span class="hljs-number">1024</span>)<br>    data = data.decode()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;received message:&#123;0&#125; from &#123;1[1]&#125; on &#123;1[0]&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(data, addr))<br>    <span class="hljs-keyword">if</span> data.lower() == <span class="hljs-string">&#x27;bye&#x27;</span>:<br>        <span class="hljs-keyword">break</span><br>s.close()<br></code></pre></td></tr></table></figure><p>发送端代码:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> sys<br><br>s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    message = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请输入要发送的信息: &#x27;</span>)<br>    s.sendto(message.encode(), (<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>, <span class="hljs-number">5000</span>))<br>    <span class="hljs-keyword">if</span> message == <span class="hljs-string">&#x27;bye&#x27;</span>:<br>        <span class="hljs-keyword">break</span><br><br>s.close()<br></code></pre></td></tr></table></figure><p>输入bye会结束收发信息</p><h3 id="3-2-TCP编程"><a href="#3-2-TCP编程" class="headerlink" title="3.2 TCP编程"></a>3.2 TCP编程</h3><p>服务端:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><br>words = &#123;<span class="hljs-string">&#x27;how are you&#x27;</span> : <span class="hljs-string">&#x27;Fine, thank you.&#x27;</span>, <span class="hljs-string">&#x27;how old are you?&#x27;</span> : <span class="hljs-string">&#x27;21&#x27;</span>,<br>         <span class="hljs-string">&#x27;what is your name?&#x27;</span> : <span class="hljs-string">&#x27;czh&#x27;</span>, <span class="hljs-string">&quot;what&#x27;s your name?&quot;</span> : <span class="hljs-string">&#x27;CZH&#x27;</span>,<br>         <span class="hljs-string">&#x27;where do you work?&#x27;</span> : <span class="hljs-string">&#x27;Shenzhen&#x27;</span>, <span class="hljs-string">&#x27;bye&#x27;</span>: <span class="hljs-string">&#x27;bye&#x27;</span>&#125;<br><br>HOST = <span class="hljs-string">&#x27;&#x27;</span><br>PORT = <span class="hljs-number">50007</span><br>s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br><br>s.bind((HOST, PORT))<br><br>s.listen(<span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Listening at port: &#x27;</span>, PORT)<br>conn, addr = s.accept()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Connected by &#x27;</span>, addr)<br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    data = conn.recv(<span class="hljs-number">1024</span>).decode()<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> data:<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Received message: &#x27;</span>, data)<br>    conn.sendall(words.get(data, <span class="hljs-string">&#x27;Nothing&#x27;</span>).encode())<br><br>conn.close()<br>s.close()<br><br></code></pre></td></tr></table></figure><p>客户端:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">import sys<br>import socket<br><br>HOST = &#x27;127.0.0.1&#x27;<br>PORT = 50007<br><br>s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br>try:<br>    s.connect((HOST, PORT))<br>except Exception as e:<br>    print(&#x27;Server not found or not open&#x27;)<br>    sys.exit()<br>while True:<br>    c = input(&#x27;输入要发送的信息: &#x27;)<br>    s.sendall(c.encode())<br>    data = s.recv(1024).decode()<br>    print(&#x27;Received: &#x27;, data)<br>    if c.lower() == &#x27;bye&#x27;:<br>        break<br>s.close()<br></code></pre></td></tr></table></figure><p><b style="color: red">先运行服务端程序，开始监听后，再运行客户端程序</b>，可以实现超简单的自动回复功能。</p><p><img src="https://s2.loli.net/2022/01/23/c9oCDwEPHIK6nL4.png" alt="image-20220123210445377"></p><h3 id="3-3-简单网页内容爬取"><a href="#3-3-简单网页内容爬取" class="headerlink" title="3.3 简单网页内容爬取"></a>3.3 简单网页内容爬取</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> urllib.request<br><br>fp = urllib.request.urlopen(<span class="hljs-string">r&#x27;https://13535944743.github.io/&#x27;</span>)<br><span class="hljs-comment"># print(fp.read(100))</span><br><span class="hljs-built_in">print</span>(fp.read().decode())<br>fp.close()<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络(六)    应用层</title>
      <link href="/2022/01/23/computer-network-6/"/>
      <url>/2022/01/23/computer-network-6/</url>
      
        <content type="html"><![CDATA[<h1 id="计算机网络-六-应用层"><a href="#计算机网络-六-应用层" class="headerlink" title="计算机网络(六)    应用层"></a>计算机网络(六)    应用层</h1><h2 id="1-域名系统DNS"><a href="#1-域名系统DNS" class="headerlink" title="1. 域名系统DNS"></a>1. 域名系统DNS</h2><p><strong>域名服务器</strong>：运行域名服务器程序，实现域名到IP地址的解析。</p><p>DNS服务器的管辖范围<strong>不是以域为单位</strong>，<strong>而是以区为单位</strong>。</p><p><strong>区</strong>：一个服务器所负责管辖的范围。</p><p><strong>域名结构</strong>：… . 三级域名 . 二级域名 . 顶级域名</p><p><strong>域名只是逻辑概念，不代表计算机所在的物理地点。</strong></p><p><img src="https://s2.loli.net/2022/01/23/TaoNZhcPv4IfSkJ.png" alt="image-20211216140641230"></p><p><img src="https://s2.loli.net/2022/01/23/HQBmlcKZa2rI37v.png" alt="image-20211216140654254"></p><h3 id="1-1-域名服务器有四种类型"><a href="#1-1-域名服务器有四种类型" class="headerlink" title="1.1 域名服务器有四种类型"></a>1.1 域名服务器有四种类型</h3><p><img src="https://s2.loli.net/2022/01/23/jACXJUP6BTW7tqs.png" alt="image-20211216141309620"></p><h4 id="1-1-1-根域名服务器"><a href="#1-1-1-根域名服务器" class="headerlink" title="1.1.1 根域名服务器"></a>1.1.1 根域名服务器</h4><ul><li><p>根域名服务器是<b style="color: red">最高层次</b>的域名服务器，也是<b style="color: red">最重要</b>的域名服务器。所有的根域名服务器都知道所有的顶级域名服务器的域名和IP地址。</p></li><li><p>当本地域名服务器无法解析互联网上的域名时，首先就会求助于根域名服务器</p></li><li><p>互联网上共有13个不同IP地址的根域名服务器，它们的名字分别从a到m(前13个字母)</p></li><li><p>根域名服务器共有<b style="color: red">13套装置</b></p></li><li><p>在使用迭代查询时，根域名服务器不把域名直接转换成IP地址，而是把下一步应当找的顶级域名服务器的IP地址告诉本地域名服务器</p></li></ul><h4 id="1-1-2-顶级域名服务器"><a href="#1-1-2-顶级域名服务器" class="headerlink" title="1.1.2 顶级域名服务器"></a>1.1.2 顶级域名服务器</h4><ul><li>负责管理在该顶级域名服务器注册的<b style="color: red">所有二级域名</b>。也叫TLD服务器</li><li>当收到DNS查询请求时，就给出对应的回答(可能是最后的结果，也可能是下一步应查找的域名服务器的IP地址)</li></ul><h4 id="1-1-3-权限域名服务器"><a href="#1-1-3-权限域名服务器" class="headerlink" title="1.1.3 权限域名服务器"></a>1.1.3 权限域名服务器</h4><ul><li>负责一个区的域名服务器</li><li>当收到DNS查询请求时，就给出对应的回答(可能是最后的结果，也可能是下一步应查找的权限域名服务器的IP地址)</li></ul><h4 id="1-1-4-本地域名服务器"><a href="#1-1-4-本地域名服务器" class="headerlink" title="1.1.4 本地域名服务器"></a>1.1.4 本地域名服务器</h4><ul><li><p>本地域名服务器也被称为默认域名服务器</p></li><li><p>当一个主机发起DNS查询请求时，这个查询请求报文就发送给本地域名服务器</p></li><li><p>每一个互联网提供商ISP，或一个大学都可以拥有一个本地域名服务器</p></li></ul><h3 id="1-2-提高域名服务器的可靠性"><a href="#1-2-提高域名服务器的可靠性" class="headerlink" title="1.2 提高域名服务器的可靠性"></a>1.2 提高域名服务器的可靠性</h3><p>DNS域名服务器把数据复制到几个域名服务器来保存，其中的一个是<strong>主域名服务器</strong>，其他的是<strong>辅助域名服务器</strong></p><ul><li>当主域名服务器出故障时，辅助域名服务器可以保证DNS的查询工作不会中断</li><li>主域名服务器会定期把数据复制到辅助域名服务器中，而更改数据只能在主域名服务器中进行。这样保证了数据的一致性。</li></ul><h3 id="1-3-域名的解析过程"><a href="#1-3-域名的解析过程" class="headerlink" title="1.3 域名的解析过程"></a>1.3 域名的解析过程</h3><ul><li><p>**主机向本地域名服务器的查询一般都是采用<b style="color: red">递归查询</b>**。如果主机所询问的本地域名服务器不知道被查询域名的IP地址，本地域名服务器就以DNS客户的身份，对其他根域名服务器继续发出查询请求报文</p></li><li><p>**本地域名服务器向根域名服务器的查询一般都是采用<b style="color: red">迭代查询</b>**。当根域名服务器收到本地域名服务器的迭代请求报文时，可以给出要查询的IP地址，或者告诉本地域名服务器下一步应该向哪一个域名服务器进行查询。</p></li></ul><p><img src="https://s2.loli.net/2022/01/23/a6qKAJ9cYPu3VdB.png" alt="image-20211216144655379"></p><p><img src="https://s2.loli.net/2022/01/23/hZD9sy7gqN4YfiO.png" alt="image-20211216144705211"></p><h2 id="2-文件传送协议P28"><a href="#2-文件传送协议P28" class="headerlink" title="2. 文件传送协议P28"></a>2. 文件传送协议P28</h2><h2 id="3-万维网"><a href="#3-万维网" class="headerlink" title="3. 万维网"></a>3. 万维网</h2><h3 id="3-1-概述"><a href="#3-1-概述" class="headerlink" title="3.1 概述"></a>3.1 概述</h3><p>万维网WWW(World Wide Web)不是某种特殊的计算机，而是一个大规模的、联机式的<strong>信息储藏所</strong>。</p><p><img src="https://s2.loli.net/2022/01/23/rLqiolzOPKUTNYM.png" alt="image-20211219123433570"></p><ul><li>万维网是<strong>分布式超媒体</strong>系统， 是<strong>超文本</strong>系统的扩充。<b style="color: red">一个超文本由多个信息源链接成</b>。<b style="color: red">超媒体与超文本的区别是文档内容不同</b>。超文本文档只包括文本信息，而超媒体文档还包括图形、声音等信息。</li><li>万维网以<b style="color: red">客户-服务器方式</b>工作。</li><li>万维网使用<b style="color: red">统一资源定位符URL</b>来标志万维网上的各种文档，每一个文档在整个互联网的范围内具有唯一的标识符URL。</li><li>使用<b style="color: red">超文本传送协议HTTP</b>在万维网客户程序与万维网服务器程序之间进行交互。HTTP是一个应用层协议，它使用TCP连接进行可靠的传送。</li></ul><h3 id="3-2-统一资源定位符URL"><a href="#3-2-统一资源定位符URL" class="headerlink" title="3.2 统一资源定位符URL"></a>3.2 统一资源定位符URL</h3><p>资源定位符URL是对可以从互联网上得到的资源的位置和访问方法的一种简洁表示。</p><p>URL相当于一个文件名在网络范围的扩展，<b style="color: red">URL是与互联网相连的机器上的任何可访问对象的一个指针</b></p><p><img src="https://s2.loli.net/2022/01/23/dMJ5K2W8zY1OGhL.png" alt="image-20211219131508022"></p><p>在URL中的字符对大小写没有要求。<strong>主机</strong>是存放资源的主机在互联网中的域名</p><h3 id="3-3-超文本传送协议HTTP"><a href="#3-3-超文本传送协议HTTP" class="headerlink" title="3.3 超文本传送协议HTTP"></a>3.3 超文本传送协议HTTP</h3><h4 id="3-3-1-HTTP的操作过程"><a href="#3-3-1-HTTP的操作过程" class="headerlink" title="3.3.1 HTTP的操作过程"></a>3.3.1 HTTP的操作过程</h4><p>作用：通过使用HTTP协议来传送必须的信息，使超文本的链接能够高效率地完成</p><p>从层次的角度看，HTTP是<b style="color: red">面向事务</b>的应用层协议。</p><p><img src="https://s2.loli.net/2022/01/23/SYsDJWVnMiFmCpH.png" alt="image-20211219132414263"></p><ul><li>每个万维网网点都有一个服务器进程，不断监听TCP的端口，以便发现是否有浏览器对它发出连接建立请求。</li><li>一旦监听到连接建立请求并建立了TCP连接之后，浏览器就向万维网服务器发出浏览某个页面的请求，服务器接着返回所请求的页面作为响应。最后，TCP连接被释放。</li><li>在浏览器和服务器之间的<strong>请求</strong>和<strong>响应</strong>的交互，必须按规定的格式和规则。这些格式和规则就是<strong>超文本传输协议HTTP</strong></li><li><b style="color: red">HTTP报文通常使用TCP连接传送</b></li></ul><h4 id="3-3-2-HTTP的主要特点"><a href="#3-3-2-HTTP的主要特点" class="headerlink" title="3.3.2 HTTP的主要特点"></a>3.3.2 HTTP的主要特点</h4><ul><li><p>HTTP使用了<strong>面向连接的TCP</strong>作为运输层协议，保证了数据的可靠传输</p></li><li><p>HTTP协议本身是<strong>无连接的</strong></p></li><li><p>HTTP是<strong>面向事务</strong>的客户服务器协议</p></li><li><p>HTTP1.0协议是<strong>无状态的</strong></p></li><li><p><strong>HTTP/1.1协议使用持续连接</strong>。即万维网服务器在发送响应后仍然在一段时间内保持这条连接，使同一个客户(如浏览器)和该服务器可以继续在这条连接上传送后续的HTTP请求报文和响应报文。</p><p><img src="https://s2.loli.net/2022/01/23/tNFRTUKjJyuoZQW.png" alt="image-20211219134152408"></p></li></ul><h4 id="3-3-3-代理服务器"><a href="#3-3-3-代理服务器" class="headerlink" title="3.3.3 代理服务器"></a>3.3.3 代理服务器</h4><ul><li><strong>代理服务器</strong>又称为<strong>万维网高速缓存</strong>，它代表浏览器发出HTTP请求</li><li>代理服务器把最近的一些请求和响应暂存在本地磁盘中。当与暂存的请求相同的新请求到达时，代理服务器就把暂存的响应发送出去，而不需要按URL的地址再去互联网访问</li></ul><h4 id="3-3-4-HTTP的报文结构"><a href="#3-3-4-HTTP的报文结构" class="headerlink" title="3.3.4 HTTP的报文结构"></a>3.3.4 HTTP的报文结构</h4><p>HTTP有两类报文</p><ul><li><strong>请求报文</strong>：从客户向服务器发送请求报文</li><li><strong>响应报文</strong>：从服务器到用户的回答</li></ul><p><img src="https://s2.loli.net/2022/01/23/inj2uKSzDHtbc7J.png" alt="image-20211219135847646"></p><p><img src="https://s2.loli.net/2022/01/23/KsF6C5Nc8Ot92Ry.png" alt="image-20211219140139518"></p><p><img src="https://s2.loli.net/2022/01/23/VRog6CLId3tYarA.png" alt="image-20211219140151543"></p><p><b style="color: red">状态码：</b></p><ul><li>1xx：表示通知信息，如请求收到了或正在进行处理</li><li>2xx：表示成功，如接受或知道了</li><li>3xx：表示重定向，表示要完成请求还需要采取进一步的行动</li><li>4xx：表示客户端出错，如请求中有错误的语法或不能完成</li><li>5xx：表示服务器出错，如服务器失效</li></ul><h4 id="3-3-5-Cookie"><a href="#3-3-5-Cookie" class="headerlink" title="3.3.5 Cookie"></a>3.3.5 Cookie</h4><ul><li><p>万维网站点可以使用Cookie来跟踪用户</p></li><li><p><strong>Cookie</strong>表示在HTTP服务器和客户端之间传递的状态信息。</p></li><li><p>使用Cookie的网站服务器为客户产生一个<strong>唯一的识别码</strong>。利用这个识别码，网站就能够跟踪该用户在该网站的活动。</p></li></ul><h2 id="4-电子邮件"><a href="#4-电子邮件" class="headerlink" title="4. 电子邮件"></a>4. 电子邮件</h2><h3 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h3><p><strong>电子邮件的重要标准</strong>：</p><ul><li>简单邮件发送协议：SMTP</li><li>互联网文本报文格式</li><li>通用互联网邮件扩充MIME</li><li>邮件读取协议：POP3和IMAP</li></ul><p><strong>电子邮件的组成</strong>：</p><ul><li>用户代理(UA)：用户与电子邮件系统的接口，基本功能：撰写、显示、处理和通信</li><li>邮件服务器：按照<strong>客户 - 服务器</strong>方式工作，在发送和读取邮件时使用两个不同的协议SMTP，POP3，功能：发送和接收邮件，同时向发件人报告邮件发送的情况</li><li>邮件发送和读取协议：<strong>简单邮件发送协议SMTP</strong>：用于在用户代理向邮件服务器或邮件服务器之间发送邮件，<strong>邮局协议POP3</strong>：用于用户代理从邮件服务器读取邮件。SMTP和POP3(或IMAP)都是使用TCP连接来传送邮件的，目的是可靠地传送邮件</li></ul><p><img src="https://s2.loli.net/2021/12/19/RFAsBJoM7dN2b6c.png" alt="image-20211219150929902"></p><p><strong>发送和接受电子邮件的几个重要步骤</strong>：</p><ol><li>发件人调用PC中的用户代理撰写和编辑要发送的邮件</li><li>发件人的用户代理把邮件用SMTP协议发给发送方邮件服务器</li><li>SMTP服务器把邮件临时存放在邮件缓存队列中，等待发送</li><li>发送方邮件服务器的SMTP客户与接收方邮件服务器的SMTP服务器建立TCP连接，然后把邮件缓存队列中的邮件依次发送出去</li><li>运行在接收方邮件服务器中的SMTP服务器进程收到邮件后，把邮件放入收件人的用户邮箱中，等待收件人进行读取</li><li>收件人在打算收信时，就运行PC中的用户代理，使用POP3(或IMAP)协议读取发送给自己的邮件</li></ol><h3 id="4-2-简单邮件传送协议SMTP"><a href="#4-2-简单邮件传送协议SMTP" class="headerlink" title="4.2 简单邮件传送协议SMTP"></a>4.2 简单邮件传送协议SMTP</h3><ul><li><p>SMTP规定了在两个相互通信的SMTP进程交换信息的方法</p></li><li><p>SMTP使用客户 - 服务器方式</p></li><li><p>SMTP基于TCP实现客户与服务器的通信</p></li><li><p>SMTP客户与服务器之间采用命令 - 响应方式进行交互</p></li><li><p>SMTP是一个基于文本的协议</p></li><li><p>SMTP基于TCP实现客户与服务器之间的通信</p><p><img src="https://s2.loli.net/2022/01/23/TM48dbKY5HDx13y.png" alt="image-20211219153232942"></p></li></ul><h4 id="4-2-1-SMTP通信的三个阶段"><a href="#4-2-1-SMTP通信的三个阶段" class="headerlink" title="4.2.1 SMTP通信的三个阶段"></a>4.2.1 SMTP通信的三个阶段</h4><ul><li><strong>连接建立</strong>：连接是在发送主机的SMTP客户和接受主机的SMTP服务器之间建立的。SMTP不使用中间的邮件服务器</li><li><strong>邮件传送</strong></li><li><strong>连接释放</strong>：邮件发送完毕后，SMTP要释放TCP连接</li></ul><h3 id="4-3-电子邮件的信息格式"><a href="#4-3-电子邮件的信息格式" class="headerlink" title="4.3 电子邮件的信息格式"></a>4.3 电子邮件的信息格式</h3><ul><li><p>一个电子邮件分为<strong>信封</strong>和<strong>内容</strong>两部分</p><p><img src="https://s2.loli.net/2022/01/23/ZjgiYBvDWpmwlTk.png" alt="image-20211219153803040"></p><p><img src="https://s2.loli.net/2022/01/23/WDlvXmCgY2rqo4E.png" alt="image-20211219153838817"></p></li></ul><h3 id="4-4-邮件读取协议POP3和IMAP"><a href="#4-4-邮件读取协议POP3和IMAP" class="headerlink" title="4.4 邮件读取协议POP3和IMAP"></a>4.4 邮件读取协议POP3和IMAP</h3><p><strong>POP3</strong>：邮局协议第三个版本</p><ul><li>POP3使用<strong>客户 - 服务器</strong>方式</li><li>POP3基于TCP实现客户与服务器的通信</li><li>POP3支持用户鉴别</li></ul><p><strong>IMAP</strong>：网际报文存取协议</p><ul><li>IMAP使用<strong>客户 - 服务器</strong>方式</li><li>IMAP基于TCP实现客户与服务器的通信</li><li>IMAP是一个联机协议</li></ul><p><img src="https://s2.loli.net/2022/01/23/FmX8Cxgl4MWup7s.png" alt="image-20211219154405992"></p><p><img src="https://s2.loli.net/2022/01/23/Ye7GHbFScqZomx1.png" alt="image-20211219154634888"></p><h3 id="4-5-基于万维网的电子邮件"><a href="#4-5-基于万维网的电子邮件" class="headerlink" title="4.5 基于万维网的电子邮件"></a>4.5 基于万维网的电子邮件</h3><p><img src="https://s2.loli.net/2022/01/23/aRuLKWOCGlbQDkh.png" alt="image-20211219163836916"></p><h3 id="4-6-通用互联网邮件扩充MIME"><a href="#4-6-通用互联网邮件扩充MIME" class="headerlink" title="4.6 通用互联网邮件扩充MIME"></a>4.6 通用互联网邮件扩充MIME</h3><p>增加邮件主体的结构，并定义传送非ASCII码的编码规则。</p><p><img src="https://s2.loli.net/2022/01/23/PBZlRUHyg8hYm16.png" alt="image-20211219164224634"></p><p><img src="https://s2.loli.net/2022/01/23/OpbhyrJ8aI7NDjQ.png" alt="image-20211219164238204"></p><p><img src="https://s2.loli.net/2021/12/19/6ZlPBSKQCcT37rL.png" alt="image-20211219165219313"></p>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端开发调试知识</title>
      <link href="/2022/01/18/yc-debug/"/>
      <url>/2022/01/18/yc-debug/</url>
      
        <content type="html"><![CDATA[<h1 id="前端开发调试知识"><a href="#前端开发调试知识" class="headerlink" title="前端开发调试知识"></a>前端开发调试知识</h1><p>参加字节跳动的青训营时写的笔记。这部分是秃头披风侠老师讲的课。</p><h2 id="1-前端Debug特点"><a href="#1-前端Debug特点" class="headerlink" title="1. 前端Debug特点"></a>1. 前端Debug特点</h2><ul><li><strong>多平台</strong>：浏览器、NodeJs、小程序</li><li><strong>多环境</strong>：本地开发环境、线上环境</li><li><strong>多工具</strong>：Chrome devTools、Whistle</li><li><strong>多技巧</strong>：Console、BreakPoint、sourceMap、代理</li></ul><h2 id="2-Chrome-DevTools"><a href="#2-Chrome-DevTools" class="headerlink" title="2. Chrome DevTools"></a>2. Chrome DevTools</h2><h3 id="2-1-动态修改元素和样式"><a href="#2-1-动态修改元素和样式" class="headerlink" title="2.1 动态修改元素和样式"></a>2.1 动态修改元素和样式</h3><ul><li><p>点击.cls开始动态修改元素的class</p></li><li><p>输入类名即可给元素动态添加类名</p><p><img src="https://s2.loli.net/2022/01/18/dMCIWHT1Q9ytfKr.png" alt="image-20220118144027415"></p></li><li><p>勾选/取消类名查看类名生效效果</p></li><li><p>点击Styles下具体的样式值，可以进行编辑，且可以在浏览器中实时预览</p></li><li><p>Computed下点击样式的箭头可以跳转到Styles下的css规则去</p><p><img src="https://s2.loli.net/2022/01/18/5agmRKDvMzp3qYf.png" alt="image-20220118144618256"></p></li><li><p>强制激活伪类</p><ol><li><p>选中具有伪类的元素，点击<code>:hov</code></p><p><img src="https://s2.loli.net/2022/01/18/98zMuRA3SJqk5Gf.png" alt="image-20220118144806343"></p></li><li><p>DOM树右键菜单，选择Force State</p><p><img src="https://s2.loli.net/2022/01/18/EzeyCUwJPk2dcs8.png" alt="image-20220118144945504"></p></li></ol></li></ul><h3 id="2-2-Console"><a href="#2-2-Console" class="headerlink" title="2.2 Console"></a>2.2 Console</h3><ul><li>console.log</li><li>console.warn</li><li>console.error</li><li>console.debug</li><li>console.info</li><li>console.table：具象化地展示JSON和数组数据</li><li>占位符：用于给日志添加样式，可以突出重要的信息<ul><li>%s：字符串占位符</li><li>%o：对象占位符</li><li>%c：样式占位符</li><li>%d：数字占位符</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;log&quot;</span>)<br><span class="hljs-built_in">console</span>.warn(<span class="hljs-string">&quot;warn&quot;</span>)<br><span class="hljs-built_in">console</span>.error(<span class="hljs-string">&quot;error&quot;</span>)<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-string">&quot;debug&quot;</span>)<br><span class="hljs-built_in">console</span>.info(<span class="hljs-string">&quot;info&quot;</span>)<br><br><span class="hljs-keyword">const</span> peoples = [<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;clz&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">21</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;czh&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">22</span><br>  &#125;<br>]<br><span class="hljs-built_in">console</span>.table(peoples)<br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;%s %c%s&quot;</span>, <span class="hljs-string">&quot;Hello&quot;</span>, <span class="hljs-string">&quot;font-size: 24px;color: red;&quot;</span>, <span class="hljs-string">&quot;World&quot;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/01/18/OhTrEu2CmDBGIRb.png" alt="image-20220118150413480"></p><h3 id="2-3-Sorce-Tab"><a href="#2-3-Sorce-Tab" class="headerlink" title="2.3 Sorce Tab"></a>2.3 Sorce Tab</h3><p><img src="https://s2.loli.net/2022/01/18/r1DxKLAFanMEhcu.png" alt="image-20220118150447113"></p><ul><li><p>源码中使用关键字debugger或代码预览区域点击行号设置断点</p></li><li><p>代码执行到断点处，代码暂停执行</p></li><li><p>展开Breakpoints列表可以查看断点列表，勾选可以激活对应断点</p><p><img src="https://s2.loli.net/2022/01/18/fma5wDF6ZKcY3tW.png" alt="image-20220118150828969"></p></li><li><p>鼠标放在变量上可以查看变量的值</p></li><li><p>在调试器Watch可以添加监听变量</p></li></ul><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures"><strong>Scope</strong></a>：展开Scope可以查看作用域列表(包含闭包)</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Call_stack"><strong>Call Stack</strong></a>：展开Call Stack可以查看当前JavaScript代码的调用栈</p><p><strong>压缩后的代码调试</strong>：通过Source Map映射源码实现调试，Source Map文件不跟着部署上线，从而实现安全调试。</p><h3 id="2-4-Performance"><a href="#2-4-Performance" class="headerlink" title="2.4 Performance"></a>2.4 Performance</h3><p>暂时没有用到过，先收藏一波图，方便以后重复查看。</p><p><img src="https://s2.loli.net/2022/01/18/3z81cJrnHvgZFed.png" alt="image-20220118151939298"></p><h3 id="2-5-NetWork"><a href="#2-5-NetWork" class="headerlink" title="2.5 NetWork"></a>2.5 NetWork</h3><p><img src="https://s2.loli.net/2022/01/18/9GTYrm2ZcJsHO8W.png" alt="image-20220118152125528"></p><h3 id="2-6-Application"><a href="#2-6-Application" class="headerlink" title="2.6 Application"></a>2.6 Application</h3><p>展示与本地存储相关的信息</p><ul><li>Local Storage</li><li>Session Storage</li><li>IndexedDB</li><li>Web SQL</li><li>Cookie</li></ul><p><img src="https://s2.loli.net/2022/01/18/Ot1AJq8SEgfnXQb.png" alt="image-20220118152311271"></p><p>点击Stroage面板下的Clear Site Data可以清除网页的本地存储数据</p><p><img src="https://s2.loli.net/2022/01/18/widKTPfumOpWMNq.png" alt="image-20220118152702648"></p><h3 id="2-7-线上即时修改"><a href="#2-7-线上即时修改" class="headerlink" title="2.7 线上即时修改"></a>2.7 线上即时修改</h3><p>可以实现在浏览器中修改样式，并且刷新页面是，修改不会消失</p><ol><li><p>打开Sources面板下的Overrides</p><p><img src="https://s2.loli.net/2022/01/18/XkT39KcFSbs45f2.png" alt="image-20220118154133335"></p></li><li><p>点击Select folders…选择一个本地的空文件夹(可以新建)</p></li><li><p>允许授权</p></li><li><p>修改代码</p></li><li><p>点击DevTools的三点-&gt;More tools-&gt;Changes，就能看到所有修改</p><p><img src="https://s2.loli.net/2022/01/18/XczjCkP9QKmFYO6.png" alt="image-20220118154836504"></p></li></ol><h2 id="3-利用代理解决跨域问题"><a href="#3-利用代理解决跨域问题" class="headerlink" title="3. 利用代理解决跨域问题"></a>3. 利用代理解决跨域问题</h2><p>原理：浏览器有同源策略策略的限制，会出现跨域问题。但是服务器之间不需要同源，所以，通过代理服务器接收浏览器的请求(代理服务器和浏览器同源)，代理服务器再转发请求给真实的服务器。</p><p><img src="https://s2.loli.net/2022/01/18/lg9KPrT1JYVhIFO.png" alt="image-20220118155230783"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 青训营 </tag>
            
            <tag> 调试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript温故而知新</title>
      <link href="/2022/01/17/yc-javascript/"/>
      <url>/2022/01/17/yc-javascript/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript温故而知新"><a href="#JavaScript温故而知新" class="headerlink" title="JavaScript温故而知新"></a>JavaScript温故而知新</h1><p>参加字节跳动的青训营时写的笔记。这部分是月影老师讲的课。</p><h2 id="1-各司其责"><a href="#1-各司其责" class="headerlink" title="1. 各司其责"></a>1. 各司其责</h2><ul><li><p>HTML/CSS/JS各司其责</p></li><li><p><strong>避免不必要的直接使用JS操作样式</strong>(element.style.color=”red”)</p></li><li><p>使用class来表示状态</p></li><li><p>纯展示类交互寻求零JS方案(checkbox的checked和label，其中checkbox可以隐藏)</p></li></ul><h2 id="2-组件封装"><a href="#2-组件封装" class="headerlink" title="2. 组件封装"></a>2. 组件封装</h2><p>组件是指Web页面上抽出来一个个包含模板(HTML)、样式(CSS)、功能(JS)的单元</p><p>好的组件：封装性、正确性、扩展性、复用性</p><h3 id="2-1-基本方法"><a href="#2-1-基本方法" class="headerlink" title="2.1 基本方法"></a>2.1 基本方法</h3><ul><li>结构设计</li><li>展现效果</li><li>行为设计<ul><li>API(功能)</li><li>Event(控制流)</li></ul></li></ul><h3 id="2-2-重构"><a href="#2-2-重构" class="headerlink" title="2.2 重构"></a>2.2 重构</h3><ul><li><p><strong>插件化</strong></p><ul><li><p>将控制元素抽象成插件</p></li><li><p>插件与组件之间通过<b style="color: red">依赖注入</b>的方式建立联系</p></li></ul></li><li><p><strong>模板化</strong></p><ul><li>将HTML模板化，更易于扩展(即视图根据数据来更新，这样子需要变更图片之类的时候，就只需要在图片数组中操作，而不需要变更HTML)</li></ul></li><li><p><strong>抽象化</strong>(组件框架)</p></li></ul><p>例子：轮播图把上一页、下一页和分页按钮抽象成插件，就可以根据需要添加了</p><h2 id="3-过程抽象"><a href="#3-过程抽象" class="headerlink" title="3. 过程抽象"></a>3. 过程抽象</h2><ul><li>用来处理局部细节控制的一些方法</li><li>函数式编程思想的基础应用</li></ul><p>为了能够让<strong>只执行一次</strong>的需求覆盖不同的事件处理，我们可以将这个需求剥离出来，这个过程就叫做<strong>过程抽象</strong></p><h3 id="3-1-高阶函数"><a href="#3-1-高阶函数" class="headerlink" title="3.1 高阶函数"></a>3.1 高阶函数</h3><ul><li>以函数作为参数</li><li>以函数作为返回值</li><li>常用于作为函数装饰器</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params">fn</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) </span>&#123;<br>        <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-built_in">this</span>, args);<br>    &#125;<br>&#125;<span class="hljs-comment">// 等价范式</span><br></code></pre></td></tr></table></figure><p>常用高阶函数：</p><ul><li><p>Once</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">once</span>(<span class="hljs-params">fn</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) </span>&#123;<br>        <span class="hljs-keyword">if</span>(fn) &#123;<br>            <span class="hljs-keyword">const</span> ret = fn.apply(<span class="hljs-built_in">this</span>, args);<br>            fn = <span class="hljs-literal">null</span>;<br>            <span class="hljs-keyword">return</span> ret;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><a href="https://code.h5jun.com/gale/1/edit?js,output">Throttle</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throttle</span>(<span class="hljs-params">fn, time=<span class="hljs-number">500</span></span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> timer;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) </span>&#123;<br>        <span class="hljs-keyword">if</span>(timer == <span class="hljs-literal">null</span>) &#123;<br>            fn.apply(<span class="hljs-built_in">this</span>, args);<br>            timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>                timer = <span class="hljs-literal">null</span>;<span class="hljs-comment">/* 到期的话，清除之前的计时器 */</span><br>            &#125;, time)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><a href="https://code.h5jun.com/wik/edit?js,output">Debounce</a></p></li><li><p><a href="https://code.h5jun.com/roka/7/edit?js,output">Consumer / 2</a></p></li><li><p><a href="https://code.h5jun.com/kapef/edit?js,output">Iterative</a></p></li></ul><h4 id="3-1-1-为什么使用高阶函数？"><a href="#3-1-1-为什么使用高阶函数？" class="headerlink" title="3.1.1 为什么使用高阶函数？"></a>3.1.1 为什么使用高阶函数？</h4><p>两种函数：纯函数和非纯函数</p><ul><li>纯函数：输入的值一定时，输出的值一定，比较适合用于单元测试</li><li>非纯函数：会依赖于外部环境</li></ul><p>通过高阶函数可以减少非纯函数的数量，增加系统的可靠性、稳定性。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
            <tag> 青训营 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML、CSS温故而知新</title>
      <link href="/2022/01/17/yc-html-css/"/>
      <url>/2022/01/17/yc-html-css/</url>
      
        <content type="html"><![CDATA[<h1 id="HTML、CSS温故而知新"><a href="#HTML、CSS温故而知新" class="headerlink" title="HTML、CSS温故而知新"></a>HTML、CSS温故而知新</h1><p>参加字节跳动的青训营时写的笔记。这部分是韩广军老师讲的课。</p><p><strong>前端</strong>：</p><p><img src="https://s2.loli.net/2022/01/17/QxptcwgIJ9RW4bh.png" alt="image-20220117162624413"></p><p>前端需要关注的东西：</p><ul><li><strong>功能</strong></li><li>美观</li><li>安全</li><li>兼容</li><li>体验</li><li>性能</li><li>无障碍</li></ul><h2 id="1-HTML"><a href="#1-HTML" class="headerlink" title="1. HTML"></a>1. HTML</h2><p>用于创建网页的标准标记语言</p><h3 id="1-1-HTML语法"><a href="#1-1-HTML语法" class="headerlink" title="1.1 HTML语法"></a>1.1 HTML语法</h3><ul><li>标签和属性不区分大小写，但是推荐小写</li><li>部分空标签可以不闭合，如input、meta</li><li>属性值推荐使用<strong>双引号包裹</strong></li><li>属性值为true时，可以省略属性值，如required、readonly</li></ul><h3 id="1-2-HTML标签"><a href="#1-2-HTML标签" class="headerlink" title="1.2 HTML标签"></a>1.2 HTML标签</h3><p><strong>h1-h6</strong>：h1一级标题，h6六级标题</p><p><strong>ol</strong>(有序列表)：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>C<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>ul</strong>(无序列表)：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>dl</strong>(定义列表)：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>西游记<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>作者<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>吴承恩<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>创作年代<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>明代<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>借用人<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>clz<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>czh<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br></code></pre></td></tr></table></figure><p>dt：标题， dd：具体描述， dt和dd是多对多的关系</p><p><strong>a</strong>(链接)：</p><ul><li><p>href：链接的地址</p></li><li><p>target=”_blank”：以新标签的形式打开</p></li></ul><p><strong>img</strong>：</p><ul><li>alt：当加载失败或不加载图片时的替代文字</li></ul><p><strong>input</strong>：</p><ul><li><p>type=”range”：输入范围</p></li><li><p>type=”number”：输入数字，可以添加min，max设置范围</p></li><li><p>type=”date”：输入日期</p></li><li><p>type=”checkbox”：多选按钮</p></li><li><p>type=”radio”：单选按钮，通过name的属性值实现互斥</p></li></ul><p><strong>textarea</strong>：多行文本框</p><p><strong>引用</strong>：</p><ul><li><p>blockquote：块级引用(长引用， 如引用一段话)</p></li><li><p>cite：短引用(如书名)</p></li><li><p>q：短引用(具体内容)</p></li></ul><p><strong>强调</strong>：</p><p>strong：粗体强调标签，强调，表示内容的重要性</p><p>em：斜体强调标签，更强烈的强调，表示内容的强调点</p><h3 id="1-3-语义化"><a href="#1-3-语义化" class="headerlink" title="1.3 语义化"></a>1.3 语义化</h3><p>​    HTML中的元素、属性及属性值都拥有某种含义，如有序列表用ol，无序列表用ul.</p><p><img src="https://s2.loli.net/2022/01/17/fkz5BJ8tZxCVcXv.png" alt="image-20220117162740803"></p><p>语义化好处：</p><ol><li>了解每个标签和属性的含义</li><li>思考什么标签最适合描述这个内容</li><li>不使用可视化工具生成</li></ol><h3 id="1-4-src和href的区别"><a href="#1-4-src和href的区别" class="headerlink" title="1.4 src和href的区别"></a>1.4 src和href的区别</h3><p>​    src指向的内容会嵌入到文档当前标签所在的位置，而href是用于建立这个这个标签与外部资源之间的关系</p><h2 id="2-CSS"><a href="#2-CSS" class="headerlink" title="2. CSS:"></a>2. CSS:</h2><p>用来定义页面元素的样式(如文字的大小、颜色)</p><h3 id="2-1-使用css的三种形式"><a href="#2-1-使用css的三种形式" class="headerlink" title="2.1 使用css的三种形式"></a>2.1 使用css的三种形式</h3><ul><li><p>外链</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;./index.css&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>嵌入</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">  <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">color</span>: red;</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>内联</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: red&quot;</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><p><img src="https://s2.loli.net/2022/01/17/aAnj92c6o7g1r3t.png" alt="image-20220117162822660"></p><h3 id="2-2-选择器"><a href="#2-2-选择器" class="headerlink" title="2.2 选择器"></a>2.2 选择器</h3><p><a href="https://13535944743.github.io/2021/10/15/css-selector/">css选择器</a></p><p><img src="https://s2.loli.net/2022/01/17/vSikdbXoV6TZ89t.png" alt="image-20220117162857197"></p><p><strong>选择器的特异度</strong>：选择器的特异度高的会覆盖特异度低的样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">nav</span> <span class="hljs-selector-tag">a</span> &#123;<br>    <span class="hljs-attribute">color</span>: red;<br>&#125;<br><br><span class="hljs-selector-tag">a</span> &#123;<br>    <span class="hljs-attribute">color</span>: pink;<br>&#125;<br><span class="hljs-comment">/*结果会是红色*/</span><br></code></pre></td></tr></table></figure><p><code> #nav .list li a:link</code>：</p><table><thead><tr><th>id</th><th>(伪)类</th><th>标签</th></tr></thead><tbody><tr><td>1</td><td>2</td><td>2</td></tr></tbody></table><p><code> .box ul.links a</code>：</p><table><thead><tr><th>id</th><th>(伪)类</th><th>标签</th></tr></thead><tbody><tr><td>0</td><td>2</td><td>2</td></tr></tbody></table><h3 id="2-3-字体"><a href="#2-3-字体" class="headerlink" title="2.3 字体"></a>2.3 字体</h3><h4 id="2-3-1-字体族font-family"><a href="#2-3-1-字体族font-family" class="headerlink" title="2.3.1 字体族font-family"></a>2.3.1 字体族font-family</h4><p><img src="https://s2.loli.net/2022/01/17/6BJQEheD2MIuNUs.png" alt="image-20220117162938942"></p><p>font-family使用建议:</p><ul><li>字体列表最后加上通用字体族</li><li>英文字体放在中文字体前面</li></ul><h4 id="2-3-2-字体大小font-size"><a href="#2-3-2-字体大小font-size" class="headerlink" title="2.3.2 字体大小font-size"></a>2.3.2 字体大小font-size</h4><ul><li>关键字：small、medium、large</li><li>长度：px、em</li><li>百分比：相对于父元素字体大小</li></ul><h4 id="2-3-3-字体粗细font-weight"><a href="#2-3-3-字体粗细font-weight" class="headerlink" title="2.3.3 字体粗细font-weight"></a>2.3.3 字体粗细font-weight</h4><p>font-weight: 100-900</p><p>normal(400), bold(700)</p><h4 id="2-3-4-行高line-height"><a href="#2-3-4-行高line-height" class="headerlink" title="2.3.4 行高line-height"></a>2.3.4 行高line-height</h4><p>用于设置多行元素的空间量</p><p><img src="https://s2.loli.net/2022/01/17/D5zL6wIMqthrbAT.png" alt="image-20220117163300668"></p><p>如果line-height的值没有单位，则是font-size*line-height的值</p><h4 id="2-3-5-简写"><a href="#2-3-5-简写" class="headerlink" title="2.3.5 简写"></a>2.3.5 简写</h4><p><code> font: style weight size/height family</code></p><p>例子：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">h1</span> &#123;<br>    <span class="hljs-attribute">font</span>: bold <span class="hljs-number">16px</span>/<span class="hljs-number">2.0</span> Arial, Helvetica;<br>&#125;<br><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">font</span>: <span class="hljs-number">16px</span> serif;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-4-继承"><a href="#2-4-继承" class="headerlink" title="2.4 继承"></a>2.4 继承</h3><p><a href="https://cdpn.io/webzhao/debug/xxXyzRd">CSS属性取值过程</a></p><p>某些属性会自动继承父元素的计算值，除非显式指定一个值。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: red&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>123<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>456<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: blue&quot;</span>&gt;</span>789<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>在CSS中以text-、font-、line- 开头的属性都是可以继承的</p><p>显示继承：inherit</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs css">* &#123;<br>    <span class="hljs-attribute">color</span>: inherit;<br>&#125;<br><br><span class="hljs-selector-tag">html</span> &#123;<br>    <span class="hljs-attribute">color</span>: red;<br>&#125;<br><br><span class="hljs-selector-class">.special</span> &#123;<br>    <span class="hljs-attribute">color</span>: blue;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-5-盒模型"><a href="#2-5-盒模型" class="headerlink" title="2.5 盒模型"></a>2.5 盒模型</h3><ul><li>标准盒模型：width指content的宽度(即内容的宽度)，<code>box-sizing</code>为content-box</li><li>怪异盒模型(IE盒模型)：width指content的宽度 + 左右padding值 + 左右border值，<code>box-sizing</code>为border-box</li></ul><p><img src="https://s2.loli.net/2022/01/17/cJDzEYHrXCdViva.png" alt="img"></p><p><img src="https://s2.loli.net/2022/01/17/MPuIEOHewyDAd3N.png" alt="image-20220117123750994"></p><p>上两张图片来源：<a href="https://www.jianshu.com/p/7dadcc458410">https://www.jianshu.com/p/7dadcc458410</a></p><h3 id="2-6-块级元素与行级元素的区别"><a href="#2-6-块级元素与行级元素的区别" class="headerlink" title="2.6 块级元素与行级元素的区别"></a>2.6 块级元素与行级元素的区别</h3><table><thead><tr><th>块级</th><th>行级</th></tr></thead><tbody><tr><td>不和其他盒子并列摆放</td><td>可以和其他行级盒子一起放到一行</td></tr><tr><td>适应所有的盒模型属性</td><td>盒模型中的width、height不适用</td></tr></tbody></table><h3 id="2-7-行级排版上下文-IFC-和块级排版上下文-BFC"><a href="#2-7-行级排版上下文-IFC-和块级排版上下文-BFC" class="headerlink" title="2.7 行级排版上下文(IFC)和块级排版上下文(BFC)"></a>2.7 行级排版上下文(IFC)和块级排版上下文(BFC)</h3><h4 id="2-7-1-行级排版上下文-IFC"><a href="#2-7-1-行级排版上下文-IFC" class="headerlink" title="2.7.1 行级排版上下文(IFC)"></a>2.7.1 行级排版上下文(IFC)</h4><ul><li>Inline Formatting Context</li><li><strong>只包含行级盒子</strong>的容器会创建一个IFC</li><li>IFC内的排版规则<ul><li>盒子在一行内平行摆放</li><li>一行放不下时，换行显示</li><li>text-align决定一行内盒子的水平对齐</li><li>vertical-align决定一个盒子在行内的垂直对齐</li><li>避开浮动(float)元素</li></ul></li></ul><h4 id="2-7-2-块级排版上下文-BFC"><a href="#2-7-2-块级排版上下文-BFC" class="headerlink" title="2.7.2 块级排版上下文(BFC)"></a>2.7.2 块级排版上下文(BFC)</h4><ul><li>BlockFormatting Context</li><li>某些容器会创建一个BFC<ul><li>根元素</li><li>浮动、绝对定位、inline-block</li><li>Flex子项和Grid子项</li><li>overflow值不为visible的块盒</li><li>display: flow-root;</li></ul></li></ul><h3 id="2-8-Flex布局"><a href="#2-8-Flex布局" class="headerlink" title="2.8 Flex布局"></a>2.8 Flex布局</h3><p><a href="https://13535944743.github.io/2021/07/29/Flex-Layout/">Flex布局 | 赤蓝紫 (13535944743.github.io)</a></p><p>之前学习时写的笔记。</p><h3 id="2-9-Grid布局"><a href="#2-9-Grid布局" class="headerlink" title="2.9 Grid布局"></a>2.9 Grid布局</h3><ul><li>display: grid使元素生成一个块级的Grid容器</li><li>使用grid-template相关属性将容器划分为网格</li><li>设置每一个子项占哪些行/列</li></ul><p>暂时只是初略了解，之后还是得正式学</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> CSS </tag>
            
            <tag> 青训营 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue项目部署到服务器(ubuntu)</title>
      <link href="/2022/01/02/vue-online/"/>
      <url>/2022/01/02/vue-online/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue项目部署到服务器-ubuntu"><a href="#Vue项目部署到服务器-ubuntu" class="headerlink" title="Vue项目部署到服务器(ubuntu)"></a>Vue项目部署到服务器(ubuntu)</h1><p>工具：WinSCP、PuTTy(可能不是专业的工具，是本人上操作系统的课用到的软件，直接用来部署了)</p><ol><li><p>打包项目，<code> npm run build</code></p><p>执行<code> npm run build</code>命令后，会生成一个dist文件夹。</p><p>这一步如果得不到预期的结果，可以把<code> vue.config.js</code>文件中的publicPath节点变为’./‘，如果不存在，则新建文件</p><p><img src="https://s2.loli.net/2022/01/02/RVmwxvoJdtfMY7T.png" alt="image-20220102142328110"></p></li><li><p>把项目文件放到服务器上</p><p>用WinSCP登录服务器后，理论上直接把本地的文件直接拖过去，就能复制过去了。但是ubuntu没有root用户，所以部分文件夹会没有权限。这个时候，就可以采用战略：先复制到不需要权限的地方，然后再通过命令行给命令mv添加sudo增加权限，把文件夹复制到需要文件的地方。</p><p><img src="https://s2.loli.net/2022/01/02/i8jMTw3z2NAalI9.png" alt="image-20220102143258862"></p><p><img src="https://s2.loli.net/2022/01/02/lH2tL7NMoyzmhuO.png" alt="image-20220102143404631"></p><p><img src="https://s2.loli.net/2022/01/02/WcBbZD2XFH6iRVm.png" alt="image-20220102143522128"></p><p><img src="https://s2.loli.net/2022/01/02/CJs3WhY2H7KmraS.png" alt="image-20220102143626669"></p></li><li><p>安装nginx, <code> sudo apt-get install nginx</code></p><p><img src="https://s2.loli.net/2022/01/02/pozBZEP7flqDM9L.png" alt="image-20220102143748982"></p></li><li><p>使用PuTTy配置nginx， 到下图路径中，执行命令<code> sudo vim default</code></p><p><img src="https://s2.loli.net/2022/01/02/zmxv8BnIXSQ2uNo.png" alt="image-20220102144203777"></p><p><img src="https://s2.loli.net/2022/01/02/nAPbz2SkHlxyRj5.png"></p><p><b style="color: red">这里直接在WinSCP中执行会出错，可能是因为WinSCP原本就只是用来管理传输文件的</b></p><p><img src="https://s2.loli.net/2022/01/02/MLpGQEFuraJUvfn.png" alt="image-20220102145110015"></p></li><li><p>重启nginx，<code> sudo nginx -s reload</code>, 打开服务器网址，就能看到效果</p></li><li><p>还有个小问题，如果路由模式为history的话，可能会有加载不成功的资源(如图片)，本人因为在考试复习周，所以没有去搞这个配置，而是直接把路由模式改为了哈希模式(虽然有#，丑了点)</p></li></ol><p><strong>最终效果</strong>：</p><p><img src="https://s2.loli.net/2022/01/02/VguLKHvkPifR7oG.png" alt="image-20220102145654643"></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络(五)    运输层</title>
      <link href="/2021/12/26/computer-network-5/"/>
      <url>/2021/12/26/computer-network-5/</url>
      
        <content type="html"><![CDATA[<h1 id="计算机网络-五-运输层"><a href="#计算机网络-五-运输层" class="headerlink" title="计算机网络(五)    运输层"></a>计算机网络(五)    运输层</h1><h2 id="1-运输层协议概述"><a href="#1-运输层协议概述" class="headerlink" title="1. 运输层协议概述"></a>1. 运输层协议概述</h2><p>运输层向它上面的应用层提供通信服务，它属于面向通信部份的最高层，也是用户功能中的最低层</p><p><strong>端到端的通信</strong>：进程之间的通信。主机A的某个进程和主机B上的另一个进程进行通信</p><p><strong>网络层和运输层的区别</strong>：<strong>网络层是为主机之间提供逻辑通信，运输层是为应用进程之间提供端到端的逻辑通信</strong>。</p><h2 id="2-运输层的两个主要协议"><a href="#2-运输层的两个主要协议" class="headerlink" title="2. 运输层的两个主要协议"></a>2. 运输层的两个主要协议</h2><ul><li>用户数据报协议UDP：传送的数据单位协议是<strong>UDP报文</strong>或<strong>用户数据报</strong></li><li>传输控制协议TCP：传送的数据单位协议是<strong>TCP报文段</strong></li></ul><h3 id="2-1-用户数据报协议UDP"><a href="#2-1-用户数据报协议UDP" class="headerlink" title="2.1 用户数据报协议UDP"></a>2.1 用户数据报协议UDP</h3><p>UDP在IP的数据报服务之上增加的功能·</p><ul><li>复用和分用的功能</li><li>差错检测的功能</li></ul><h4 id="2-1-1-UDP的主要特点"><a href="#2-1-1-UDP的主要特点" class="headerlink" title="2.1.1 UDP的主要特点"></a>2.1.1 UDP的主要特点</h4><ul><li><strong>UDP是无连接的</strong>：减少了开销和发送数据之前的时延</li><li><strong>UDP尽最大努力交付</strong>：不保证可靠交付</li><li><strong>UDP是面向报文的</strong>：UDP一次交付一个完整的报文</li><li><strong>UDP没有拥塞控制</strong></li><li><strong>UDP支持一对一、一对多、多对一、多对多的交互通信</strong></li><li><strong>UDP的首部开销小</strong>，只有8个字节(由4个字段组成，每个字段都是2个字节)，比TCP的20个字节的首部要短</li></ul><h3 id="2-2-传输控制协议TCP"><a href="#2-2-传输控制协议TCP" class="headerlink" title="2.2 传输控制协议TCP"></a>2.2 传输控制协议TCP</h3><h4 id="2-2-1-TCP最主要的特点"><a href="#2-2-1-TCP最主要的特点" class="headerlink" title="2.2.1 TCP最主要的特点"></a>2.2.1 TCP最主要的特点</h4><ul><li><p>TCP是<b style="color: red">面向连接</b>的运输层协议</p></li><li><p>每一条TCP连接<strong>只能由两个端点</strong>，每一条TCP连接都<strong>只能是一对一</strong>的</p></li><li><p>TCP提供<b style="color: red">可靠交付</b>的服务</p></li><li><p>TCP提供<strong>全双工</strong>通信</p></li><li><p><strong>面向字节流</strong>：流指的是流入或流出进程的字节序列</p><p>应用程序和TCP的交互是一次一个数据块，但TCP把应用程序交下来的数据当成一连串无结构的字节流。(接收方应用程序收到的数据块和发送方应用程序发出的<strong>数据块不一定具有对应大小的关系</strong>，但是收到的<strong>字节流完全一样</strong>)</p></li></ul><h4 id="2-2-2-TCP的连接"><a href="#2-2-2-TCP的连接" class="headerlink" title="2.2..2 TCP的连接"></a>2.2..2 TCP的连接</h4><ul><li><p>每一条TCP连接有<strong>两个端点</strong></p></li><li><p><b style="color: red">TCP连接的断点叫做套接字(socket)或插口</b></p></li><li><p><strong>端口号拼接到IP地址就构成了套接字</strong>，即套接字socket=(IP地址:端口号)</p><p>例如，套接字socket=(127.0.0.1:8080)</p><p>每一条TCP连接<strong>唯一</strong>地被通信两端的<strong>两个端点</strong>(即两个套接字)所确定。</p><p>例如：TCP连接::= {socket1, socket2} = {(IP1:port1), (IP2, port2)}</p></li></ul><p><strong>TCP连接、IP地址、套接字</strong></p><ul><li>TCP连接是由协议软件提供的一种抽象</li><li>TCP连接的端点是个抽象的套接字，即(IP地址:端口号)</li><li>同一个IP地址可以有多个不同的TCP连接</li><li>同一个端口号可以出现在多个不同的TCP连接中</li></ul><h3 id="2-3-可靠传输的工作原理"><a href="#2-3-可靠传输的工作原理" class="headerlink" title="2.3 可靠传输的工作原理"></a>2.3 可靠传输的工作原理</h3><h4 id="2-3-1-停止等待协议"><a href="#2-3-1-停止等待协议" class="headerlink" title="2.3.1 停止等待协议"></a>2.3.1 停止等待协议</h4><p>停止等待就是每发送完一个分组就停止发送，等待对方的确认，在收到确认后再发送下一个分组</p><p><img src="https://s2.loli.net/2021/12/26/qZSudAFnCPUQyMN.jpg"></p><p>出现差错：</p><ul><li>接收方B接收M1时检测出了差错，就丢弃M1，不通知发送方A收到有差错的分组</li><li>M1在传输过程中丢失了</li></ul><p>在上面两种情况下，B都不会发送任何信息，但是A必须重发分组，直到B正确接收为止，这样才可以实现可靠通信</p><p>问题：A如何知道B是否1正确收到了M1?</p><p>解决方法：超时重传</p><ol><li>A为每一个已发送的分组都设置了一个<strong>超时计时器</strong></li><li>A只要在计时器到期之前收到了相应的确认，就撤销该超时计时器，继续发送下一个分组M2</li><li>如果A在超时计时器规定时间内没有收到B的确认，就认为分组错误或丢失，所以需要重发该分组</li></ol><p>问题：如果分组正确到达B但是B回送的确认丢失或延迟了，A会超时重传，B可能会受到重发的M1，B如何知道收到了重复的分组，需要丢弃。</p><p>解决方法：编号</p><ol><li>A为每一个发送的分组都进行编号。如果B收到了编号相同的分组，则认为收到了重复分组，丢弃重复的分组，并回传确认</li><li>B也为发送的确认进行编号，指示是对哪一个分组的确认</li><li>A根据确认以及它的编号，可以确定它是对哪一个分组的确认，避免重发。如果是重复的确认，则将其丢弃</li></ol><p><b style="color: red">停止等待协议的要点：</b></p><ul><li><strong>停止等待</strong>：发送方每次只发送一个分组，在收到确认后1再发送下一个分组</li><li><strong>编号</strong>：对发送的每个分组和确认都进行编号</li><li><strong>自动重传请求</strong>：发送方为每个发送的分组设置一个超时计时器。如果发送方没有在超时计时器到期之前收到确认，则会自动重传分组</li><li>简单，但<strong>信道利用率低</strong></li></ul><h4 id="2-3-2-连续ARQ协议"><a href="#2-3-2-连续ARQ协议" class="headerlink" title="2.3.2 连续ARQ协议"></a>2.3.2 连续ARQ协议</h4><ul><li>发送方一次可以发送<strong>多个分组</strong></li><li>使用<strong>滑动窗口协议</strong>控制发送方和接收方所能发送和接收的分组的数量和编号</li><li>每收到一个确认，发送方就把发送窗口<strong>向前滑动</strong></li><li>采用<strong>回退N</strong>方法进行重传</li></ul><p><img src="https://s2.loli.net/2021/12/26/QPXtuv5FWGSEcV4.jpg"></p><p>接收方一般采用<strong>累计确认</strong>的方式。即不必对收到的分组逐个发送确认，而是<strong>对按序到达的最后一个分组发送确认</strong>，即<strong>到这个分组为止的所有分组都已经正确收到了</strong></p><p>优点：容易实现，即使确认丢失也不必重传</p><p>缺点：不能向发送方反映出接收方已经正确收到的所有分组的信息(如发送1, 2, 3, 4, 5, 接收方收到1, 2, 4, 5，只能向发送方反映接收到了1, 2分组，不能像发送方确认正确收到4, 5分组)</p><p>如果发送方发送1, 2, 3, 4, 5分组，而中间的第三个分组丢失了，接收方只能对前两个分组发出确认，而发送方无法知道后面三个分组是否发送成功，所以只能把后面的三个分组都在重传一次，这就叫做<strong>回退N</strong>，表示需要回退， 去重传已经发送过的N个分组</p><p><strong>滑动窗口协议</strong>：ppt(p88)</p><p><img src="https://s2.loli.net/2021/12/26/QEcHXNwW3q6y5jg.jpg"></p><h3 id="2-4-TCP报文段的首部格式"><a href="#2-4-TCP报文段的首部格式" class="headerlink" title="2.4 TCP报文段的首部格式"></a>2.4 TCP报文段的首部格式</h3><p>TCP是面向字节流的，但是TCP传送的数据单元却是报文段。</p><p>一个TCP报文段分为首部和数据两部分。<strong>TCP首部的最小长度是20字节</strong></p><h3 id="2-5-TCP可靠传输的实现"><a href="#2-5-TCP可靠传输的实现" class="headerlink" title="2.5 TCP可靠传输的实现"></a>2.5 TCP可靠传输的实现</h3><h4 id="2-5-1-以字节为单位的滑动窗口"><a href="#2-5-1-以字节为单位的滑动窗口" class="headerlink" title="2.5.1 以字节为单位的滑动窗口"></a>2.5.1 以字节为单位的滑动窗口</h4><p>TCP使用流水线传输和滑动窗口协议实现高效、可靠的传输</p><p>TCP的滑动窗口<strong>以字节为单位</strong>，发送方A和发送方B分别维持一个发送窗口和一个接收窗口。</p><p><strong>发送窗口</strong>在没有收到确认时，可以连续把窗口内的数据全部发送出去；<strong>接收窗口</strong>只允许接收落入窗口内的数据。</p><p>例子：</p><p><img src="https://pic.imgdb.cn/item/61a866552ab3f51d91795cae.jpg"></p><p><strong>如果A的发送窗口内的序号都已用完，但没有收到确认，则必须停止发送。</strong></p><p><img src="https://pic.imgdb.cn/item/61a866e02ab3f51d9179ba23.jpg"></p><p>发送方的应用进程把字节流写入TCP的发送缓存，接收方的应用进程从TCP的接收缓存中读取字节流。</p><p><strong>发送缓存暂时存放</strong>：</p><ul><li>准备发送的数据</li><li>已发送出但并未收到确认的数据</li></ul><p><strong>接收缓存暂时存放</strong>：</p><ul><li>按序到达的但还没被读取的数据</li><li>不按序到达的数据</li></ul><p>A的发送窗口并不总是和B的接收窗口一样大。</p><p>TCP针对不按序到达的数据的处理：</p><ul><li>先临时存放在接收窗口中</li><li>缺少的数据到达后，再按序交付给上层的应用进程</li></ul><h4 id="2-5-2-超时重传时间的选择"><a href="#2-5-2-超时重传时间的选择" class="headerlink" title="2.5.2 超时重传时间的选择"></a>2.5.2 超时重传时间的选择</h4><p>TCP每发送一个报文段，就对这个报文段设置一次计时器。</p><p>如果计时器设置的重传时间到了，但是还没有收到确认，就要重传这一报文段。</p><p>加权平均往返时间、超时重传时间RTO、Karn算法</p><h4 id="2-5-3-选择确认SACK"><a href="#2-5-3-选择确认SACK" class="headerlink" title="2.5.3 选择确认SACK"></a>2.5.3 选择确认SACK</h4><p>场景：收到的报文段没有差错，只是没按序号，中间还缺少某些序号的数据。选择确认SACK可以只传送缺少的数据而不重传已经正确到达接收方的数据。</p><h3 id="2-6-TCP的拥塞控制-PPT-P158"><a href="#2-6-TCP的拥塞控制-PPT-P158" class="headerlink" title="2.6  TCP的拥塞控制(PPT  P158)"></a>2.6  TCP的拥塞控制(PPT  P158)</h3><p><strong>慢开始</strong>、<strong>拥塞避免算法</strong>、<strong>快重传</strong></p><h3 id="2-7-TCP的连接"><a href="#2-7-TCP的连接" class="headerlink" title="2.7 TCP的连接"></a>2.7 TCP的连接</h3><p>TCP是面向连接的协议</p><p>TCP连接有三个阶段：</p><ol><li><strong>连接建立</strong></li><li><strong>数据传送</strong></li><li><strong>连接释放</strong></li></ol><p>TCP连接的建立<strong>采用客户服务器方式</strong>。主动发起连接建立的应用进程叫做<strong>客户端</strong>(client)，被动等待连接建立的应用进程叫做<strong>服务器</strong>(server)</p><h4 id="2-7-1-TCP的连接建立"><a href="#2-7-1-TCP的连接建立" class="headerlink" title="2.7.1 TCP的连接建立"></a>2.7.1 TCP的连接建立</h4><p>TCP建立连接的过程叫做<strong>握手</strong>。握手需要在客户端和服务器之间交换三个TCP报文段，称为<strong>三报文握手</strong></p><p>采用三报文握手的目的：防止已失效的连接请求报文段突然又传送到了。</p><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112091438033.png" alt="image-20211209143835954"></p><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112091440908.png" alt="image-20211209144023848"></p><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112091440266.png" alt="image-20211209144035208"></p><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112091440555.png" alt="image-20211209144049512"></p><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112091441796.png" alt="image-20211209144100735"></p><h4 id="2-7-2-TCP的连接释放"><a href="#2-7-2-TCP的连接释放" class="headerlink" title="2.7.2 TCP的连接释放"></a>2.7.2 TCP的连接释放</h4><p>TCP连接释放过程是<strong>四报文握手</strong></p><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112091443586.png" alt="image-20211209144315512"></p><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112091445966.png" alt="image-20211209144553920"></p><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112091446967.png" alt="image-20211209144600913"></p><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112091446336.png" alt="image-20211209144616280"></p>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络(四)    网络层</title>
      <link href="/2021/12/26/computer-network-4/"/>
      <url>/2021/12/26/computer-network-4/</url>
      
        <content type="html"><![CDATA[<h1 id="计算机网络-四-网络层"><a href="#计算机网络-四-网络层" class="headerlink" title="计算机网络(四)    网络层"></a>计算机网络(四)    网络层</h1><h2 id="1-网络层提供的两种服务"><a href="#1-网络层提供的两种服务" class="headerlink" title="1. 网络层提供的两种服务"></a>1. 网络层提供的两种服务</h2><h3 id="1-1-让网络负责可靠交付"><a href="#1-1-让网络负责可靠交付" class="headerlink" title="1.1 让网络负责可靠交付"></a>1.1 让网络负责可靠交付</h3><ul><li><p>模拟电信网络，使用<strong>面向连接</strong>的通信方式</p></li><li><p>通信之前先建立<strong>虚电路</strong>，保证双方通信所需的一切网络资源</p><p><img src="https://s2.loli.net/2021/12/26/yHbS9MDL8glfnwe.jpg"></p></li></ul><p><strong>虚电路是逻辑连接</strong>：虚电路只是<strong>逻辑上的连接</strong>，分组都沿着这条逻辑连接<strong>按照存储转发方式传送</strong>，不是真正建立了一条物理连接</p><h3 id="1-2-网络提供数据报服务"><a href="#1-2-网络提供数据报服务" class="headerlink" title="1.2 网络提供数据报服务"></a>1.2 网络提供数据报服务</h3><ul><li><p>网络层向上只提供简单灵活的、<strong>无连接的</strong>、<strong>尽最大努力交付</strong>的<strong>数据报服务</strong></p></li><li><p>网络在发送分组时不需要先建立连接。每一个分组(即IP数据报)独立发送，与其前后的分组无关</p></li><li><p><b style="color: red">网络层不提供端到端的可靠传输服务，由主机中的运输层负责可靠交付(包括差错处理、流量控制等)</b></p><p><img src="https://s2.loli.net/2021/12/26/7qcHNbFrCkymVWT.jpg"></p></li></ul><p><img src="https://s2.loli.net/2021/12/26/Sku6HETj5ORxvoV.jpg"></p><h2 id="2-网际协议IP"><a href="#2-网际协议IP" class="headerlink" title="2. 网际协议IP"></a>2. 网际协议IP</h2><ul><li>网际协议IP是TCP/IP体系中两个最主要的协议之一</li><li>与IP协议配套使用的三个协议：<b style="color: red">地址解析协议ARP</b>、<b style="color: red">网际控制报文协议ICMP</b>、<b style="color: red">网际组管理协议IGMP</b></li></ul><h3 id="2-1-虚拟互连网络"><a href="#2-1-虚拟互连网络" class="headerlink" title="2.1 虚拟互连网络"></a>2.1 虚拟互连网络</h3><p>虚拟互连网络：逻辑互连网络。即互连起来的各种物理网络的异构性本来是客观存在的，但是利用IP协议可以使这些性能各异的网络从用户看起来好像是一个统一的网络</p><p><strong>好处</strong>：当互联网上的主机进行通信时，就好像在一个网络上通信一样，而看不见具体的网络异构细节</p><h3 id="2-2-分类的IP地址"><a href="#2-2-分类的IP地址" class="headerlink" title="2.2 分类的IP地址"></a>2.2 分类的IP地址</h3><h4 id="2-2-1-IP地址及其表示方法"><a href="#2-2-1-IP地址及其表示方法" class="headerlink" title="2.2.1 IP地址及其表示方法"></a>2.2.1 IP地址及其表示方法</h4><ul><li><strong>IP地址</strong>就是给每个连接在互联网上的主机(或路由器)分配一个在全世界范围是<strong>唯一的32位的标识符</strong></li></ul><h4 id="2-2-2-IP地址的编址方法"><a href="#2-2-2-IP地址的编址方法" class="headerlink" title="2.2.2 IP地址的编址方法"></a>2.2.2 IP地址的编址方法</h4><p><b style="color: red">分类IP地址：最基本的编址方法</b></p><ul><li><p>将IP地址划分为若干个固定类(如A类、B类、C类地址)</p></li><li><p>每一类地址都由两个固定长度的字段组成，第一个字段是<strong>网络号</strong>，标志主机(或路由器)所连接到的网络，第二个字段是<strong>主机号</strong>，标志该主机(或路由器)</p><p><img src="https://s2.loli.net/2021/12/26/r5ozRkJpUgHySqW.png"></p></li><li><p><b style="color: red">一个IP地址在整个互联网范围内是唯一的</b></p></li></ul><p><img src="https://s2.loli.net/2021/12/26/SxtKypvMl6aX5R3.jpg"></p><p>由上图可知，</p><ul><li>IP地址第一位是0时属于A类地址，IP地址前2位是10时属于B类地址，IP地址前3位是110时属于C类地址</li><li>A类地址的网络号字段为1字节，主机号字段为3字节；B类地址的网络号字段为2字节，主机号字段为2字节; C类地址的网络号字段为3字节，主机号字段为1字节</li></ul><p>点分十进制记法：</p><ol><li>机器中存放的IP地址是32位二进制代码</li><li>把二进制代码按每8位为一组分为4组</li><li>把每一组的二进制数转换为十进制数</li></ol><p><img src="https://s2.loli.net/2021/12/26/6vjAT1skC7WURob.jpg"></p><p><b style="color: red">IP地址的一些重要特点：</b></p><ul><li><p><strong>IP地址是一种分等级的地址结构</strong></p><p>好处：</p><ol><li>IP地址管理机构在分配IP地址时只分配网络号，主机号由得到该网络号的单位自行分配，方便了IP地址的管理</li><li>路由器仅根据目的主机所连接的网络号来转发分组，使路由表中的项目数大幅度减少，从而减少路由表所占的存储空间</li></ol></li><li><p><strong>IP地址是标志一个主机(或路由器)和一条链路的接口</strong></p><ul><li>当一个主机同时连接到两个网络上时，这个时候这台主机就必须要有两个IP地址，而且网络号必须是不同的。这种主机被称为<strong>多归属主机</strong></li><li>由上一条可以知道，<strong>一个路由器至少要有两个不同的IP地址</strong>，因为路由器需要将IP数据报从一个网络转发到另一个网络</li></ul></li><li><p><strong>用转发器或网桥连接起来的若干个局域网是同一个网络，所以这些局域网都具有同样的网络号</strong></p></li><li><p><strong>所有分配到网络号的网络都是平等的</strong></p></li></ul><p><img src="https://s2.loli.net/2021/12/26/x13vZzRBYAfbdqG.jpg"></p><p>分析：</p><ul><li>222的二进制是11011110，所以上图中的IP地址都属于C类地址</li><li>C类地址的网络号字段net-id为3字节，而同一个局域网上的主机(或路由器)的IP地址上的网络号是一样的，所以上图每一块粉色区域分别是一个局域网</li></ul><h3 id="2-3-IP地址与硬件地址"><a href="#2-3-IP地址与硬件地址" class="headerlink" title="2.3 IP地址与硬件地址"></a>2.3 IP地址与硬件地址</h3><ul><li><strong>IP地址</strong>是网络层和以上各层使用的地址，是一种逻辑地址</li><li>**硬件地址(或物理地址)**是数据链路层和物理层使用的地址</li></ul><p><img src="https://s2.loli.net/2021/12/26/kryRIU2zwX8VdZ4.jpg"></p><h3 id="2-4-地址解析协议ARP"><a href="#2-4-地址解析协议ARP" class="headerlink" title="2.4 地址解析协议ARP"></a>2.4 地址解析协议ARP</h3><p>通信的时候使用了两个地址，<strong>IP地址(网络层地址)<strong>和</strong>MAC地址(数据链路层地址)</strong></p><p><strong>地址解析协议</strong>作用：通过网络层使用的IP地址，解析出在数据链路层使用的硬件地址</p><p><b style="color: red">不论网络层使用的是什么协议，实际网络的链路上传送数据帧时，最终都必须使用硬件地址</b></p><p>每一个主机都设有一个<strong>ARP高速缓存</strong>，里面有它在的局域网上的所有主机和路由器的IP地址到硬件地址的映射表。</p><p><code> &lt;IP address; MAC address; TTL&gt;</code></p><p>**TTL(Time To Live): **地址映射有效时间</p><p><strong>地址解析协议ARP</strong>：</p><ul><li>当主机A要向局域网中的主机B发送IP数据包时，会先在它的ARP高速缓存中查看有无主机B的IP地址。如果有，就将对应的硬件地址写入MAC帧，然后把MAC帧发送这个硬件地址，如果没有，则ARP进程在局域网中<strong>广播发送</strong>一个<strong>ARP请求分组</strong>。收到<strong>ARP响应分组</strong>后，将得到的IP地址到硬件地址的映射写入ARP高速缓存中。</li></ul><p><img src="https://s2.loli.net/2021/12/26/8lyokHMvmg5zeL4.jpg"></p><p><b style="color: red">ARP高速缓存的作用：存放最近获得的IP地址到MAC地址的绑定，以减少ARP广播的数量</b></p><p><strong>要注意的问题</strong>：</p><p>ARP是用于解决<b style="color: red">同一个局域网</b>的主机或路由器的IP地址和硬件地址的映射问题的</p><p>如果要找的主机和源主机不在同一个局域网中，就要<strong>通过ARP找到本局域网中的某个路由器的硬件地址</strong>，把分组发送给这个路由器，让路由器把分组转发给下一个网络，剩下的都交给下一个网络。</p><p><strong>使用ARP的四种典型情况</strong>：</p><ul><li>发送方是主机，要把IP数据报发送到本网络上的另一个主机。可以用ARP找到目的主机的硬件地址。</li><li>发送方是主机，要把IP数据报发送到另一个网络上的一个主机。用ARP找到本网络上的一个路由器的硬件地址，剩下的交给这个路由器。</li><li>发送方是路由器，要把IP数据报发送到本网络上的一个主机。可以用ARP找到目的主机的硬件地址。</li><li>发送方是路由器，要把IP数据报发送到另一个网络上的一个主机。用ARP找到本网络上的另一个路由器的硬件地址，剩下的交给这个路由器。</li></ul><h3 id="2-5-IP数据报的形式"><a href="#2-5-IP数据报的形式" class="headerlink" title="2.5 IP数据报的形式"></a>2.5 IP数据报的形式</h3><ul><li>一个数据报由<strong>首部</strong>和<strong>数据</strong>两部分组成</li><li><strong>首部的前一部分是固定长度，一共20字节，是所有IP数据报必须具有的</strong></li><li>首部的固定部分的后面是一些可选字段，长度可变</li></ul><p><img src="https://s2.loli.net/2021/12/26/nigWU7DG9QxAe1a.png" alt="image-20211102224544607"></p><p>首部检验和的计算采用16位二进制反码求和算法。这个字段<strong>只检验数据包的首部，不包括数据部分</strong></p><p><img src="https://s2.loli.net/2021/12/26/m1C4ajFBPyuTAUR.png" alt="image-20211102225044386"></p><h3 id="2-6-IP层转发分组的流程"><a href="#2-6-IP层转发分组的流程" class="headerlink" title="2.6 IP层转发分组的流程"></a>2.6 IP层转发分组的流程</h3><p>主要原理：<strong>查找路由表，根据目的网络地址能确定下一跳路由器</strong></p><h2 id="3-划分子网和构造超网"><a href="#3-划分子网和构造超网" class="headerlink" title="3. 划分子网和构造超网"></a>3. 划分子网和构造超网</h2><h3 id="3-1-划分子网"><a href="#3-1-划分子网" class="headerlink" title="3.1 划分子网"></a>3.1 划分子网</h3><p>从1985年起，IP地址增加一个<strong>子网号字段</strong>，使两级的IP地址变成三级的IP地址</p><p><img src="https://s2.loli.net/2021/12/26/UEpISmNWol69icZ.png" alt="image-20211102230559834"></p><p>优点：</p><ul><li>减少了IP地址的浪费</li><li>使网络的组织更加灵活</li><li>便于维护和管理</li></ul><h4 id="3-1-1-子网掩码"><a href="#3-1-1-子网掩码" class="headerlink" title="3.1.1 子网掩码"></a>3.1.1 子网掩码</h4><p>背景：从一个IP数据报的首部无法判断源主机或目的主机所连接的网络是否进行了子网划分</p><p>使用<strong>子网掩码</strong>可以找出IP地址中的子网部分</p><p>规则：</p><ul><li>子网掩码长度：32位</li><li>子网掩码对应网络号和子网号的左边部分是一连串1</li><li>子网掩码对应于主机号的右边部分是一连串0</li></ul><p><strong>IP地址 AND 子网掩码 = 网络地址</strong></p><p><img src="https://s2.loli.net/2021/12/26/8TYpRJomcFClSE4.png" alt="image-20211102231736594"></p><p><strong>默认子网地址</strong></p><p><img src="C:\Users\CZH0318\AppData\Roaming\Typora\typora-user-images\image-20211102231818881.png" alt="image-20211102231818881"></p><h2 id="4-ICMP"><a href="#4-ICMP" class="headerlink" title="4. ICMP"></a>4. ICMP</h2><h3 id="4-1-简介"><a href="#4-1-简介" class="headerlink" title="4.1 简介"></a>4.1 简介</h3><p><strong>ICMP</strong>：网际控制报文协议，是互联网的标准协议，是IP层的协议</p><p>作用：为了更有效地转发IP数据报和提高交付成功的机会</p><p><img src="https://s2.loli.net/2021/12/26/p3XiEmaWMNC2k4V.png"></p><h3 id="4-2-ICMP报文的种类"><a href="#4-2-ICMP报文的种类" class="headerlink" title="4.2 ICMP报文的种类"></a>4.2 ICMP报文的种类</h3><ul><li>ICMP差错报告报文(四种):<ul><li>终点不可达</li><li>时间超过</li><li>参数问题</li><li>改变路由(重定向)</li></ul></li></ul><ul><li>ICMP询问报文</li></ul><p>ICMP的一种重要应用就是分组网间探测<strong>ping</strong>,用来测试两台主机之间的联通性</p><h2 id="5-IPv6"><a href="#5-IPv6" class="headerlink" title="5. IPv6"></a>5. IPv6</h2><h3 id="5-1-IPv6的基本首部"><a href="#5-1-IPv6的基本首部" class="headerlink" title="5.1 IPv6的基本首部"></a>5.1 IPv6的基本首部</h3><p>IPv6仍支持<strong>无连接的传送</strong>，但将协议数据单元PDU称为<strong>分组</strong></p><p>主要变化：</p><ul><li><strong>更大的地址空间</strong></li><li><strong>扩展的地址层次结构</strong></li><li><strong>灵活的首部格式</strong></li><li><strong>改进的选项</strong></li><li><strong>允许协议继续扩充</strong></li><li>**支持即插即用(即自动配置)**。IPv6不需要使用DHCP</li><li><strong>支持资源的预分配</strong></li><li><strong>IPv6首部改为8字节对齐</strong>。IPv4首部是4字节对齐</li></ul><h4 id="5-1-1-IPv6数据报的一般形式"><a href="#5-1-1-IPv6数据报的一般形式" class="headerlink" title="5.1.1 IPv6数据报的一般形式"></a>5.1.1 IPv6数据报的一般形式</h4><p>IPv6数据报由两大部分组成。</p><ul><li><strong>基本首部(固定的40字节)</strong></li><li>有效载荷(净负荷)。允许有0个或多个扩展首部，之后才是数据部分</li></ul><p><img src="https://pic.imgdb.cn/item/6195ec492ab3f51d910b33d8.jpg"></p><h2 id="6-虚拟专用网VPN"><a href="#6-虚拟专用网VPN" class="headerlink" title="6. 虚拟专用网VPN"></a>6. 虚拟专用网VPN</h2><ul><li><strong>IP地址的紧缺</strong>：一个机构能够申请到的IP地址数往往小于本机构所拥有的主机数</li><li><strong>互联网不是很安全</strong>：一个机构内并不需要把所有的主机接入到外部的互联网</li></ul><h3 id="6-1-本地地址和全球地址"><a href="#6-1-本地地址和全球地址" class="headerlink" title="6.1 本地地址和全球地址"></a>6.1 本地地址和全球地址</h3><p><strong>本地地址</strong>：仅在机构内部使用的IP地址，可以由本机构自行分配，而不需要向互联网的管理机构申请</p><p><strong>全球地址</strong>：全球唯一的IP地址，需要向互联网的管理机构申请</p><p>RFC1918指明了一些<strong>专用地址</strong>，<strong>专用地址只能用作本地地址</strong>，不能用于全球地址。<strong>在互联网中的所有路由器，对目的地址是专用地址的数据报一律不进行转发</strong></p><p><img src="https://s2.loli.net/2021/12/26/OU2Z1cNqHgrDQp5.jpg"></p><p>采用上图的专用IP地址的互联网称为<strong>专用互联网</strong>(<strong>本地互联网、专用网</strong>)</p><p>专用地址仅在本机构内部使用。专用IP地址也叫做<strong>可重用地址</strong></p><h3 id="6-2-虚拟专用网VPN"><a href="#6-2-虚拟专用网VPN" class="headerlink" title="6.2 虚拟专用网VPN"></a>6.2 虚拟专用网VPN</h3><p>利用公网的互联网作为本机构各专用网之间的通信载体，这样的专用网又称为<strong>虚拟专用网VPN</strong></p><p><img src="https://s2.loli.net/2021/12/26/8QEO6ZbKVWvStjY.jpg"></p><h2 id="7-网络地址转换NAT"><a href="#7-网络地址转换NAT" class="headerlink" title="7. 网络地址转换NAT"></a>7. 网络地址转换NAT</h2><ul><li>需要在专用网连接到互联网的路由器上安装NAT软件。装有NAT软件的路由器叫做<strong>NAT路由器，它至少由一个有效的外部全球IP地址</strong></li><li>所有使用本地地址的主机在和外界通信时，都要在NAT路由器上<strong>将本地地址转换成全球IP地址</strong>，才能和互联网连接</li></ul><p><img src="https://s2.loli.net/2021/12/26/XBPjsEWZM6bUYJF.jpg"></p><p>在内部主机于外部主机通信时，在NAT路由器上发生了<strong>两次地址转换</strong></p><ul><li>离开专用网时：替换源地址，把内部地址替换成全球地址</li><li>进入专用网时：替换目的地址，将全球地址替换成内部地址</li></ul><p><strong>网络与端口号转换NAPT</strong></p><p>NAT转换表把<strong>运输层的端口号也用上</strong>，可以使多个拥有本地地址的主机，<strong>共用一个NAT路由器上的全球IP地址</strong>，所以可以同时和互联网上的不同主机进行通信</p><p>使用端口号的NAT叫做<strong>网络与端口号转换NAPT</strong>，而不使用端口号的NAT叫做<strong>传统的NAT</strong></p>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>通过JS实现剪贴板操作</title>
      <link href="/2021/12/16/JS-developing-2/"/>
      <url>/2021/12/16/JS-developing-2/</url>
      
        <content type="html"><![CDATA[<h1 id="通过JS实现剪贴板操作"><a href="#通过JS实现剪贴板操作" class="headerlink" title="通过JS实现剪贴板操作"></a>通过JS实现剪贴板操作</h1><p>在网上找到很多种方法，ZeroClipboard.js、clipboard.js插件等，但是都没有办法解决本人项目中的问题，最后发现可以通过navigator对象得到clipboard，进行剪切板操作</p><p>先来一下clipboard.js版本的热热身。</p><h2 id="1-clipboard-js"><a href="#1-clipboard-js" class="headerlink" title="1. clipboard.js"></a>1. clipboard.js</h2><h3 id="1-1-通过text的function-来复制内容"><a href="#1-1-通过text的function-来复制内容" class="headerlink" title="1.1  通过text的function()来复制内容"></a>1.1  通过text的function()来复制内容</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>Copy<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.8/clipboard.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">      <span class="hljs-keyword">const</span> clipboard = <span class="hljs-keyword">new</span> ClipboardJS(<span class="hljs-string">&#x27;#btn&#x27;</span>, &#123;</span><br><span class="javascript">        <span class="hljs-comment">// 第一个参数是可以是类似jQuery的选择器，也可以是DOM对象</span></span><br><span class="javascript">        <span class="hljs-attr">text</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello World&#x27;</span>; <span class="hljs-comment">// 返回要放到剪切板的内容</span></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">      &#125;);</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/01/15/nC6YdGofaLlhIwg.png" alt="image-20211208003450259"></p><h3 id="1-2-通过target的function-来复制内容"><a href="#1-2-通过target的function-来复制内容" class="headerlink" title="1.2 通过target的function()来复制内容"></a>1.2 通过target的function()来复制内容</h3><p>类似上面的，不过创建clipboard对象时第二个参数的对象的属性从text变为了target。简单理解的话，就是text就相当于是直接把要复制的内容给出来，而target则是把要去复制的地点给出来，在下面就相当于根据DOM对象，顺藤摸瓜去复制。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;foo&quot;</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>Copy<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;foo&quot;</span>&gt;</span>World<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.8/clipboard.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">      <span class="hljs-keyword">const</span> btn = <span class="hljs-built_in">document</span>.getElementsByClassName(<span class="hljs-string">&#x27;btn&#x27;</span>)[<span class="hljs-number">0</span>];</span><br><span class="javascript">      <span class="hljs-keyword">const</span> clipboard = <span class="hljs-keyword">new</span> ClipboardJS(btn, &#123;</span><br><span class="javascript">        <span class="hljs-attr">target</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.getElementsByClassName(<span class="hljs-string">&#x27;foo&#x27;</span>)[<span class="hljs-number">1</span>];</span><br><span class="javascript">        &#125;,</span><br><span class="javascript">      &#125;);</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h3 id="1-3-通过给复制按钮添加自定义属性来复制内容"><a href="#1-3-通过给复制按钮添加自定义属性来复制内容" class="headerlink" title="1.3 通过给复制按钮添加自定义属性来复制内容"></a>1.3 通过给复制按钮添加自定义属性来复制内容</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;foo&quot;</span>&gt;</span>1 + 1 = 2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">data-clipboard-action</span>=<span class="hljs-string">&quot;copy&quot;</span> <span class="hljs-attr">data-clipboard-target</span>=<span class="hljs-string">&quot;#foo&quot;</span>&gt;</span>Copy<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.8/clipboard.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">      <span class="hljs-keyword">const</span> btn = <span class="hljs-built_in">document</span>.getElementsByClassName(<span class="hljs-string">&#x27;btn&#x27;</span>)[<span class="hljs-number">0</span>];</span><br><span class="javascript">      <span class="hljs-keyword">const</span> clipboard = <span class="hljs-keyword">new</span> ClipboardJS(btn);</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>参数说明：</p><ul><li>data-clipboard-action：剪切板行为，如复制copy，剪切cut</li><li>data-clipboard-target：剪切板行为的目标</li></ul><p>不过，这个样子的复制相当于自动帮你选择，并且帮你按CTRL+C, 复制之后，复制的内容会变蓝</p><h2 id="2-通过document-execCommand-方法"><a href="#2-通过document-execCommand-方法" class="headerlink" title="2. 通过document.execCommand()方法"></a>2. 通过document.execCommand()方法</h2><p>只能说是换汤不换药。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;copy-input&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Hello World!&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;copy-btn&quot;</span>&gt;</span>复制<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">      <span class="hljs-keyword">const</span> copyInput = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;copy-input&#x27;</span>);</span><br><span class="javascript">      <span class="hljs-keyword">const</span> copyBtn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;copy-btn&#x27;</span>);</span><br><span class="javascript"></span><br><span class="javascript">      copyBtn.addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        copyInput.select();</span><br><span class="javascript">        <span class="hljs-built_in">document</span>.execCommand(<span class="hljs-string">&#x27;copy&#x27;</span>);</span><br><span class="javascript">      &#125;);</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>无法执行document.execCommand(‘paste’)方法。</p><p><img src="https://s2.loli.net/2022/01/15/ieOdwycotlq49aJ.png" alt="image-20211208210003809"></p><p>新版本Chrome执行<code>document.execCommand(&#39;paste&#39;)</code>会返回false，因为读取剪切板涉及用户隐私安全，所以一定要在用户允许的情况下才可以进行操作。</p><h2 id="3-异步Clipboard-API"><a href="#3-异步Clipboard-API" class="headerlink" title="3. 异步Clipboard API"></a>3. 异步Clipboard API</h2><p>它的所有操作都是异步的，返回Promise对象，而且，它可以将任意内容(比如图片)放入剪切板。</p><p>首先，通过<code>navigator.clipboard</code> 返回Clipboard对象，所有操作都是通过这个对象进行的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> clipboardObj = navigator.clipboard;<br></code></pre></td></tr></table></figure><p><b style="color:red">Chrome浏览器规定，只有HTTPS协议的页面才能使用这个API</b>。不过，localhost允许使用非加密协议。</p><h3 id="3-1-Clipboard-readText-、Clipboard-writeText"><a href="#3-1-Clipboard-readText-、Clipboard-writeText" class="headerlink" title="3.1 Clipboard.readText()、Clipboard.writeText()"></a>3.1 Clipboard.readText()、Clipboard.writeText()</h3><p>Clipboard.writeText()用于复制文本数据，Clipboard.readText()用于读取剪切板中的文本数据</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;请输入要复制的内容&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;copy-ipt&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;copy-btn&quot;</span>&gt;</span>复制<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;会输出复制的内容的内容&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;paste-ipt&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;paste-btn&quot;</span>&gt;</span>粘贴<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">      <span class="hljs-keyword">const</span> copyIpt = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;copy-ipt&#x27;</span>);</span><br><span class="javascript">      <span class="hljs-keyword">const</span> copyBtn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;copy-btn&#x27;</span>);</span><br><span class="javascript">      <span class="hljs-keyword">const</span> pasteIpt = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;paste-ipt&#x27;</span>);</span><br><span class="javascript">      <span class="hljs-keyword">const</span> pasteBtn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;paste-btn&#x27;</span>);</span><br><span class="javascript"></span><br><span class="javascript">      copyBtn.addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">async</span> e =&gt; &#123;</span><br><span class="javascript">        <span class="hljs-keyword">await</span> navigator.clipboard.writeText(copyIpt.value);</span><br><span class="javascript">      &#125;);</span><br><span class="javascript"></span><br><span class="javascript">      pasteBtn.addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">async</span> e =&gt; &#123;</span><br><span class="javascript">        pasteIpt.value = <span class="hljs-keyword">await</span> navigator.clipboard.readText();</span><br><span class="javascript">      &#125;);</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>复制不需要用户给权限， 不过，点击粘贴按钮时，更准确来说是，使用clipboard.readText()方法时，浏览器会弹出一个对话框，询问是否允许读取剪切板。如果禁止，那么就会报错，可以通过try…catch结构处理报错。</p><p><img src="https://s2.loli.net/2022/01/15/hl3U7s8oIjdD9Xf.png" alt="image-20211208212459449"></p><h3 id="3-2-Clipboard-read-、Clipboard-write"><a href="#3-2-Clipboard-read-、Clipboard-write" class="headerlink" title="3.2 Clipboard.read()、Clipboard.write()"></a>3.2 Clipboard.read()、Clipboard.write()</h3><p>有点像上面两个的加强版，可以复制和粘贴任意数据，如图片</p><ul><li>**Clipboard.read()**：从剪切板读取数据(如图片)</li><li>**Clipboard.write()**：写入任意数据到剪切板</li></ul><p>**Clipboard.write()**：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">      <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br><span class="css">      &#125;</span><br><span class="css">      <span class="hljs-selector-tag">button</span> &#123;</span><br><span class="css">        <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">70px</span>;</span><br><span class="css">      &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112082214161.png&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;copyImg-btn&quot;</span>&gt;</span>复制图片<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">      <span class="hljs-keyword">const</span> mycopy = <span class="hljs-keyword">async</span> () =&gt; &#123;</span><br><span class="javascript">        <span class="hljs-keyword">const</span> imgURL = <span class="hljs-string">&#x27;https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112082214161.png&#x27;</span>;</span><br><span class="javascript">        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> fetch(imgURL); <span class="hljs-comment">//  fetch() 方法，该方法提供了一种简单，合理的方式来跨网络异步获取资源</span></span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(data);</span><br><span class="javascript">        <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">await</span> data.blob(); <span class="hljs-comment">// Blob 对象表示一个不可变、原始数据的类文件对象。</span></span><br><span class="javascript">        <span class="hljs-comment">// 它的数据可以按文本或二进制的格式进行读取，也可以转换成 ReadableStream 来用于数据操作</span></span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(blob);</span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-keyword">await</span> navigator.clipboard.write([</span><br><span class="javascript">          <span class="hljs-keyword">new</span> ClipboardItem(&#123;</span><br><span class="javascript">            [blob.type]: blob,</span><br><span class="javascript">          &#125;),</span><br><span class="javascript">        ]);</span><br><span class="javascript">        alert(<span class="hljs-string">&#x27;图片已复制&#x27;</span>);</span><br><span class="javascript">      &#125;;</span><br><span class="javascript">      <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;copyImg-btn&#x27;</span>).addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, mycopy);</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>复制成功后，去到能粘贴图片的地方，如Word、WPS等粘贴，即可看到复制的图片。</p><p>**Clipboard.read()**：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mypaste = <span class="hljs-keyword">async</span> () =&gt; &#123;<br>  <span class="hljs-keyword">const</span> clipboardItems = <span class="hljs-keyword">await</span> navigator.clipboard.read();<br>  <span class="hljs-comment">/* 该方法返回一个Promise对象，一旦对象的状态变为resolved，</span><br><span class="hljs-comment">   * 就可以得到一个数组，每个对象都是ClipboardItem对象的实例</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> clipboardItem <span class="hljs-keyword">of</span> clipboardItems) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> type <span class="hljs-keyword">of</span> clipboardItem.types) &#123;<br>      <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">await</span> clipboardItem.getType(type); <span class="hljs-comment">// 得到blob对象</span><br>      <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;img&#x27;</span>).src = URL.createObjectURL(blob); <span class="hljs-comment">// URL.createObjectURL()方法通过blob对象生成一个对应的url</span><br>    &#125;<br>  &#125;<br>&#125;;<br><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;pasteImg-btn&#x27;</span>).addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, mypaste);<br></code></pre></td></tr></table></figure><p>复制粘贴的完整代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">      <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br><span class="css">      &#125;</span><br><span class="css"></span><br><span class="css">      <span class="hljs-selector-tag">button</span> &#123;</span><br><span class="css">        <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">70px</span>;</span><br><span class="css">      &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112082214161.png&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;copyImg-btn&quot;</span>&gt;</span>复制图片<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pasteImg-btn&quot;</span>&gt;</span>粘贴图片<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;img&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;canvas&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">      <span class="hljs-keyword">const</span> mycopy = <span class="hljs-keyword">async</span> () =&gt; &#123;</span><br><span class="javascript">        <span class="hljs-keyword">const</span> imgURL = <span class="hljs-string">&#x27;https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112082214161.png&#x27;</span>;</span><br><span class="javascript">        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> fetch(imgURL); <span class="hljs-comment">//  fetch() 方法，该方法提供了一种简单，合理的方式来跨网络异步获取资源</span></span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(data);</span><br><span class="javascript">        <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">await</span> data.blob(); <span class="hljs-comment">// Blob 对象表示一个不可变、原始数据的类文件对象。</span></span><br><span class="javascript">        <span class="hljs-comment">// 它的数据可以按文本或二进制的格式进行读取，也可以转换成 ReadableStream 来用于数据操作</span></span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(blob);</span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-keyword">await</span> navigator.clipboard.write([</span><br><span class="javascript">          <span class="hljs-keyword">new</span> ClipboardItem(&#123;</span><br><span class="javascript">            [blob.type]: blob,</span><br><span class="javascript">          &#125;),</span><br><span class="javascript">        ]);</span><br><span class="javascript">        alert(<span class="hljs-string">&#x27;图片已复制&#x27;</span>);</span><br><span class="javascript">      &#125;;</span><br><span class="javascript">      <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;copyImg-btn&#x27;</span>).addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, mycopy);</span><br><span class="javascript"></span><br><span class="javascript">      <span class="hljs-keyword">const</span> mypaste = <span class="hljs-keyword">async</span> () =&gt; &#123;</span><br><span class="javascript">        <span class="hljs-keyword">const</span> clipboardItems = <span class="hljs-keyword">await</span> navigator.clipboard.read();</span><br><span class="javascript">        <span class="hljs-comment">/* 该方法返回一个Promise对象，一旦对象的状态变为resolved，</span></span><br><span class="hljs-comment"><span class="javascript">         * 就可以得到一个数组，每个对象都是ClipboardItem对象的实例</span></span><br><span class="hljs-comment"><span class="javascript">         */</span></span><br><span class="javascript">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> clipboardItem <span class="hljs-keyword">of</span> clipboardItems) &#123;</span><br><span class="javascript">          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> type <span class="hljs-keyword">of</span> clipboardItem.types) &#123;</span><br><span class="javascript">            <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">await</span> clipboardItem.getType(type); <span class="hljs-comment">// 得到blob对象</span></span><br><span class="javascript">            <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;img&#x27;</span>).src = URL.createObjectURL(blob); <span class="hljs-comment">// URL.createObjectURL()方法通过blob对象生成一个对应的url</span></span><br><span class="javascript">          &#125;</span><br><span class="javascript">        &#125;</span><br><span class="javascript">      &#125;;</span><br><span class="javascript">      <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;pasteImg-btn&#x27;</span>).addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, mypaste);</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>效果：</p><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112090040916.png" alt="image-20211209004028815"></p><p>学习链接：<a href="https://www.ruanyifeng.com/blog/2021/01/clipboard-api.html">剪贴板操作 Clipboard API 教程 - 阮一峰的网络日志 (ruanyifeng.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript生成验证码和32位随机码</title>
      <link href="/2021/12/11/JS-developing-1/"/>
      <url>/2021/12/11/JS-developing-1/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript生成验证码和32位随机码"><a href="#JavaScript生成验证码和32位随机码" class="headerlink" title="JavaScript生成验证码和32位随机码"></a>JavaScript生成验证码和32位随机码</h1><h2 id="1-使用canvas实现生成验证码功能"><a href="#1-使用canvas实现生成验证码功能" class="headerlink" title="1.使用canvas实现生成验证码功能"></a>1.使用canvas实现生成验证码功能</h2><p>本文的html文件如下图所示，实现验证码的js文件为verify.js</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>验证码<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;vetifyCanvas&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;100&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;40&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./verify.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="1-1-设置背景为随机颜色"><a href="#1-1-设置背景为随机颜色" class="headerlink" title="1.1 设置背景为随机颜色"></a>1.1 设置背景为随机颜色</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;vetifyCanvas&#x27;</span>);<br><span class="hljs-keyword">const</span> w = canvas.width;<br><span class="hljs-keyword">const</span> h = canvas.height;<br><span class="hljs-keyword">const</span> context = canvas.getContext(<span class="hljs-string">&#x27;2d&#x27;</span>);<br><br>context.fillStyle = randomColor(<span class="hljs-number">0</span>, <span class="hljs-number">155</span>); <span class="hljs-comment">// 设置背景为一个随机颜色</span><br>context.fillRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, w, h); <span class="hljs-comment">// 绘制矩形</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomNum</span>(<span class="hljs-params">min, max</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * (max - min) + min); <span class="hljs-comment">// 生成一个随机数</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomColor</span>(<span class="hljs-params">min, max</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> r = randomNum(min, max);<br>  <span class="hljs-keyword">const</span> g = randomNum(min, max);<br>  <span class="hljs-keyword">const</span> b = randomNum(min, max);<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;rgb(&#x27;</span> + r + <span class="hljs-string">&#x27;, &#x27;</span> + g + <span class="hljs-string">&#x27;, &#x27;</span> + b + <span class="hljs-string">&#x27;)&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="1-2-生成4位随机验证码"><a href="#1-2-生成4位随机验证码" class="headerlink" title="1.2 生成4位随机验证码"></a>1.2 生成4位随机验证码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;vetifyCanvas&#x27;</span>);<br><span class="hljs-keyword">const</span> w = canvas.width;<br><span class="hljs-keyword">const</span> h = canvas.height;<br><span class="hljs-keyword">const</span> context = canvas.getContext(<span class="hljs-string">&#x27;2d&#x27;</span>);<br><br><span class="hljs-keyword">let</span> text = []; <span class="hljs-comment">//用来存放用于随机的字符</span><br><span class="hljs-keyword">let</span> verifyCode = []; <span class="hljs-comment">// 用来存放验证码</span><br><br>context.fillStyle = randomColor(<span class="hljs-number">0</span>, <span class="hljs-number">155</span>); <span class="hljs-comment">// 设置背景为一个随机颜色</span><br>context.fillRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, w, h); <span class="hljs-comment">// 绘制矩形</span><br><br>addText(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;z&#x27;</span>);<br>addText(<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;Z&#x27;</span>);<br>addText(<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;9&#x27;</span>);<br><br>generateCode(<span class="hljs-number">4</span>);<br><span class="hljs-built_in">console</span>.log(verifyCode);<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomNum</span>(<span class="hljs-params">min, max</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * (max - min) + min); <span class="hljs-comment">// 生成一个随机数</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomColor</span>(<span class="hljs-params">min, max</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> r = randomNum(min, max);<br>  <span class="hljs-keyword">const</span> g = randomNum(min, max);<br>  <span class="hljs-keyword">const</span> b = randomNum(min, max);<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;rgb(&#x27;</span> + r + <span class="hljs-string">&#x27;, &#x27;</span> + g + <span class="hljs-string">&#x27;, &#x27;</span> + b + <span class="hljs-string">&#x27;)&#x27;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addText</span>(<span class="hljs-params">start, end</span>) </span>&#123; <span class="hljs-comment">// 添加用于随机的字符</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start.charCodeAt(); i &lt;= end.charCodeAt(); i += <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// 根据ASCII字符得到ASCII值</span><br>    text.push(<span class="hljs-built_in">String</span>.fromCharCode(i)); <span class="hljs-comment">// 根据ASCII值获得ASCII字符</span><br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateCode</span>(<span class="hljs-params">num</span>) </span>&#123; <span class="hljs-comment">// 生成验证码</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; num; i++) &#123;<br>    <span class="hljs-keyword">let</span> index = randomNum(<span class="hljs-number">0</span>, text.length - <span class="hljs-number">1</span>);<br>    verifyCode.push(text[index]);<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112111344310.jpeg"></p><h3 id="1-3-把生成的验证码画出来"><a href="#1-3-把生成的验证码画出来" class="headerlink" title="1.3 把生成的验证码画出来"></a>1.3 把生成的验证码画出来</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;vetifyCanvas&#x27;</span>);<br><span class="hljs-keyword">const</span> w = canvas.width;<br><span class="hljs-keyword">const</span> h = canvas.height;<br><span class="hljs-keyword">const</span> context = canvas.getContext(<span class="hljs-string">&#x27;2d&#x27;</span>);<br><br><span class="hljs-keyword">let</span> text = []; <span class="hljs-comment">//用来存放用于随机的字符</span><br><span class="hljs-keyword">let</span> verifyCode = []; <span class="hljs-comment">// 用来存放验证码</span><br><br>context.fillStyle = randomColor(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>); <span class="hljs-comment">// 设置背景为一个随机颜色</span><br>context.fillRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, w, h); <span class="hljs-comment">// 绘制矩形</span><br>context.textBaseline = <span class="hljs-string">&quot;middle&quot;</span>;<br><br>addText(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;z&#x27;</span>);<br>addText(<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;Z&#x27;</span>);<br>addText(<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;9&#x27;</span>);<br><br>generateCode(<span class="hljs-number">4</span>);<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomNum</span>(<span class="hljs-params">min, max</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * (max - min) + min); <span class="hljs-comment">// 生成一个随机数</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomColor</span>(<span class="hljs-params">min, max</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> r = randomNum(min, max);<br>  <span class="hljs-keyword">const</span> g = randomNum(min, max);<br>  <span class="hljs-keyword">const</span> b = randomNum(min, max);<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;rgb(&#x27;</span> + r + <span class="hljs-string">&#x27;, &#x27;</span> + g + <span class="hljs-string">&#x27;, &#x27;</span> + b + <span class="hljs-string">&#x27;)&#x27;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addText</span>(<span class="hljs-params">start, end</span>) </span>&#123; <span class="hljs-comment">// 添加用于随机的字符</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start.charCodeAt(); i &lt;= end.charCodeAt(); i += <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// 根据ASCII字符得到ASCII值</span><br>    text.push(<span class="hljs-built_in">String</span>.fromCharCode(i)); <span class="hljs-comment">// 根据ASCII值获得ASCII字符</span><br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateCode</span>(<span class="hljs-params">num</span>) </span>&#123; <span class="hljs-comment">// 生成验证码</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; num; i++) &#123;<br>    <span class="hljs-keyword">let</span> index = randomNum(<span class="hljs-number">0</span>, text.length - <span class="hljs-number">1</span>);<br>    verifyCode.push(text[index]);<br>    <span class="hljs-keyword">let</span> x = (w / <span class="hljs-number">5</span>) * i; <span class="hljs-comment">// 用来控制开始写字的坐标</span><br>    <span class="hljs-keyword">let</span> y = h / <span class="hljs-number">2</span>;<br><br>    context.font = randomNum(h / <span class="hljs-number">2</span>, h) + <span class="hljs-string">&#x27;px SimHei&#x27;</span>; <span class="hljs-comment">// 随机生成字体大小</span><br>    context.fillStyle = randomColor(<span class="hljs-number">100</span>, <span class="hljs-number">200</span>); <span class="hljs-comment">// 随机生成字体颜色</span><br><br>    context.translate(x, y); <span class="hljs-comment">// 设置坐标原点</span><br>    context.fillText(text[index], <span class="hljs-number">0</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// 写字</span><br>    context.translate(-x, -y); <span class="hljs-comment">// 恢复坐标原点</span><br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112111344362.jpeg"></p><p><b style="color: red">写完字后，为什么要恢复坐标原点？</b>这里写完一个字后，它的坐标也会跟着去到右下角，所以不回到起点的话，会写出斜着的一行字，单独把画布的宽高变大即可看到结果。分析可能有错，麻烦见谅。</p><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112111344270.jpeg"></p><h3 id="1-4-添加特效-文字阴影和旋转"><a href="#1-4-添加特效-文字阴影和旋转" class="headerlink" title="1.4 添加特效(文字阴影和旋转)"></a>1.4 添加特效(文字阴影和旋转)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;vetifyCanvas&#x27;</span>);<br><span class="hljs-keyword">const</span> w = canvas.width;<br><span class="hljs-keyword">const</span> h = canvas.height;<br><span class="hljs-keyword">const</span> context = canvas.getContext(<span class="hljs-string">&#x27;2d&#x27;</span>);<br><br><span class="hljs-keyword">let</span> text = []; <span class="hljs-comment">//用来存放用于随机的字符</span><br><span class="hljs-keyword">let</span> verifyCode = []; <span class="hljs-comment">// 用来存放验证码</span><br><br>context.fillStyle = randomColor(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>); <span class="hljs-comment">// 设置背景为一个随机颜色</span><br>context.fillRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, w, h); <span class="hljs-comment">// 绘制矩形</span><br>context.textBaseline = <span class="hljs-string">&quot;middle&quot;</span>;<br><br>addText(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;z&#x27;</span>);<br>addText(<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;Z&#x27;</span>);<br>addText(<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;9&#x27;</span>);<br><br>generateCode(<span class="hljs-number">4</span>);<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomNum</span>(<span class="hljs-params">min, max</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * (max - min) + min); <span class="hljs-comment">// 生成一个随机数</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomColor</span>(<span class="hljs-params">min, max</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> r = randomNum(min, max);<br>  <span class="hljs-keyword">const</span> g = randomNum(min, max);<br>  <span class="hljs-keyword">const</span> b = randomNum(min, max);<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;rgb(&#x27;</span> + r + <span class="hljs-string">&#x27;, &#x27;</span> + g + <span class="hljs-string">&#x27;, &#x27;</span> + b + <span class="hljs-string">&#x27;)&#x27;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addText</span>(<span class="hljs-params">start, end</span>) </span>&#123; <span class="hljs-comment">// 添加用于随机的字符</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start.charCodeAt(); i &lt;= end.charCodeAt(); i += <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// 根据ASCII字符得到ASCII值</span><br>    text.push(<span class="hljs-built_in">String</span>.fromCharCode(i)); <span class="hljs-comment">// 根据ASCII值获得ASCII字符</span><br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateCode</span>(<span class="hljs-params">num</span>) </span>&#123; <span class="hljs-comment">// 生成验证码</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; num; i++) &#123;<br>    <span class="hljs-keyword">let</span> index = randomNum(<span class="hljs-number">0</span>, text.length - <span class="hljs-number">1</span>);<br>    verifyCode.push(text[index]);<br><br>    <span class="hljs-keyword">let</span> x = (w / <span class="hljs-number">5</span>) * i; <span class="hljs-comment">// 用来控制开始写字的坐标</span><br>    <span class="hljs-keyword">let</span> y = h / <span class="hljs-number">2</span>;<br><br>    context.shadowOffsetX = randomNum(-<span class="hljs-number">3</span>, <span class="hljs-number">3</span>);<br>    context.shadowOffsetY = randomNum(-<span class="hljs-number">3</span>, <span class="hljs-number">3</span>);<br>    context.shadowBlur = randomNum(-<span class="hljs-number">3</span>, <span class="hljs-number">3</span>);<br>    context.shadowColor = <span class="hljs-string">&#x27;rgba(0, 0, 0, 0.3)&#x27;</span>;<br><br>    context.font = randomNum(h / <span class="hljs-number">2</span>, h) + <span class="hljs-string">&#x27;px SimHei&#x27;</span>; <span class="hljs-comment">// 随机生成字体大小</span><br>    context.fillStyle = randomColor(<span class="hljs-number">100</span>, <span class="hljs-number">200</span>); <span class="hljs-comment">// 随机生成字体颜色</span><br><br>    <span class="hljs-keyword">const</span> deg = randomNum(-<span class="hljs-number">20</span>, <span class="hljs-number">20</span>);<br><br>    context.translate(x, y); <span class="hljs-comment">// 设置坐标原点和旋转角度</span><br>    context.rotate(deg * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180</span>);<br>    context.fillText(text[index], <span class="hljs-number">0</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// 写字</span><br>    context.translate(-x, -y); <span class="hljs-comment">// 恢复坐标原点和旋转角度</span><br>    context.rotate(-deg * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180</span>);<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112111407878.jpeg"></p><h3 id="1-5-添加干扰线和干扰点"><a href="#1-5-添加干扰线和干扰点" class="headerlink" title="1.5 添加干扰线和干扰点"></a>1.5 添加干扰线和干扰点</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;vetifyCanvas&#x27;</span>);<br><span class="hljs-keyword">const</span> w = canvas.width;<br><span class="hljs-keyword">const</span> h = canvas.height;<br><span class="hljs-keyword">const</span> context = canvas.getContext(<span class="hljs-string">&#x27;2d&#x27;</span>);<br><br><span class="hljs-keyword">let</span> text = []; <span class="hljs-comment">//用来存放用于随机的字符</span><br><span class="hljs-keyword">let</span> verifyCode = []; <span class="hljs-comment">// 用来存放验证码</span><br><br>context.fillStyle = randomColor(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>); <span class="hljs-comment">// 设置背景为一个随机颜色</span><br>context.fillRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, w, h); <span class="hljs-comment">// 绘制矩形</span><br>context.textBaseline = <span class="hljs-string">&quot;middle&quot;</span>;<br><br>addText(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;z&#x27;</span>);<br>addText(<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;Z&#x27;</span>);<br>addText(<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;9&#x27;</span>);<br><br>generateCode(<span class="hljs-number">4</span>);<br><br>ganrao();<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomNum</span>(<span class="hljs-params">min, max</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * (max - min) + min); <span class="hljs-comment">// 生成一个随机数</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomColor</span>(<span class="hljs-params">min, max</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> r = randomNum(min, max);<br>  <span class="hljs-keyword">const</span> g = randomNum(min, max);<br>  <span class="hljs-keyword">const</span> b = randomNum(min, max);<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;rgb(&#x27;</span> + r + <span class="hljs-string">&#x27;, &#x27;</span> + g + <span class="hljs-string">&#x27;, &#x27;</span> + b + <span class="hljs-string">&#x27;)&#x27;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addText</span>(<span class="hljs-params">start, end</span>) </span>&#123; <span class="hljs-comment">// 添加用于随机的字符</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start.charCodeAt(); i &lt;= end.charCodeAt(); i += <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// 根据ASCII字符得到ASCII值</span><br>    text.push(<span class="hljs-built_in">String</span>.fromCharCode(i)); <span class="hljs-comment">// 根据ASCII值获得ASCII字符</span><br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateCode</span>(<span class="hljs-params">num</span>) </span>&#123; <span class="hljs-comment">// 生成验证码</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; num; i++) &#123;<br>    <span class="hljs-keyword">let</span> index = randomNum(<span class="hljs-number">0</span>, text.length - <span class="hljs-number">1</span>);<br>    verifyCode.push(text[index]);<br><br>    <span class="hljs-keyword">let</span> x = (w / <span class="hljs-number">5</span>) * i; <span class="hljs-comment">// 用来控制开始写字的坐标</span><br>    <span class="hljs-keyword">let</span> y = h / <span class="hljs-number">2</span>;<br><br>    context.shadowOffsetX = randomNum(-<span class="hljs-number">3</span>, <span class="hljs-number">3</span>);<br>    context.shadowOffsetY = randomNum(-<span class="hljs-number">3</span>, <span class="hljs-number">3</span>);<br>    context.shadowBlur = randomNum(-<span class="hljs-number">3</span>, <span class="hljs-number">3</span>);<br>    context.shadowColor = <span class="hljs-string">&#x27;rgba(0, 0, 0, 0.3)&#x27;</span>;<br><br>    context.font = randomNum(h / <span class="hljs-number">2</span>, h) + <span class="hljs-string">&#x27;px SimHei&#x27;</span>; <span class="hljs-comment">// 随机生成字体大小</span><br>    context.fillStyle = randomColor(<span class="hljs-number">100</span>, <span class="hljs-number">200</span>); <span class="hljs-comment">// 随机生成字体颜色</span><br><br>    <span class="hljs-keyword">const</span> deg = randomNum(-<span class="hljs-number">20</span>, <span class="hljs-number">20</span>);<br><br>    context.translate(x, y); <span class="hljs-comment">// 设置坐标原点和旋转角度</span><br>    context.rotate(deg * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180</span>);<br>    context.fillText(text[index], <span class="hljs-number">0</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// 写字</span><br>    context.translate(-x, -y); <span class="hljs-comment">// 恢复坐标原点和旋转角度</span><br>    context.rotate(-deg * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180</span>);<br>  &#125;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ganrao</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-comment">// 绘制干扰线</span><br>  <span class="hljs-comment">// for (var i = 0; i &lt; 4; i++) &#123;</span><br>  <span class="hljs-comment">//   context.strokeStyle = randomColor(40, 180);</span><br>  <span class="hljs-comment">//   context.beginPath();</span><br>  <span class="hljs-comment">//   context.moveTo(randomNum(0, w), randomNum(0, h));</span><br>  <span class="hljs-comment">//   context.lineTo(randomNum(0, w), randomNum(0, h));</span><br>  <span class="hljs-comment">//   context.stroke();</span><br>  <span class="hljs-comment">// &#125;</span><br>    <br>  <span class="hljs-comment">// 绘制干扰点</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; w / <span class="hljs-number">4</span>; i++) &#123;<br>    context.fillStyle = randomColor(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>);<br>    context.beginPath();<br>    context.arc(randomNum(<span class="hljs-number">0</span>, w), randomNum(<span class="hljs-number">0</span>, h), <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI);<br>    context.fill();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>效果：</p><p><img src="https://raw.githubusercontent.com/13535944743/CLZ_img/master/imsges/202112111344263.jpeg"></p><h3 id="1-6-增加点击可以实现刷新的功能"><a href="#1-6-增加点击可以实现刷新的功能" class="headerlink" title="1.6 增加点击可以实现刷新的功能"></a>1.6 增加点击可以实现刷新的功能</h3><p>用了<code>context.save();  </code>和<code>context.restore();</code>来实现清空画布，重画的效果</p><p><img src="https://s2.loli.net/2021/12/11/mF5d9ua7TxtKRUE.png" alt="image-20211211235444063"></p><p>完整代码：<a href="https://codepen.io/13535944743/pen/Yzxbvod">验证码 (codepen.io)</a></p><h2 id="2-生成32位随机码"><a href="#2-生成32位随机码" class="headerlink" title="2. 生成32位随机码"></a>2. 生成32位随机码</h2><p>在开展项目会议时，听到了数据表那边的id应该使用通用的生成32位随机码的方法，而不是使用int型+自增后，就想试一下自己实现生成32位随机码。</p><p>首先，需要获取一个用于生成随机码的字符的数组，这里可以使用手敲法，但太累了。还是可以用生成验证码时的方法。因为<b style="color: red">js的字符无法自增，所以可以使用charCodeAt()函数把字符转换成ASCII值之后，再进行自增操作，当然，每一次遍历拿到的值都是ASCII值了，所以再通过String.fromCharCharCode()函数把ASCII值又转换成ASCII字符。</b></p><p>具体实现如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getContent</span>(<span class="hljs-params">start, end</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> arr = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start.charCodeAt(); i &lt;= end.charCodeAt(); i++) &#123;<br>    arr.push(<span class="hljs-built_in">String</span>.fromCharCode(i));<br>  &#125;<br>  <span class="hljs-keyword">return</span> arr;<br>&#125;<br></code></pre></td></tr></table></figure><p>得到用于生成随机码的字符后，就可以直接通过随机函数random()来实现生成32位随机码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRandom</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> arr = [];<br>  arr = arr.concat(getContent(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;z&#x27;</span>));<br>  arr = arr.concat(getContent(<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;9&#x27;</span>));<br><br>  <span class="hljs-keyword">let</span> id = <span class="hljs-string">&#x27;&#x27;</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">32</span>; i++) &#123;<br>    id += arr[<span class="hljs-built_in">parseInt</span>(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">36</span>)];<br>  &#125;<br>  <span class="hljs-built_in">console</span>.log(id);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getContent</span>(<span class="hljs-params">start, end</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> arr = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start.charCodeAt(); i &lt;= end.charCodeAt(); i++) &#123;<br>    arr.push(<span class="hljs-built_in">String</span>.fromCharCode(i));<br>  &#125;<br>  <span class="hljs-keyword">return</span> arr;<br>&#125;<br><br>getRandom();<br></code></pre></td></tr></table></figure><p>完整实现如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRandom</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> arr = [];<br>  arr = arr.concat(getContent(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;z&#x27;</span>));<br>  arr = arr.concat(getContent(<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;9&#x27;</span>));<br><br>  <span class="hljs-keyword">let</span> id = <span class="hljs-string">&#x27;&#x27;</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">32</span>; i++) &#123;<br>    id += arr[<span class="hljs-built_in">parseInt</span>(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">36</span>)];<br>  &#125;<br>  <span class="hljs-built_in">console</span>.log(id);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getContent</span>(<span class="hljs-params">start, end</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> arr = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start.charCodeAt(); i &lt;= end.charCodeAt(); i++) &#123;<br>    arr.push(<span class="hljs-built_in">String</span>.fromCharCode(i));<br>  &#125;<br>  <span class="hljs-keyword">return</span> arr;<br>&#125;<br><br>getRandom();<br></code></pre></td></tr></table></figure><p><b style="color: red">可能常用到的方法：记录一下</b>。有可能有更好的方法，发现后再更新。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getContent</span>(<span class="hljs-params">start, end</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> arr = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start.charCodeAt(); i &lt;= end.charCodeAt(); i++) &#123;<br>    arr.push(<span class="hljs-built_in">String</span>.fromCharCode(i));<br>  &#125;<br>  <span class="hljs-keyword">return</span> arr;<br>&#125;<br></code></pre></td></tr></table></figure><p>参考链接：<a href="https://www.cnblogs.com/vickylinj/p/12103308.html">JS实现图片验证码功能——用户输入验证码 - vickylinj - 博客园 (cnblogs.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Less笔记</title>
      <link href="/2021/12/05/less/"/>
      <url>/2021/12/05/less/</url>
      
        <content type="html"><![CDATA[<h1 id="Less笔记"><a href="#Less笔记" class="headerlink" title="Less笔记"></a>Less笔记</h1><p><em>Less</em> 是一门 CSS 预处理语言,它扩展了 CSS 语言,增加了变量、Mixin、函数等特性。<em>Less</em> 可以运行在 Node 或浏览器端。</p><p>开始之前，先介绍一个vscode插件，可以实现根据less编译生成对应的css</p><p><img src="https://pic.imgdb.cn/item/61a7850c2ab3f51d91ea0502.jpg"></p><h2 id="1-变量"><a href="#1-变量" class="headerlink" title="1. 变量"></a>1. 变量</h2><p>通过@变量名定义，也是通过@变量名使用，不是用”=”赋值，而是和css的样式一样用”:”赋值</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@width:</span> <span class="hljs-number">100px</span>;<br><br><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-variable">@width</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="2-混合"><a href="#2-混合" class="headerlink" title="2. 混合"></a>2. 混合</h2><p>混合是一种将一组属性从一个规则集混入另一个规则集的方法。</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-class">.position</span> &#123;<br>  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box</span> <span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">position</span>: fixed;<br>  <span class="hljs-selector-class">.position</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>编译为:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.position</span> &#123;<br>  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box</span> <span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">position</span>: fixed;<br>  <span class="hljs-selector-class">.position</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-嵌套"><a href="#3-嵌套" class="headerlink" title="3. 嵌套"></a>3. 嵌套</h2><p><b style="color: red">个人最常用的Less语法。</b>非常方便，模仿HTML的组织结构，调试的时候会感觉清晰明了。</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-class">.box</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;<br>  <span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: pink;<br>    <span class="hljs-selector-tag">span</span> &#123;<br>      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;<br>&#125;<br><span class="hljs-selector-class">.box</span> <span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: pink;<br>&#125;<br><span class="hljs-selector-class">.box</span> <span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">span</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>可以搭配”&amp;”运算符使用，”&amp;“表示当前选择器的父级</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">a</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>  <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>    <span class="hljs-attribute">text-decoration</span>: none;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">text-decoration</span>: none;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>@规则嵌套</strong></p><p>@ 规则（例如 <code>@media</code> 或 <code>@supports</code>）可以与选择器以相同的方式进行嵌套。@ 规则会被放在前面，同一规则集中的其它元素的相对顺序保持不变。这叫做冒泡</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <br>  <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">600px</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">1280px</span>) &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) &#123;<br>  <span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">600px</span>;<br>  &#125;<br>&#125;<br><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">1280px</span>) &#123;<br>  <span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-运算"><a href="#4-运算" class="headerlink" title="4. 运算"></a>4. 运算</h2><p><strong>结果会以最左侧的有单位的操作数的单位为准</strong></p><p>+、-部分</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@width:</span> <span class="hljs-number">10px</span> - <span class="hljs-number">5em</span>;<br><span class="hljs-variable">@height:</span> <span class="hljs-number">10em</span> - <span class="hljs-number">5px</span>;<br><span class="hljs-variable">@lineHeight:</span> <span class="hljs-number">10</span> - <span class="hljs-number">5px</span> + <span class="hljs-number">1em</span>;<br><br><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-variable">@width</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-variable">@height</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-variable">@lineHeight</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">5px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">5em</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">6px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>*、/部分：<b style="color: red">除法需要使用()包住，否则无法正常进行运算</b></p><p>原因：进入4.0版本后， 除法运算符如果在括号外面，不执行除法运算，在小括号内可以看做是除法运算</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@width:</span> <span class="hljs-number">10px</span> * <span class="hljs-number">2em</span>;<br><span class="hljs-variable">@height:</span> <span class="hljs-number">10em</span> * <span class="hljs-number">2px</span>;<br><span class="hljs-variable">@lineHeight:</span> (<span class="hljs-number">10</span> * <span class="hljs-number">5px</span> / <span class="hljs-number">2em</span>);<br><span class="hljs-variable">@color:</span>(<span class="hljs-number">#224488</span> / <span class="hljs-number">2</span>);<br><br><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-variable">@width</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-variable">@height</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-variable">@lineHeight</span>;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-variable">@color</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">20em</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">25px</span>;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#112244</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-转义"><a href="#5-转义" class="headerlink" title="5. 转义"></a>5. 转义</h2><p>转义允许使用任何字符串作为属性或变量值。任何<code>~&quot;anything&quot;</code>形式的内容都会按原样输出</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@min728:</span> <span class="hljs-string">~&quot;(min-width: 768px)&quot;</span>;<br><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-keyword">@media</span> <span class="hljs-variable">@min728</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) &#123;<br>  <span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6-函数"><a href="#6-函数" class="headerlink" title="6. 函数"></a>6. 函数</h2><p>例子：percentage()把小数转换为百分比, length()得到数组长度</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@width:</span> <span class="hljs-number">0.5</span>;<br><span class="hljs-variable">@list:</span> <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;tomato&quot;</span>, <span class="hljs-string">&quot;potato&quot;</span>, <span class="hljs-string">&quot;peach&quot;</span>;<br><span class="hljs-variable">@n:</span> length(<span class="hljs-variable">@list</span>);<br><br><span class="hljs-selector-class">.class</span> &#123;<br>  <span class="hljs-attribute">width</span>: percentage(<span class="hljs-variable">@width</span>); <br>  <span class="hljs-attribute">height</span>: <span class="hljs-variable">@n</span> * <span class="hljs-number">200px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.class</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">800px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-映射"><a href="#7-映射" class="headerlink" title="7. 映射"></a>7. 映射</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-id">#colors</span>() &#123;<br>  primary: blue;<br>  secondary: green;<br>&#125;<br><br><span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">color</span>: #colors[primary];<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid #colors[secondary];<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.button</span> &#123;<br>  <span class="hljs-attribute">color</span>: blue;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid green;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="8-作用域"><a href="#8-作用域" class="headerlink" title="8. 作用域"></a>8. 作用域</h2><p>会先在本地查找有无变量，如果找不到，则会去到父级作用域中查找</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@color:</span> red;<br><span class="hljs-selector-class">.box</span> &#123;<br>  <span class="hljs-variable">@color:</span> blue;<br>  <span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-variable">@color:</span> purple;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-variable">@color</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box</span> <span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">color</span>: purple;<br>&#125;<br></code></pre></td></tr></table></figure><p>找不到:</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@color:</span> red;<br><span class="hljs-selector-class">.box</span> &#123;<br>  <span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-variable">@color</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box</span> <span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-注释"><a href="#9-注释" class="headerlink" title="9. 注释"></a>9. 注释</h2><p>和js一样，有两种形式的注释方式，<code>//</code>和<code>/**/</code></p><p>其中，<code>/**/</code>形式的注释编译后，也会出现在生成的css中，而<code>//</code>形式的则不会出现在生成的css中</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">/* 测试1 */</span><br><span class="hljs-comment">// 测试2</span><br><span class="hljs-variable">@color:</span> red;<br><span class="hljs-selector-class">.box</span> &#123;<br>  <span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-variable">@color</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 测试1 */</span><br><span class="hljs-selector-class">.box</span> <span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="10-导入"><a href="#10-导入" class="headerlink" title="10. 导入"></a>10. 导入</h2><p>如果导入的文件是<code>.less</code>扩展名，则可以把扩展名去掉</p><p>要导入的test.less文件</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><p>index.less文件</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-keyword">@import</span> <span class="hljs-string">&#x27;./test&#x27;</span>;<br></code></pre></td></tr></table></figure><p>编译后：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><p>学习链接：<a href="https://less.bootcss.com/">Less 快速入门 | Less.js 中文文档 - Less 中文网 (bootcss.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Less </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python(四)</title>
      <link href="/2021/11/27/python-4/"/>
      <url>/2021/11/27/python-4/</url>
      
        <content type="html"><![CDATA[<h1 id="python-四"><a href="#python-四" class="headerlink" title="python(四)"></a>python(四)</h1><h2 id="1-函数"><a href="#1-函数" class="headerlink" title="1. 函数"></a>1. 函数</h2><h3 id="1-1-关键参数"><a href="#1-1-关键参数" class="headerlink" title="1.1 关键参数"></a>1.1 关键参数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">demo</span>(<span class="hljs-params">a, b, c=<span class="hljs-number">5</span></span>):</span><br>    <span class="hljs-built_in">print</span>(a, b, c)<br><br>demo(<span class="hljs-number">3</span>, <span class="hljs-number">7</span>)<br><br>demo(c=<span class="hljs-number">8</span>, a=<span class="hljs-number">9</span>, b=<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><h3 id="1-2-可变长度参数"><a href="#1-2-可变长度参数" class="headerlink" title="1.2 可变长度参数"></a>1.2 可变长度参数</h3><p>*<strong>p</strong>: 用来接收任意多个实参，并将其放在一个元组中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">demo</span>(<span class="hljs-params">*p</span>):</span><br>    <span class="hljs-built_in">print</span>(p)<br><br><br>demo(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br>demo(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)<br></code></pre></td></tr></table></figure><p><b>**p: </b>接收多个关键参数，并将其放入字典中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">demo</span>(<span class="hljs-params">**p</span>):</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(p))<br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> p.items():<br>        <span class="hljs-built_in">print</span>(item)<br><br><br>demo(x=<span class="hljs-number">1</span>, y=<span class="hljs-number">2</span>, z=<span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure><h3 id="1-3-参数传递时的序列解包"><a href="#1-3-参数传递时的序列解包" class="headerlink" title="1.3 参数传递时的序列解包"></a>1.3 参数传递时的序列解包</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">demo</span>(<span class="hljs-params">a, b, c</span>):</span><br>    <span class="hljs-built_in">print</span>(a + b + c)<br><br><br>seq = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>demo(*seq)<br><br>tup = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br>demo(*tup)<br><br>dic = &#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;c&#x27;</span>&#125;<br>demo(*dic)<br><span class="hljs-comment"># 使用字典对象作为实参时，默认使用字典的&quot;键&quot;,需要&quot;键值对&quot;作为参数，需要使用items()方法，需要&quot;值&quot;作为参数,需要使用values()方法</span><br><br>demo(*dic.values())<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">demo</span>(<span class="hljs-params">a, b, c</span>):</span><br>    <span class="hljs-built_in">print</span>(a + b + c)<br>    <span class="hljs-built_in">print</span>(b)<br><br><br>demo(**&#123;<span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;c&#x27;</span>: <span class="hljs-number">5</span>&#125;)<br><span class="hljs-comment"># 使用字典作为函数实参时，并且在前面使用两个星号**进行解包时，会把字典的键作为参数名，值作为参数的值</span><br></code></pre></td></tr></table></figure><h3 id="1-4-全局变量"><a href="#1-4-全局变量" class="headerlink" title="1.4 全局变量"></a>1.4 全局变量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">demo</span>():</span><br>    <span class="hljs-keyword">global</span> x    <span class="hljs-comment"># global用来声明全局变量</span><br>    x = <span class="hljs-number">3</span><br>    y = <span class="hljs-number">4</span><br>    <span class="hljs-built_in">print</span>(x, y)<br><br><br>demo()<br><span class="hljs-built_in">print</span>(x)<br><span class="hljs-built_in">print</span>(y)    <span class="hljs-comment"># 会报错，因为y是局部变量，所以函数执行完之后，y就不再存在了</span><br></code></pre></td></tr></table></figure><h3 id="1-5-暂时性死区"><a href="#1-5-暂时性死区" class="headerlink" title="1.5 暂时性死区"></a>1.5 暂时性死区</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">3</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span><br>    <span class="hljs-built_in">print</span>(x)    <span class="hljs-comment"># 这里会报错，因为暂时性死区，虽然外面有全局变量x，但是函数内部也有局部变量x，所以函数不会去访问全局变量x</span><br>    x = <span class="hljs-number">5</span><br>    <span class="hljs-built_in">print</span>(x)<br><br>f()<br></code></pre></td></tr></table></figure><h3 id="1-6-lambda-表达式"><a href="#1-6-lambda-表达式" class="headerlink" title="1.6 lambda 表达式"></a>1.6 lambda 表达式</h3><p>用于声明匿名函数</p><p>语法格式：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">lambda</span> 变量: 返回值(操作)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">f = <span class="hljs-keyword">lambda</span> x, y, z: x + y +z<br><span class="hljs-built_in">print</span>(f(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>))<br><br>g = <span class="hljs-keyword">lambda</span> x, y=<span class="hljs-number">2</span>, z=<span class="hljs-number">3</span>: x + y + z<br><span class="hljs-built_in">print</span>(g(<span class="hljs-number">2</span>))<br><span class="hljs-built_in">print</span>(g(<span class="hljs-number">2</span>, z=<span class="hljs-number">3</span>, y=<span class="hljs-number">6</span>))<br></code></pre></td></tr></table></figure><h3 id="1-7-map"><a href="#1-7-map" class="headerlink" title="1.7 map()"></a>1.7 map()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># map(方法, 迭代器对象)   把迭代器对象中的元素都用参数一中的方法包装，返回一个map对象，不会改变迭代器对象</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>))))<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add7</span>(<span class="hljs-params">v</span>):</span><br>    <span class="hljs-keyword">return</span> v + <span class="hljs-number">5</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(add7, <span class="hljs-built_in">range</span>(<span class="hljs-number">7</span>))))<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span>(<span class="hljs-params">x, y</span>):</span><br>    <span class="hljs-keyword">return</span> x + y<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(add, <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>), <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>))))<br></code></pre></td></tr></table></figure><h3 id="1-8-reduce"><a href="#1-8-reduce" class="headerlink" title="1.8 reduce()"></a>1.8 reduce()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">factors, x</span>):</span><br>    result = reduce(<span class="hljs-keyword">lambda</span> a, b: a * x + b, factors)<br>    <span class="hljs-keyword">return</span> result<br><br>factors = (<span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>)<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">3 * 1 + 8 = 11</span><br><span class="hljs-string">11 * 1 + 5 = 16</span><br><span class="hljs-string">...</span><br><span class="hljs-string">32 * 1 + 1 = 33</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-built_in">print</span>(func(factors, <span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure><h3 id="1-9-filter"><a href="#1-9-filter" class="headerlink" title="1.9 filter()"></a>1.9 filter()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">seq = [<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;x41&#x27;</span>, <span class="hljs-string">&#x27;?!&#x27;</span>, <span class="hljs-string">&#x27;***&#x27;</span>]<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">x</span>):</span><br>    <span class="hljs-keyword">return</span> x.isalnum()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(func, seq)))  <span class="hljs-comment"># filter(方法， 可迭代对象), 返回可迭代对象中可以使方法的返回值为True的元素组成的filter对象</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> seq <span class="hljs-keyword">if</span> x.isalnum()))<br></code></pre></td></tr></table></figure><h3 id="1-10-生成器函数"><a href="#1-10-生成器函数" class="headerlink" title="1.10 生成器函数"></a>1.10 生成器函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span><br>    a, b = <span class="hljs-number">1</span>, <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-keyword">yield</span> a<br>        a, b = b, a + b     <span class="hljs-comment"># 给出一个值，并暂停代码的执行</span><br><br>a = f()<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(a), end=<span class="hljs-string">&#x27; &#x27;</span>)     <span class="hljs-comment"># next()向生成器索要一个值，恢复代码的运行</span><br><br></code></pre></td></tr></table></figure><h2 id="2-面向对象程序设计"><a href="#2-面向对象程序设计" class="headerlink" title="2. 面向对象程序设计"></a>2. 面向对象程序设计</h2><h3 id="2-1-类的定义与使用"><a href="#2-1-类的定义与使用" class="headerlink" title="2.1 类的定义与使用"></a>2.1 类的定义与使用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span>:</span><br>    price = <span class="hljs-number">100000</span>          <span class="hljs-comment"># 定义类属性，类属性属于类，可以通过类名或对象名访问</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, c</span>):</span><br>        self.color = c      <span class="hljs-comment"># 定义实例属性，实例属性属于对象，只能通过对象名访问</span><br><br>car1 = Car(<span class="hljs-string">&#x27;Red&#x27;</span>)<br>car2 = Car(<span class="hljs-string">&#x27;Blue&#x27;</span>)<br><span class="hljs-built_in">print</span>(car1.color, car2.color)<br><br>Car.price = <span class="hljs-number">110000</span>          <span class="hljs-comment"># 修改类属性</span><br>Car.name = <span class="hljs-string">&#x27;TT&#x27;</span>             <span class="hljs-comment"># 增加类属性</span><br><br>car1.color = <span class="hljs-string">&#x27;Pink&#x27;</span>         <span class="hljs-comment"># 修改实例属性</span><br><br><span class="hljs-built_in">print</span>(Car.price, Car.name)<br><span class="hljs-built_in">print</span>(car1.color, car2.color)<br></code></pre></td></tr></table></figure><h3 id="2-2-私有成员"><a href="#2-2-私有成员" class="headerlink" title="2.2 私有成员"></a>2.2 私有成员</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, value1=<span class="hljs-number">0</span>, value2=<span class="hljs-number">0</span></span>):</span><br>        self.value1 = value1<br>        self.__value2 = value2      <span class="hljs-comment"># 私有成员，以两个下划线开头，但不以两个下划线结束</span><br><br>a = A()<br><span class="hljs-built_in">print</span>(a.value1)<br><span class="hljs-comment"># print(a.__value2)                  # 私有成员不允许从外部访问</span><br><span class="hljs-built_in">print</span>(a._A__value2)                  <span class="hljs-comment"># 通过特殊的方式从外部访问私有成员</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, value</span>):</span><br>        self.__value = value        <span class="hljs-comment"># value是私有成员，所以需要增加访问、修改、删除属性的方法，并通过修饰器定义属性</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__get</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.__value<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__set</span>(<span class="hljs-params">self, v</span>):</span><br>        self.__value = v<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__del</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">del</span> self.__value<br><br>    value = <span class="hljs-built_in">property</span>(__get, __<span class="hljs-built_in">set</span>, __<span class="hljs-keyword">del</span>)       <span class="hljs-comment"># 修饰器，定义属性</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">print</span>(self.__value)<br><br>t = Test(<span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(t.value)<br><br>t.value = <span class="hljs-number">5</span><br><span class="hljs-built_in">print</span>(t.value)<br><br><span class="hljs-keyword">del</span> t.value<br></code></pre></td></tr></table></figure><h2 id="3-文件操作"><a href="#3-文件操作" class="headerlink" title="3. 文件操作"></a>3. 文件操作</h2><p>写文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">s = <span class="hljs-string">&#x27;test\nhello\nworld&#x27;</span><br><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;data.txt&#x27;</span>, <span class="hljs-string">&#x27;a+&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    f.write(s)<br></code></pre></td></tr></table></figure><p>读文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;data.txt&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf8&#x27;</span>) <span class="hljs-keyword">as</span> fp:<br>    <span class="hljs-built_in">print</span>(fp.read(<span class="hljs-number">5</span>))    <span class="hljs-comment"># 读取并显示文本文件的前5个字符</span><br>    <span class="hljs-built_in">print</span>(fp.read(<span class="hljs-number">5</span>))    <span class="hljs-comment"># 读取并显示文本文件的第二轮的5个字符，因为是通过文件指针形式进行读取文件的</span><br>    fp.seek(<span class="hljs-number">0</span>)           <span class="hljs-comment"># 移动文件指针回到开头</span><br><br>    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> fp:      <span class="hljs-comment"># 读取并显示文本文件的所有行</span><br>        <span class="hljs-built_in">print</span>(line)<br></code></pre></td></tr></table></figure><h3 id="3-1-二进制文件操作"><a href="#3-1-二进制文件操作" class="headerlink" title="3.1 二进制文件操作"></a>3.1 二进制文件操作</h3><h4 id="3-1-1-使用pickle模块"><a href="#3-1-1-使用pickle模块" class="headerlink" title="3.1.1 使用pickle模块"></a>3.1.1 使用pickle模块</h4><p>写入二进制文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pickle<br>i = <span class="hljs-number">13000000</span><br>a = <span class="hljs-number">99.056</span><br>s = <span class="hljs-string">&#x27;中国人名123abc&#x27;</span><br>lst = [[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]]<br>tu = (-<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">8</span>)<br>coll = &#123;<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>&#125;<br>dic = &#123;<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;g&#x27;</span>: <span class="hljs-string">&#x27;grape&#x27;</span>, <span class="hljs-string">&#x27;o&#x27;</span>: <span class="hljs-string">&#x27;orange&#x27;</span>&#125;<br>data = [i, a, s, lst, tu, coll, dic]<br><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;sample_pickle.dat&#x27;</span>, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    <span class="hljs-keyword">try</span>:<br>        pickle.dump(<span class="hljs-built_in">len</span>(data), f)   <span class="hljs-comment"># 第一次把要写的数据长度写进去</span><br>        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:<br>            pickle.dump(item, f)    <span class="hljs-comment"># 依次把数据写进去</span><br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;写文件异常&#x27;</span>)<br></code></pre></td></tr></table></figure><p>读取二进制文件的内容</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pickle<br><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;sample_pickle.dat&#x27;</span>, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    n = pickle.load(f)      <span class="hljs-comment"># 先读长度</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        x = pickle.load(f)  <span class="hljs-comment"># 再读数据</span><br>        <span class="hljs-built_in">print</span>(x)<br></code></pre></td></tr></table></figure><h3 id="3-2-文件级操作"><a href="#3-2-文件级操作" class="headerlink" title="3.2 文件级操作"></a>3.2 文件级操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 文件级操作</span><br><span class="hljs-keyword">import</span> os<br><span class="hljs-built_in">print</span>([fname <span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> os.listdir(os.getcwd())   <span class="hljs-comment"># os.getcwd()返回当前工作目录</span><br>       <span class="hljs-keyword">if</span> os.path.isfile(fname) <span class="hljs-keyword">and</span> fname.endswith(<span class="hljs-string">&#x27;.py&#x27;</span>)])     <span class="hljs-comment"># 返回扩展名为py的文件</span><br><br>file_list  = [filename <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> os.listdir()<br>              <span class="hljs-keyword">if</span> filename.endswith(<span class="hljs-string">&#x27;.html&#x27;</span>)]<br><span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> file_list:<br>    newname = filename[:-<span class="hljs-number">4</span>] + <span class="hljs-string">&#x27;htm&#x27;</span><br>    os.rename(filename, newname)                <span class="hljs-comment"># 把所有扩展名为html的文件都改为htm</span><br>    <span class="hljs-built_in">print</span>(filename+<span class="hljs-string">&quot;更名为&quot;</span>+newname)<br><br><span class="hljs-comment"># 使用shutil模块</span><br><span class="hljs-keyword">import</span> shutil<br>shutil.copyfile(<span class="hljs-string">&#x27;.\data.txt&#x27;</span>, <span class="hljs-string">&#x27;.\data2.txt&#x27;</span>)<br><br>shutil.make_archive(<span class="hljs-string">&#x27;.\\a&#x27;</span>, <span class="hljs-string">&#x27;zip&#x27;</span>, <span class="hljs-string">&#x27;C:\\Users\\CZH0318\\Desktop\\wallhaven&#x27;</span>)    <span class="hljs-comment"># 压缩</span><br>shutil.unpack_archive(<span class="hljs-string">&#x27;.\\a.zip&#x27;</span>, <span class="hljs-string">&#x27;.\\a_unpack&#x27;</span>)                                <span class="hljs-comment"># 解压缩</span><br><br>shutil.rmtree(<span class="hljs-string">&#x27;.\\a_unpack&#x27;</span>)        <span class="hljs-comment"># 删除刚刚解压的文件夹</span><br></code></pre></td></tr></table></figure><h3 id="3-3-目录操作"><a href="#3-3-目录操作" class="headerlink" title="3.3 目录操作"></a>3.3 目录操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 目录操作</span><br><span class="hljs-keyword">import</span> os<br>os.mkdir(os.getcwd()+<span class="hljs-string">&#x27;\\temp&#x27;</span>)      <span class="hljs-comment"># 创建目录</span><br><span class="hljs-built_in">print</span>(os.listdir(<span class="hljs-string">&#x27;.&#x27;</span>))              <span class="hljs-comment"># 返回指定目录下的文件和目录信息</span><br>os.rmdir(<span class="hljs-string">&#x27;temp&#x27;</span>)                    <span class="hljs-comment"># 删除目录</span><br></code></pre></td></tr></table></figure><h2 id="4-异常处理"><a href="#4-异常处理" class="headerlink" title="4. 异常处理"></a>4. 异常处理</h2><h3 id="4-1-Python中的异常处理结构"><a href="#4-1-Python中的异常处理结构" class="headerlink" title="4.1 Python中的异常处理结构"></a>4.1 Python中的异常处理结构</h3><h4 id="4-1-1-try…except…结构"><a href="#4-1-1-try…except…结构" class="headerlink" title="4.1.1 try…except…结构"></a>4.1.1 try…except…结构</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-keyword">try</span>:<br>        x = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入一个整数: &quot;</span>))<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">except</span> ValueError:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;输入不符合条件&quot;</span>)<br></code></pre></td></tr></table></figure><p>try块是被监控的语句，有可能会引发异常</p><p>except块用于处理异常的代码</p><h4 id="4-1-2-try…except…else…结构"><a href="#4-1-2-try…except…else…结构" class="headerlink" title="4.1.2 try…except…else…结构"></a>4.1.2 try…except…else…结构</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">a_list = [<span class="hljs-string">&#x27;China&#x27;</span>, <span class="hljs-string">&#x27;America&#x27;</span>, <span class="hljs-string">&#x27;England&#x27;</span>, <span class="hljs-string">&#x27;France&#x27;</span>]<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    n = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入字符串的序号: &quot;</span>)<br>    <span class="hljs-keyword">try</span>:<br>        n = <span class="hljs-built_in">int</span>(n)<br>        <span class="hljs-built_in">print</span>(a_list[n])<br>    <span class="hljs-keyword">except</span> IndexError:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;列表的下标越界或格式不正确&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;只有try块语句没有抛出异常，才会执行&quot;</span>)<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><p>else块语句只有当try块语句没有抛出任何异常，才会执行</p><h4 id="4-1-3-带有多个except的try结构"><a href="#4-1-3-带有多个except的try结构" class="headerlink" title="4.1.3 带有多个except的try结构"></a>4.1.3 带有多个except的try结构</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>    x = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入被除数: &quot;</span>)<br>    y = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入除数: &quot;</span>)<br>    z = <span class="hljs-built_in">float</span>(x) / <span class="hljs-built_in">float</span>(y)<br><span class="hljs-keyword">except</span> TypeError:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;被除数和除数应该是数值类型&quot;</span>)<br><span class="hljs-keyword">except</span> ZeroDivisionError:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;除数不能为0&quot;</span>)<br><span class="hljs-keyword">except</span> NameError:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;变量不存在&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(x, <span class="hljs-string">&quot; / &quot;</span>, y, <span class="hljs-string">&quot; = &quot;</span>, z)<br></code></pre></td></tr></table></figure><p>一旦某个except捕获了异常，则后面的except都不会再执行，所以比较精准的异常应该尽量在前面，而BaseException应该放在最后一个except中。</p><h4 id="4-1-4-try…except…finally…结构"><a href="#4-1-4-try…except…finally…结构" class="headerlink" title="4.1.4 try…except…finally…结构"></a>4.1.4 try…except…finally…结构</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">a_list = [<span class="hljs-string">&#x27;China&#x27;</span>, <span class="hljs-string">&#x27;America&#x27;</span>, <span class="hljs-string">&#x27;England&#x27;</span>, <span class="hljs-string">&#x27;France&#x27;</span>]<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    n = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入字符串的序号: &quot;</span>)<br>    <span class="hljs-keyword">try</span>:<br>        n = <span class="hljs-built_in">int</span>(n)<br>        <span class="hljs-built_in">print</span>(a_list[n])<br>    <span class="hljs-keyword">except</span> IndexError:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;列表的下标越界或格式不正确&quot;</span>)<br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;一定会执行的语句，无论try块语句有没有抛出异常&quot;</span>)<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">divide</span>(<span class="hljs-params">x, y</span>):</span><br>    <span class="hljs-keyword">try</span>:<br>        result = x / y<br>    <span class="hljs-keyword">except</span> ZeroDivisionError:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;division by zero!&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;result is&quot;</span>, result)<br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;executing finally clause&quot;</span>)<br><br><br>divide(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>)<br>divide(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>)<br>divide(<span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="4-2-断言"><a href="#4-2-断言" class="headerlink" title="4.2 断言"></a>4.2 断言</h3><p>断言语句语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">assert</span> expression[, reason]<span class="hljs-comment"># 当判断表达式expression为真时，什么都不做；为假时，则会抛出异常</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> == <span class="hljs-number">2</span>, <span class="hljs-string">&quot;1 is not equal 2!&quot;</span><br><span class="hljs-keyword">except</span> AssertionError <span class="hljs-keyword">as</span> reason:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;%s:%s&quot;</span> %(reason.__class__.__name__, reason))<br></code></pre></td></tr></table></figure><h3 id="4-3-上下文管理"><a href="#4-3-上下文管理" class="headerlink" title="4.3 上下文管理"></a>4.3 上下文管理</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;test.txt&#x27;</span>) <span class="hljs-keyword">as</span> f:   <span class="hljs-comment"># 读取当前目录下的test.txt文件</span><br>    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:<br>        <span class="hljs-built_in">print</span>(line)         <span class="hljs-comment"># 使用with语句，文件处理完之后，会自动关闭，不需要手动关闭文件with open(&#x27;test.txt&#x27;) as f:   # 读取当前目录下的test.txt文件</span><br>    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:<br>        <span class="hljs-built_in">print</span>(line)         <span class="hljs-comment"># 使用with语句，文件处理完之后，会自动关闭，不需要手动关闭文件</span><br></code></pre></td></tr></table></figure><p>上下文管理语句with可以自动管理资源，在代码执行完之后自动还原进入代码块之前的现场</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP笔记(二)</title>
      <link href="/2021/11/27/php-2/"/>
      <url>/2021/11/27/php-2/</url>
      
        <content type="html"><![CDATA[<h1 id="PHP笔记-二"><a href="#PHP笔记-二" class="headerlink" title="PHP笔记(二)"></a>PHP笔记(二)</h1><h2 id="1-面向对象"><a href="#1-面向对象" class="headerlink" title="1. 面向对象"></a>1. 面向对象</h2><p><b style="color: red">已经学过C++面向对象、Java面向对象，这一部分属于是复习，以及熟悉PHP面向对象的不同之处，所以不会详讲</b></p><h3 id="1-1-基本使用"><a href="#1-1-基本使用" class="headerlink" title="1.1 基本使用"></a>1.1 基本使用</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$color</span></span>) </span>&#123; <span class="hljs-comment">// 构造函数: 用来在创建对象时初始化对象，在创建对象的语句中与 new 运算符一起使用。</span><br>      <span class="hljs-keyword">$this</span>-&gt;color = <span class="hljs-variable">$color</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__destruct</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-comment">// 析构函数: 当对象结束它的生命周期时，系统会自动执行析构函数</span><br>      <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;系统自动执行析构函数&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setColor</span>(<span class="hljs-params"><span class="hljs-variable">$color</span></span>) </span>&#123;<br>      <span class="hljs-keyword">$this</span>-&gt;color = <span class="hljs-variable">$color</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getColor</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;color;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-variable">$car</span> = <span class="hljs-keyword">new</span> Car(<span class="hljs-string">&quot;White&quot;</span>);<br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$car</span>-&gt;getColor();<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br><br>  <span class="hljs-variable">$car</span>-&gt;setColor(<span class="hljs-string">&quot;Red&quot;</span>);<br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$car</span>-&gt;getColor();<br><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="1-2-继承"><a href="#1-2-继承" class="headerlink" title="1.2 继承"></a>1.2 继承</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getColor</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;白色&quot;</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FCar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Car</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getColor</span>(<span class="hljs-params"></span>) </span>&#123; <span class="hljs-comment">// 重写getColor()方法</span><br>      <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;红色&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fly</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;I can Fly&quot;</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-variable">$fcar</span> = <span class="hljs-keyword">new</span> FCar(<span class="hljs-string">&quot;White&quot;</span>);<br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$fcar</span>-&gt;getColor();<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br><br>  <span class="hljs-variable">$fcar</span>-&gt;fly();<br><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="1-3-访问控制"><a href="#1-3-访问控制" class="headerlink" title="1.3 访问控制"></a>1.3 访问控制</h3><p>只有属性的访问控制，方法的类似</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass1</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$public</span> = <span class="hljs-string">&quot;Public&quot;</span>;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$protected</span> = <span class="hljs-string">&quot;Protected&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$private</span> = <span class="hljs-string">&quot;Private&quot;</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printM</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-keyword">$this</span>-&gt;public . <span class="hljs-string">&quot;\n&quot;</span>;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-keyword">$this</span>-&gt;protected . <span class="hljs-string">&quot;\n&quot;</span>;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-keyword">$this</span>-&gt;private . <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">MyClass1</span> </span>&#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$protected</span> = <span class="hljs-string">&#x27;Protected2&#x27;</span>;  <span class="hljs-comment">// 可以对public和protected重定义，但private不能，因为无法继承private属性</span><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printM</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-keyword">$this</span>-&gt;public . <span class="hljs-string">&quot;\n&quot;</span>;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-keyword">$this</span>-&gt;protected . <span class="hljs-string">&quot;\n&quot;</span>;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-keyword">$this</span>-&gt;private . <span class="hljs-string">&quot;\n&quot;</span>;   <span class="hljs-comment">// 会出现未定义private的警告</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-variable">$obj1</span> = <span class="hljs-keyword">new</span> MyClass1();<br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$obj1</span>-&gt;public . <span class="hljs-string">&quot;\n&quot;</span>;<br>  <span class="hljs-comment">// echo $obj1-&gt;protected;</span><br>  <span class="hljs-comment">// echo $obj1-&gt;private;   // 类外部无法访问protected属性和private属性</span><br>  <span class="hljs-variable">$obj1</span>-&gt;printM();      <span class="hljs-comment">// 对象方法可以访问所有属性</span><br><br>  <span class="hljs-variable">$obj2</span> = <span class="hljs-keyword">new</span> MyClass2();<br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$obj2</span>-&gt;public . <span class="hljs-string">&quot;\n&quot;</span>;<br>  <span class="hljs-variable">$obj2</span>-&gt;printM();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="1-4-接口"><a href="#1-4-接口" class="headerlink" title="1.4 接口"></a>1.4 接口</h3><p>使用接口，可以指定某个类必须实现哪些方法，但不需要定义这些方法的具体内容</p><p>接口通过<strong>interface</strong>关键字来定义，定义所有的方法都是空的</p><p><b style="color: red">接口中定义的所有方法都必须是公有(public)</b>, 这是接口的特性</p><p>实现接口，使用<strong>implements</strong>操作符。类中必须实现接口中定义的所有方法，否则会报错。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br>  <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">myName</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setName</span>(<span class="hljs-params"><span class="hljs-variable">$name</span></span>)</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span>(<span class="hljs-params"></span>)</span>;<br>  &#125;<br><br>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Name</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">myName</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setName</span>(<span class="hljs-params"><span class="hljs-variable">$name</span></span>) </span>&#123;<br>      <span class="hljs-keyword">$this</span>-&gt;name = <span class="hljs-variable">$name</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;name;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-variable">$n</span> = <span class="hljs-keyword">new</span> Name;<br>  <span class="hljs-variable">$n</span>-&gt;setName(<span class="hljs-string">&quot;CLZ&quot;</span>);<br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$n</span>-&gt;getName();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="1-5-抽象类"><a href="#1-5-抽象类" class="headerlink" title="1.5 抽象类"></a>1.5 抽象类</h3><p>任何一个类，如果至少有一个方法被声明为抽象的，则这个类就必须声明为抽象的</p><p>被定义为抽象的方法只是声明了它的调用方式，不能定义具体的功能实现。</p><p>继承一个抽象类的时候，子类必须定义父类中的抽象方法，这些方法的访问控制必须和父类一样或比父类宽松。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br>  <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractClass</span> </span>&#123;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getValue</span>(<span class="hljs-params"></span>)</span>;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prefixValue</span>(<span class="hljs-params"><span class="hljs-variable">$prefix</span></span>)</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printOut</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">print</span> <span class="hljs-keyword">$this</span>-&gt;getValue() . PHP_EOL;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreateClass1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractClass</span> </span>&#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getValue</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ConcreateClass1&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prefixValue</span>(<span class="hljs-params"><span class="hljs-variable">$prefix</span></span>) </span>&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;<span class="hljs-subst">&#123;$prefix&#125;</span>ConcreateClass1&quot;</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreateClass2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractClass</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getValue</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ConcreateClass2&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prefixValue</span>(<span class="hljs-params"><span class="hljs-variable">$prefix</span></span>) </span>&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;<span class="hljs-subst">&#123;$prefix&#125;</span>ConcreateClass2&quot;</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-variable">$class1</span> = <span class="hljs-keyword">new</span> ConcreateClass1();<br>  <span class="hljs-variable">$class1</span>-&gt;printOut();<br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$class1</span>-&gt;prefixValue(<span class="hljs-string">&quot;FOO_&quot;</span>) . PHP_EOL;<br><br>  <span class="hljs-variable">$class2</span> = <span class="hljs-keyword">new</span> ConcreateClass2();<br>  <span class="hljs-variable">$class2</span>-&gt;printOut();<br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$class2</span>-&gt;prefixValue(<span class="hljs-string">&quot;FOO_&quot;</span>) . PHP_EOL;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="1-6-静态方法"><a href="#1-6-静态方法" class="headerlink" title="1.6 静态方法"></a>1.6 静态方法</h3><p>通过<strong>static关键字</strong>声明类属性或方法，可以不是实例化类直接访问</p><p><strong>静态属性不能由对象通过-&gt;操作符访问，而应该使用::操作符访问</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-variable">$my_static</span> = <span class="hljs-string">&quot;静态变量&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">staticValue</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">self</span>::<span class="hljs-variable">$my_static</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sayHello</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Hello!&quot;</span> . PHP_EOL; <br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">print</span> Test::<span class="hljs-variable">$my_static</span> . PHP_EOL;   <br>  Test::sayHello();       <span class="hljs-comment">// 可以直接通过类名::访问静态变量和静态方法</span><br><br>  <span class="hljs-variable">$test</span> = <span class="hljs-keyword">new</span> Test();<br>  <span class="hljs-keyword">print</span> <span class="hljs-variable">$test</span>::<span class="hljs-variable">$my_static</span> . PHP_EOL;    <span class="hljs-comment">// 也可以通过对象::访问静态变量和静态方法</span><br>  <span class="hljs-keyword">print</span> <span class="hljs-variable">$test</span>-&gt;staticValue() . PHP_EOL;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="1-7-调用父类的构造方法"><a href="#1-7-调用父类的构造方法" class="headerlink" title="1.7 调用父类的构造方法"></a>1.7 调用父类的构造方法</h3><p>在子类的构造方法中调用<strong>parent::__construct()</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$color</span>, <span class="hljs-variable">$cost</span></span>) </span>&#123;<br>      <span class="hljs-keyword">$this</span>-&gt;color = <span class="hljs-variable">$color</span>;<br>      <span class="hljs-keyword">$this</span>-&gt;cost = <span class="hljs-variable">$cost</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WCar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Car</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$color</span>, <span class="hljs-variable">$cost</span>, <span class="hljs-variable">$weight</span></span>) </span>&#123;<br>      <span class="hljs-built_in">parent</span>::__construct(<span class="hljs-variable">$color</span>, <span class="hljs-variable">$cost</span>);<br>      <span class="hljs-keyword">$this</span>-&gt;weight = <span class="hljs-variable">$weight</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-variable">$wcar</span> = <span class="hljs-keyword">new</span> WCar(<span class="hljs-string">&quot;White&quot;</span>, <span class="hljs-number">99999</span>, <span class="hljs-string">&quot;999kg&quot;</span>);<br>  var_dump(<span class="hljs-variable">$wcar</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="2-表单"><a href="#2-表单" class="headerlink" title="2. 表单"></a>2. 表单</h2><p><strong>简单使用</strong></p><p>form.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;welcome.php&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    名字: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;fname&quot;</span>&gt;</span><br>    年龄: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;提交&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>welcome.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;欢迎&quot;</span> . <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&quot;fname&quot;</span>] . <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;你的年龄是 &quot;</span> . <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&quot;age&quot;</span>] . <span class="hljs-string">&quot;岁&quot;</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="3-PHP-AJAX"><a href="#3-PHP-AJAX" class="headerlink" title="3. PHP AJAX"></a>3. PHP AJAX</h2><h3 id="3-1-AJAX"><a href="#3-1-AJAX" class="headerlink" title="3.1 AJAX"></a>3.1 AJAX</h3><p>AJAX是一种<strong>无需重新加载整个页面的情况下，能够更新部分网页的技术</strong>。</p><p>AJAX通过在后台与服务器进行少量数据交换，使网页实现异步更新。使用AJAX可以实现在不重载整个页面的情况下，对页面的某些部分进行更新。</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/08/ajax.gif"></p><h3 id="3-2-使用PHP、AJAX实现简单的前后端交互"><a href="#3-2-使用PHP、AJAX实现简单的前后端交互" class="headerlink" title="3.2 使用PHP、AJAX实现简单的前后端交互"></a>3.2 使用PHP、AJAX实现简单的前后端交互</h3><p>websites表如下:</p><p><img src="https://pic.imgdb.cn/item/619b1c562ab3f51d916a0508.jpg"></p><p>前端：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;users&quot;</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">&quot;showSite(this.value)&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span>选择一个网站:<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span>Google<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span>淘宝<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;3&quot;</span>&gt;</span>Facebook<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txtHint&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> txtHint = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;txtHint&#x27;</span>);</span><br><span class="javascript"></span><br><span class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showSite</span>(<span class="hljs-params">str</span>) </span>&#123;</span><br><span class="javascript">      <span class="hljs-keyword">if</span> (str == <span class="hljs-string">&#x27;&#x27;</span>) &#123;</span><br><span class="javascript">        txtHint.innerHTML = <span class="hljs-string">&#x27;&#x27;</span>;</span><br><span class="javascript">        <span class="hljs-keyword">return</span>;</span><br><span class="javascript">      &#125;</span><br><span class="javascript"></span><br><span class="javascript">      <span class="hljs-keyword">let</span> xmlhttp = <span class="hljs-keyword">new</span> XMLHttpRequest();</span><br><span class="javascript">      xmlhttp.open(<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;getsite.php?v=&quot;</span> + str, <span class="hljs-literal">true</span>); <span class="hljs-comment">// true表示异步执行请求</span></span><br><span class="javascript">      xmlhttp.send(<span class="hljs-literal">null</span>);</span><br><span class="javascript"></span><br><span class="javascript">      xmlhttp.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        <span class="hljs-keyword">if</span> (xmlhttp.readyState === <span class="hljs-number">4</span> &amp;&amp; xmlhttp.status === <span class="hljs-number">200</span>) &#123;</span><br><span class="javascript">          txtHint.innerHTML = xmlhttp.responseText;</span><br><span class="javascript">        &#125;</span><br><span class="javascript">      &#125;</span><br><span class="javascript">    &#125;</span><br><span class="javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>后端</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-comment">// $v = isset($_GET[&#x27;v&#x27;]) ? intval($_GET[&#x27;v&#x27;]) : &#x27;&#x27;;</span><br>  <span class="hljs-variable">$v</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;v&#x27;</span>];<br><br>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$v</span>)) &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;请选择一个网站&#x27;</span>;<br>    <span class="hljs-keyword">exit</span>;<br>  &#125;<br><br>  <span class="hljs-variable">$con</span> = mysqli_connect(<span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-string">&#x27;root&#x27;</span>, <span class="hljs-string">&#x27;root1234&#x27;</span>);<br>  <span class="hljs-keyword">if</span>(!<span class="hljs-variable">$con</span>) &#123;<br>    <span class="hljs-keyword">die</span>(<span class="hljs-string">&#x27;连接数据库失败: &#x27;</span> . mysqli_error(<span class="hljs-variable">$con</span>));<br>  &#125;<br><br>  mysqli_select_db(<span class="hljs-variable">$con</span>, <span class="hljs-string">&#x27;php_ajax_mysql&#x27;</span>); <span class="hljs-comment">// 选择数据库</span><br>  mysqli_set_charset(<span class="hljs-variable">$con</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>);<br><br>  <span class="hljs-variable">$sql</span> = <span class="hljs-string">&#x27;select * from websites where id = &#x27;</span> . <span class="hljs-variable">$v</span>;<br><br>  <span class="hljs-variable">$result</span> = mysqli_query(<span class="hljs-variable">$con</span>, <span class="hljs-variable">$sql</span>);<br><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;table border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;20&quot; style=&quot;margin-top: 20px&quot;&gt;</span><br><span class="hljs-string">        &lt;tr style=&quot;background-color: #555; color: #fff&quot;&gt;</span><br><span class="hljs-string">          &lt;th&gt;ID&lt;/th&gt;</span><br><span class="hljs-string">          &lt;th&gt;网站名&lt;/th&gt;</span><br><span class="hljs-string">          &lt;th&gt;网站url&lt;/th&gt;</span><br><span class="hljs-string">          &lt;th&gt;Alexa排名&lt;/th&gt;</span><br><span class="hljs-string">          &lt;th&gt;国家&lt;/th&gt;</span><br><span class="hljs-string">        &lt;/tr&gt;&#x27;</span>;<br>  <span class="hljs-keyword">while</span>(<span class="hljs-variable">$row</span> = mysqli_fetch_assoc(<span class="hljs-variable">$result</span>)) &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;tr&gt;&#x27;</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;td&gt;&#x27;</span> . <span class="hljs-variable">$row</span>[<span class="hljs-string">&#x27;id&#x27;</span>] . <span class="hljs-string">&#x27;&lt;/td&gt;&#x27;</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;td&gt;&#x27;</span> . <span class="hljs-variable">$row</span>[<span class="hljs-string">&#x27;name&#x27;</span>] . <span class="hljs-string">&#x27;&lt;/td&gt;&#x27;</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;td&gt;&#x27;</span> . <span class="hljs-variable">$row</span>[<span class="hljs-string">&#x27;url&#x27;</span>] . <span class="hljs-string">&#x27;&lt;/td&gt;&#x27;</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;td&gt;&#x27;</span> . <span class="hljs-variable">$row</span>[<span class="hljs-string">&#x27;alexa&#x27;</span>] . <span class="hljs-string">&#x27;&lt;/td&gt;&#x27;</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;td&gt;&#x27;</span> . <span class="hljs-variable">$row</span>[<span class="hljs-string">&#x27;country&#x27;</span>] . <span class="hljs-string">&#x27;&lt;/td&gt;&#x27;</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;/tr&gt;&#x27;</span>;<br>  &#125;<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;/table&gt;&#x27;</span>;<br><br>  mysqli_close(<span class="hljs-variable">$con</span>);<br>          <br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://pic.imgdb.cn/item/619b1d232ab3f51d916a66d1.jpg"></p><h2 id="4-二维数组"><a href="#4-二维数组" class="headerlink" title="4. 二维数组"></a>4. 二维数组</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br>  <span class="hljs-variable">$sites</span> = <span class="hljs-keyword">array</span><br>  (<br>    <span class="hljs-string">&quot;google&quot;</span> =&gt; <span class="hljs-keyword">array</span><br>    (<br>      <span class="hljs-string">&quot;Google搜索&quot;</span>,<br>      <span class="hljs-string">&quot;http://www.google.com&quot;</span><br>    ),<br>    <span class="hljs-string">&quot;baidu&quot;</span> =&gt; <span class="hljs-keyword">array</span><br>    (<br>      <span class="hljs-string">&quot;Baidu搜索&quot;</span>,<br>      <span class="hljs-string">&quot;http://www.baidu.com&quot;</span><br>    )<br>    );<br>    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$sites</span>[<span class="hljs-string">&#x27;google&#x27;</span>][<span class="hljs-number">0</span>] . <span class="hljs-string">&#x27;地址为: &#x27;</span> . <span class="hljs-variable">$sites</span>[<span class="hljs-string">&#x27;google&#x27;</span>][<span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;/pre&gt;&quot;</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="5-日期"><a href="#5-日期" class="headerlink" title="5. 日期"></a>5. 日期</h2><p>date()用于格式化时间/日期</p><p>语法：</p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">string date ( string $format [, int $timestamp ] )<br></code></pre></td></tr></table></figure></blockquote><ul><li>format：<strong>必需</strong>。规定如何格式化当前的日期和时间</li><li>timestamp：可选。规定时间戳，默认是当前的时间和日期。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br>  <span class="hljs-keyword">echo</span> date(<span class="hljs-string">&quot;Y/m/d&quot;</span>) . PHP_EOL;<br>  <span class="hljs-keyword">echo</span> date(<span class="hljs-string">&quot;Y-m-d&quot;</span>) . PHP_EOL;<br>  <span class="hljs-keyword">echo</span> date(<span class="hljs-string">&quot;Y-m-d&quot;</span>, mktime(<span class="hljs-number">23</span>, <span class="hljs-number">59</span>, <span class="hljs-number">59</span>, <span class="hljs-number">12</span>, <span class="hljs-number">31</span>, <span class="hljs-number">2020</span>));<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;/pre&gt;&quot;</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>mktime()返回一个日期的UNIX时间戳</p><p>语法：</p><blockquote><p>mktime(hour, minute, second, month, day, year);</p></blockquote><h2 id="6-插入文件"><a href="#6-插入文件" class="headerlink" title="6. 插入文件"></a>6. 插入文件</h2><p>require和include除了处理错误的方式不同外，在其他方面都相同</p><ul><li>require生成一个致命错误，在错误发生后脚本会停止执行</li><li>include生成一个警告，在错误发生后脚本会继续执行</li></ul><ul><li>require 一般放在 PHP 文件的最前面，程序在执行前就会先导入要引用的文件；</li><li>include 一般放在程序的流程控制中，当程序执行时碰到才会引用，简化程序的执行流程</li></ul><p><strong>上一段文字引自</strong><a href="https://www.runoob.com/php/php-includes.html">PHP include 和 require | 菜鸟教程 (runoob.com)</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;h1&gt;测试开始&lt;h1&gt;&quot;</span>;<br>  <span class="hljs-keyword">require</span> <span class="hljs-string">&quot;./form.html&quot;</span>;<br>  <span class="hljs-comment">// include &quot;./form.html&quot;;</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;h1&gt;测试结束&lt;/h1&gt;&quot;</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/6199b1ab2ab3f51d91e38ce8.jpg"></p><p>另一种用法：</p><p>test.php：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$tt</span> = <span class="hljs-string">&quot;Hello World!&quot;</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>practise.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;./test.php&#x27;</span>;<br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$tt</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/6199b4dd2ab3f51d91e4bc20.jpg"></p><h2 id="7-文件上传"><a href="#7-文件上传" class="headerlink" title="7. 文件上传"></a>7. 文件上传</h2><p>form.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;upload_file.php&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;file&quot;</span>&gt;</span>文件名：<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;file&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;提交&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>upload_file.php`</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">if</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;error&#x27;</span>] &gt; <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;错误: &#x27;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;error&#x27;</span>] . <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;上传文件名: &#x27;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;name&#x27;</span>] . <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;文件类型: &#x27;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;type&#x27;</span>] . <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;文件大小: &#x27;</span> . (<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;size&#x27;</span>] / <span class="hljs-number">1024</span>) . <span class="hljs-string">&#x27; kB&lt;br&gt;&#x27;</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;文件临时存储的位置: &#x27;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;tmp_name&#x27;</span>];<br>  &#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/6199c8d62ab3f51d91ecb868.jpg"></p><p><strong>上传限制和保存上传的文件</strong>:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$allowedExts</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;gif&#x27;</span>, <span class="hljs-string">&#x27;jpeg&#x27;</span>, <span class="hljs-string">&#x27;jpg&#x27;</span>, <span class="hljs-string">&#x27;png&#x27;</span>);<br>  <span class="hljs-variable">$temp</span> = explode(<span class="hljs-string">&#x27;.&#x27;</span>, <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;name&#x27;</span>]);    <span class="hljs-comment">// 文件名按 . 分为字符串数组</span><br>  <span class="hljs-variable">$extension</span> = end(<span class="hljs-variable">$temp</span>);                  <span class="hljs-comment">// 得到数组中最后一个元素的值，即文件后缀名</span><br>  <span class="hljs-keyword">if</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;size&#x27;</span>] &lt; <span class="hljs-number">204800</span>       <span class="hljs-comment">// 上传文件大小要求小于200kb</span><br>  &amp;&amp; in_array(<span class="hljs-variable">$extension</span>, <span class="hljs-variable">$allowedExts</span>)) &#123;  <span class="hljs-comment">// 上传文件类型必须符合要求</span><br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;error&#x27;</span>] &gt; <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;错误: &#x27;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;error&#x27;</span>] . <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;上传文件名: &#x27;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;name&#x27;</span>] . <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;文件类型: &#x27;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;type&#x27;</span>] . <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;文件大小: &#x27;</span> . (<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;size&#x27;</span>] / <span class="hljs-number">1024</span>) . <span class="hljs-string">&#x27; kB&lt;br&gt;&#x27;</span>;<br>      <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;文件临时存储的位置: &#x27;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;tmp_name&#x27;</span>] . <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>      <br>      <span class="hljs-keyword">if</span>(file_exists(<span class="hljs-string">&#x27;upload/&#x27;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;name&#x27;</span>])) &#123;   <span class="hljs-comment">// 判断文件已经存在</span><br>        <span class="hljs-keyword">echo</span> <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;name&#x27;</span>] . <span class="hljs-string">&#x27;文件已经存在&#x27;</span>;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        move_uploaded_file(<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;tmp_name&#x27;</span>], <span class="hljs-string">&#x27;upload/&#x27;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;name&#x27;</span>]);   <span class="hljs-comment">// 必须有upload文件夹，否则会出错</span><br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;文件存储在: &#x27;</span> . <span class="hljs-string">&#x27;upload/&#x27;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;name&#x27;</span>];<br>      &#125;<br>    &#125;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;非法的文件格式&quot;</span>;<br>  &#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="8-Cookie"><a href="#8-Cookie" class="headerlink" title="8. Cookie"></a>8. Cookie</h2><p>当web服务器向浏览器发送web页面时，在连接关闭后，服务端不会记录用户的信息</p><p>Cookie的作用就是用于解决<strong>如何记录客户端的用户信息</strong></p><ul><li>当用户访问web页面时，他的名字可以记录在Cookie中</li><li>在用户下一次访问该页面时，可以在Cookie中读取用户访问记录</li></ul><p>Cookie以键值对的形式存储。</p><h3 id="8-1-创建Cookie"><a href="#8-1-创建Cookie" class="headerlink" title="8.1 创建Cookie"></a>8.1 创建Cookie</h3><p>语法：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php">setcookie(name, value, expire, path, domain);<br></code></pre></td></tr></table></figure><ul><li>name: 必需。规定cookie的名称</li><li>value: 必需。规定cookie的值</li><li>expire: 可选。规定cookie的有效值</li><li>path: 可选。规定cookie的服务器路径</li><li>domain: 可选。规定cookie的域名</li><li>secure: 可选。规定是否通过安全的HTTPS连接来传输cookie</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$expire</span> = time() + <span class="hljs-number">60</span>*<span class="hljs-number">60</span>*<span class="hljs-number">24</span>*<span class="hljs-number">30</span>; <span class="hljs-comment">// 设置过期时间为1个月, 60秒*60分*24小时*30天</span><br>  setcookie(<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-string">&#x27;clz&#x27;</span>, <span class="hljs-variable">$expire</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="8-2-取回Cookie的值"><a href="#8-2-取回Cookie的值" class="headerlink" title="8.2 取回Cookie的值"></a>8.2 取回Cookie的值</h3><p>通过$_COOKIE变量取回Cookie的值</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br> <span class="hljs-keyword">echo</span> <span class="hljs-variable">$_COOKIE</span>[<span class="hljs-string">&#x27;user&#x27;</span>] . <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br> print_r(<span class="hljs-variable">$_COOKIE</span>);   <span class="hljs-comment">// 查看所有的cookie</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>简单判断是不是登录的用户</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_COOKIE</span>[<span class="hljs-string">&#x27;user&#x27;</span>])) &#123;  <span class="hljs-comment">//判断cookie是否存在</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;欢迎 &quot;</span> . <span class="hljs-variable">$_COOKIE</span>[<span class="hljs-string">&#x27;user&#x27;</span>] . <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br> &#125; <span class="hljs-keyword">else</span> &#123;<br>   <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;普通访客&lt;br&gt;&#x27;</span>;<br> &#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="8-3-删除Cookie"><a href="#8-3-删除Cookie" class="headerlink" title="8.3 删除Cookie"></a>8.3 删除Cookie</h3><p>有点巧妙，重新设置cookie，不过把过期时间设置为过去的时间</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  setcookie(<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, time() - <span class="hljs-number">60</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="9-PHP-JSON"><a href="#9-PHP-JSON" class="headerlink" title="9. PHP JSON"></a>9. PHP JSON</h2><p><strong>json_encode()函数</strong>用于对变量进行JSON编码，执行成功则返回JSON数据，否则返回false</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$arr</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;a&#x27;</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;b&#x27;</span> =&gt; <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;c&#x27;</span> =&gt; <span class="hljs-number">3</span>);<br>  <span class="hljs-keyword">echo</span> json_encode(<span class="hljs-variable">$arr</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>结果：{“a”:1,”b”:2,”c”:3}</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>   <span class="hljs-variable">$arr</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;test&#x27;</span> =&gt; <span class="hljs-string">&#x27;测试&#x27;</span>, <span class="hljs-string">&#x27;baidu&#x27;</span> =&gt; <span class="hljs-string">&#x27;百度&#x27;</span>);<br>   <span class="hljs-keyword">echo</span> json_encode(<span class="hljs-variable">$arr</span>);  <span class="hljs-comment">// 编码中文</span><br>   <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br>   <span class="hljs-keyword">echo</span> json_encode(<span class="hljs-variable">$arr</span>, JSON_UNESCAPED_UNICODE); <span class="hljs-comment">// 不编码中文</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>结果：</p><blockquote><p>{“test”:”\u6d4b\u8bd5”,”baidu”:”\u767e\u5ea6”}<br>{“test”:”测试”,”baidu”:”百度”}</p></blockquote><p><strong>json_decode() 函数</strong>用于对 JSON 格式的字符串进行解码，并转换为 PHP 变量。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$json</span> = <span class="hljs-string">&#x27;&#123;&quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c&quot;: 3&#125;&#x27;</span>;<br><br>  print_r(json_decode(<span class="hljs-variable">$json</span>));<br>  <span class="hljs-keyword">print</span> <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span>;<br>  print_r(json_decode(<span class="hljs-variable">$json</span>, <span class="hljs-literal">true</span>));  <span class="hljs-comment">// 第二个参数为true时，将返回数组，为false时，返回对象，默认为false</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>参考：<a href="https://www.runoob.com/php/php-tutorial.html">PHP 教程 | 菜鸟教程 (runoob.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP笔记(一)</title>
      <link href="/2021/11/27/php-1/"/>
      <url>/2021/11/27/php-1/</url>
      
        <content type="html"><![CDATA[<h1 id="PHP笔记-一"><a href="#PHP笔记-一" class="headerlink" title="PHP笔记(一)"></a>PHP笔记(一)</h1><p>数据库项目作业要团队开发web，选择了尝试后端，又向做出自己的网站这个目标踏出了一步。</p><h2 id="1-简单使用"><a href="#1-简单使用" class="headerlink" title="1. 简单使用"></a>1. 简单使用</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;body&gt;<br><br>&lt;h1&gt;h1&lt;/h1&gt;<br><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Hello World!&quot;</span>;<br><span class="hljs-meta">?&gt;</span><br><br>&lt;h1&gt;h1&lt;/h1&gt;<br><br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p>在服务器下运行才有效果</p><p><img src="https://pic.imgdb.cn/item/619683ef2ab3f51d9165ef8f.jpg"></p><h2 id="2-变量"><a href="#2-变量" class="headerlink" title="2. 变量"></a>2. 变量</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$x</span> = <span class="hljs-number">1</span>;<br>  <span class="hljs-variable">$y</span> = <span class="hljs-number">1</span>;<br>  <span class="hljs-variable">$z</span> = <span class="hljs-variable">$x</span> + <span class="hljs-variable">$y</span>;<br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$z</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-1-变量作用域"><a href="#2-1-变量作用域" class="headerlink" title="2.1 变量作用域"></a>2.1 变量作用域</h3><p>PHP有四种作用域</p><ul><li>local</li><li>global</li><li>static</li><li>parameter</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$x</span> = <span class="hljs-number">5</span>; <span class="hljs-comment">// 全局变量</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-variable">$y</span> = <span class="hljs-number">10</span>;  <span class="hljs-comment">// 局部变量</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;p&gt;函数内: &lt;/p&gt;&quot;</span>;<br>  <span class="hljs-comment">// echo &quot;变量x: $x&quot;; // 在函数中访问一个全局变量，需要使用global关键字</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;变量y: <span class="hljs-subst">$y</span>&quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fn</span>(<span class="hljs-params"></span>)</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;p&gt;函数外: &lt;/p&gt;&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;变量x: <span class="hljs-subst">$x</span>&quot;</span>;<br><span class="hljs-comment">// echo &quot;变量y: $y&quot;; // 无法访问$y, $y变量在函数中定义，属于局部变量</span><br><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p><strong>global关键字</strong>：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$x</span> = <span class="hljs-number">1</span>;<br><span class="hljs-variable">$y</span> = <span class="hljs-number">1</span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">global</span> <span class="hljs-variable">$x</span>, <span class="hljs-variable">$y</span>;<br>    <span class="hljs-variable">$y</span> = <span class="hljs-variable">$x</span> + <span class="hljs-variable">$y</span>;<span class="hljs-comment">// 使用global关键字后，会改变全局变量的值</span><br>&#125;<br><br>test();<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;变量y: <span class="hljs-subst">$y</span>&quot;</span>;<br><span class="hljs-meta">?&gt;</span><br>    <br><span class="hljs-comment">// 或者下面的形式：PHP将所有全局变量存储到一个名为$GLOBALS[index]的数组中，index保存变量的名称，这个数组可以在函数内访问，也可以用来更新全局变量</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$x</span> = <span class="hljs-number">1</span>;<br><span class="hljs-variable">$y</span> = <span class="hljs-number">2</span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-variable">$GLOBALS</span>[<span class="hljs-string">&#x27;y&#x27;</span>] = <span class="hljs-variable">$GLOBALS</span>[<span class="hljs-string">&#x27;x&#x27;</span>] + <span class="hljs-variable">$GLOBALS</span>[<span class="hljs-string">&#x27;y&#x27;</span>];<br>&#125;<br><br>test();<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;变量y: <span class="hljs-subst">$y</span>&quot;</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p><strong>static关键字</strong>：</p><p>当一个函数完成时，它的所有变量通常都会被删除，在第一次声明变量时使用<strong>static关键字</strong>可以实现让特定变量不被删除。然后，每次调用该函数时，该变量都会保留函数前一次被调用时的值。<strong>该变量还是函数的局部变量</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">static</span> <span class="hljs-variable">$x</span> = <span class="hljs-number">0</span>; <br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$x</span>;<br>  <span class="hljs-variable">$x</span>++;<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br>&#125;<br>test();<br>test();<br>test();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="3-定界符EOF"><a href="#3-定界符EOF" class="headerlink" title="3. 定界符EOF"></a>3. 定界符EOF</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php">  <br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$name</span> = <span class="hljs-string">&quot;clz&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&lt;&lt;&lt;EOF</span><br><span class="hljs-string">        &lt;h1&gt;测试&lt;/h1&gt;  // html格式会被解析</span><br><span class="hljs-string">        &quot;abg\n&quot;<span class="hljs-subst">$name</span>  // 双引号也会被解析，双引号内会保留转义符的转义效果</span><br><span class="hljs-string">        &quot;123&quot;</span><br><span class="hljs-string">EOF</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Hello World!&quot;</span>; <br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="4-数据类型"><a href="#4-数据类型" class="headerlink" title="4. 数据类型"></a>4. 数据类型</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$x</span> = <span class="hljs-number">123</span>;<br>var_dump(<span class="hljs-variable">$x</span>); <span class="hljs-comment">// 返回变量的数据类型和值</span><br><span class="hljs-variable">$x</span> = -<span class="hljs-number">234</span>;<br>var_dump(<span class="hljs-variable">$x</span>);<br><br><span class="hljs-variable">$x</span> = <span class="hljs-number">017</span>;     <span class="hljs-comment">// 八进制</span><br>var_dump(<span class="hljs-variable">$x</span>);<br><br><span class="hljs-variable">$x</span> = <span class="hljs-number">0xaa</span>;    <span class="hljs-comment">// 十六进制</span><br>var_dump(<span class="hljs-variable">$x</span>);<br><br><span class="hljs-variable">$x</span> = <span class="hljs-string">&quot;test&quot;</span>;<br>var_dump(<span class="hljs-variable">$x</span>);<br><br><span class="hljs-variable">$x</span> = <span class="hljs-number">1.234</span>;   <span class="hljs-comment">// 浮点型</span><br>var_dump(<span class="hljs-variable">$x</span>);<br><span class="hljs-variable">$x</span> = <span class="hljs-number">2.4e3</span>;<br>var_dump(<span class="hljs-variable">$x</span>);<br><br><span class="hljs-variable">$x</span> = <span class="hljs-literal">true</span>;    <span class="hljs-comment">// 布尔型</span><br>var_dump(<span class="hljs-variable">$x</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$arr</span> = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;Hello&quot;</span>, <span class="hljs-literal">true</span>);   <span class="hljs-comment">// 数组</span><br>var_dump(<span class="hljs-variable">$arr</span>);<br>var_dump(<span class="hljs-variable">$arr</span>[<span class="hljs-number">0</span>]);<br><br><span class="hljs-comment">// 类</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span></span><br><span class="hljs-class"></span>&#123;<br>  <span class="hljs-keyword">var</span> <span class="hljs-variable">$color</span>;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$color</span>=<span class="hljs-string">&quot;green&quot;</span></span>) </span>&#123;  <span class="hljs-comment">// 构造函数</span><br>    <span class="hljs-keyword">$this</span>-&gt;color = <span class="hljs-variable">$color</span>;<span class="hljs-comment">// $this指向对象, 所以可以通过$this-&gt;color = $color设置颜色值</span><br>  &#125;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">what_color</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;color;<br>  &#125;<br>&#125;<br><br><span class="hljs-variable">$c</span> = <span class="hljs-keyword">new</span> Car(<span class="hljs-string">&quot;white&quot;</span>);<br>var_dump(<span class="hljs-variable">$c</span>);<br><br><span class="hljs-variable">$d</span> = <span class="hljs-literal">null</span>;<br>var_dump(<span class="hljs-variable">$d</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="5-类型比较"><a href="#5-类型比较" class="headerlink" title="5. 类型比较"></a>5. 类型比较</h2><p>和JavaScript一样，有松散比较和严格比较两种形式</p><ul><li>松散比较(等于)：”==”, 只比较值，不比较类型</li><li>严格比较(绝对等于)：”===”, 既比较值，也比较类型</li></ul><h2 id="6-常量"><a href="#6-常量" class="headerlink" title="6. 常量"></a>6. 常量</h2><p>设置常量需要使用define()函数</p><blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">bool</span> define ( <span class="hljs-keyword">string</span> <span class="hljs-variable">$name</span> , <span class="hljs-keyword">mixed</span> <span class="hljs-variable">$value</span> [, <span class="hljs-keyword">bool</span> <span class="hljs-variable">$case_insensitive</span> = <span class="hljs-literal">false</span> ] )<br></code></pre></td></tr></table></figure></blockquote><ul><li>name: 必选参数，常量名称</li><li>value:  必选参数，常量的值</li><li>case_insensitive: 可选参数，如果是true，则常量对大小写不敏感。默认是大小写敏感。</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  define(<span class="hljs-string">&quot;HW&quot;</span>, <span class="hljs-string">&quot;Hello World!&quot;</span>);<br>  <span class="hljs-keyword">echo</span> HW;<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br><br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">echo</span> HW;  <span class="hljs-comment">// 常量默认是全局变量</span><br>  &#125;<br><br>  test();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="7-字符串"><a href="#7-字符串" class="headerlink" title="7. 字符串"></a>7. 字符串</h2><h3 id="7-1-并置运算符"><a href="#7-1-并置运算符" class="headerlink" title="7.1 并置运算符(.)"></a>7.1 并置运算符(.)</h3><p>用于把两个字符串连接起来</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$h</span> = <span class="hljs-string">&quot;Hello &quot;</span>;<br>  <span class="hljs-variable">$w</span> = <span class="hljs-string">&quot;World&quot;</span>;<br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$h</span> . <span class="hljs-variable">$w</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="7-2-strlen-函数"><a href="#7-2-strlen-函数" class="headerlink" title="7.2 strlen()函数"></a>7.2 strlen()函数</h3><p>strlen()函数返回字符串的长度(字节数), <code>echo strlen(&quot;中文&quot;);</code>会输出6，因为一个中文占3个字节</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$h</span> = <span class="hljs-string">&quot;Hello &quot;</span>;<br>  <span class="hljs-variable">$w</span> = <span class="hljs-string">&quot;World&quot;</span>;<br>  <span class="hljs-keyword">echo</span> strlen(<span class="hljs-variable">$h</span> . <span class="hljs-variable">$w</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="7-3-strpos-函数"><a href="#7-3-strpos-函数" class="headerlink" title="7.3 strpos()函数"></a>7.3 strpos()函数</h3><p> strpos()函数用于在字符串中查找字符串，如果找到匹配，则返回第一个匹配的字符位置，如果找不到，则返回false</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">echo</span> strpos(<span class="hljs-string">&quot;Hello World!&quot;</span>, <span class="hljs-string">&quot;!&quot;</span>);<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br><br>  <span class="hljs-keyword">echo</span> strpos(<span class="hljs-string">&quot;Hello World!&quot;</span>, <span class="hljs-string">&quot;World&quot;</span>);<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br>  <br>  var_dump(strpos(<span class="hljs-string">&quot;Hello World!&quot;</span>, <span class="hljs-string">&quot;Worll&quot;</span>));<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="8-关联数组"><a href="#8-关联数组" class="headerlink" title="8. 关联数组"></a>8. 关联数组</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$age</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&quot;A&quot;</span> =&gt; <span class="hljs-number">17</span>, <span class="hljs-string">&quot;B&quot;</span> =&gt; <span class="hljs-number">33</span>, <span class="hljs-string">&quot;C&quot;</span> =&gt; <span class="hljs-number">21</span>);<br>  <span class="hljs-comment">/*</span><br><span class="hljs-comment">   * 创建关联数组的另一种方法:</span><br><span class="hljs-comment">   * $age[&quot;A&quot;] = 17;</span><br><span class="hljs-comment">   * $age[&quot;B&quot;] = 33;</span><br><span class="hljs-comment">   * $age[&quot;C&quot;] = 21;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;A is &quot;</span> . <span class="hljs-variable">$age</span>[<span class="hljs-string">&#x27;A&#x27;</span>] . <span class="hljs-string">&quot; years old.&quot;</span>;<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br><br>  <span class="hljs-comment">// 遍历关联数组</span><br>  <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$age</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$k</span> =&gt; <span class="hljs-variable">$v</span>)<br>  &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Key = &quot;</span> . <span class="hljs-variable">$k</span> . <span class="hljs-string">&quot;, Value = &quot;</span> .<span class="hljs-variable">$v</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br>  &#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="9-支持可变参数的函数"><a href="#9-支持可变参数的函数" class="headerlink" title="9. 支持可变参数的函数"></a>9. 支持可变参数的函数</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;pre&gt;&quot;</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params">...<span class="hljs-variable">$args</span></span>)</span><br><span class="hljs-function">    </span>&#123;<br>      <span class="hljs-variable">$num</span> = count(<span class="hljs-variable">$args</span>);<br>      <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;函数调用参数个数: &quot;</span> . <span class="hljs-variable">$num</span> . PHP_EOL;   <br>      <span class="hljs-comment">/* PHP_EOL是文本换行，直接使用的话，可能会是空格，需要在前面加echo &quot;&lt;pre&gt;&quot;;，</span><br><span class="hljs-comment">       * 做文本格式化处理，才能当成换行使用</span><br><span class="hljs-comment">       */</span><br>      <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;函数参数详情: &quot;</span>;<br><br>      <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$args</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$args</span>) <br>      &#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-variable">$args</span> . <span class="hljs-string">&quot; &quot;</span>;<br>      &#125;<br>      <span class="hljs-keyword">echo</span> PHP_EOL;<br>      <br>    &#125;<br>    test(<span class="hljs-string">&quot;a&quot;</span>);<br>    test(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>);<br>    test(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>);<br>  <span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="10-数据库"><a href="#10-数据库" class="headerlink" title="10. 数据库"></a>10. 数据库</h2><h3 id="10-1-连接数据库"><a href="#10-1-连接数据库" class="headerlink" title="10.1 连接数据库"></a>10.1 连接数据库</h3><ul><li>MySQLi面向对象</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$servername</span> = <span class="hljs-string">&quot;localhost&quot;</span>;<br><span class="hljs-variable">$username</span> = <span class="hljs-string">&quot;root&quot;</span>;<br><span class="hljs-variable">$password</span> = <span class="hljs-string">&quot;密码&quot;</span>;<br><br><span class="hljs-variable">$conn</span> = <span class="hljs-keyword">new</span> mysqli(<span class="hljs-variable">$servername</span>, <span class="hljs-variable">$username</span>, <span class="hljs-variable">$password</span>);<br><br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$conn</span>-&gt;connect_error) &#123;<br>  <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;连接失败: &quot;</span> . <span class="hljs-variable">$conn</span>-&gt;connect_error);<span class="hljs-comment">// die() 函数输出一条消息，并退出当前脚本。</span><br>&#125;<br><br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;连接成功&quot;</span>;<br><br><span class="hljs-variable">$conn</span>-&gt;close();  <span class="hljs-comment">// 关闭连接</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><ul><li>MySQLi面向过程</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$servername</span> = <span class="hljs-string">&quot;localhost&quot;</span>;<br><span class="hljs-variable">$username</span> = <span class="hljs-string">&quot;root&quot;</span>;<br><span class="hljs-variable">$password</span> = <span class="hljs-string">&quot;root1234&quot;</span>;<br><br><span class="hljs-variable">$conn</span> = mysqli_connect(<span class="hljs-variable">$servername</span>, <span class="hljs-variable">$username</span>, <span class="hljs-variable">$password</span>);<br><br><span class="hljs-keyword">if</span>(!<span class="hljs-variable">$conn</span>) &#123;<br>  <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;连接失败: &quot;</span> . mysqli_connect_error());<br>&#125;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;连接成功&quot;</span>;<br><br>mysqli_close(<span class="hljs-variable">$conn</span>);<span class="hljs-comment">// 关闭连接</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><ul><li>PDO</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$servername</span> = <span class="hljs-string">&quot;localhost&quot;</span>;<br><span class="hljs-variable">$username</span> = <span class="hljs-string">&quot;root&quot;</span>;<br><span class="hljs-variable">$password</span> = <span class="hljs-string">&quot;root1234&quot;</span>;<br><br><span class="hljs-keyword">try</span> <br>&#123;<br>  <span class="hljs-variable">$conn</span> = <span class="hljs-keyword">new</span> PDO(<span class="hljs-string">&quot;mysql:host=<span class="hljs-subst">$servername</span>;&quot;</span>, <span class="hljs-variable">$username</span>, <span class="hljs-variable">$password</span>);<br>  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;连接成功&quot;</span>;<br>&#125;<br><span class="hljs-keyword">catch</span>(PDOException <span class="hljs-variable">$e</span>)<br>&#123;<br>  <span class="hljs-keyword">echo</span> <span class="hljs-variable">$e</span>-&gt;getMessage();<br>&#125;<br><br><span class="hljs-variable">$conn</span> = <span class="hljs-literal">null</span>;  <span class="hljs-comment">// 关闭连接</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="10-2-创建数据库"><a href="#10-2-创建数据库" class="headerlink" title="10.2 创建数据库"></a>10.2 创建数据库</h3><ul><li>MySQLi面向对象</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$servername</span> = <span class="hljs-string">&quot;localhost&quot;</span>;<br>  <span class="hljs-variable">$username</span> = <span class="hljs-string">&quot;root&quot;</span>;<br>  <span class="hljs-variable">$password</span> = <span class="hljs-string">&quot;root1234&quot;</span>;<br><br>  <span class="hljs-variable">$conn</span> = <span class="hljs-keyword">new</span> mysqli(<span class="hljs-variable">$servername</span>, <span class="hljs-variable">$username</span>, <span class="hljs-variable">$password</span>);  <br>  <span class="hljs-keyword">if</span>(<span class="hljs-variable">$conn</span>-&gt;connect_error) &#123;<br>    <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;连接失败: &quot;</span> . <span class="hljs-variable">$conn</span>-&gt;connect_error);<br>  &#125;<br><br>  <span class="hljs-variable">$sql</span> = <span class="hljs-string">&quot;create database php_db&quot;</span>;<br>  <span class="hljs-keyword">if</span>(<span class="hljs-variable">$conn</span>-&gt;query(<span class="hljs-variable">$sql</span>) === <span class="hljs-literal">true</span>) &#123;   <span class="hljs-comment">// 通过mysqli对象的query方法实现使用mysql语句，成功则返回true</span><br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;数据库创建成功&quot;</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;数据库创建失败: &quot;</span> . <span class="hljs-variable">$conn</span>-&gt;error;<br>  &#125;<br><br>  <span class="hljs-variable">$conn</span>-&gt;close();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/6197c29c2ab3f51d910fcd75.jpg"></p><ul><li>MySQLi面向过程</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$servername</span> = <span class="hljs-string">&quot;localhost&quot;</span>;<br>  <span class="hljs-variable">$username</span> = <span class="hljs-string">&quot;root&quot;</span>;<br>  <span class="hljs-variable">$password</span> = <span class="hljs-string">&quot;root1234&quot;</span>;<br><br>  <span class="hljs-variable">$conn</span> = mysqli_connect(<span class="hljs-variable">$servername</span>, <span class="hljs-variable">$username</span>, <span class="hljs-variable">$password</span>);<br>  <span class="hljs-keyword">if</span>(!<span class="hljs-variable">$conn</span>) &#123;<br>    <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;连接失败: &quot;</span> . mysqli_connect_error());<br>  &#125;<br><br>  <span class="hljs-variable">$sql</span> = <span class="hljs-string">&quot;create database php_db_1&quot;</span>;<br>  <span class="hljs-keyword">if</span>(mysqli_query(<span class="hljs-variable">$conn</span>, <span class="hljs-variable">$sql</span>)) &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;数据库创建成功&quot;</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;数据库创建失败: &quot;</span> . mysqli_error(<span class="hljs-variable">$conn</span>);<br>  &#125;<br><br>  mysqli_close(<span class="hljs-variable">$conn</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><ul><li>PDO</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$servername</span> = <span class="hljs-string">&quot;localhost&quot;</span>;<br>  <span class="hljs-variable">$username</span> = <span class="hljs-string">&quot;root&quot;</span>;<br>  <span class="hljs-variable">$password</span> = <span class="hljs-string">&quot;root1234&quot;</span>;<br><br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-variable">$conn</span> = <span class="hljs-keyword">new</span> PDO(<span class="hljs-string">&quot;mysql:host=<span class="hljs-subst">$servername</span>&quot;</span>, <span class="hljs-variable">$username</span>, <span class="hljs-variable">$password</span>);<br><br>     <span class="hljs-comment">// 设置 PDO 错误模式为异常</span><br>     <span class="hljs-variable">$conn</span>-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);<br>     <span class="hljs-variable">$sql</span> = <span class="hljs-string">&quot;create database php_db_2&quot;</span>;<br><br>     <span class="hljs-variable">$conn</span>-&gt;exec(<span class="hljs-variable">$sql</span>);<br>     <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;数据库创建成功&quot;</span>;<br>  &#125;<br>  <span class="hljs-keyword">catch</span>(PDOException <span class="hljs-variable">$e</span>) <br>  &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$sql</span> . <span class="hljs-string">&quot; &quot;</span> . <span class="hljs-variable">$e</span>-&gt;getMessage();<br>  &#125;<br><br>  <span class="hljs-variable">$conn</span> = <span class="hljs-literal">null</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="10-3-创建表"><a href="#10-3-创建表" class="headerlink" title="10.3 创建表"></a>10.3 创建表</h3><p>MySQLi面向对象</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-variable">$servername</span> = <span class="hljs-string">&quot;localhost&quot;</span>;<br>  <span class="hljs-variable">$username</span> = <span class="hljs-string">&quot;root&quot;</span>;<br>  <span class="hljs-variable">$password</span> = <span class="hljs-string">&quot;root1234&quot;</span>;<br>  <span class="hljs-variable">$dbname</span> = <span class="hljs-string">&quot;php_db&quot;</span>;<br><br>  <span class="hljs-variable">$conn</span> = <span class="hljs-keyword">new</span> mysqli(<span class="hljs-variable">$servername</span>, <span class="hljs-variable">$username</span>, <span class="hljs-variable">$password</span>, <span class="hljs-variable">$dbname</span>);<br><br>  <span class="hljs-keyword">if</span>(<span class="hljs-variable">$conn</span>-&gt;connect_error) &#123;<br>    <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;连接失败: &quot;</span> . <span class="hljs-variable">$conn</span>-&gt;connect_error);<br>  &#125;<br><br>  <span class="hljs-variable">$sql</span> = <span class="hljs-string">&quot;create table guests_1(</span><br><span class="hljs-string">    id int(6) unsigned auto_increment primary key,</span><br><span class="hljs-string">    firname varchar(30) not null,</span><br><span class="hljs-string">    lastname varchar(30) not null,</span><br><span class="hljs-string">    email varchar(50),</span><br><span class="hljs-string">    reg_date timestamp</span><br><span class="hljs-string">  )&quot;</span>;<br><br>  <span class="hljs-keyword">if</span>(<span class="hljs-variable">$conn</span>-&gt;query(<span class="hljs-variable">$sql</span>) === <span class="hljs-literal">true</span>) &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;创建表成功&quot;</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;创建表失败: &quot;</span> . <span class="hljs-variable">$conn</span>-&gt;error;<br>  &#125;<br><br>  <span class="hljs-variable">$conn</span>-&gt;close();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>其他操作，基本类似，具体实现可查<a href="https://www.runoob.com/php/php-tutorial.html">PHP 教程 | 菜鸟教程 (runoob.com)</a></p><p>参考：<a href="https://www.runoob.com/php/php-tutorial.html">PHP 教程 | 菜鸟教程 (runoob.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git常用命令</title>
      <link href="/2021/11/20/git-order/"/>
      <url>/2021/11/20/git-order/</url>
      
        <content type="html"><![CDATA[<h1 id="git常用命令"><a href="#git常用命令" class="headerlink" title="git常用命令"></a>git常用命令</h1><ol><li>git clone 远程仓库链接</li></ol><p>如下图</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">git clone git@gitee.com:czh0318/git_test.git<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/6198d73f2ab3f51d9187f67d.jpg"></p><p><img src="https://pic.imgdb.cn/item/6198d8482ab3f51d91885ccf.jpg"></p><ol start="2"><li>进入项目文件夹，进行操作，比如增加一个文件test.html</li></ol><p><img src="https://pic.imgdb.cn/item/6198d8e82ab3f51d91889bf7.jpg"></p><ol start="3"><li><p>git add .(把修改放到暂存区)</p></li><li><p>git commit -m “提示信息”(提交到本地仓库)</p></li></ol><p><img src="https://pic.imgdb.cn/item/6198d9b82ab3f51d9188f150.jpg"></p><ol start="5"><li>git remote查看远程仓库的别名(如果克隆仓库的话，会有一个origin)</li></ol><p><img src="https://pic.imgdb.cn/item/6198da942ab3f51d91894614.jpg"></p><ol start="6"><li>git remote add 添加新的远程仓库</li></ol><p><img src="https://pic.imgdb.cn/item/6198db3b2ab3f51d9189849c.jpg"></p><ol start="7"><li>git push提交到远程仓库</li></ol><p>语法：git push 远程仓库名 分支(gitee 默认master, github默认main)</p><p><img src="https://pic.imgdb.cn/item/6198dbb72ab3f51d9189b274.jpg"></p><p><img src="https://pic.imgdb.cn/item/6198dca32ab3f51d918a2660.jpg"></p><ol start="8"><li>git pull拉取代码</li></ol><p>语法：git pull 远程仓库名 分支名</p><p><img src="https://pic.imgdb.cn/item/6198dd442ab3f51d918a71e9.jpg"></p><p>团队协作部分：请移至<a href="https://13535944743.github.io/2021/10/20/git-skills/">远程仓库小技能</a></p>]]></content>
      
      
      <categories>
          
          <category> 小技能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node.js笔记</title>
      <link href="/2021/11/18/nodejs/"/>
      <url>/2021/11/18/nodejs/</url>
      
        <content type="html"><![CDATA[<h1 id="Node-js笔记"><a href="#Node-js笔记" class="headerlink" title="Node.js笔记"></a>Node.js笔记</h1><h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h2><p>Node.js 是一个开源和跨平台的 JavaScript 运行时环境。Node.js 在浏览器之外运行 V8 JavaScript 引擎（Google Chrome 的内核）</p><p><strong>特点</strong></p><ul><li>事件驱动：当事件被触发时，执行传递的回调函数</li><li>非阻塞I/O模型：当执行I/O操作时，不会阻塞线程</li><li>单线程</li><li>拥有世界最大的开源库生态系统 ——<strong>npm</strong></li></ul><p><a href="http://nodejs.cn/">Node.js 中文网 (nodejs.cn)</a></p><p>学习Node.js可以深入理解<strong>服务器开发</strong>、<strong>Web请求和响应过程</strong>、<strong>了解服务器端如何与客户端配合</strong></p><h2 id="2-REPL介绍"><a href="#2-REPL介绍" class="headerlink" title="2. REPL介绍"></a>2. REPL介绍</h2><p>REPL全称：Read-Eval-Print-Loop(交互式解释器)</p><p>R：读取， E：执行， P：打印，L：循环</p><p>控制台输入node命令进入REPL环境，两次Ctrl + C退出REPL环境</p><p><img src="https://pic.imgdb.cn/item/618395282ab3f51d91be5086.jpg"></p><p>执行js文件</p><p><img src="https://pic.imgdb.cn/item/618395c02ab3f51d91bef89b.jpg"></p><h2 id="3-文件读写"><a href="#3-文件读写" class="headerlink" title="3. 文件读写"></a>3. 文件读写</h2><p><strong>文件读写</strong>：需要用到fs模块, 加载fs模块,：<code> const fs = require(&#39;fs&#39;);</code></p><p><strong>写文件</strong>：</p><p><code> fs.writeFile(file, data[, options], callback)</code></p><ul><li>file: 文件路径</li><li>data: 写入的数据</li><li>options: 设置文件对应属性，如编码方式等, 选填</li><li>callback:文件写入完毕后的回调函数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br>fs.writeFile(<span class="hljs-string">&#x27;./file.txt&#x27;</span>, <span class="hljs-string">&#x27;Hello World!&#x27;</span>, <span class="hljs-string">&#x27;utf-8&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;写文件出错，具体错误：&quot;</span>, err);<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;ok&#x27;</span>);<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>读文件:</strong></p><p><code> fs.readFile(path[, options], callback)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br>fs.readFile(<span class="hljs-string">&#x27;./file.txt&#x27;</span>, <span class="hljs-string">&#x27;utf-8&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;读文件错误&#x27;</span>);<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(data);<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>__dirname</strong>: 当前模块的目录名</p><p><strong>__filename</strong>: 当前模块的文件名</p><p><img src="https://pic.imgdb.cn/item/618399f92ab3f51d91c3bba9.jpg"></p><p><strong>path模块</strong>：用于文件路径的拼接</p><p><img src="https://pic.imgdb.cn/item/61839b132ab3f51d91c4f4d7.jpg"></p><h2 id="4-编写http服务程序"><a href="#4-编写http服务程序" class="headerlink" title="4. 编写http服务程序"></a>4. 编写http服务程序</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1. 加载http模块</span><br><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><br><span class="hljs-comment">// 2. 创建http服务</span><br><span class="hljs-keyword">const</span> server = http.createServer();<br><br><span class="hljs-comment">// 3. 为http服务对象添加request事件</span><br>server.on(<span class="hljs-string">&#x27;request&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.setHeader(<span class="hljs-string">&#x27;Content-Type&#x27;</span>, <span class="hljs-string">&#x27;text/html;charset=utf-8&#x27;</span>);  <span class="hljs-comment">// 通过setHeader()来设置内容类型，让浏览器可以识别不同类型的文件</span><br>  res.write(<span class="hljs-string">&#x27;Hello World! &lt;h1&gt;你好&lt;/h1&gt;&#x27;</span>);   <span class="hljs-comment">// 向请求的客户端发送响应内容</span><br>  res.end();  <span class="hljs-comment">// 结束响应</span><br>&#125;)<br><br><span class="hljs-comment">// 开启http服务监听</span><br>server.listen(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;请访问：http://localhost:8080&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="5-根据不同请求做出不同响应"><a href="#5-根据不同请求做出不同响应" class="headerlink" title="5. 根据不同请求做出不同响应"></a>5. 根据不同请求做出不同响应</h2><p>实现进入首页出来首页的结构，进入其他页面出来404页面。<b style="color: red">现在不支持加载html文件中的其他文件，如css文件、图片等</b></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (req.url === <span class="hljs-string">&#x27;/&#x27;</span> || req.url === <span class="hljs-string">&#x27;/index&#x27;</span>) &#123;<br>    fs.readFile(path.join(__dirname, <span class="hljs-string">&#x27;htmls&#x27;</span>, <span class="hljs-string">&#x27;index.html&#x27;</span>), <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (err) &#123;<br>        <span class="hljs-keyword">throw</span> err;<br>      &#125;<br>      res.end(data);<br>    &#125;)<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    fs.readFile(path.join(__dirname, <span class="hljs-string">&#x27;htmls&#x27;</span>, <span class="hljs-string">&#x27;404.html&#x27;</span>), <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (err) &#123;<br>        <span class="hljs-keyword">throw</span> err;<br>      &#125;<br>      res.end(data);<br>    &#125;)<br>  &#125;<br>&#125;).listen(<span class="hljs-string">&#x27;8080&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-built_in">console</span>.log(err);<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;ok&#x27;</span>);<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>实现加载css文件等，就是在判断条件中增加判断css的条件，并且设置响应头中的Content-Type为text/css即可，图片等文件同理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (req.url === <span class="hljs-string">&#x27;/register&#x27;</span>) &#123;<br>    fs.readFile(path.join(__dirname, <span class="hljs-string">&#x27;htmls&#x27;</span>, <span class="hljs-string">&#x27;register.html&#x27;</span>), <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (err) &#123;<br>        <span class="hljs-keyword">throw</span> err;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        res.end(data);<br>      &#125;<br>    &#125;)<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (req.url === <span class="hljs-string">&#x27;/css/register.css&#x27;</span>) &#123;<br>    fs.readFile(path.join(__dirname, <span class="hljs-string">&#x27;htmls&#x27;</span>, <span class="hljs-string">&#x27;css&#x27;</span>, <span class="hljs-string">&#x27;register.css&#x27;</span>), <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (err) &#123;<br>        <span class="hljs-keyword">throw</span> err;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        res.setHeader(<span class="hljs-string">&#x27;Content-Type&#x27;</span>, <span class="hljs-string">&#x27;text/css&#x27;</span>);<br>        res.end(data);<br>      &#125;<br>    &#125;)<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    fs.readFile(path.join(__dirname, <span class="hljs-string">&#x27;htmls&#x27;</span>, <span class="hljs-string">&#x27;404.html&#x27;</span>), <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (err) &#123;<br>        <span class="hljs-keyword">throw</span> err;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        res.end(data);<br>      &#125;<br>    &#125;)<br>  &#125;<br>&#125;).listen(<span class="hljs-number">8080</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-keyword">throw</span> err;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;ok&#x27;</span>);<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>通过<code>npm install mime</code>,然后使用mime模块优化上面的代码(上面的代码很多可复用的部分没有分离出来)</p><p>通过<a href="https://www.npmjs.com/">npm官网</a>可以查看mime的用法</p><p>下面用到的用法：mime.getType(filePath)根据文件路径可以得到Content-Type。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><span class="hljs-keyword">const</span> mime = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mime&#x27;</span>);<br><br><span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> filePath = path.join(__dirname, <span class="hljs-string">&#x27;public&#x27;</span>, req.url);<br>    fs.readFile(filePath, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (err) &#123;<br>        res.end(<span class="hljs-string">&#x27;文件不存在 404&#x27;</span>);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        res.setHeader(<span class="hljs-string">&#x27;Content-Type&#x27;</span>, mime.getType(filePath) + <span class="hljs-string">&quot;;charset=utf-8;&quot;</span>);<br>        res.end(data);<br>      &#125;<br>    &#125;)<br>  <br>&#125;).listen(<span class="hljs-number">8080</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-keyword">throw</span> err;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;ok&#x27;</span>);<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="6-url模块"><a href="#6-url模块" class="headerlink" title="6. url模块"></a>6. url模块</h2><p>第一个参数是url，第二个参数为true时，可以把查询字符串的参数部分变为对象形式，如下图所示</p><p><img src="https://pic.imgdb.cn/item/61a6150d2ab3f51d91068482.jpg"></p><p><img src="https://pic.imgdb.cn/item/618dd7932ab3f51d91bf836c.jpg"></p><p>第二个参数不是true(默认为false)时</p><p><img src="https://pic.imgdb.cn/item/618dd7a62ab3f51d91bf8b05.jpg"></p><h2 id="7-underscore模块"><a href="#7-underscore模块" class="headerlink" title="7. underscore模块"></a>7. underscore模块</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;underscore&#x27;</span>);<br><br><span class="hljs-keyword">const</span> html = <span class="hljs-string">&#x27;&lt;h2&gt;&lt;%= name %&gt;&lt;/h2&gt;&#x27;</span>;<span class="hljs-comment">// 类似vue的插值表达式&#123;&#123;&#125;&#125;</span><br><br><span class="hljs-keyword">const</span> f = _.template(html);<br><br><span class="hljs-built_in">console</span>.log(f(&#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;clz&#x27;</span><br>&#125;));<br></code></pre></td></tr></table></figure><h2 id="8-events模块"><a href="#8-events模块" class="headerlink" title="8. events模块"></a>8. events模块</h2><p><strong>事件驱动程序</strong>：</p><p>Node.js使用事件驱动模型，当web server接收到请求，就会把请求关闭，进行处理，然后去服务下一个web请求。当请求完成，它会被放回处理队列，当到达队列开头，结果会被返回给用户。</p><p>在事件驱动模型中，会生成一个主循环来监听事件，当检测到事件时会触发回调函数。</p><p><img src="https://www.runoob.com/wp-content/uploads/2015/09/event_loop.jpg"></p><p>图片来源：菜鸟教程</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> events = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;events&#x27;</span>);<br><br><span class="hljs-keyword">const</span> eventEmitter = <span class="hljs-keyword">new</span> events.EventEmitter(); <span class="hljs-comment">// 创建eventEmitter对象</span><br><br><span class="hljs-keyword">const</span> connectHandler = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">connected</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;连接成功&#x27;</span>);<br>  eventEmitter.emit(<span class="hljs-string">&#x27;data_received&#x27;</span>);<br>&#125;<br><br>eventEmitter.on(<span class="hljs-string">&#x27;connection&#x27;</span>, connectHandler); <span class="hljs-comment">// 绑定事件connection事件处理程序</span><br><br>eventEmitter.on(<span class="hljs-string">&#x27;data_received&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;数据接收成功&#x27;</span>);<br>&#125;)<br><br>eventEmitter.emit(<span class="hljs-string">&#x27;connection&#x27;</span>); <span class="hljs-comment">// 触发connection事件</span><br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;程序执行完毕&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="9-模块系统"><a href="#9-模块系统" class="headerlink" title="9. 模块系统"></a>9. 模块系统</h2><p><img src="https://s2.loli.net/2022/02/22/8tSHeDKiyTOqIlE.png" alt="image-20220222135245211"></p><p>图片来自菜鸟教程</p><p>在路径Y下执行require(X)语句执行顺序：</p><ol><li><p>如果X是内置模块，直接加载内置模块</p></li><li><p>如果X以’/‘开头，设置Y为文件根路径</p></li><li><p>如果X以’./‘或’/‘或’../‘开头</p><p>a. load_as_file(Y + X)</p><p>b. load_as_directory(Y + X)</p></li><li><p>寻找当前路径下有没有node_modules文件夹</p><p>a. 有，查看node_modules文件夹中有无要加载的模块</p><p>b. 没有，回到上一级查看有没有node_modules文件夹，直到回到项目根目录为止</p></li><li><p>抛出异常”not found”</p></li></ol><p><strong>load_as_file(X):</strong></p><ol><li>如果X是一个文件，将X作为JavaScript文本加载</li><li>如果X.js是一个文件，将X.js作为JavaScript文本加载</li><li>如果X.json是一个文件，解析X.json为JavaScript对象并加载</li><li>如果X.node是一个文件，将X.node作为二进制插件加载</li></ol><p><strong>load_as_directory(Y + X)：</strong></p><ol><li><p>如果X/package.json是一个文件</p><p>a. 解析X/package.json，并查找”main”字段</p><p>b. let M = X  + (json main字段)</p><p>c. load_as _file(M)</p><p>d. load_index(M)</p></li><li><p>load_index(X)</p></li></ol><p><strong>load_index(X)：</strong></p><ol><li>如果X/index.js是一个文件，将X/index.js作为JavaScript文本加载</li><li>如果X/index.json是一个文件，解析X/index.json为JavaScript对象并加载</li><li>如果X/index.node是一个文件，将X/index.node作为二进制插件加载</li></ol><h2 id="10-web模块"><a href="#10-web模块" class="headerlink" title="10. web模块"></a>10. web模块</h2><ul><li><p>使用Node创建web服务器</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br>http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br><br>  fs.readFile(__dirname + <span class="hljs-string">&#x27;/index.html&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (err) &#123;<br>      <span class="hljs-keyword">throw</span> err;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      res.writeHead(<span class="hljs-number">200</span>, &#123;<br>        <span class="hljs-string">&#x27;Contnet-Type&#x27;</span>: <span class="hljs-string">&#x27;text/html&#x27;</span><br>      &#125;);<br>      res.write(data.toString());<br>    &#125;<br>    res.end();<br>  &#125;)<br>&#125;).listen(<span class="hljs-number">9090</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-keyword">throw</span> err;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:9090&#x27;</span>);<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>在该目录下创建一个index.html文件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Server<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>CLZ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>CZH<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>执行server.js文件</p></li><li><p>使用Node创建web客户端</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><br><span class="hljs-keyword">const</span> options = &#123; <span class="hljs-comment">// 用于请求的选项</span><br>  <span class="hljs-attr">host</span>: <span class="hljs-string">&#x27;localhost&#x27;</span>,<br>  <span class="hljs-attr">port</span>: <span class="hljs-string">&#x27;9090&#x27;</span>,<br>  <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/index.html&#x27;</span><br>&#125;;<br><br><span class="hljs-keyword">const</span> callback = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>&#123; <span class="hljs-comment">// 处理响应的回调函数</span><br>  <span class="hljs-keyword">let</span> body = <span class="hljs-string">&#x27;&#x27;</span>;<br>  res.on(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>&#123;<br>    body += data;<br>  &#125;);<br><br>  res.on(<span class="hljs-string">&#x27;end&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(body);<br>  &#125;);<br>&#125;<br><br><span class="hljs-keyword">const</span> req = http.request(options, callback);<br>req.end();<br></code></pre></td></tr></table></figure></li><li><p><strong>新开一个终端</strong>, 执行client.js文件</p><p><img src="https://pic.imgdb.cn/item/6195aa5e2ab3f51d91e12648.jpg"></p></li></ul><h2 id="11-Express框架"><a href="#11-Express框架" class="headerlink" title="11. Express框架"></a>11. Express框架</h2><p>Express框架的核心特性：</p><ul><li>可以设置中间件来响应HTTP请求</li><li>定义了路由表用于执行不同的HTTP请求</li><li>可以通过模板传递参数来动态渲染HTML页面</li></ul><h3 id="11-1-安装"><a href="#11-1-安装" class="headerlink" title="11.1 安装"></a>11.1 安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">npm install express -S<br></code></pre></td></tr></table></figure><p>几个重要的模块</p><ul><li><strong>body-parser</strong>: node.js中间件，用于处理JSON, Raw, Text和URL编码的数据</li><li><strong>cookie-parser</strong>: 解析Cookie的工具，通过req.cookies可以取到传过来的cookie，并将它们转化为对象</li><li><strong>multer</strong>: node.js中间件，用于处理enctype=”multipart/form-data”(设置表单的MIME编码)的表单数据</li></ul><h3 id="11-2-Express框架实例"><a href="#11-2-Express框架实例" class="headerlink" title="11.2 Express框架实例"></a>11.2 Express框架实例</h3><p>实例1：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><span class="hljs-keyword">const</span> app = express();<br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;Hello World!&#x27;</span>);<br>&#125;)<br><br><span class="hljs-keyword">const</span> server = app.listen(<span class="hljs-number">9090</span>, <span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br><br>  <span class="hljs-keyword">let</span> host = server.address().address;<br>  <span class="hljs-keyword">let</span> port = server.address().port;<br>  <span class="hljs-built_in">console</span>.log(server.address())<br><br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://%s:%s&#x27;</span>, host, port);<br>&#125;)<br></code></pre></td></tr></table></figure><p>执行以上代码后，在浏览器中访问<a href="http://localhost:9090/">http://localhost:9090/</a></p><p>实例2(路由)：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><span class="hljs-keyword">const</span> app = express();<br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&#x27;Hello&#x27;</span>);<br>&#125;)<br><br>app.get(<span class="hljs-string">&#x27;/list_user&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&#x27;用户列表页面&#x27;</span>);<br>&#125;)<br><br>app.get(<span class="hljs-string">&#x27;/ab*cd&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&#x27;正则匹配&#x27;</span>);<br>&#125;)<br><br><span class="hljs-keyword">const</span> server = app.listen(<span class="hljs-number">9090</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:9090&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><p>实例3(静态资源)：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><span class="hljs-keyword">const</span> app = express();<br><br>app.use(express.static(<span class="hljs-string">&#x27;public&#x27;</span>)); <span class="hljs-comment">// 实现可以加载public目录下的静态资源文件</span><br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>&#123;<br>  res.send(<span class="hljs-string">&#x27;Hello&#x27;</span>);<br>&#125;)<br><br><span class="hljs-keyword">const</span> server = app.listen(<span class="hljs-number">9090</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;http://localhost:9090&#x27;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/6195b4f82ab3f51d91e727e1.jpg"></p><h2 id="12-MySQL"><a href="#12-MySQL" class="headerlink" title="12. MySQL"></a>12. MySQL</h2><h3 id="12-1-安装驱动"><a href="#12-1-安装驱动" class="headerlink" title="12.1 安装驱动"></a>12.1 安装驱动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">npm install mysql<br></code></pre></td></tr></table></figure><h3 id="12-2-简单连接使用数据库"><a href="#12-2-简单连接使用数据库" class="headerlink" title="12.2 简单连接使用数据库"></a>12.2 简单连接使用数据库</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mysql = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mysql&#x27;</span>);<br><span class="hljs-keyword">const</span> connection = mysql.createConnection(&#123;<br>  <span class="hljs-attr">host</span>: <span class="hljs-string">&#x27;localhost&#x27;</span>,<br>  <span class="hljs-attr">user</span>: <span class="hljs-string">&#x27;root&#x27;</span>,<br>  <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;******&#x27;</span>, <span class="hljs-comment">// 自己的密码</span><br>  <span class="hljs-attr">database</span>: <span class="hljs-string">&#x27;node_mysql&#x27;</span><br>&#125;);<br><br>connection.connect();<br><br>connection.query(<span class="hljs-string">&#x27;select 1 + 1 as solution&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, results, fields</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-keyword">throw</span> err;<br>  &#125;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;The solution is: &#x27;</span> + results[<span class="hljs-number">0</span>].solution);<br>&#125;)<br></code></pre></td></tr></table></figure><p>参考：<a href="https://www.runoob.com/nodejs/nodejs-tutorial.html">Node.js 教程 | 菜鸟教程 (runoob.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 前后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS数组常用的方法</title>
      <link href="/2021/11/14/js-array-methods/"/>
      <url>/2021/11/14/js-array-methods/</url>
      
        <content type="html"><![CDATA[<h1 id="JS数组常用的方法-个人感觉"><a href="#JS数组常用的方法-个人感觉" class="headerlink" title="JS数组常用的方法(个人感觉)"></a>JS数组常用的方法(个人感觉)</h1><h2 id="1-forEach"><a href="#1-forEach" class="headerlink" title="1. forEach()"></a>1. forEach()</h2><p>循环，无法在中间停止</p><p><img src="https://pic.imgdb.cn/item/61500fc62ab3f51d91ee7252.jpg"></p><h2 id="2-some"><a href="#2-some" class="headerlink" title="2. some()"></a>2. some()</h2><p>循环，找到符合条件的之后，可以通过return true退出循环</p><p><img src="https://pic.imgdb.cn/item/6150106d2ab3f51d91ef3344.jpg"></p><h2 id="3-every"><a href="#3-every" class="headerlink" title="3. every()"></a>3. every()</h2><p>测试数组中的所有元素是否都能通过某个指定函数的测试。返回一个布尔值。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> arr = [-<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];<br><br><span class="hljs-keyword">let</span> result = arr.every(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value &gt; <span class="hljs-number">0</span>); <span class="hljs-comment">//-1不满足条件，所以返回false</span><br><span class="hljs-built_in">console</span>.log(result);<br><br>arr[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>result = arr.every(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value &gt; <span class="hljs-number">0</span>); <span class="hljs-comment">//全部满足条件，所以返回true</span><br><span class="hljs-built_in">console</span>.log(result);<br></code></pre></td></tr></table></figure><h2 id="4-filter"><a href="#4-filter" class="headerlink" title="4. filter()"></a>4. filter()</h2><p>创建一个新数组，它包含符合某个指定函数的测试的所有元素</p><p><img src="https://pic.imgdb.cn/item/615013102ab3f51d91f258ee.jpg"></p><h2 id="5-reduce"><a href="#5-reduce" class="headerlink" title="5. reduce()"></a>5. reduce()</h2><p>实现累加</p><p><code> arr.reduce((累加的结果, 当前循环项) =&gt; &#123;&#125;, 初始值)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>];<br><br><span class="hljs-keyword">let</span> result = arr.reduce(<span class="hljs-function">(<span class="hljs-params">sum, value</span>) =&gt;</span> sum += value, <span class="hljs-number">0</span>);<br><span class="hljs-built_in">console</span>.log(result);  <span class="hljs-comment">//输出11</span><br></code></pre></td></tr></table></figure><p>搭配filter()实现，累加选中状态的总价格</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> arr = [&#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;西瓜&#x27;</span>,<br>        <span class="hljs-attr">state</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">price</span>: <span class="hljs-number">10</span>,<br>        <span class="hljs-attr">count</span>: <span class="hljs-number">1</span><br>    &#125;,<br>    &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;榴莲&#x27;</span>,<br>        <span class="hljs-attr">state</span>: <span class="hljs-literal">false</span>,<br>        <span class="hljs-attr">price</span>: <span class="hljs-number">80</span>,<br>        <span class="hljs-attr">count</span>: <span class="hljs-number">2</span><br>    &#125;,<br>    &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;草莓&#x27;</span>,<br>        <span class="hljs-attr">state</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">price</span>: <span class="hljs-number">20</span>,<br>        <span class="hljs-attr">count</span>: <span class="hljs-number">3</span><br>    &#125;,<br>];<br><br><span class="hljs-keyword">const</span> amount = arr.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.state).reduce(<span class="hljs-function">(<span class="hljs-params">amount, item</span>) =&gt;</span> amount += item.price * item.count, <span class="hljs-number">0</span>);<br><span class="hljs-built_in">console</span>.log(amount); <span class="hljs-comment">//返回70</span><br></code></pre></td></tr></table></figure><h2 id="6-map"><a href="#6-map" class="headerlink" title="6. map()"></a>6. map()</h2><p>map()方法把调用它的数组的每一个元素分别传给指定的函数，返回这个函数的返回值构成的数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-keyword">let</span> newA = a.map(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v * v);<br><span class="hljs-built_in">console</span>.log(newA);<br><br><span class="hljs-keyword">let</span> a = [<span class="hljs-number">1</span>, , <span class="hljs-number">2</span>, , <span class="hljs-number">3</span>];<span class="hljs-comment">// 如果数组是稀疏的，缺失元素不会调用函数，但是返回的数组也会和原始数组一样稀疏</span><br><span class="hljs-keyword">let</span> newA = a.map(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v * v);<br><span class="hljs-built_in">console</span>.log(newA);<br></code></pre></td></tr></table></figure><h2 id="7-find"><a href="#7-find" class="headerlink" title="7. find()"></a>7. find()</h2><p>遍历数组，寻找第一个符合条件的元素，找到就停止迭代</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> a = a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br><span class="hljs-built_in">console</span>.log(a.find(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v &gt;= <span class="hljs-number">2</span>));<br><span class="hljs-built_in">console</span>.log(a.find(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v &lt; <span class="hljs-number">0</span>));  <span class="hljs-comment">// 找不到符合条件的，返回undefined</span><br></code></pre></td></tr></table></figure><h2 id="8-flat"><a href="#8-flat" class="headerlink" title="8. flat()"></a>8. flat()</h2><p>用于打平数组(把嵌套数组变为普通的数组元素)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> a = [<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>]];<br><span class="hljs-built_in">console</span>.log(a.flat());<br><br>a = [<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, [<span class="hljs-number">3</span>]]];<br><span class="hljs-built_in">console</span>.log(a.flat()); <span class="hljs-comment">// 不带参，只会打平一级嵌套</span><br><br>a = [<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, [<span class="hljs-number">3</span>, [<span class="hljs-number">4</span>]]]];<br><span class="hljs-built_in">console</span>.log(a.flat(<span class="hljs-number">1</span>));<br><span class="hljs-built_in">console</span>.log(a.flat(<span class="hljs-number">2</span>)); <span class="hljs-comment">// 带参，可以打平多级嵌套</span><br><span class="hljs-built_in">console</span>.log(a.flat(<span class="hljs-number">3</span>));<br><span class="hljs-built_in">console</span>.log(a.flat(<span class="hljs-number">4</span>)); <span class="hljs-comment">// 打平后的数组如果没有嵌套数组，则不会再被打平</span><br><br>a = [<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, [<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, [<span class="hljs-number">11</span>, <span class="hljs-number">12</span>]]]]]];<br><span class="hljs-built_in">console</span>.log(a.flat(<span class="hljs-literal">Infinity</span>));    <span class="hljs-comment">// 通过Infinity实现把任意嵌套数组打平为不嵌套的数组</span><br></code></pre></td></tr></table></figure><h2 id="9-concat"><a href="#9-concat" class="headerlink" title="9. concat()"></a>9. concat()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-keyword">let</span> b = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];<br><span class="hljs-built_in">console</span>.log(b.concat(a));   <span class="hljs-comment">// 拼接两个数组</span><br><span class="hljs-built_in">console</span>.log(b.concat(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))   <span class="hljs-comment">// 也可以添加元素。不会改变原数组，而是创建新数组</span><br></code></pre></td></tr></table></figure><h2 id="10-push-、pop-、shift-、unshift"><a href="#10-push-、pop-、shift-、unshift" class="headerlink" title="10. push()、pop()、shift()、unshift()"></a>10. push()、pop()、shift()、unshift()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> a = [];<br>a.push(<span class="hljs-number">1</span>);<br><span class="hljs-built_in">console</span>.log(a.push(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>));   <span class="hljs-comment">// push()在数组末尾添加元素，并返回数组的新长度</span><br><span class="hljs-built_in">console</span>.log(a);<br><br><span class="hljs-built_in">console</span>.log(a.pop());   <span class="hljs-comment">// pop()删除数组末尾的元素，并返回删除的元素</span><br><span class="hljs-built_in">console</span>.log(a);<br><br><span class="hljs-built_in">console</span>.log(a.unshift(<span class="hljs-number">11</span>, <span class="hljs-number">22</span>));  <span class="hljs-comment">// unshift()在数组的开头添加元素，并返回数组的新长度</span><br><span class="hljs-built_in">console</span>.log(a);<br><br><span class="hljs-built_in">console</span>.log(a.shift());   <span class="hljs-comment">// shift()删除数组开头的元素，并返回删除的元素</span><br><span class="hljs-built_in">console</span>.log(a);<br></code></pre></td></tr></table></figure><h2 id="11-slice-、splice"><a href="#11-slice-、splice" class="headerlink" title="11. slice()、splice()"></a>11. slice()、splice()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>];<br><span class="hljs-built_in">console</span>.log(a.slice(<span class="hljs-number">3</span>, <span class="hljs-number">6</span>));     <span class="hljs-comment">// 截取数组的一部分，返回一个新数组，第一个参数是起点，第二个是终点(但不包含终点)</span><br><span class="hljs-built_in">console</span>.log(a);<br><br><span class="hljs-built_in">console</span>.log(a.slice(<span class="hljs-number">2</span>));      <span class="hljs-comment">// 一个参数，则是从起点截到数组的末尾</span><br><br><span class="hljs-built_in">console</span>.log(a.slice(-<span class="hljs-number">4</span>, -<span class="hljs-number">2</span>));   <span class="hljs-comment">// 可以是负数，-1表示倒数第一，-2表示倒数第二</span><br><br><span class="hljs-built_in">console</span>.log(a.slice(<span class="hljs-number">6</span>, <span class="hljs-number">0</span>));     <span class="hljs-comment">// 返回[], 不能往回截</span><br><br><br><span class="hljs-comment">/*************************/</span><br>a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>];     <span class="hljs-comment">// splice()会改变数组</span><br><span class="hljs-built_in">console</span>.log(a.splice(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&quot;Hello&quot;</span>, <span class="hljs-string">&quot;Hi&quot;</span>));   <span class="hljs-comment">// splice()的第一个参数是起点，第二个参数是要删除的元素个数，之后的参数是要插入的元素，返回删除的数组</span><br><span class="hljs-built_in">console</span>.log(a);<br><br><span class="hljs-built_in">console</span>.log(a.slice(<span class="hljs-number">3</span>));      <span class="hljs-comment">// 只有一个参数，则删除数组开头到起点的全部元素</span><br></code></pre></td></tr></table></figure><h2 id="12-indexOf-、lastIndexOf"><a href="#12-indexOf-、lastIndexOf" class="headerlink" title="12. indexOf()、lastIndexOf()"></a>12. indexOf()、lastIndexOf()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>];<br><span class="hljs-built_in">console</span>.log(a.indexOf(<span class="hljs-number">2</span>));    <span class="hljs-comment">// 返回1， 数组a中第一个是2的元素的索引值是1</span><br><span class="hljs-built_in">console</span>.log(a.lastIndexOf(<span class="hljs-number">2</span>));    <span class="hljs-comment">// 返回4， 数组a中最后一个是2的元素的索引值是4</span><br><span class="hljs-built_in">console</span>.log(a.lastIndexOf(<span class="hljs-number">99</span>));   <span class="hljs-comment">// 返回-1，找不到</span><br><br><span class="hljs-built_in">console</span>.log(a.indexOf(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>));  <span class="hljs-comment">// 从索引值为2的元素开始找</span><br><span class="hljs-built_in">console</span>.log(a.lastIndexOf(<span class="hljs-number">2</span>, -<span class="hljs-number">3</span>));  <span class="hljs-comment">// 从倒数第三个元素开始找</span><br></code></pre></td></tr></table></figure><h2 id="13-includes"><a href="#13-includes" class="headerlink" title="13. includes()"></a>13. includes()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> a = [<span class="hljs-number">1</span>, <span class="hljs-string">&quot;Hello&quot;</span>, <span class="hljs-literal">true</span>];<br><span class="hljs-built_in">console</span>.log(a.includes(<span class="hljs-literal">true</span>));    <span class="hljs-comment">// 返回true，因为数组中有true这个元素</span><br><span class="hljs-built_in">console</span>.log(a.includes(<span class="hljs-number">2</span>));     <span class="hljs-comment">// 返回false</span><br></code></pre></td></tr></table></figure><h2 id="14-fill"><a href="#14-fill" class="headerlink" title="14. fill()"></a>14. fill()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> a = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">7</span>);<br><span class="hljs-built_in">console</span>.log(a.fill(<span class="hljs-number">0</span>));     <span class="hljs-comment">// 可以用于数组的初始化, 返回一个新数组</span><br><span class="hljs-built_in">console</span>.log(a.fill(<span class="hljs-number">7</span>, <span class="hljs-number">2</span>));  <span class="hljs-comment">// 从索引2开始把数组元素设置为7</span><br><span class="hljs-built_in">console</span>.log(a.fill(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, -<span class="hljs-number">2</span>));   <span class="hljs-comment">// 第一个参数是要设置的值，第二个参数是起点，第三个参数是终点，可以是负数</span><br></code></pre></td></tr></table></figure><h2 id="15-join-、split"><a href="#15-join-、split" class="headerlink" title="15. join()、split()"></a>15. join()、split()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// join()用于把所有元素转换成字符串</span><br><span class="hljs-keyword">let</span> a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-built_in">console</span>.log(a.join());      <span class="hljs-comment">// 默认使用逗号当分隔符</span><br><span class="hljs-built_in">console</span>.log(a.join(<span class="hljs-string">&quot; &quot;</span>));   <span class="hljs-comment">// 使用空格当作分隔符</span><br><br><span class="hljs-comment">// split()用于把字符串按指定分隔符转换成数组</span><br>a = <span class="hljs-string">&quot;Hello world!&quot;</span>;<br><span class="hljs-built_in">console</span>.log(a.split(<span class="hljs-string">&quot;&quot;</span>));<br>a = <span class="hljs-string">&quot;Hello, world!&quot;</span>;<br><span class="hljs-built_in">console</span>.log(a.split(<span class="hljs-string">&quot;,&quot;</span>));<br></code></pre></td></tr></table></figure><h2 id="16-sort"><a href="#16-sort" class="headerlink" title="16. sort()"></a>16. sort()</h2><p>sort()方法对数组元素按字母顺序对数组元素排序</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">11</span>, <span class="hljs-number">23</span>, <span class="hljs-number">22</span>, <span class="hljs-number">111</span>, <span class="hljs-number">12</span>, <span class="hljs-number">9</span>, <span class="hljs-number">8</span>];<br><span class="hljs-built_in">console</span>.log(arr.sort());<br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://pic.imgdb.cn/item/6162e07f2ab3f51d91f3bcb3.jpg"></p><p>可以传入一个回调函数，来自定义排序规则。</p><p>回调函数的格式是</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">(a, b) =&gt; &#123;<span class="hljs-comment">// a, b是数组中任意两个数</span><br>    <span class="hljs-keyword">return</span> xxx;<br>&#125;<br></code></pre></td></tr></table></figure><p><b style="color: red">当返回值大于0时，a排在b的后面；</b></p><p><b style="color: red">当返回值小于0时，a排在b的前面；</b></p><p><b style="color: red">当返回值等于0时，a和b的顺序不改变。</b></p><p>所以，要实现升序排序，可以按下面的方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">11</span>, <span class="hljs-number">23</span>, <span class="hljs-number">22</span>, <span class="hljs-number">111</span>, <span class="hljs-number">12</span>, <span class="hljs-number">9</span>, <span class="hljs-number">8</span>];<br><span class="hljs-built_in">console</span>.log(arr.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (a &gt; b) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>  &#125;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a &lt; b) &#123;<br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>  &#125;<br>  <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>  &#125;<br>&#125;));<br></code></pre></td></tr></table></figure><p>上面的代码还可以简化为：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">11</span>, <span class="hljs-number">23</span>, <span class="hljs-number">22</span>, <span class="hljs-number">111</span>, <span class="hljs-number">12</span>, <span class="hljs-number">9</span>, <span class="hljs-number">8</span>];<br><span class="hljs-built_in">console</span>.log(arr.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b));<br><span class="hljs-comment">/* 要实现降序的话，则是变为return b - a; */</span><br></code></pre></td></tr></table></figure><p>原因(看不懂的话，结合上面红字)：</p><p>当a &gt; b时，</p><p>a - b &gt; 0, return a - b排序的结果 ==&gt; b, a (升序)</p><p>b - a &lt; 0, return b - a排序的结果 ==&gt; a, b (降序)</p><p>当a &lt; b时，</p><p>a - b &lt; 0, return a - b排序的结果 ==&gt; a, b (升序)</p><p>b - a &gt; 0, return b - a排序的结果 ==&gt; b, a (降序)</p><p>当a = b时，</p><p>a - b = b - a = 0, return a - b 和 return b - a排序结果都不变</p><p>从上面所有的情况，可以发现，无论a &gt; b，还是a &lt; b, return a - b总能得到升序的结果，return b - a总能得到降序的结果</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库学习笔记(四)</title>
      <link href="/2021/11/06/SQL-4/"/>
      <url>/2021/11/06/SQL-4/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库学习笔记-四"><a href="#数据库学习笔记-四" class="headerlink" title="数据库学习笔记(四)"></a>数据库学习笔记(四)</h1><h2 id="1-数据库恢复技术"><a href="#1-数据库恢复技术" class="headerlink" title="1. 数据库恢复技术"></a>1. 数据库恢复技术</h2><h3 id="1-1-事务"><a href="#1-1-事务" class="headerlink" title="1.1 事务"></a>1.1 事务</h3><p><strong>事务</strong>：用户定义的一个数据库操作序列，是一个不可分割的工作单位。这些操作要么全做，要么全不做。<strong>是恢复的基本单位，也是并发控制的基本单位</strong></p><p><strong>定义事务</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">begin</span> transaction<br><span class="hljs-keyword">sql</span>语句<br><span class="hljs-keyword">commit</span><br># 事务正常结束，提交事务的所有操作<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">begin</span> transaction<br><span class="hljs-keyword">sql</span>语句<br><span class="hljs-keyword">rollback</span><br># 事务异常终止，事务回到开始的状态<br></code></pre></td></tr></table></figure><h3 id="1-2-事务的特性"><a href="#1-2-事务的特性" class="headerlink" title="1.2 事务的特性"></a>1.2 事务的特性</h3><p>ACID特性</p><ul><li><p><strong>原子性</strong></p><p>事务是数据库的逻辑工作单位。事务中的操作要么都做，要么都不做</p></li><li><p><strong>一致性</strong></p><p>事务执行的结果必须是使数据库从一个一致性状态变为另一个一致性状态</p><p><strong>一致性状态</strong>：数据库中只包含成功事务提交的结果</p></li><li><p><strong>隔离性</strong></p><p>一个事务的执行不能被其他事务干扰</p></li><li><p><strong>持续性</strong></p><p>事务一旦提交，它对数据库中数据的改变应该是永久性的</p></li></ul><h3 id="1-3-故障"><a href="#1-3-故障" class="headerlink" title="1. 3 故障"></a>1. 3 故障</h3><p>对数据库的影响：</p><ol><li>数据库本身被破坏</li><li>数据库没有被破坏，但是数据可能不正确</li></ol><ul><li><p><strong>事务故障</strong>：事务没有达到预期的终点(commit 或显式的rollback)、数据库可能处于不正确状态</p><p>恢复：<strong>事务撤销</strong>，强行回滚(rollback)该事务</p></li><li><p><strong>系统故障</strong>：造成系统停止运转的任何事件，使得系统要重新启动</p><p>恢复：需要通过<strong>undo/redo</strong>所有被中断的事务</p></li><li><p><strong>介质故障</strong>：称为硬故障。如硬盘损坏、磁头碰撞、瞬时强磁场干扰</p><p>恢复：重装数据库、重做已完成的事务</p></li><li><p><strong>计算机病毒</strong></p></li></ul><h3 id="1-4-恢复的实现技术"><a href="#1-4-恢复的实现技术" class="headerlink" title="1.4 恢复的实现技术"></a>1.4 恢复的实现技术</h3><p>恢复操作的基本原理：<strong>冗余</strong></p><ul><li>利用存储在系统中的<strong>冗余数据</strong>来<strong>重建</strong>数据库中已经被破坏或不正确的数据</li></ul><p>建立冗余数据的方法：</p><ul><li>数据转储(备份)</li><li>登记日志文件(logging)</li></ul><h4 id="1-4-1-数据转储"><a href="#1-4-1-数据转储" class="headerlink" title="1.4.1 数据转储"></a>1.4.1 数据转储</h4><p>转储是指数据库管理员定期将整个数据库复制到其他存储介质上保存下来的过程</p><ul><li>静态转储：在系统无运行事务时进行的转储操作。转储期间不允许对数据库的任何存取、修改活动</li><li>动态转储：转储操作与用户事务并发进行。转储期间允许对数据库进行存取、修改</li><li>海量转储：每次转储全部数据库</li><li>增量转储：只转储上次转储后更新后的数据</li></ul><h4 id="1-4-2-登记日志文件"><a href="#1-4-2-登记日志文件" class="headerlink" title="1.4.2 登记日志文件"></a>1.4.2 登记日志文件</h4><p><strong>日志文件</strong>：用来记录事务对数据库的更新操作的文件</p><p>作用：</p><ul><li>进行事务故障恢复</li><li>进行系统故障恢复</li><li>协助后备副本进行介质故障恢复</li></ul><p>为了保证数据库是可恢复的，登记日志文件必须遵循两条原则</p><ul><li>登记的次序严格按并发事务执行的时间次序</li><li>必须先写日志文件，后写数据库</li></ul><p><img src="https://pic.imgdb.cn/item/61866f562ab3f51d91226b91.jpg"></p><h2 id="2-并发控制"><a href="#2-并发控制" class="headerlink" title="2. 并发控制"></a>2. 并发控制</h2><p>多事务执行方式：</p><ul><li>事务<strong>串行</strong>执行：按事务排队，效率低</li><li><strong>交叉并发</strong>方式：在单处理机系统中。并行事务<strong>轮流交叉运行</strong>。假并行，但也提高了系统的效率。</li><li><strong>同时并发</strong>方式：多处理机系统中，多个系统可以同时运行多个事务</li></ul><h3 id="2-1-简介"><a href="#2-1-简介" class="headerlink" title="2.1 简介"></a>2.1 简介</h3><p><strong>事务</strong>是并发控制的基本单位。</p><p>并发控制机制的任务：</p><ul><li>对并发操作进行<strong>正确调度</strong></li><li>保证事务的<strong>隔离性</strong></li><li>保证数据库的<strong>一致性</strong></li></ul><p>并发操作带来的数据不一致性：</p><ol><li>丢失修改：两个事务T1和T2读取同一数据并修改，T2的提交结果可能会破坏T1的结果，导致T1的修改被丢失</li><li>不可重复读：事务T1读取数据后，T2对数据进行了修改等操作，事务T1再次读该数据时，得到与前一次不同的值</li><li>读脏数据：nT1将C值修改为200，T2读到C为200。T1撤销，C恢复原值，但是T2读到的C为200，T2读到的C就是脏数据。</li></ol><h3 id="2-2-封锁"><a href="#2-2-封锁" class="headerlink" title="2.2 封锁"></a>2.2 封锁</h3><p>基本封锁类型：</p><ul><li>**排他锁(又称写锁，X锁)**：<ul><li>若事务T对数据对象A加上<strong>X锁</strong>，则只允许T读取和修改A，其他任何事务都<strong>不能再对A加任何类型的锁</strong>，直到T释放A上的锁</li><li>作用：保证其他事务在T释放A上的锁之前<strong>不能再读取和修改A</strong></li></ul></li><li><strong>共享锁(又称读锁，S锁)</strong><ul><li>若事务T对数据对象A加上S锁，则事务T可以读A但不能修改A，其他事务<strong>只能再对A加S锁，而不能加X锁</strong>，直到T释放A上的S锁</li><li>作用：保证其他事务可以读A，但在T释放A上的S锁之前不能对A做任何修改</li></ul></li></ul><h3 id="2-3-封锁协议"><a href="#2-3-封锁协议" class="headerlink" title="2.3 封锁协议"></a>2.3 封锁协议</h3><h4 id="2-3-1-一级封锁协议"><a href="#2-3-1-一级封锁协议" class="headerlink" title="2.3.1 一级封锁协议"></a>2.3.1 一级封锁协议</h4><p>事务T在修改数据R之前，必须先对它加上X锁，直到事务结束才释放。(结束包括正常结束commit和非正常结束rollback)</p><p><img src="https://pic.imgdb.cn/item/618666d72ab3f51d91145cde.jpg"></p><p>作用：<strong>防止丢失修改</strong></p><h4 id="2-3-2-二级封锁协议"><a href="#2-3-2-二级封锁协议" class="headerlink" title="2.3.2 二级封锁协议"></a>2.3.2 二级封锁协议</h4><p>一级封锁协议加上事务T在读取数据R之前必须先对它加S锁，<strong>读完后就可以释放S锁</strong></p><p><img src="https://pic.imgdb.cn/item/6186660c2ab3f51d91132d46.jpg"></p><p>作用：<strong>防止丢失修改和读脏数据</strong></p><h4 id="2-3-三级封锁协议"><a href="#2-3-三级封锁协议" class="headerlink" title="2.3 三级封锁协议"></a>2.3 三级封锁协议</h4><p>一级封锁协议加上事务T在读取数据R之前必须先对它加S锁，<strong>直到事务结束，才可以释放S锁</strong></p><p><img src="https://pic.imgdb.cn/item/6186686d2ab3f51d9116e1dc.jpg"></p><p>作用：<strong>防止丢失修改、读脏数据和不可重复读</strong></p><p><img src="https://pic.imgdb.cn/item/618668992ab3f51d91172619.jpg"></p><h3 id="2-4-活锁和死锁"><a href="#2-4-活锁和死锁" class="headerlink" title="2.4 活锁和死锁"></a>2.4 活锁和死锁</h3><h4 id="2-4-1-活锁"><a href="#2-4-1-活锁" class="headerlink" title="2.4.1 活锁"></a>2.4.1 活锁</h4><ul><li>事务T1封锁了数据R</li><li>事务T2请求封锁R，等待，</li><li>T3也请求封锁R</li><li>T1释放R上的封锁后，系统先批准T3的请求，T2继续等</li><li>T4请求封锁R</li><li>T3释放R上的封锁后，系统先批准T4的请求，T2继续等。。。</li></ul><p>活锁：T2有可能永远等待</p><p>采用<strong>先来先服务</strong>的策略可以避免活锁</p><p><img src="https://pic.imgdb.cn/item/61866a642ab3f51d911a40c8.jpg"></p><h4 id="2-4-2-死锁"><a href="#2-4-2-死锁" class="headerlink" title="2.4.2 死锁"></a>2.4.2 死锁</h4><ul><li>T1封锁了数据R1，T2封锁了数据R2</li><li>T1请求封锁R2，因为T2封锁了R2，所以T1等待T2释放R2上的锁</li><li>T2请求封锁R1，因为T1封锁了R1，所以T2等待T1释放R1上的锁</li></ul><p>死锁：T1在等待T2，T2在等待T1，T1和T2两个事务永远不能结束</p><p><strong>死锁的诊断</strong>：</p><ul><li><p>超时法：如果一个事务的等待时间超过了规定的时限，就认为发生了死锁。</p><ul><li>优点：实现简单</li><li>缺点：时限若设置的太长，死锁发生后不能及时发现；有可能误判死锁</li></ul></li><li><p>等待图法</p><p><img src="https://pic.imgdb.cn/item/618684ee2ab3f51d91492f7d.jpg"></p></li></ul><p><strong>解决死锁</strong>：</p><ul><li><p>选择一个处理死锁代价最小的事务，将其撤销</p></li><li><p>释放此事务持有的所有的锁，使其他事务能继续运行下去</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库学习笔记(三)</title>
      <link href="/2021/11/06/SQL-3/"/>
      <url>/2021/11/06/SQL-3/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库学习笔记-三"><a href="#数据库学习笔记-三" class="headerlink" title="数据库学习笔记(三)"></a>数据库学习笔记(三)</h1><h2 id="1-数据库完整性"><a href="#1-数据库完整性" class="headerlink" title="1. 数据库完整性"></a>1. 数据库完整性</h2><h3 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1 概述"></a>1.1 概述</h3><ul><li><strong>数据的正确性</strong>：指数据符合现实世界语义，反映了当前实际情况</li><li><strong>数据的相容性</strong>：指数据库同一对象在不同的表中的数据是符合逻辑的</li></ul><h4 id="数据的完整性和安全性"><a href="#数据的完整性和安全性" class="headerlink" title="数据的完整性和安全性"></a>数据的完整性和安全性</h4><p>是两个不同概念</p><ul><li><strong>数据的完整性</strong><ul><li>防止数据库中存在不符合语义的数据，也就是防止数据库中存在不正确的数据</li><li>防范对象：不合语义的、不正确的数据</li></ul></li><li><strong>数据的安全性</strong><ul><li>保护数据库，防止恶意的破坏和非法的存取</li><li>防范对象：非法用户和非法操作</li></ul></li></ul><h3 id="1-2-实体参照性"><a href="#1-2-实体参照性" class="headerlink" title="1.2 实体参照性"></a>1.2 实体参照性</h3><h4 id="1-2-1-实体完整性定义"><a href="#1-2-1-实体完整性定义" class="headerlink" title="1.2.1 实体完整性定义"></a>1.2.1 实体完整性定义</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> Student<br>( Sno <span class="hljs-type">char</span>(<span class="hljs-number">9</span>) <span class="hljs-keyword">primary</span> key,# 在列级定义主码<br>  Sname <span class="hljs-type">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>  Ssex <span class="hljs-type">char</span>(<span class="hljs-number">2</span>)<br>);<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> Student<br>( Sno <span class="hljs-type">char</span>(<span class="hljs-number">9</span>),<br>  Sname <span class="hljs-type">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>  Ssex <span class="hljs-type">char</span>(<span class="hljs-number">2</span>),<br>  <span class="hljs-keyword">primary</span> key(Sno)   # 在表级定义主码<br>);<br><br># 如果是要将属性组定义为主码，只能在表级定义主码<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> SC<br>( Sno <span class="hljs-type">char</span>(<span class="hljs-number">9</span>),<br>  Cno <span class="hljs-type">char</span>(<span class="hljs-number">4</span>),<br>  Grade <span class="hljs-type">smallint</span>,<br>  <span class="hljs-keyword">primary</span> key(Sno, Cno)# 属性组定义为主码，只能在表级定义主码<br>);<br></code></pre></td></tr></table></figure><h3 id="1-3-参照完整性"><a href="#1-3-参照完整性" class="headerlink" title="1.3 参照完整性"></a>1.3 参照完整性</h3><h4 id="1-3-1-参照完整性定义"><a href="#1-3-1-参照完整性定义" class="headerlink" title="1.3.1 参照完整性定义"></a>1.3.1 参照完整性定义</h4><ul><li>在建表时用<b style="color: red"><code> foreign key</code></b>短语定义哪些列是外码</li><li>用<b style="color: red"><code> references</code></b>短语指明这些外码参照哪些表的主码</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> SC<br>( Sno <span class="hljs-type">char</span>(<span class="hljs-number">9</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>  Cno <span class="hljs-type">char</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>  Grade <span class="hljs-type">smallint</span>,<br>  <span class="hljs-keyword">primary</span> key(Sno, Cno),<br>  <span class="hljs-keyword">foreign</span> key(Sno) <span class="hljs-keyword">references</span> Student(Sno),<br>  <span class="hljs-keyword">foreign</span> key(Cno) <span class="hljs-keyword">references</span> Course(Cno)# 在表级定义参照完整性<br>);<br></code></pre></td></tr></table></figure><p>参照完整性检查示例：</p><p>破坏参照完整性：</p><p><strong>SC表增加一个元组</strong>，该元组的Sno属性的值在表Student中找不到一个元组，能让其Sno属性的值与之相等</p><p><img src="https://pic.imgdb.cn/item/617a75162ab3f51d91f54fab.jpg"></p><h3 id="1-4-用户定义的完整性"><a href="#1-4-用户定义的完整性" class="headerlink" title="1.4 用户定义的完整性"></a>1.4 用户定义的完整性</h3><p><strong>用户定义的完整性</strong>：针对某一具体应用的数据必须满足的语义要求</p><h4 id="1-4-1-属性上的约束条件"><a href="#1-4-1-属性上的约束条件" class="headerlink" title="1.4.1 属性上的约束条件"></a>1.4.1 属性上的约束条件</h4><p>建表时定义属性上的约束条件</p><ul><li>列值非空(not null)</li><li>列值唯一(unique)</li><li>检查列值是否满足一个条件表达式(check)</li></ul><ol><li><p>不允许取空值</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> SC<br>( Sno <span class="hljs-type">char</span>(<span class="hljs-number">9</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>  Cno <span class="hljs-type">char</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>  Grade <span class="hljs-type">smallint</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span><br>  <span class="hljs-keyword">primary</span> key(Sno, Cno)# Sno、Cno、Grade属性不允许取空值<br>)<br></code></pre></td></tr></table></figure></li><li><p>列值唯一</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> DEPT<br>( Deptno <span class="hljs-type">numeric</span>(<span class="hljs-number">2</span>),<br>  Dname <span class="hljs-type">char</span>(<span class="hljs-number">9</span>) <span class="hljs-keyword">unique</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,# 要求Dname列值唯一，并且不能取空值<br>  <span class="hljs-keyword">primary</span> key(Deptno)<br>)<br></code></pre></td></tr></table></figure></li><li><p>用check短语指定列值应该满足的条件</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> Student<br>( Sno <span class="hljs-type">char</span>(<span class="hljs-number">9</span>) <span class="hljs-keyword">primary</span> key,<br>  Sname <span class="hljs-type">char</span>(<span class="hljs-number">8</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>  Ssex <span class="hljs-type">char</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">check</span>(Ssex <span class="hljs-keyword">in</span> (<span class="hljs-string">&#x27;男&#x27;</span>, <span class="hljs-string">&#x27;女&#x27;</span>))  # Ssex只允许是<span class="hljs-string">&#x27;男&#x27;</span>或<span class="hljs-string">&#x27;女&#x27;</span><br>)<br></code></pre></td></tr></table></figure></li></ol><h4 id="1-4-2-元组上的约束条件"><a href="#1-4-2-元组上的约束条件" class="headerlink" title="1.4.2 元组上的约束条件"></a>1.4.2 元组上的约束条件</h4><p> 建表时用<strong>check</strong>短语定义元组上的约束条件，即<strong>元组级的限制</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> Student<br>( Sno <span class="hljs-type">char</span>(<span class="hljs-number">9</span>),<br>  Sname <span class="hljs-type">char</span>(<span class="hljs-number">8</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>  Ssex <span class="hljs-type">char</span>(<span class="hljs-number">2</span>),<br>  <span class="hljs-keyword">primary</span> key(Sno),<br>  <span class="hljs-keyword">check</span>(Ssex<span class="hljs-operator">=</span><span class="hljs-string">&#x27;女&#x27;</span> <span class="hljs-keyword">or</span> Sname <span class="hljs-keyword">not</span> <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;MS.%&#x27;</span>)# 当学生的性别是男时，名字不能以MS.开始<br>)<br></code></pre></td></tr></table></figure><h3 id="1-5-完整性约束命名子句"><a href="#1-5-完整性约束命名子句" class="headerlink" title="1.5 完整性约束命名子句"></a>1.5 完整性约束命名子句</h3><h4 id="1-5-1-完整性约束命名子句"><a href="#1-5-1-完整性约束命名子句" class="headerlink" title="1.5.1 完整性约束命名子句"></a>1.5.1 完整性约束命名子句</h4><p><code> constraint &lt;完整性约束条件名&gt; &lt;完整性约束条件&gt;</code></p><ul><li>完整性约束条件包括not null、unique、primary key短语、foreign key短语、check短语等</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> Student<br>( Sno <span class="hljs-type">numeric</span>(<span class="hljs-number">6</span>)# 下面有完整性约束命名子句，所以没有逗号<br>  <span class="hljs-keyword">constraint</span> C1 <span class="hljs-keyword">check</span> (Sno <span class="hljs-keyword">between</span> <span class="hljs-number">9000</span> <span class="hljs-keyword">and</span> <span class="hljs-number">9999</span>),# 要求学号在<span class="hljs-number">9000</span><span class="hljs-operator">~</span><span class="hljs-number">9999</span>之间<br>  Sname <span class="hljs-type">char</span>(<span class="hljs-number">20</span>),<br>  <span class="hljs-keyword">constraint</span> C2 <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>  Sage <span class="hljs-type">numeric</span>(<span class="hljs-number">3</span>) <br>  <span class="hljs-keyword">constraint</span> C3 <span class="hljs-keyword">check</span>(Sage <span class="hljs-operator">&lt;</span> <span class="hljs-number">30</span>),<br>  <span class="hljs-keyword">constraint</span> StudentKey <span class="hljs-keyword">primary</span> key(Sno)# 主码约束，上面的C1、C2、C3都是列级约束<br>)<br></code></pre></td></tr></table></figure><h4 id="1-5-2-修改表中的完整性限制"><a href="#1-5-2-修改表中的完整性限制" class="headerlink" title="1.5.2 修改表中的完整性限制"></a>1.5.2 修改表中的完整性限制</h4><ul><li>使用alter table语句修改表中的完整性限制</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> Student<br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">constraint</span> C3;# 删除对年龄的限制<br></code></pre></td></tr></table></figure><ul><li><p>修改表的约束条件</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 修改表的约束条件方法：先删除原来的约束条件，再增加新的约束条件<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> Student<br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">constraint</span> C1;<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> Student<br><span class="hljs-keyword">add</span> <span class="hljs-keyword">constraint</span> C1 <span class="hljs-keyword">check</span>(Sno <span class="hljs-keyword">between</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">and</span> <span class="hljs-number">9999</span>);<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-6-断言"><a href="#1-6-断言" class="headerlink" title="1.6 断言"></a>1.6 断言</h3><ul><li>在SQL中，可以使用create assertion语句，通过声明断点来指定更具一般性的约束</li><li>断言创建之后，任何对断言中涉及的关系的操作都会触发关系数据库管理系统对断言的检查，任何使断言不为真值的操作都会被拒绝执行</li></ul><h4 id="1-6-1-创建断言的语句格式"><a href="#1-6-1-创建断言的语句格式" class="headerlink" title="1.6.1 创建断言的语句格式"></a>1.6.1 创建断言的语句格式</h4><p><code> create assertion &lt;断言名&gt; &lt;check子句&gt;</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> assertion ASSE_SC_CNUM1<br><span class="hljs-keyword">check</span>(<span class="hljs-number">60</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-keyword">all</span>(<span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> SC<br>                <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> Cno)<br>     );# 限制每一门课程最多<span class="hljs-number">60</span>名学生选修<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 限制每个学期每一门课程最多<span class="hljs-number">60</span>名学生选修<br># 先增加一个学期属性<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> SC <span class="hljs-keyword">add</span> Team;<br><br># 定义断言<br><span class="hljs-keyword">create</span> assertion ASSE_SC_CNUM2<br><span class="hljs-keyword">check</span>(<span class="hljs-number">60</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-keyword">all</span>(<span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> SC<br>                <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> Cno, Team)<br>     );<br></code></pre></td></tr></table></figure><h4 id="1-6-2-删除断言"><a href="#1-6-2-删除断言" class="headerlink" title="1.6.2 删除断言"></a>1.6.2 删除断言</h4><p><code> drop assertion &lt;断言名&gt;</code> </p><h3 id="1-7-触发器"><a href="#1-7-触发器" class="headerlink" title="1.7 触发器"></a>1.7 触发器</h3><p><strong>触发器</strong>：用户定义在关系表上的一类由<strong>事件驱动</strong>的特殊过程</p><h4 id="1-7-1-定义触发器"><a href="#1-7-1-定义触发器" class="headerlink" title="1.7.1 定义触发器"></a>1.7.1 定义触发器</h4><p>概念太多，建议直接实践</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 当对表SC的Grade属性进行修改时，若分数增加了<span class="hljs-number">10</span><span class="hljs-operator">%</span> 则将这次的操作记录下来<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> SC<span class="hljs-operator">-</span>T<br>after update <span class="hljs-keyword">of</span> Grade <span class="hljs-keyword">on</span> SC# 分数发生修改后激活触发器<br><span class="hljs-keyword">referencing</span><br><span class="hljs-keyword">old</span> <span class="hljs-type">row</span> <span class="hljs-keyword">as</span> OldTuple# 把引发事件之前的值改名为OldTuple<br><span class="hljs-keyword">new</span> <span class="hljs-type">row</span> <span class="hljs-keyword">as</span> NewTuple# 把引发事件之后的值改名为NewTuple<br><span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span># 行级触发器，即每执行一次Grade的更新，下面的规则就会执行一次<br><span class="hljs-keyword">when</span>(NewTuple.Grade <span class="hljs-operator">&gt;=</span> <span class="hljs-number">1.1</span> <span class="hljs-operator">*</span> OldTuple.Grade)<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC_U(Sno, Cno, OldGrade, NewGrade)# 满足条件，把这次的操作记录下来<br><span class="hljs-keyword">values</span>(OldTuple.Sno, OldTuple.Cno, OldTuple.Grade, NewTuple.Grade)<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 将每次对表Student的插入操作所增加的学生个数记录下来<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> Student_Count<br>after <span class="hljs-keyword">insert</span> <span class="hljs-keyword">on</span> Student<br><span class="hljs-keyword">referencing</span><br><span class="hljs-keyword">new</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">as</span> Delta<br><span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> statement<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> StudentInsertLog(Numbers)<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> Delta<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 定义一个BEFORE行级触发器，为教师表Teacher定义完整性规则“教授的工资不得低于<span class="hljs-number">4000</span>元，如果低于<span class="hljs-number">4000</span>元，自动改为<span class="hljs-number">4000</span>元<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> Insert_Or_Update_Sal<br>before <span class="hljs-keyword">insert</span> <span class="hljs-keyword">or</span> update <span class="hljs-keyword">on</span> Teacher# 插入工资前，或者更改工资前激活触发器<br><span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><br><span class="hljs-keyword">begin</span># 定义触发动作体，是一个PL<span class="hljs-operator">/</span><span class="hljs-keyword">SQL</span>过程块<br>if (new.Jog <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;教授&#x27;</span>) <span class="hljs-keyword">and</span> (new.Sal <span class="hljs-operator">&lt;</span> <span class="hljs-number">4000</span>)<br><span class="hljs-keyword">then</span> new.Sal :<span class="hljs-operator">=</span> <span class="hljs-number">4000</span>;<br><span class="hljs-keyword">end</span> if;<br><span class="hljs-keyword">end</span>;# 触发动作体结束<br></code></pre></td></tr></table></figure><h4 id="1-7-2-激活触发器"><a href="#1-7-2-激活触发器" class="headerlink" title="1.7.2 激活触发器"></a>1.7.2 激活触发器</h4><ul><li><p>触发器的执行，是由<strong>触发事件激活</strong>的，并由数据库服务器自动执行</p><p>触发器执行时顺序</p><ol><li>执行该表上的before触发器</li><li>激活触发器上的SQL语句</li><li>执行该表上的after触发器</li></ol></li></ul><h4 id="1-7-3-删除触发器"><a href="#1-7-3-删除触发器" class="headerlink" title="1.7.3 删除触发器"></a>1.7.3 删除触发器</h4><p><code> drop trigger &lt;触发器名&gt; on &lt;表名&gt;;</code></p>]]></content>
      
      
      <categories>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>移动端流式布局</title>
      <link href="/2021/11/01/FlowLayout/"/>
      <url>/2021/11/01/FlowLayout/</url>
      
        <content type="html"><![CDATA[<h2 id="1-meta视口标签"><a href="#1-meta视口标签" class="headerlink" title="1. meta视口标签"></a><h3>1. meta视口标签</h3></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable = no, initial-scale=1.0, maximum-scale = 1.0, minimum-scale = 1.0&quot;&gt;<br></code></pre></td></tr></table></figure><p>width=device-width  &nbsp;  &nbsp; &nbsp; &nbsp; //设置页面宽度等于设备物理宽度</p><p>user-scalable = no &nbsp;  &nbsp; &nbsp; &nbsp; // 用户是否可以缩放 ，可以是yes或no, 1或0</p><p>initial-scale=1.0, maximum-scale = 1.0, minimum-scale = 1.0  &nbsp;  &nbsp; &nbsp; &nbsp; //依次是初始缩放比、最大缩放比、最小缩放比</p>  <h2 id="2-二倍图"><a href="#2-二倍图" class="headerlink" title="2. 二倍图"></a><h3>2. 二倍图</h3></h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当设备像素比很大时，图片会被放大，而放大会让图片看起来模糊。为此，我们可以使用二倍图的方式来提高图片的清晰度。<br><br></p><p><b>原理：</b><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retina（视网膜屏幕）是一种显示技术 可以将把更多的物理像素点压缩至一块屏幕里，从而达到更高的分辨率 并提高屏幕显示的细腻程度。<img src="https://img-blog.csdnimg.cn/20210618120802760.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoaWxhbnpp,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 对于一张 50px * 50px 的图片，在手机Retina屏中打开 按照原本的物理像素比会放大倍速 这样会造成图片模糊<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过使用二倍图，提高图片质量 解决在高清设备中的模糊问题。<br><br>   <b>示例：</b><br>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;<br>&lt;title&gt;Myself&lt;/title&gt;<br>&lt;style&gt;<br>img:nth-child(2) &#123;<br>width: 50px;<br>/*移动设备中的图片会被放大， 所以先将二倍图压缩成原图大小，从而可以提高清晰度*/<br>height: 50px;<br>&#125;<br>&lt;/style&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>&lt;img src=&quot;images/apple50.jpg&quot; alt=&quot;&quot;&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><br>效果图：<br><img src="https://img-blog.csdnimg.cn/20210618120414167.png#pic_center" alt="在这里插入图片描述"></p><h2 id="3-流式布局"><a href="#3-流式布局" class="headerlink" title="3. 流式布局"></a><h3>3. 流式布局</h3></h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;流式布局是一种等比例缩放布局方式，在CSS代码中使用百分比来设置宽度，也称百分比自适应的布局。 流式布局实现方法是将CSS固定像素宽度换算为百分比宽度。换算公式如下: 目标元素宽度/父盒子宽度=百分数宽度<br><br><br><b>示例：</b></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable = no, initial-scale=1.0&quot;&gt;<br>&lt;title&gt;Myself&lt;/title&gt;<br>&lt;style&gt;<br>* &#123;<br>margin: 0;<br>padding: 0;<br>&#125;<br><br>section &#123;<br>width: 100%;<br>/* max-width: 980px;<br>min-width: 600px; */       /*根据需要还可以设置max-width， min-width */<br>margin: 0 auto;<br>&#125;<br><br>section div &#123;<br>float: left;<br>width: 50%;<br>height: 400px;<br>&#125;<br><br>section div:nth-child(1) &#123;<br>background-color: pink;<br>&#125;<br><br>section div:nth-child(2) &#123;<br>background-color: purple;<br>&#125;<br>&lt;/style&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>&lt;section&gt;<br>&lt;div&gt;&lt;/div&gt;<br>&lt;div&gt;&lt;/div&gt;<br>&lt;/section&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p>效果图：<br><br><img src="https://img-blog.csdnimg.cn/20210618123025156.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoaWxhbnpp,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><center>PC端</center><br><br><p><img src="https://img-blog.csdnimg.cn/20210618123330306.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoaWxhbnpp,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><center>移动端</center><br><h2 id="4-特殊样式"><a href="#4-特殊样式" class="headerlink" title="4. 特殊样式"></a><h3>4. 特殊样式</h3></h2><p><b>示例：</b></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable = no, initial-scale=1.0&quot;&gt;<br>&lt;title&gt;Myself&lt;/title&gt;<br>&lt;style&gt;<br><br>&lt;/style&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>&lt;a href=&quot;#&quot;&gt;Test&lt;/a&gt;<br>&lt;input type=&quot;button&quot; value=&quot;按钮&quot;&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20210618124419233.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoaWxhbnpp,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><br><br></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable = no, initial-scale=1.0&quot;&gt;<br>&lt;title&gt;Myself&lt;/title&gt;<br>&lt;style&gt;<br>a &#123;<br>-webkit-tap-highlight-color: transparent;<br>/*移动端点击链接会高亮， 设置为透明色*/<br>&#125;<br><br>input &#123;<br>-webkit-appearance: none;<br>/*消除默认样式*/<br>&#125;<br>&lt;/style&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>&lt;a href=&quot;#&quot;&gt;Test&lt;/a&gt;<br>&lt;input type=&quot;button&quot; value=&quot;按钮&quot;&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 布局 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rem适配布局</title>
      <link href="/2021/11/01/Rem-Layout/"/>
      <url>/2021/11/01/Rem-Layout/</url>
      
        <content type="html"><![CDATA[<h1 id="rem适配布局"><a href="#rem适配布局" class="headerlink" title="rem适配布局"></a>rem适配布局</h1><h2 id="rem单位"><a href="#rem单位" class="headerlink" title="rem单位"></a>rem单位</h2><p>rem是根em(root em)的缩写，是相对于根元素(html元素)的字体大小。</p><p>rem作用于非根元素字体大小时，相对于根元素字体大小；rem作用于根元素字体大小时，相对于其初始字体的大小。</p><p>比如，根元素（html）设置font-size = 12px;非根元素设置width: 2rem;则换成px表示就是24px。</p><p>整个页面只有一个html，通过修改html的文字大小，可以很好的控制页面中元素的大小。</p><h2 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>媒体查询(Media Query)是CSS3新语法。</p><ol><li>使用@media查询，可以针对不同的媒体类型定义不同的样式；</li><li>@media可以针对不同的屏幕尺寸设置不同的样式；</li><li>重置浏览器大小的过程中，页面也会根据浏览器的宽度和高度重新渲染页面；</li><li>苹果手机、Android手机平板等设备都用得到多媒体查询。</li></ol><h3 id="语法规范"><a href="#语法规范" class="headerlink" title="语法规范"></a>语法规范</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">@media mediatype and|not|only (media feature) &#123;<br>CSS-Code;<br>&#125;<br><br></code></pre></td></tr></table></figure><ol><li>用media开头</li><li>media type媒体类型</li><li>关键字and、not、only</li><li>media feature媒体特性必须有小括号包含</li></ol><h4 id="media-type查询类型"><a href="#media-type查询类型" class="headerlink" title="media type查询类型"></a>media type查询类型</h4><p>将不同的终端设备划分成不同的类型。称为媒体类型。</p><ol><li>all：用于所有设备</li><li>print：用于打印机和打印预览</li><li>screen：用于电脑屏幕、平板、手机等</li></ol><h4 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h4><p>关键字将媒体类型和媒体特性连接起来作为媒体查询的条件。</p><ol><li>and：相当于”且”的意思，即当媒体类型和媒体特性都符合条件才起作用；</li><li>not：相当于”非”的意思，排除某个媒体类型，可以省略</li><li>only：指定某个特定的媒体类型，可以省略</li></ol><h4 id="媒体特性"><a href="#媒体特性" class="headerlink" title="媒体特性"></a>媒体特性</h4><p>每个媒体类型都具有不同的特性，根据不同媒体类型特性来设置不同的展示风格。</p><p>常用：width，max-width，min-width</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;zh-CN&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>&lt;title&gt;Document&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;style&gt;<br>@media screen and (max-width: 800px) &#123;<br>body &#123;<br>background-color: pink;<br>&#125;<br>&#125;<br><br>@media screen and (max-width: 500px) &#123;<br>body &#123;<br>background-color: purple;<br>&#125;<br>&#125;<br>&lt;/style&gt;<br><br>&lt;body&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br><br></code></pre></td></tr></table></figure><p>当页面宽度小于等于500px时，页面背景色为紫色；当页面宽度大于500px小于等于800px时，页面背景色为粉色。</p><p>多个媒体特性示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">@media screen and (min-width: 540px) and (max-width: 969px) &#123;<br>body &#123;<br>background-color: green;<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="引入资源"><a href="#引入资源" class="headerlink" title="引入资源"></a>引入资源</h3><p>当样式比较多时，我们可以针对不同的媒体使用不同的样式表。</p><p>原理：直接在link中判断设备的尺寸，然后引用不同的css文件。</p><h4 id="语法规范-1"><a href="#语法规范-1" class="headerlink" title="语法规范"></a>语法规范</h4><p><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;mystylesheet.css&quot; media=&quot;media and|not|only (media feature)&quot;&gt;</code></p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;zh-CN&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>&lt;title&gt;Document&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/style320.css&quot; media=&quot;screen and (min-width: 320px)&quot;&gt;<br>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/style640.css&quot; media=&quot;screen and (min-width: 640px)&quot;&gt;<br><br>&lt;body&gt;<br>&lt;div&gt;1&lt;/div&gt;<br>&lt;div&gt;2&lt;/div&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br><br></code></pre></td></tr></table></figure><h2 id="less"><a href="#less" class="headerlink" title="less"></a>less</h2><h3 id="CSS弊端"><a href="#CSS弊端" class="headerlink" title="CSS弊端"></a>CSS弊端</h3><p>CSS是非程序是语言，没有变量、函数、作用域等概念。</p><ol><li>需要大量看似没有逻辑的代码，CSS冗余度较高</li><li>不方便维护及扩展，不利于复用</li><li>没有良好的计算能力</li></ol><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h3><p>Less（Leaner Style Sheets的缩写）是一门CSS扩展语言，成为CSS预处理器。</p><p>常见的CSS预处理器： Sass、Less、Stylus</p><p>Less作为CSS一种形式上的扩展，没有减少CSS的功能，而是在现有的CSS语法上，加入程序式语言的特性。</p><p>引入了变量、Mixin（混入）、运算以及函数等功能。大大简化了CSS编写，并且降低了CSS的维护成本，可以实现用更少的代码完成更多的事。</p><p>总结：Less是一门CSS预处理1语言，它扩展了CSS的动态特性。</p><p><a href="http://lesscss.cn/">Less官网</a></p><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>过程：</p><ol><li>新建后缀名为less的文件，书写less语句</li><li>less编译生成css文件</li><li>引入CSS文件</li></ol><h4 id="Less变量"><a href="#Less变量" class="headerlink" title="Less变量"></a>Less变量</h4><p>没有固定的值，可以改变的。颜色和数值经常使用。</p><p><code>@变量名:值;</code></p><p><b>变量命名规范</b></p><ol><li>必须以@为前缀</li><li>不能包含特殊字符</li><li>不能以数字开头</li><li>区分大小写</li></ol><p>使用示例：</p><p><img src="https://pic.imgdb.cn/item/6102825a5132923bf80bbd53.jpg"></p><h4 id="Less编译"><a href="#Less编译" class="headerlink" title="Less编译"></a>Less编译</h4><p>Less包含一套自定义的语法和一个解析器，用户根据这些语法定义自己的样式规则，这些规则最终会通过解析器，编译生成对应的CSS文件。</p><p>VSCode插件：Easy LESS插件可以实现</p><p>安装插件后，重新加载VSCode，之后只要保存less文件，会自动生成对应的CSS文件。</p><h4 id="Less嵌套"><a href="#Less嵌套" class="headerlink" title="Less嵌套"></a>Less嵌套</h4><p>实例：<br>CSS：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">.x .y &#123;<br>  background-color: #fff;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><p>Less:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">.x &#123;<br>  .y &#123;<br>background-color: #fff;<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>生成的CSS样式和上面的是一样的</p><br><p style = "color: red">如果遇到交集|伪类|伪元素选择器：<br />如果内层选择器前面没有&符号，则被解析为父选择器的后代；如果有，责备解析为父元素自身或父元素的伪类。</p><p>CSS:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">.header a:hover &#123;<br>  color: blue;<br>&#125;<br>.header a::before &#123;<br>  content: &quot;&quot;;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>Less: </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">.header a &#123;<br>  &amp;:hover &#123;<br>color: blue;<br>  &#125;<br>&#125;<br>.header a &#123;<br>  &amp;::before &#123;<br>content: &quot;&quot;;<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="Less运算"><a href="#Less运算" class="headerlink" title="Less运算"></a>Less运算</h4><p>和其他语言运算大同小异</p><ol><li>运算符左右两侧各自添加一个空格；</li><li>多个数参与运算，如果只有一个数有单位，则最后就是以这个单位为准；</li><li>多个数参与运算，如果多个数有单位，则最后就是以第一个单位为准；</li></ol><p>用上”/“的式子可能会不起作用，甚至会报错，需要用小括号包住整个式子或者除法的式子。</p><p>另外，Less注释为 <code>//注释内容</code>,并且不会出现在对应的CSS中。</p><p>Less:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">@border: 5px;    @size: 50px;    div &#123;      width: 200px + 50;      height: 200px - 50;      border: @border solid #ccc;      margin: 100px auto;    &#125;    p &#123;      width: (82rem / @size + 50px);      height: 82 / 50rem;      // 没有实现运算, height: 30 + 82 / 50rem; 会报错      // 改成 height: (30 + 82 / 50rem)      // 或 height: 30 + (82 / 50rem);      font-size: 82 + 15px + 3rem;    &#125;<br></code></pre></td></tr></table></figure><p>生成的CSS:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">div &#123;      width: 250px;      height: 150px;      border: 5px solid #ccc;      margin: 100px auto;    &#125;    p &#123;      width: 51.64rem;      height: 82 / 50rem;      font-size: 100px;    &#125;<br></code></pre></td></tr></table></figure><h2 id="rem适配方案"><a href="#rem适配方案" class="headerlink" title="rem适配方案"></a>rem适配方案</h2><h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><p>让一些不能等比自适应的元素，当设备尺寸发生改变时,等比例适配当前设备。</p><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><ol><li>使用媒体查询根据不同设备按比例设置html的字体大小</li><li>页面元素使用rem做单位。这样的话，当html字体大小变化（即不同设备）时，元素尺寸也会发生变化，从而达到等比例缩放的适配。</li></ol><h3 id="rem实际开发适配方案"><a href="#rem实际开发适配方案" class="headerlink" title="rem实际开发适配方案"></a>rem实际开发适配方案</h3><ol><li>首先选一套标准尺寸750为准</li><li>动态设置html标签font-size大小</li><li>元素大小取值方法</li></ol><p>①页面元素的rem值=页面元素值（px）/(屏幕宽度/划分的分数)<br>②屏幕宽度/划分的份数就是html&nbsp;&nbsp;font-size大小<br>③页面元素的rem值=页面元素值（px）/html&nbsp;&nbsp;font-size大小</p><p>@import 导入的css文件名：可以把一个样式文件导入到另一个样式文件中。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">@import &quot;common&quot;;<br></code></pre></td></tr></table></figure><p>和link相似，区别：link是把一个样式文件引入到html页面里面。</p><p>示例：</p><p><img src="https://pic.imgdb.cn/item/6107ef055132923bf88d211c.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;!DOCTYPE html&gt;    &lt;html lang=&quot;zh-CN&quot;&gt;        &lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;Document&lt;/title&gt;    &lt;/head&gt;    &lt;style&gt;    @media screen and (min-width: 320px) &#123;    html &#123;    font-size: 21.33px;    &#125;    &#125;        @media screen and (min-width: 750px) &#123;    html &#123;    font-size: 50px;    &#125;    &#125;        div &#123;    width: 2rem;    height: 2rem;    background-color: pink;    &#125;    &lt;/style&gt;        &lt;body&gt;    &lt;div&gt;&lt;/div&gt;    &lt;/body&gt;        &lt;/html&gt;<br></code></pre></td></tr></table></figure><p>rem适配方案1：</p><ol><li>less</li><li>媒体查询</li><li>rem</li><li>插件easy less</li></ol><p>rem适配方案2：</p><ol><li>flexible.js</li><li>rem</li><li>插件cssrem</li></ol><p>参考：<br>pink老师前端入门教程</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 布局 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初步了解hexo主题matery</title>
      <link href="/2021/10/31/blog-skill-1/"/>
      <url>/2021/10/31/blog-skill-1/</url>
      
        <content type="html"><![CDATA[<ol><li>source文件夹：存放资源的文件夹，包括css、js、图片等</li><li>languages文件夹：把对应的单词映射成中文、繁体中文等</li><li>_config.yml：主题的配置文件</li><li>layout文件夹：使用ejs语言实现部署后，把页面变成html文件</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>数据库学习笔记(二)</title>
      <link href="/2021/10/29/SQL-2/"/>
      <url>/2021/10/29/SQL-2/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库学习笔记-二"><a href="#数据库学习笔记-二" class="headerlink" title="数据库学习笔记(二)"></a>数据库学习笔记(二)</h1><h2 id="1-数据库安全性"><a href="#1-数据库安全性" class="headerlink" title="1. 数据库安全性"></a>1. 数据库安全性</h2><h3 id="1-1-TCSEC-TDI安全级别划分"><a href="#1-1-TCSEC-TDI安全级别划分" class="headerlink" title="1.1 TCSEC/TDI安全级别划分"></a>1.1 TCSEC/TDI安全级别划分</h3><p><img src="https://pic.imgdb.cn/item/6170227f2ab3f51d91e74c50.jpg"></p><p><b style="color: red">B1级：”安全”或”可信的”产品 ，真正意义上的安全产品</b></p><h3 id="1-2-数据库管理系统安全性控制模型"><a href="#1-2-数据库管理系统安全性控制模型" class="headerlink" title="1.2 数据库管理系统安全性控制模型"></a>1.2 数据库管理系统安全性控制模型</h3><p><img src="https://pic.imgdb.cn/item/617023a82ab3f51d91e8829f.jpg"></p><p><strong>存取控制流程</strong>：</p><ol><li>数据库管理系统对提出SQL访问请求的数据库用户进行身份鉴别，防止不可信用户使用系统</li><li>在SQL处理层进行自主存取控制和强制存取控制，甚至还可以进行推理控制</li><li>还可以对用户访问行为和系统关键操作进行审计，对异常用户行为进行简单入侵检测</li></ol><h3 id="1-3-数据库安全性控制的常用方法"><a href="#1-3-数据库安全性控制的常用方法" class="headerlink" title="1.3 数据库安全性控制的常用方法"></a>1.3 数据库安全性控制的常用方法</h3><ol><li>用户标识和鉴定</li><li>存取控制</li><li>视图</li><li>审计</li><li>数据加密</li></ol><h3 id="1-4-数据库安全性控制"><a href="#1-4-数据库安全性控制" class="headerlink" title="1.4 数据库安全性控制"></a>1.4 数据库安全性控制</h3><h4 id="1-4-1-用户身份鉴别"><a href="#1-4-1-用户身份鉴别" class="headerlink" title="1.4.1 用户身份鉴别"></a>1.4.1 用户身份鉴别</h4><ul><li>静态口令鉴别</li><li>动态口令鉴别</li><li>生物特征鉴别</li><li>智能卡鉴别</li></ul><h4 id="1-4-2-存取控制"><a href="#1-4-2-存取控制" class="headerlink" title="1.4.2 存取控制"></a>1.4.2 存取控制</h4><p><b style="color: red">自主存取控制</b>:</p><ul><li>C2级</li><li>用户对不同的数据对象有不同的存取权限</li><li>不同的用户对同一对象有不同的权限</li><li>用户可以将其拥有的存取权限授予其他用户</li></ul><p><b style="color: red">强制存取控制</b>:</p><ul><li>B1级</li><li>每一个数据对象被标以一定的密级</li><li>每个用户也会被授予某个级别的许可证</li><li>对于每一个对象，只有具有合法许可证的用户才可以存取</li></ul><h4 id="1-4-3-授权-授予与回收"><a href="#1-4-3-授权-授予与回收" class="headerlink" title="1.4.3 授权: 授予与回收"></a>1.4.3 授权: 授予与回收</h4><ol><li><p>grant</p><p>格式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">grant</span> <span class="hljs-operator">&lt;</span>权限<span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>权限<span class="hljs-operator">&gt;</span>]...<br><span class="hljs-keyword">on</span> <span class="hljs-operator">&lt;</span>对象类型<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>对象名<span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>对象类型<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>对象名<span class="hljs-operator">&gt;</span>]...<br><span class="hljs-keyword">to</span> <span class="hljs-operator">&lt;</span>用户<span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>用户<span class="hljs-operator">&gt;</span>]...<br>[<span class="hljs-keyword">with</span> <span class="hljs-keyword">grant</span> option]# 指定这个的话，表示权限可以再授予，没有指定的话，则不行<br></code></pre></td></tr></table></figure><p>例子：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">grant</span> <span class="hljs-keyword">select</span><br><span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> Student<br><span class="hljs-keyword">to</span> U1;# 把查询Student表的权限授予用户U1<br><br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">all</span> priviliges<br><span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> Student, Course<br><span class="hljs-keyword">to</span> U2, U3; # 把Student表和Course表的全部权限授予用户U2和U3<br><br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">select</span><br><span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> Student<br><span class="hljs-keyword">to</span> public;# 把查询Student表的权限授予所有用户<br><br><span class="hljs-keyword">grant</span> update(Sno), <span class="hljs-keyword">select</span><br><span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> Student<br><span class="hljs-keyword">to</span> U4# 把查询Student表和修改学号的权限授予用户U4<br><span class="hljs-keyword">with</span> <span class="hljs-keyword">grant</span> option; # 允许用户U4再把此权限授予其他用户<br><br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">select</span><br><span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> Student<br><span class="hljs-keyword">to</span> U5;# 用户U4可以把自己的<span class="hljs-keyword">select</span>权限授予U5, U5不能再传播此权限<br></code></pre></td></tr></table></figure></li><li><p>revoke</p><p>格式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">revoke</span> <span class="hljs-operator">&lt;</span>权限<span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>权限<span class="hljs-operator">&gt;</span>]...<br><span class="hljs-keyword">on</span> <span class="hljs-operator">&lt;</span>对象类型<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>对象名<span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>对象类型<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>对象名<span class="hljs-operator">&gt;</span>]...<br><span class="hljs-keyword">from</span> <span class="hljs-operator">&lt;</span>用户<span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>用户<span class="hljs-operator">&gt;</span>]...[cascade <span class="hljs-operator">|</span> restrict]<br></code></pre></td></tr></table></figure><p>例子：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">revoke</span> <span class="hljs-keyword">select</span><br><span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> Student<br><span class="hljs-keyword">from</span> public； # 收回所有用户对标Student的查询权限<br><br><span class="hljs-keyword">revoke</span> <span class="hljs-keyword">select</span> <br><span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> Student<br><span class="hljs-keyword">from</span> U4 cascade; # 将用户U5的<span class="hljs-keyword">select</span>权限收回的时候，需要的使用cascade，否则拒绝执行该语句， 因为用户U4已经把<span class="hljs-keyword">select</span>权限授予给U5了，所有收回U4的<span class="hljs-keyword">select</span>权限的时候需要级联，收回用户U5的权限，因为U5的权限来自U4,U4没了，U5自然也会没<br></code></pre></td></tr></table></figure><p><strong>数据库管理员</strong>：</p><ul><li>拥有所有对象的所有权限</li><li>根据实际情况将不同的权限授予不同用户</li></ul><p><strong>用户</strong>：</p><ul><li>拥有自己建立的对象的全部的操作权限</li><li>可以使用grant，把权限授予其他用户</li></ul><p><strong>被授权的用户</strong>：</p><ul><li>如果具有”继续授权”的许可，则可以把获得的权限再授予其他用户</li></ul></li><li><p>创建数据库模式的权限</p><ul><li><p>数据库管理员在创建用户时实现</p></li><li><p>语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> <span class="hljs-operator">&lt;</span>username<span class="hljs-operator">&gt;</span><br>[<span class="hljs-keyword">with</span>][DBA<span class="hljs-operator">|</span>RESOURCE<span class="hljs-operator">|</span><span class="hljs-keyword">CONNECT</span>];<br></code></pre></td></tr></table></figure><p><strong>CONNECT权限</strong>：拥有CONNECT权限的用户不能创建新用户、模式、基本表，只能登录数据库</p><p><strong>RESOURCE权限</strong>：能创建基本表和视图，但不能创建模式、新用户</p><p><strong>DBA权限</strong>：可以创建新用户、创建模式、创建基本表和视图。DBA拥有对所有数据库对象的存取权限，还可以吧这些权限授予一般用户</p></li></ul></li></ol><h4 id="1-4-4-数据库角色"><a href="#1-4-4-数据库角色" class="headerlink" title="1.4.4 数据库角色"></a>1.4.4 数据库角色</h4><p><strong>数据库角色</strong>：被命名的一组与数据库操作相关的权限</p><ul><li>角色是权限的集合</li><li>可以为一组具有相同权限的用户创建一个角色，用来简化授权的过程</li></ul><ol><li><p><strong>角色的创建</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> role <span class="hljs-operator">&lt;</span>角色名<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure></li><li><p>给角色授权</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">grant</span> <span class="hljs-operator">&lt;</span>权限<span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>权限<span class="hljs-operator">&gt;</span>]...<br><span class="hljs-keyword">on</span> <span class="hljs-operator">&lt;</span>对象类型<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>对象名<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">to</span> <span class="hljs-operator">&lt;</span>角色<span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>角色<span class="hljs-operator">&gt;</span>]...<br></code></pre></td></tr></table></figure></li><li><p>将一个角色授予其他的角色或用户</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">grant</span> <span class="hljs-operator">&lt;</span>角色<span class="hljs-number">1</span><span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>角色<span class="hljs-number">2</span><span class="hljs-operator">&gt;</span>]...<br><span class="hljs-keyword">to</span> <span class="hljs-operator">&lt;</span>角色<span class="hljs-number">3</span><span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>用户<span class="hljs-number">1</span><span class="hljs-operator">&gt;</span>]...<br>[<span class="hljs-keyword">with</span> admin option] # 指定<span class="hljs-keyword">with</span> admin option的话，可以把权限授予其他角色或用户<br></code></pre></td></tr></table></figure></li><li><p>角色权限的收回</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">revoke</span> <span class="hljs-operator">&lt;</span>权限<span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>权限<span class="hljs-operator">&gt;</span>]...<br><span class="hljs-keyword">on</span> <span class="hljs-operator">&lt;</span>对象类型<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>对象名<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">from</span> <span class="hljs-operator">&lt;</span>角色<span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>角色<span class="hljs-operator">&gt;</span>]...<br></code></pre></td></tr></table></figure></li></ol><p>例子：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> role R1;  # 创建一个角色R1<br><br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">select</span>, update, <span class="hljs-keyword">insert</span><br><span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> Student<br><span class="hljs-keyword">to</span> R1;# 给角色R1授予Student表的<span class="hljs-keyword">select</span>、update、<span class="hljs-keyword">insert</span>权限<br><br><span class="hljs-keyword">grant</span> R1<br><span class="hljs-keyword">to</span> clz, czh;# 将角色R1授予clz、czh，使他们具有角色R1所包含的全部权限<br><br><span class="hljs-keyword">revoke</span> R1<br><span class="hljs-keyword">from</span> clz;# 通过R1一次性收回clz的这<span class="hljs-number">3</span>个权限<br><br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">delete</span><br><span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> Student<br><span class="hljs-keyword">to</span> R1;# 使角色R1在原来的基础上增加了Student表的<span class="hljs-keyword">delete</span>权限<br><br><span class="hljs-keyword">revoke</span> <span class="hljs-keyword">select</span> <br><span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> Student<br><span class="hljs-keyword">from</span> R1;# 收回R1的<span class="hljs-keyword">select</span>权限<br></code></pre></td></tr></table></figure><h4 id="1-4-4-强制存取控制方法"><a href="#1-4-4-强制存取控制方法" class="headerlink" title="1.4.4 强制存取控制方法"></a>1.4.4 强制存取控制方法</h4><p><strong>强制存取控制(MAC)</strong>:</p><ul><li>保证更高程度的安全性</li><li>用户不能直接感知或进行控制</li><li>适用于对数据有严格而固定密级分类的部门</li></ul><p>在强制存取控制中，数据库管理系统所管理的全部实体被分为主体和客体两大类</p><p><strong>主体</strong>是系统中的活动实体</p><ul><li>包括数据库管理系统所管理的实际用户</li><li>也包括代表用户的各个进程</li></ul><p><strong>客体</strong>是系统中的被动实体，受主体控制</p><ul><li>文件、基本表、索引、视图等</li></ul><p><strong>敏感度标记</strong></p><ul><li><p>对于主体和客体，DBMS为它们每一个实例指派一个敏感度标记</p></li><li><p>敏感度标记可分为若干级别</p><ul><li>绝密(TS)</li><li>机密(S)</li><li>可信(C)</li><li>公开(P)</li></ul><p><strong>TS&gt;=S&gt;=C&gt;=p</strong></p></li><li><p>主体的敏感度标记称为许可证级别</p></li><li><p>客体的敏感度标记称为密级</p></li></ul><p>强制存取控制规则：</p><ul><li>仅当主体的许可证级别<b style="color: red">大于或等于</b>客体的密级时，该主体才能<b style="color: red">读</b>相应的客体</li><li>仅当主体的许可证级别<b style="color: red">小于或等于</b>客体的密级时，该主体才能<b style="color: red">写</b>相应的客体</li></ul><p><strong>自主存取控制与强制存取控制共同构成数据库管理系统的安全机制</strong></p><ul><li>先进行自主存取控制检查(DAC检查)，通过自主存取控制检查的数据对象再由系统进行强制存取控制检查(MAC检查)，只有通过MAC检查的数据对象才可以存取。</li></ul><h3 id="1-5-视图机制"><a href="#1-5-视图机制" class="headerlink" title="1.5 视图机制"></a>1.5 视图机制</h3><ul><li>把要保密的数据对无权存取这些数据的用户隐藏，对数据提供一定程度的安全保护</li><li>间接实现支持存取谓词的用户权限定义</li></ul><p>例子：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> CS_Student<br><span class="hljs-keyword">as</span> <br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sdept <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;CS&#x27;</span>;# 建立计算机系学生的视图<br><br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">select</span> <br><span class="hljs-keyword">on</span> CS_Student<br><span class="hljs-keyword">to</span> clz;<br><br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">all</span> priviliges<br><span class="hljs-keyword">on</span> CS_Student<br><span class="hljs-keyword">to</span> czh;# 在视图上进一步定义存取权限<br></code></pre></td></tr></table></figure><h3 id="1-6-审计"><a href="#1-6-审计" class="headerlink" title="1.6 审计"></a>1.6 审计</h3><p>概念：</p><ul><li>启用一个专用的审计日志，将用户对数据库的所有操作记录在上面</li><li>审计员可以利用审计记录，监控数据库中的各种行为，找出非法存取数据的人、时间和内容</li><li><strong>C2以上安全级别的DBMS必须具有审计功能</strong></li></ul><p><b style="color: red">应该只有保密级别高的才需要设置审计功能，因为审计很费时间和空间，会增加很多开销</b></p><p><strong>用户级审计</strong>：</p><ul><li>任何用户可设置的审计</li><li>主要是用户针对自己创建的数据库表和视图进行审计</li></ul><p><strong>系统级审计</strong>：</p><ul><li>只能由数据库管理员设置</li><li>可以监测成功或失败的登录请求、监测授权和收回操作以及其他数据库权限下的操作</li></ul><h4 id="1-6-1-audit语句"><a href="#1-6-1-audit语句" class="headerlink" title="1.6.1 audit语句"></a>1.6.1 audit语句</h4><p><strong>audit语句</strong>：设置审计功能</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">audit <span class="hljs-keyword">alter</span>, update<br><span class="hljs-keyword">on</span> Student;# 对修改Student表结构或修改表数据的操作进行审计<br></code></pre></td></tr></table></figure><h4 id="1-6-2-noaudit语句"><a href="#1-6-2-noaudit语句" class="headerlink" title="1.6.2 noaudit语句"></a>1.6.2 noaudit语句</h4><p><strong>noaudit语句</strong>：取消审计功能</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">noaudit <span class="hljs-keyword">alter</span>, update<br><span class="hljs-keyword">on</span> Student;# 取消对Student表的审计<br></code></pre></td></tr></table></figure><h3 id="1-7-数据加密"><a href="#1-7-数据加密" class="headerlink" title="1.7 数据加密"></a>1.7 数据加密</h3><h4 id="1-7-1-存储加密"><a href="#1-7-1-存储加密" class="headerlink" title="1.7.1 存储加密"></a>1.7.1 存储加密</h4><p><strong>透明存储加密</strong>：</p><ul><li>内核级加密保护方式对用户完全透明</li><li>将数据在写到磁盘时对数据进行，授权用户读取数据时再对其进行解密</li><li>数据库的管理应用程序不需要做任何修改，只需要在创建表语句中说明需加密的字段就可以</li></ul><p><b style="color: red">性能较好，安全完备性较高</b></p><p><strong>非透明存储加密</strong>：</p><ul><li>通过多个加密函数实现</li></ul><h4 id="1-7-2-传输加密"><a href="#1-7-2-传输加密" class="headerlink" title="1.7.2 传输加密"></a>1.7.2 传输加密</h4><p><strong>链路加密</strong>：</p><ul><li>在链路层进行加密</li><li>传输信息由报头和报文两部分组成</li><li>报文和报头都加密</li></ul><p><strong>端对端加密</strong>：</p><ul><li>在发送端加密，接收端解密</li><li>只加密报文，不加密报头</li><li>容易被非法监听者发现并从中获取敏感信息</li></ul><p><img src="https://pic.imgdb.cn/item/6170cfe42ab3f51d915fbfe3.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python(三)</title>
      <link href="/2021/10/29/python-3/"/>
      <url>/2021/10/29/python-3/</url>
      
        <content type="html"><![CDATA[<h1 id="python-三-字符串与正则表达式"><a href="#python-三-字符串与正则表达式" class="headerlink" title="python(三)       字符串与正则表达式"></a>python(三)       字符串与正则表达式</h1><h2 id="1-字符串"><a href="#1-字符串" class="headerlink" title="1 字符串"></a>1 字符串</h2><h3 id="1-1-字符串格式化"><a href="#1-1-字符串格式化" class="headerlink" title="1.1 字符串格式化"></a>1.1 字符串格式化</h3><p>语法：<code>&#39;格式字符&#39; %要格式化的内容</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">16</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%o&#x27;</span> %x)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%x&#x27;</span> %x)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%e&#x27;</span> %x)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%d, %c&#x27;</span> %(<span class="hljs-number">65</span>, <span class="hljs-number">65</span>))   <span class="hljs-comment"># 如果要求格式化的对象多于一个，要放在元组中</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%s&#x27;</span> %[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br></code></pre></td></tr></table></figure><p>使用format()方法进行格式化</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;The number &#123;0&#125; in hex is: &#123;0:#x&#125;, the number &#123;1:,&#125; in oct is &#123;1:#o&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">16</span>, <span class="hljs-number">1234</span>))<br><span class="hljs-comment"># 字符串里的&#123;&#125;相当于占位符，把后面format()的参数放进去，按索引值放，即0代表放第一个参数，&#123;0:#x&#125;代表把第一个参数转换为16进制</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;My name is &#123;name&#125;, my age is &#123;age&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(name = <span class="hljs-string">&#x27;clz&#x27;</span>, age = <span class="hljs-number">21</span>))<br><br>position = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;x: &#123;0[0]&#125;, y:&#123;0[1]&#125;, z: &#123;0[2]&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(position))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#123;0:.4f&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">1.23456</span>))    <span class="hljs-comment"># 指定小数位数</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#123;0:.2%&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">1</span>/<span class="hljs-number">3</span>))        <span class="hljs-comment"># 格式化为百分数</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#123;0:^10.2%&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">1</span>/<span class="hljs-number">3</span>))     <span class="hljs-comment"># ^表示居中对齐，&lt;表示左对齐，&gt;表示右对齐</span><br><br></code></pre></td></tr></table></figure><p>从Python 3.6.x开始支持一种新的字符串格式化方法，官方叫做Formatted String Literals, 简称为f-字符串,在Python 3.8之后的版本中，支持print(f’{width=}’)形式的用法++9+++</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">w = <span class="hljs-number">1</span><br>h = <span class="hljs-number">2</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;width is <span class="hljs-subst">&#123;w&#125;</span>, height is <span class="hljs-subst">&#123;h&#125;</span>&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="1-2-字符串常用方法"><a href="#1-2-字符串常用方法" class="headerlink" title="1.2 字符串常用方法"></a>1.2 字符串常用方法</h3><p>**find()、rfind()、index()、rindex()、count()**：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">s = <span class="hljs-string">&#x27;apple, peach, banana, peach&#x27;</span><br><span class="hljs-built_in">print</span>(s.find(<span class="hljs-string">&#x27;peach&#x27;</span>))  <span class="hljs-comment"># 返回第一次出现的位置</span><br><span class="hljs-built_in">print</span>(s.find(<span class="hljs-string">&#x27;peach&#x27;</span>, <span class="hljs-number">8</span>))  <span class="hljs-comment"># 从指定位置开始查找</span><br><span class="hljs-built_in">print</span>(s.find(<span class="hljs-string">&#x27;peaach&#x27;</span>, <span class="hljs-number">6</span>, <span class="hljs-number">24</span>))  <span class="hljs-comment"># 在指定范围中查找， 查找的字符串要完全在范围内才可以找到，只有开始或结束在范围内也会返回-1</span><br><br><span class="hljs-built_in">print</span>(s.rfind(<span class="hljs-string">&#x27;p&#x27;</span>))   <span class="hljs-comment"># rfind()是从后往前找</span><br><br><span class="hljs-built_in">print</span>(s.index(<span class="hljs-string">&#x27;p&#x27;</span>))     <span class="hljs-comment"># 返回首次出现的位置</span><br><span class="hljs-built_in">print</span>(s.index(<span class="hljs-string">&#x27;pe&#x27;</span>))<br><br><span class="hljs-comment"># print(s.index(&#x27;ppp&#x27;))      # 找不到会抛出异常</span><br><br><span class="hljs-built_in">print</span>(s.count(<span class="hljs-string">&#x27;p&#x27;</span>))     <span class="hljs-comment"># 计算子字符串出现的次数</span><br></code></pre></td></tr></table></figure><p>**split()、rsplit()、partition()、rpatition()**：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">s = <span class="hljs-string">&#x27;a, b, c, d, e, hello&#x27;</span><br>li = s.split(<span class="hljs-string">&#x27;,&#x27;</span>)   <span class="hljs-comment"># 把字符串按指定分隔符分割，变成列表</span><br><span class="hljs-built_in">print</span>(li)<br><br>li = s.partition(<span class="hljs-string">&#x27;,&#x27;</span>)   <span class="hljs-comment"># 将字符串按指定的分隔符分割成三部分，分隔符前的字符串，分隔符，和分割符后的字符串，以元组形式</span><br><span class="hljs-built_in">print</span>(li)<br>li = s.rpartition(<span class="hljs-string">&#x27;,&#x27;</span>)<br><span class="hljs-built_in">print</span>(li)<br><br><span class="hljs-comment"># split()和rsplit()方法，如果不指定分隔符，则字符串中的任何空白符号(包括空格、换行符，制表符等)都会被认为是分隔符</span><br>s = <span class="hljs-string">&#x27;hello\t\tworld   I am\n\n\nclz&#x27;</span><br><span class="hljs-built_in">print</span>(s.split())<br><span class="hljs-built_in">print</span>(s.split(<span class="hljs-literal">None</span>, <span class="hljs-number">2</span>)) <span class="hljs-comment"># 指定最大分隔次数， None相当于不指定分隔符，即分隔符会是所有的空白字符</span><br></code></pre></td></tr></table></figure><p>**join()**：效率比直接使用’+’拼接高</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># join()方法是将列表或其他可迭代对象中的字符串以指定的字符串连接， 如果当中含有非字符串的元素，则会抛出异常</span><br>li = [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;True&#x27;</span>]<br>sep = <span class="hljs-string">&#x27;::&#x27;</span><br><span class="hljs-built_in">print</span>(sep.join(li))<br></code></pre></td></tr></table></figure><p>**lower()、upper()、capitalize()、title()、swapcase()**：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">s = <span class="hljs-string">&#x27;Hello World, hello python&#x27;</span><br><span class="hljs-built_in">print</span>(s.lower())    <span class="hljs-comment"># 转换成小写</span><br><span class="hljs-built_in">print</span>(s.upper())    <span class="hljs-comment"># 转化成大写</span><br><span class="hljs-built_in">print</span>(s.capitalize())   <span class="hljs-comment"># 字符串首字母大写</span><br><span class="hljs-built_in">print</span>(s.title())        <span class="hljs-comment"># 每个单词首字母大写</span><br><span class="hljs-built_in">print</span>(s.swapcase())     <span class="hljs-comment"># 大小写互换</span><br></code></pre></td></tr></table></figure><p>**replace()**：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">words = (<span class="hljs-string">&#x27;非法&#x27;</span>, <span class="hljs-string">&#x27;话&#x27;</span>, <span class="hljs-string">&#x27;暴力&#x27;</span>)<br>text = <span class="hljs-string">&#x27;这句话有非法内容&#x27;</span><br><br><span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> words:<br>    <span class="hljs-keyword">if</span> word <span class="hljs-keyword">in</span> text:<br>        text = text.replace(word, <span class="hljs-string">&#x27;**&#x27;</span>)<br><br><span class="hljs-built_in">print</span>(text)<br></code></pre></td></tr></table></figure><p><strong>maketrans()、translate()</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">table = <span class="hljs-string">&#x27;&#x27;</span>.maketrans(<span class="hljs-string">&#x27;0123456789&#x27;</span>, <span class="hljs-string">&#x27;零一二三四五六七八九&#x27;</span>)    <span class="hljs-comment"># 生成字符映射表，可以搭配translate()使用，把字符串中第一个参数内的字符转换为对应第二个参数中的字符(转换过程是单向的)</span><br>s = <span class="hljs-string">&#x27;2021年10月1日&#x27;</span><br><span class="hljs-built_in">print</span>(s.translate(table))<br>s = <span class="hljs-string">&#x27;二零二一年一零月一日&#x27;</span><br><span class="hljs-built_in">print</span>(s.translate(table))<br></code></pre></td></tr></table></figure><p>**strip()、rstrip()、lstrip()**：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">s = <span class="hljs-string">&#x27;  hello \n&#x27;</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(s))<br><span class="hljs-built_in">print</span>(s)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(s.strip()))   <span class="hljs-comment"># 删除两端空白字符</span><br><span class="hljs-built_in">print</span>(s.strip())<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(s.rstrip()))<br><span class="hljs-built_in">print</span>(s.rstrip())       <span class="hljs-comment"># 删除右端空白字符</span><br><br>s = <span class="hljs-string">&#x27;aabbccddffee&#x27;</span><br><span class="hljs-built_in">print</span>(s.lstrip(<span class="hljs-string">&#x27;ab&#x27;</span>))   <span class="hljs-comment"># 删除左端指定字符, 是按字符依次进行删除的，即先删除左端字符a，然后再删除左端字符b</span><br><span class="hljs-built_in">print</span>(s.lstrip(<span class="hljs-string">&#x27;ac&#x27;</span>))   <span class="hljs-comment"># 删除左端字符a后，因为c不在左端，所以不会删除c</span><br></code></pre></td></tr></table></figure><p>**eval()**：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">eval</span>(<span class="hljs-string">&#x27;1 + 1&#x27;</span>))    <span class="hljs-comment"># eval()把任意字符串转换为Python表达式并求值</span><br><br>a = <span class="hljs-number">3</span><br>b = <span class="hljs-number">4</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">eval</span>(<span class="hljs-string">&#x27;a + b&#x27;</span>))<br></code></pre></td></tr></table></figure><p>使用eval()需要注意的问题：它可以计算任何合法表达式的值，即用户可以用特殊的字符串进行攻击</p><p><strong>in</strong>：</p><p>使用关键字来判断一个字符串是否在另一个字符串中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;abc&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;aabbcc&#x27;</span>)    <span class="hljs-comment"># False</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;abc&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;abcabc&#x27;</span>)    <span class="hljs-comment"># True</span><br></code></pre></td></tr></table></figure><p>**startswith()、endswith()**：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">s = <span class="hljs-string">&quot;Hello World!&quot;</span><br><span class="hljs-built_in">print</span>(s.startswith(<span class="hljs-string">&#x27;He&#x27;</span>))   <span class="hljs-comment"># 用来判断字符串是否以指定字符串开始</span><br><span class="hljs-built_in">print</span>(s.startswith(<span class="hljs-string">&#x27;He&#x27;</span>, <span class="hljs-number">5</span>))    <span class="hljs-comment"># 可以接收整数参数来限定字符串的检测范围</span><br><span class="hljs-built_in">print</span>(s.startswith(<span class="hljs-string">&#x27;He&#x27;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>))<br></code></pre></td></tr></table></figure><p>其他方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;1234abcd&#x27;</span>.isalnum())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;1234abcd&#x27;</span>.isalpha())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;1234abcd&#x27;</span>.isdigit())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;abcd&#x27;</span>.isalpha())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;1234.053&#x27;</span>.isdigit())     <span class="hljs-comment"># 用来判断字符串是不是数字字符，小数点.不是数字字符，所以返回False</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;00123400&#x27;</span>.isdigit())<br><span class="hljs-built_in">print</span>()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Hello world!&#x27;</span>.center(<span class="hljs-number">20</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Hello world!&#x27;</span>.center(<span class="hljs-number">20</span>, <span class="hljs-string">&#x27;=&#x27;</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Hello world!&#x27;</span>.ljust(<span class="hljs-number">20</span>, <span class="hljs-string">&#x27;=&#x27;</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Hello world!&#x27;</span>.rjust(<span class="hljs-number">20</span>, <span class="hljs-string">&#x27;=&#x27;</span>))<br></code></pre></td></tr></table></figure><h3 id="1-3-字符串常量"><a href="#1-3-字符串常量" class="headerlink" title="1.3 字符串常量"></a>1.3 字符串常量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> string<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;数字: &#x27;</span>, string.digits)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;字母: &#x27;</span>, string.ascii_letters)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;特殊符号: &#x27;</span>, string.punctuation)<br><br><span class="hljs-comment"># 下面是生成8位长度的随机密码的例子</span><br><br>x = string.digits + string.ascii_letters + string.punctuation<br><br><span class="hljs-keyword">import</span> random<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#x27;</span>.join([random.choice(x) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">8</span>)]))   <span class="hljs-comment"># random.choice() 方法返回一个列表，元组或字符串的随机项</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#x27;</span>.join(random.sample(x, <span class="hljs-number">8</span>)))<br></code></pre></td></tr></table></figure><h2 id="2-正则表达式"><a href="#2-正则表达式" class="headerlink" title="2 正则表达式"></a>2 正则表达式</h2><p>正则表达式使用预定义的特定模式去匹配一类具有共同特征的字符串，主要用于字符串处理，可以快速、准确地完成复杂的查找、替换等处理任务。</p><h3 id="2-1-直接使用re模块函数"><a href="#2-1-直接使用re模块函数" class="headerlink" title="2.1 直接使用re模块函数"></a>2.1 直接使用re模块函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re       <span class="hljs-comment"># 在Python中，主要使用re模块来实现正则表达式的操作</span><br>text = <span class="hljs-string">&#x27;alpha,beta,gamma,delta&#x27;</span><br><span class="hljs-built_in">print</span>(re.split(<span class="hljs-string">&#x27;[,]+&#x27;</span>, text))       <span class="hljs-comment"># 根据匹配项分割字符串</span><br><br>pat = <span class="hljs-string">&#x27;[a-zA-Z]+&#x27;</span><br><span class="hljs-built_in">print</span>(re.findall(pat, text))    <span class="hljs-comment"># 在text中找符合pat的单词</span><br><br>pat = <span class="hljs-string">&#x27;&#123;name&#125;&#x27;</span><br>text = <span class="hljs-string">&#x27;Dear &#123;name&#125;&#x27;</span><br><span class="hljs-built_in">print</span>(re.sub(pat, <span class="hljs-string">&#x27;clz&#x27;</span>, text))    <span class="hljs-comment"># 将text中的pat匹配项用第二个参数替换</span><br>s = <span class="hljs-string">&#x27;a s d&#x27;</span><br><span class="hljs-built_in">print</span>(re.sub(<span class="hljs-string">&#x27;a|s|d&#x27;</span>, <span class="hljs-string">&#x27;test&#x27;</span>, s))   <span class="hljs-comment"># 将s中的a、s、d替换成test</span><br><span class="hljs-built_in">print</span>(s)                            <span class="hljs-comment"># 不会改变原字符串</span><br><br><span class="hljs-built_in">print</span>(re.escape(<span class="hljs-string">&#x27;http://www.python.org&#x27;</span>))   <span class="hljs-comment"># 字符串转义</span><br><br><span class="hljs-built_in">print</span>(re.match(<span class="hljs-string">&#x27;a|b&#x27;</span>, <span class="hljs-string">&#x27;acgs&#x27;</span>))     <span class="hljs-comment"># re.match()在字符串的开始处匹配模式，匹配成功</span><br><span class="hljs-built_in">print</span>(re.match(<span class="hljs-string">&#x27;a|b&#x27;</span>, <span class="hljs-string">&#x27;cde&#x27;</span>))       <span class="hljs-comment"># 匹配不成功，返回None</span><br><br><span class="hljs-built_in">print</span>(re.match(<span class="hljs-string">&#x27;done|quit&#x27;</span>, <span class="hljs-string">&#x27;testdone&#x27;</span>))    <span class="hljs-comment"># 是在字符串的开始处进行匹配模式，所以会匹配不成功</span><br><span class="hljs-built_in">print</span>(re.search(<span class="hljs-string">&#x27;done|quit&#x27;</span>, <span class="hljs-string">&#x27;testdone&#x27;</span>))   <span class="hljs-comment"># re.search()在整个字符串中寻找模式，所以会匹配成功</span><br><br>text = <span class="hljs-string">&#x27;&#x27;&#x27;good</span><br><span class="hljs-string">bad</span><br><span class="hljs-string">test</span><br><span class="hljs-string">clz&#x27;&#x27;&#x27;</span><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">r&#x27;\w+&#x27;</span>, text))<span class="hljs-comment"># r用来阻止转义</span><br><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">r&#x27;^\w+$&#x27;</span>, text))   <span class="hljs-comment"># \w不能匹配换行符,即有换行就会返回空列表，包括\n形式的换行</span><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">r&#x27;^.+$&#x27;</span>, text, re.S))      <span class="hljs-comment"># 单行模式，此时.可以匹配换行符，会把换行符变为\n</span><br><span class="hljs-built_in">print</span>(re.findall(<span class="hljs-string">r&#x27;^.+$&#x27;</span>, text, re.M))      <span class="hljs-comment"># 多行模式，会把每一行变为列表中的元素</span><br><br></code></pre></td></tr></table></figure><h3 id="2-2-使用正则表达式对象"><a href="#2-2-使用正则表达式对象" class="headerlink" title="2.2 使用正则表达式对象"></a>2.2 使用正则表达式对象</h3><p>使用正则表达式对象的用法和正常使用re模块基本一样，首先通过re模块的compile()函数将正则表达式编译生成正则表达式对象，然后再使用正则表达式对象提供的方法进行字符串处理。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br>example = <span class="hljs-string">&#x27;ShanDong Institute of Business and Technology is a very beautiful school.&#x27;</span><br>pattern = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&#x27;\bB\w+\b&#x27;</span>)   <span class="hljs-comment"># 以B开头的单词</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">\b表示匹配单词头或单词尾</span><br><span class="hljs-string">\w表示匹配任何字母、数字以及下划线</span><br><span class="hljs-string">+表示匹配位于+之前的字符或子模式的1次或多次重复</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-built_in">print</span>(pattern.findall(example))<br><br>pattern = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&#x27;\w+g\b&#x27;</span>)     <span class="hljs-comment"># 以g结尾的单词</span><br><span class="hljs-built_in">print</span>(pattern.findall(example))<br><br>pattern = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&#x27;\b[a-zA-Z]&#123;3&#125;\b&#x27;</span>)    <span class="hljs-comment"># 3个字母长的单词</span><br><span class="hljs-built_in">print</span>(pattern.findall(example))<br><br>pattern = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&#x27;\b\w*a\w*\b&#x27;</span>)        <span class="hljs-comment"># 查找所有含有字母a的单词</span><br><span class="hljs-built_in">print</span>(pattern.findall(example))<br></code></pre></td></tr></table></figure><h3 id="2-3-子模式与Match对象"><a href="#2-3-子模式与Match对象" class="headerlink" title="2.3 子模式与Match对象"></a>2.3 子模式与Match对象</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br>telNumber = <span class="hljs-string">&#x27;&#x27;&#x27;Suppose my Phone No. is 0535-1234567,</span><br><span class="hljs-string">yours is 010-12344567, his is 025-123456789&#x27;&#x27;&#x27;</span><br>pattern = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&#x27;(\d&#123;3,4&#125;)-(\d&#123;7,8&#125;)&#x27;</span>)    <span class="hljs-comment"># 这里的字符串格式要注意：如,后不能跟空格，否则匹配不上。看了好久都没发现问题，最后才发现是自己的代码规范导致的</span><br><span class="hljs-built_in">print</span>(pattern.findall(telNumber))<br><br>email = <span class="hljs-string">&#x27;tony@tiremove_thisger.net&#x27;</span><br>m = re.search(<span class="hljs-string">&#x27;remove_this&#x27;</span>, email)     <span class="hljs-comment"># 利用re.search()返回的Match对象来删除字符串指定内容</span><br><span class="hljs-built_in">print</span>(email[:m.start()] + email[m.end():])<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">Match对象的start()方法: 返回指定子模式内容的起始位置</span><br><span class="hljs-string">Match对象的end()方法: 返回指定子模式内容的结束位置的下一个位置</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br>m = re.match(<span class="hljs-string">r&#x27;(\w+) (\w+)&#x27;</span>, <span class="hljs-string">&#x27;Isaac Newton, physicist&#x27;</span>)<br><span class="hljs-built_in">print</span>(m.group(<span class="hljs-number">0</span>))       <span class="hljs-comment"># 返回整个模式内容</span><br><span class="hljs-built_in">print</span>(m.group(<span class="hljs-number">1</span>))       <span class="hljs-comment"># 返回第1个子模式内容</span><br><span class="hljs-built_in">print</span>(m.group(<span class="hljs-number">2</span>))       <span class="hljs-comment"># 返回第2个子模式内容</span><br><span class="hljs-built_in">print</span>(m.group(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))    <span class="hljs-comment"># 返回指定的多个子模式的内容，元组形式</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">group(): 返回匹配的一个或多个子模式内容</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br>m = re.match(<span class="hljs-string">r&#x27;(\d+)\.(\d+)&#x27;</span>, <span class="hljs-string">&#x27;12.3456&#x27;</span>)<br><span class="hljs-built_in">print</span>(m.groups())<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">groups(): 返回一个包含匹配的所有子模式内容的元组</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br>m = re.match(<span class="hljs-string">r&#x27;(?P&lt;first_name&gt;\w+) (?P&lt;last_name&gt;\w+)&#x27;</span>, <span class="hljs-string">&#x27;Malcolm Reynolds&#x27;</span>)     <span class="hljs-comment"># ?P&lt;groupname&gt;: 为子模式命名</span><br><span class="hljs-built_in">print</span>(m.groupdict())<br></code></pre></td></tr></table></figure><p>练习理解：使用正则表达找出AABC和ABAC类型的成员</p><p><img src="https://pic.imgdb.cn/item/616e4cdb2ab3f51d918f17bd.jpg"></p><p>首先，直接给出两个做法的答案</p><p><strong>做法1</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">pattern = <span class="hljs-string">r&#x27;((.).\2.|(.)\3..)&#x27;</span><br><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> findall(pattern, text):<br>    <span class="hljs-built_in">print</span>(item[<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><p><strong>做法2</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">pattern = <span class="hljs-string">r&#x27;(\b(?P&lt;F&gt;\w)\w(?P=F)\w\b|\b(?P&lt;D&gt;\w)(?P=D)\w\w\b)&#x27;</span><br><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> findall(pattern, text):<br>    <span class="hljs-built_in">print</span>(item[<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><p>做法1讲解：</p><ol><li><p>首先，有一个会用到的重要概念，<b style="color: red">使用括号表示一个子模式</b></p></li><li><p>先ABAC类型(实际上ABAB也能匹配到，书上的也是这样，将错就错了，简单点)，小数点表示能匹配到除换行符的任意单个字符，所以先构建</p><p>正则表达式<code> pattern = r&#39;(..)&#39;</code></p></li><li><p>第三个应该要和第一个相同，所以不能直接<code>pattern = r&#39;(...)&#39;</code>, 这个时候就要用上正则表达式的复制粘贴功能了，首先，做好复制工作–<strong>用括号把要复制的部分包住</strong>，<code> pattern = r&#39;((.).)&#39;</code>, 然后是粘贴工作–反斜线加要粘贴的内容是第几个子模式，<code> pattern = r&#39;((.).\2)&#39;</code>,这里是2的原因就是上面说的重点了，<b style="color: red">使用括号表示一个子模式</b>，我们要把第二个括号里的东西复制粘贴，所以自然就是2了</p></li><li><p>第四个随便，所以正则表达式变成<code> pattern = r&#39;((.).\2.)&#39;</code></p></li><li><p>再AABC类型的，先加上’|’，<code>pattern = r&#39;((.).\2.|)&#39;</code>,<b style="color: red">这里的|左右不能有空格</b></p></li><li><p>之后的原理和上面的相同，需要注意的是：<b style="color: red">括号并不会重置为0，才开始算，而是前面的括号也算</b>，所以变成<code> pattern = r&#39;((.).\2.|(.)\3..)&#39;</code></p></li><li><p>之后通过循环即可得到结果，因为findall()是找出所有的匹配项，所以只需要item[0]就行了</p></li></ol><p>做法2讲解：</p><ol><li>首先原理和做法1一样，不同的是复制粘贴的形式，做法2是先通过<code> (?P=&lt;groupname&gt;)</code>给要复制的内容命名，然后通过<code> (?P=groupname)</code>把内容粘贴过去</li></ol>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机和网络(三) 数据链路层</title>
      <link href="/2021/10/20/computer-network-3/"/>
      <url>/2021/10/20/computer-network-3/</url>
      
        <content type="html"><![CDATA[<h1 id="计算机和网络-三-——数据链路层"><a href="#计算机和网络-三-——数据链路层" class="headerlink" title="计算机和网络(三)——数据链路层"></a>计算机和网络(三)——数据链路层</h1><h2 id="1-使用点对点信道的数据链路层"><a href="#1-使用点对点信道的数据链路层" class="headerlink" title="1. 使用点对点信道的数据链路层"></a>1. 使用点对点信道的数据链路层</h2><p><strong>点对点信道</strong>：使用一对一的点对点通信方式</p><p>另一种信道：</p><p><strong>广播信道</strong>：</p><ul><li>使用一对多的广播通信方式</li><li>必须使用专用的共享信道协议来协调主机的数据发送</li></ul><p><img src="https://pic.imgdb.cn/item/61551ab92ab3f51d91313858.jpg"></p><h3 id="1-1-链路"><a href="#1-1-链路" class="headerlink" title="1.1 链路"></a>1.1 链路</h3><ul><li><p><strong>链路</strong>是一条无源的点到点的物理线路段，中间没有任何其他的交换节点。<b style="color: red">一条链路是一条通路的一个组成成分</b>。</p></li><li><p><strong>数据链路</strong>：除了物理线路外，还必须有通信协议来控制数据的传输。如果把这些协议的硬件和软件加到链路上，就构成了数据链路。如使用适配器(网卡)来实现协议的硬件和软件。</p></li><li><p><strong>物理链路</strong>：上面的链路</p></li><li><p><strong>逻辑链路</strong>：上面的数据链路，是物理链路加上必要的通信协议。(早期也被叫做<strong>通信规程</strong>)</p></li></ul><h3 id="1-2-帧"><a href="#1-2-帧" class="headerlink" title="1.2 帧"></a>1.2 帧</h3><p><img src="https://pic.imgdb.cn/item/61551cc42ab3f51d91333861.jpg"></p><h3 id="1-3-数据链路层协议三个基本问题"><a href="#1-3-数据链路层协议三个基本问题" class="headerlink" title="1.3 数据链路层协议三个基本问题"></a>1.3 数据链路层协议三个基本问题</h3><h4 id="1-3-1-封装成帧"><a href="#1-3-1-封装成帧" class="headerlink" title="1.3.1 封装成帧"></a>1.3.1 封装成帧</h4><p><strong>封装成帧</strong>就是在一段数据的前后分别添加首部和尾部，然后就构成一个帧。首部和尾部的作用是<b style="color: red">进行帧定界</b>。(首部是用来确定帧的数据部分是从哪里开始的，而尾部是用来确定数据部分什么时候结束)</p><p><img src="https://pic.imgdb.cn/item/61551e712ab3f51d9134e1d0.jpg"></p><ul><li>当数据是由可打印的ASCII码组成的文本文件时，帧定可以使用特殊的<strong>帧定界符</strong></li><li>控制字符SOH(Start Of Header)放在帧的最前面，表示帧的首部开始，控制字符EOT(End Of Transmission)表示帧的结束。</li></ul><h4 id="1-3-2-透明传输"><a href="#1-3-2-透明传输" class="headerlink" title="1.3.2 透明传输"></a>1.3.2 透明传输</h4><p>在数据链路层透明传送数据表示无论发送什么样的数据，这些数据都能够按照原样没有差错地通过数据链路层。</p><p>透明传输出现的问题：</p><p><img src="https://pic.imgdb.cn/item/61551f892ab3f51d9136208d.jpg"></p><p><strong>解决透明传输问题</strong>：</p><ul><li>解决办法：<b style="color: red">字节填充或字符填充</b></li><li>发送端的数据链路层在<b style="color: red">数据</b>中出现SOH或EOT的前面<strong>插入一个转义字符ESC</strong>。(先把SOH和EOT的作用屏蔽掉，之后再把转义字符去掉，恢复功能)</li><li>接收端的数据链路层在将数据送往网络层之前删除插入的转义字符</li><li>如果转义字符也出现在数据中，也要在转义字符之前插入一个ESC。当接收端收到连续的两个转义字符时，就删除前面的一个转义字符。</li></ul><p><img src="https://pic.imgdb.cn/item/6155225e2ab3f51d913978b9.jpg"></p><h4 id="1-3-3-差错控制"><a href="#1-3-3-差错控制" class="headerlink" title="1.3.3 差错控制"></a>1.3.3 差错控制</h4><p>在传输过程中可能会产生<strong>比特差错</strong>：1可能会变成0，而0也可能会变成1。</p><ul><li><strong>误码率BER</strong>(Bit Error Rate)：在一段时间内，传输错误的比特占所传输比特总数的比率</li><li>在数据链路层传送的帧中，广泛使用了<b style="color: red">循环冗余检验CRC</b>的检错技术。</li></ul><p><strong>循环冗余检验的原理</strong>：</p><ul><li><p>在发送端，先把数据划分为组</p></li><li><p>在魅族后面再添加供差错检测用的n位冗余码，然后一起发送出去</p></li></ul><p>冗余码的计算示例：</p><p><img src="https://pic.imgdb.cn/item/6159bf202ab3f51d917c7321.jpg"></p><p><img src="https://pic.imgdb.cn/item/6159bf302ab3f51d917c965d.jpg"></p><p><strong>帧检验序列FCS</strong>：</p><ul><li><strong>帧检验序列</strong>：在数据后面添加的冗余码</li><li>循环冗余检验CRC和帧检验序列<strong>不相同</strong><ol><li>CRC是一种常用检错方法，而FCS是添加在数据后面的冗余码</li><li>FCS可以用CRC得出，但CRC并不是获得FCS的唯一方法</li></ol></li></ul><p><b style="color: red">单纯使用CRC差错检测技术不能实现”无差错传输”或”可靠传输”</b></p><p><b style="color: red">“无比特差错”和”无传输差错”是不同的概念。</b></p><p>在数据链路层使用CRC检验，能够实现<strong>无比特差错</strong>的传输，但不是<strong>可靠传输</strong></p><h2 id="2-点对点协议PPP"><a href="#2-点对点协议PPP" class="headerlink" title="2. 点对点协议PPP"></a>2. 点对点协议PPP</h2><h3 id="2-1-PPP的特点"><a href="#2-1-PPP的特点" class="headerlink" title="2.1 PPP的特点"></a>2.1 PPP的特点</h3><ul><li>点对点的链路使用最广泛的数据链路层协议是<strong>点对点协议PPP</strong></li><li>PPP协议在1994年成为互联网的正式标准</li></ul><h4 id="2-1-1-PPP协议要满足的要求"><a href="#2-1-1-PPP协议要满足的要求" class="headerlink" title="2.1.1 PPP协议要满足的要求"></a>2.1.1 PPP协议要满足的要求</h4><ol><li><b style="color: red">简单</b></li><li>封装成帧：必须规定特殊的字符作为帧定界符</li><li>透明性：必须保证数据传输的透明性</li><li>多种网络层协议：能够在同一条物理链路上同时支持多种网络层协议</li><li>多种类型链路：可以在多种类型的链路上运行</li><li>差错检验：能够对接收端收到的帧进行检测，并立即丢弃有差错的帧</li><li>…</li></ol><h4 id="2-1-2-PPP协议的组成"><a href="#2-1-2-PPP协议的组成" class="headerlink" title="2.1.2 PPP协议的组成"></a>2.1.2 PPP协议的组成</h4><ul><li>一个将IP数据报封装到串行链路的方法</li><li>链路控制协议LCP</li><li>网络控制协议NCP</li></ul><h3 id="2-2-PPP协议的帧格式"><a href="#2-2-PPP协议的帧格式" class="headerlink" title="2.2 PPP协议的帧格式"></a>2.2 PPP协议的帧格式</h3><ul><li>PPP帧的首部和尾部分别为4个字段和2个字段</li><li>标志字段F=0x7E</li><li>地址字段A=0xFF</li><li>控制字段C=0x03</li><li><b style="color: red">PPP是面向字节的，所有的PPP帧的长度都是整数字节</b></li></ul><p><img src="https://pic.imgdb.cn/item/6162ab612ab3f51d91aac337.jpg"></p><p><strong>实现透明传输</strong>：</p><ul><li><p>当PPP用在异步传输时，采用一种特殊的<strong>字符填充法</strong>（P79）</p><p><img src="https://pic.imgdb.cn/item/6162ad6a2ab3f51d91ad8fed.jpg"></p></li><li><p>当PPP用在同步传输链路时，采用<strong>零比特填充</strong>来实现透明传输(P80)</p><p><img src="https://pic.imgdb.cn/item/6162ad7c2ab3f51d91ada933.jpg"></p></li></ul><h2 id="3-使用广播信道的数据链路层"><a href="#3-使用广播信道的数据链路层" class="headerlink" title="3. 使用广播信道的数据链路层"></a>3. 使用广播信道的数据链路层</h2><h3 id="3-1-局域网的数据链路层"><a href="#3-1-局域网的数据链路层" class="headerlink" title="3.1 局域网的数据链路层"></a>3.1 局域网的数据链路层</h3><p>局域网主要特点：</p><ul><li>网络为一个单位所拥有</li><li>地理范围和站点数据都有限</li></ul><h4 id="3-1-1-以太网的两个标准"><a href="#3-1-1-以太网的两个标准" class="headerlink" title="3.1.1 以太网的两个标准"></a>3.1.1 以太网的两个标准</h4><ol><li><p><b style="color: red">DIX Ethernet V2</b>是世界上第一个局域网产品(以太网)的规约</p></li><li><p><b style="color: red">IEEE 802.3</b>是第一个IEEE的以太网标准</p><p><strong>严格来说，以太网值得应该是符合DIX Ethernet V2标准的局域网</strong></p></li></ol><h4 id="3-1-2-适配器"><a href="#3-1-2-适配器" class="headerlink" title="3.1.2 适配器"></a>3.1.2 适配器</h4><p>网络接口板又称为<strong>通信适配器</strong>或<strong>网络接口卡</strong>NIC, 或<strong>网卡</strong></p><p><strong>适配器的功能</strong>：</p><ol><li>进行串行/并行转换</li><li>对数据进行缓存</li><li>在计算机的操作系统安装设备驱动程序</li><li>实现以太网协议</li></ol><h3 id="3-2-CSMA-CD协议"><a href="#3-2-CSMA-CD协议" class="headerlink" title="3.2 CSMA/CD协议"></a>3.2 CSMA/CD协议</h3><h4 id="3-2-1-背景"><a href="#3-2-1-背景" class="headerlink" title="3.2.1 背景"></a>3.2.1 背景</h4><p>最初的以太网是将很多台计算机连接到一根总线上。但是，当很多台计算机同时发送时，会发生碰撞或冲突，导致发送失败。</p><h4 id="3-2-2-以太网采取的两种重要的措施"><a href="#3-2-2-以太网采取的两种重要的措施" class="headerlink" title="3.2.2 以太网采取的两种重要的措施"></a>3.2.2 以太网采取的两种重要的措施</h4><ul><li>采用较为灵活的<strong>无连接的工作方式</strong></li><li>以太网发送的数据都是用<strong>曼彻斯特编码</strong></li></ul><h4 id="3-2-3-CSMA-CD"><a href="#3-2-3-CSMA-CD" class="headerlink" title="3.2.3 CSMA/CD"></a>3.2.3 CSMA/CD</h4><p>CSMA/CD含义：<strong>载波监听多点接入/碰撞检测</strong></p><ul><li><strong>载波监听</strong>：指每一个站在发送数据之前先要检测以下总线上是否有其他计算机在发送数据，如果有，则先不发送数据，避免发生碰撞</li><li><strong>多点接入</strong>：表示许多计算机以多点接入的方式连接在一根总线上</li><li><strong>碰撞检测</strong>：是计算机边发送数据边检测信道上的信号电压大小。当几个站同时在总线上发送数据时，总线上的信号电压摆动值会增大。所以，当信号电压摆动值超过一定值时，并认为总线上至少右两个站在同时发送数据，表明产生了碰撞。</li></ul><p>因为发送碰撞后，总线上传输的信号会产生严重的失真，无法会恢复出有用的信息。所以，一旦发现总线上出现了碰撞，就要<b style="color: red">立即停止发送</b>，然后<b style="color: red">等待一段随机时间</b>后再次发送。</p><p><img src="https://pic.imgdb.cn/item/6162c64e2ab3f51d91cd896a.jpg"></p><p><strong>争用期</strong>：</p><ul><li>最先发送数据帧的站，在发送数据后<strong>至多</strong>经过时间**2i(两倍的1端到端往返时延)**就可以知道发送的数据帧有没有发生碰撞</li><li><strong>争用期</strong>：以太网的端到端的往返时延2i</li><li><strong>经过争用期的这段时间还没有检测到碰撞的话，才可以肯定这次发送不会发生碰撞</strong></li></ul><p>以太网使用<strong>截断二进制指数退避</strong>算法来确定重传的时机。(P88)</p><p><strong>10Mbit/s以太网争用期的长度</strong>：</p><ul><li>10Mbit/s以太网取51.2μs为争用期的长度</li><li>对于10Mbit/s的以太网，在争用期内可以发送512bit，即64字节</li></ul><p><b style="color: red">即以太网在发送数据时，若前64字节没有发生冲突，则之后的数据也不会发生冲突。</b></p><p><b style="color: red">以太网规定了最短有效帧长为64字节，凡是长度小于64字节的帧都是由于冲突而异常中止的无效帧</b></p><p><strong>CSMA/CD协议的重要特性</strong>：</p><ul><li>使用CSMA/CD协议的以太网不能进行全双工通信而<strong>只能进行半双工通信</strong>（双向交替通信）</li><li>每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性</li></ul><p><img src="https://pic.imgdb.cn/item/61639cbc2ab3f51d91dccae2.jpg"></p><h4 id="3-2-4-以太网的MAC层"><a href="#3-2-4-以太网的MAC层" class="headerlink" title="3.2.4 以太网的MAC层"></a>3.2.4 以太网的MAC层</h4><p><strong>1. MAC层的硬件地址</strong></p><ul><li>在局域网中，<strong>硬件地址</strong>又称为<strong>物理地址</strong>，或<strong>MAC地址</strong></li></ul><p><strong>45位的MAC地址</strong>：</p><ul><li><p>IEEE802标准规定MAC地址字段可以采用6字节(48位)或2字节(16位)这两种中的一种</p></li><li><p>地址字段6个字节中的前3个字节，是IEEE的注册管理机构RA向厂家分配的，称为<strong>组织唯一标识符</strong></p></li><li><p>地址字段6个字节中的后3个字节由厂家自行指派，称为<strong>扩展唯一标识符</strong>，<strong>必须保证生产出的适配器没有重复地址</strong></p><p><img src="https://pic.imgdb.cn/item/61666c722ab3f51d913e5d8a.jpg"></p></li></ul><p><strong>适配器检查MAC地址</strong>：</p><ul><li><p>适配器从网络上每收到一个MAC帧就首先用硬件检查MAC帧中的MAC地址</p><p>如果是<strong>发往本站的帧</strong>则收下， 否则就将此帧丢弃。</p><p><strong>发往本站的帧包括三种</strong>：</p><ol><li>单播帧(一对一)</li><li>广播帧(一对全体)</li><li>多播帧(一对多)</li></ol></li><li><p><strong>所有的适配器都能够识别单播地址和广播地址</strong></p></li><li><p>只有目的地址才能使用广播地址和多播地址</p></li></ul><h4 id="3-2-5-MAC帧的格式"><a href="#3-2-5-MAC帧的格式" class="headerlink" title="3.2.5 MAC帧的格式"></a>3.2.5 MAC帧的格式</h4><p>两种标准：</p><ul><li><strong>DIX Ethernet V2标准</strong></li><li><strong>IEEE的802.3标准</strong></li></ul><p>最常用的MAC帧是<b style="color: red">以太网V2的格式</b></p><p><img src="https://pic.imgdb.cn/item/6167b3b52ab3f51d91c817c5.jpg"></p><p><strong>类型字段</strong>：用来标志上一层使用的是什么协议</p><p><strong>数据字段</strong>：46 ~ 1500字节</p><p><strong>数据字段的最小长度(46字节) = 最小长度64字节 - 18字节的首部和尾部</strong></p><p>至于最小长度为什么是64字节，参考CSMA/CD协议的争用期部分</p><p>当数据字段的长度小于46字节时，应在数据字段的后面加入整数字节的<strong>填充字段</strong>，以保证以太网的MAC帧长不小于64字节，不会被当成无效帧</p><p><strong>无效的MAC帧</strong>：</p><ul><li>数据字段的长度与长度字段的值不一致</li><li>帧的长度不是整数个字节</li><li>用帧检验序列FCS查出有差错</li><li>数据字段的长度不在46 ~ 1500字节之间</li><li>MAC帧长度不再64 ~ 1518字节之间</li></ul><p><strong>帧间最小间隔</strong>：</p><ul><li>帧最小间隔为9.6us，相当于96bit的发送时间</li><li>一个站在检测到总线开始空闲后，还要等待9.6us后才能再次发送数据</li><li>目的：清理前一个的接收缓存，做好接收下一帧的准备</li></ul><h2 id="4-扩展的以太网"><a href="#4-扩展的以太网" class="headerlink" title="4. 扩展的以太网"></a>4. 扩展的以太网</h2><h3 id="4-1-在物理层扩展以太网"><a href="#4-1-在物理层扩展以太网" class="headerlink" title="4.1 在物理层扩展以太网"></a>4.1 在物理层扩展以太网</h3><h4 id="4-1-1-使用光纤扩展"><a href="#4-1-1-使用光纤扩展" class="headerlink" title="4.1.1 使用光纤扩展"></a>4.1.1 使用光纤扩展</h4><p>主机使用光纤和一对光纤调制解调器连接到集线器</p><p><img src="https://pic.imgdb.cn/item/6168f2bb2ab3f51d919fac2c.jpg"></p><h4 id="4-1-2-使用集线器扩展"><a href="#4-1-2-使用集线器扩展" class="headerlink" title="4.1.2 使用集线器扩展"></a>4.1.2 使用集线器扩展</h4><p>将多个以太网连成更大的、多级星形结构的以太网</p><p><img src="https://pic.imgdb.cn/item/6168f3062ab3f51d919fff67.jpg"></p><p><strong>优点</strong>：</p><ul><li>使原来属于不同碰撞域的以太网上的计算机能够进行跨碰撞域的通信</li><li>扩大了以太网覆盖的地理范围</li></ul><p><strong>缺点</strong>：</p><ul><li>碰撞域增大了，但是总的吞吐量并没有提高</li><li>如果不同的碰撞使用不同的数据率，就不能用集线器把它们互连起来</li></ul><h3 id="4-2-在数据链路层扩展以太网"><a href="#4-2-在数据链路层扩展以太网" class="headerlink" title="4.2 在数据链路层扩展以太网"></a>4.2 在数据链路层扩展以太网</h3><p>在数据链路层扩展以太网<strong>更常用</strong></p><p>早期使用网桥，现在使用以太网交换机</p><p><img src="https://pic.imgdb.cn/item/6168f4362ab3f51d91a163b4.jpg"></p><h4 id="4-2-1网桥"><a href="#4-2-1网桥" class="headerlink" title="4.2.1网桥"></a>4.2.1网桥</h4><ul><li>网桥工作在数据链路层</li><li>根据MAC帧的目的地址对收到的帧进行转发和过滤</li><li>当网桥收到一个帧时，不会向所有的接口转发这个帧，而是先检查这个帧的目的MAC地址，然后确定要把它转发到哪一个接口，或丢弃它。</li></ul><h4 id="4-2-2-以太网交换机"><a href="#4-2-2-以太网交换机" class="headerlink" title="4.2.2 以太网交换机"></a>4.2.2 以太网交换机</h4><p>实质就是一个<strong>多接口的网桥</strong></p><p><strong>优点</strong>：</p><ul><li><p>用户独享带宽，增加了总容量</p><p><img src="https://pic.imgdb.cn/item/6168f67c2ab3f51d91a42fa4.jpg"></p></li><li><p>从共享总线以太网转到交换式以太网时，所有接入设备的软件和硬件、适配器等都不需要做任何改动</p></li><li><p>一般有多种速率的接口</p></li></ul><p><strong>以太网的交换方式</strong>：</p><ul><li>存储转发方式：将整个数据帧先缓存后再进行处理</li><li>直通方式：接收数据帧的同时，立即按数据帧的目的MAC地址决定该帧的转发接口，提高了帧的转发速度，可能会把一些无效帧也转发给其他的站</li></ul><p>**以太交换机的自学习功能(p100或ppt139)**：</p><p><img src="https://pic.imgdb.cn/item/6168f8252ab3f51d91a63ff9.jpg"></p><h4 id="4-2-3-从总线以太网到星形以太网"><a href="#4-2-3-从总线以太网到星形以太网" class="headerlink" title="4.2.3 从总线以太网到星形以太网"></a>4.2.3 从总线以太网到星形以太网</h4><ul><li>早期以太网采用无源的总线结构，现在采用以太网交换机的星形结构</li><li>总线以太网使用CSMA/CD协议，以半双工方式工作</li><li>以太网交换机不使用共享总线，没有碰撞问题，所以不使用CSMA/CD协议，以全双工方式工作。<b style="color: red">仍然采用以太网的帧结构</b></li></ul><h3 id="4-3-虚拟局域网"><a href="#4-3-虚拟局域网" class="headerlink" title="4.3 虚拟局域网"></a>4.3 虚拟局域网</h3><p>虚拟局域网VLAN是由一些局域网网段构成的<strong>与物理位置无关的逻辑组</strong>，而这些网段具有某些共同的需求。</p><p><b style="color: red">虚拟局域网只是局域网给用户提供的一种服务，而不是一种新型局域网</b></p><p><strong>虚拟局域网(VLAN)的主要优点</strong>：</p><ul><li>改善了性能</li><li>简化了管理</li><li>降低了成本</li><li>改善了安全性</li></ul><p><strong>划分虚拟局域网的方法(ppt162)</strong></p><ul><li>基于交换机端口</li><li>基于计算机网卡的MAC地址</li><li>基于协议类型</li><li>基于IP子网地址</li><li>基于高层应用或服务</li></ul><h2 id="5-高速以太网"><a href="#5-高速以太网" class="headerlink" title="5. 高速以太网"></a>5. 高速以太网</h2><p>高速以太网：速率达到或超过100Mbit/s的以太网</p><h3 id="5-1-100BASE-T-以太网"><a href="#5-1-100BASE-T-以太网" class="headerlink" title="5.1 100BASE-T 以太网"></a>5.1 100BASE-T 以太网</h3><p>100BASE-T 以太网也叫<strong>快速以太网</strong>，代号为<strong>IEEE 802.3u</strong></p><p><strong>特点</strong>：</p><ul><li>可在全双工方式下工作而无冲突发生。<strong>在全双工方式下工作时，不使用CSMA/CD协议</strong></li><li><strong>MAC帧格式仍然是802.3标准规定的</strong></li><li>保持最短帧长不变，将一个网段的最大电缆长度减小到100米</li><li>帧间时间间隔从原来的9.6 us改为现在的0.96 us</li></ul><h3 id="5-2-吉比特以太网"><a href="#5-2-吉比特以太网" class="headerlink" title="5.2 吉比特以太网"></a>5.2 吉比特以太网</h3><ul><li><p>允许在1 Gbit/s 下以全双工和半双工两种方式工作</p></li><li><p>使用IEEE 802.3协议规定的帧格式</p></li><li><p><strong>在半双工方式下使用CSMA/CD协议，全双工方式下不使用CSMA/CD协议</strong></p></li><li><p>为了保持64字节最小帧长度，以及100米的网段的最大长度，吉比特以太网增加了<b style="color: red">载波延伸</b>和<b style="color: red">分组突发</b>两个功能（当吉比特以太网工作在全双工方式时，不需要这两个功能）</p><p><strong>载波延伸</strong>：使最短帧长仍为64字节，同时<strong>将争用期长度增长为512字节</strong></p><p><strong>分组突发</strong>：当很多短帧要发送时，第一个短帧要采用载波延伸方法进行填充，随后的一些短帧可以一个接一个地发送，只需留必要的帧间最小间隔</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机与网络(二) 物理层</title>
      <link href="/2021/10/20/computer-network-2/"/>
      <url>/2021/10/20/computer-network-2/</url>
      
        <content type="html"><![CDATA[<h1 id="计算机与网络-二-——物理层"><a href="#计算机与网络-二-——物理层" class="headerlink" title="计算机与网络(二) ——物理层"></a>计算机与网络(二) ——物理层</h1><h2 id="1-概念"><a href="#1-概念" class="headerlink" title="1 概念"></a>1 概念</h2><p>物理层考虑的是怎样才能在连接各种计算机的传播媒体上<b style="color: red">传输数据比特流</b>，而<b style="color: red">不是指具体的传输媒体</b></p><p><b style="color: red">作用</b>：尽可能屏蔽掉不同传输媒体和通信手段的差异</p><p>用于物理层的协议也被称为物理层规程（一样意思，不同称呼而已）</p><h3 id="物理层的主要任务"><a href="#物理层的主要任务" class="headerlink" title="物理层的主要任务"></a>物理层的主要任务</h3><p><b style="color: red"> 确定与传输媒体的接口的一些特性</b></p><ul><li>机械特性</li><li>电气特性</li><li>功能特性</li><li>过程特性</li></ul><h2 id="2-数据通信的基础知识"><a href="#2-数据通信的基础知识" class="headerlink" title="2 数据通信的基础知识"></a>2 数据通信的基础知识</h2><h3 id="2-1-数据通信系统的模型"><a href="#2-1-数据通信系统的模型" class="headerlink" title="2. 1 数据通信系统的模型"></a>2. 1 数据通信系统的模型</h3><p>包括三大部分：</p><ul><li>源系统（发送端、发送方）</li><li>传输系统（传输网络）</li><li>目的系统（接收端、接收方）</li></ul><p><img src="https://pic.imgdb.cn/item/6142fd742ab3f51d9120cb0d.jpg"></p><h4 id="常用术语"><a href="#常用术语" class="headerlink" title="常用术语"></a>常用术语</h4><ol><li><strong>数据</strong>：运送信息的实体</li><li><strong>信号</strong>：数据的电气的或电磁的表现</li><li><strong>模拟信号</strong>：代表消息的参数的取值是连续的</li><li><strong>数字信号</strong>：代表消息的参数的取值是离散的</li><li><strong>码元</strong>：在使用时间域（或时域）的波形表示数字信号时，代表不同离散数值的基本波形。</li></ol><h3 id="2-2-关于信道的基本概念"><a href="#2-2-关于信道的基本概念" class="headerlink" title="2.2 关于信道的基本概念"></a>2.2 关于信道的基本概念</h3><ol><li><p><strong>信道</strong>：一般用来表示向某一个方向传送信息的媒体</p></li><li><p><strong>单向通信（单工通信）</strong>：只能由一个方向的通信</p></li><li><p><strong>双向交替通信（半双工通信）</strong>：两个方向的通信，但是，<b style="color: red">通信双方不能同时发送和接收</b></p></li><li><p><strong>双向同时通信（全双工通信）</strong>：两个方向的通信，通信双方可以同时发送和接收信息</p></li><li><p><strong>基带信号（即基本频带信号）</strong>：来自信源的信号。如计算机输出的代表文字和图像文件的数据信号</p></li><li><p><strong>调制</strong>：基带信号会含有低频信号甚至直流信号，很多信道不能传输低频分量或直流分量，所以需要对基带信号进行调制。</p><p>调制分为两大类：</p><ul><li><strong>基带调制</strong>：只对基带信号的波形进行变换，使它能够与信道特性相适应。<b style="color: red">变化后的信号还是基带信号</b>。过程称为编码。</li><li><strong>带通调制</strong>：使用载波进行调制，把基带信号的频率搬到较高的频段，并<b style="color: red">转换为模拟信号</b>，就能更好地在模拟信道中传输（仅在一段频率范围内能够通过信道）。（低频信号或直流信号不能传输，所以使用载波，把它带过去高频区）</li><li><strong>带通信号</strong>：经过载波调制后的信号</li></ul></li></ol><h4 id="2-2-1-常用的编码方式"><a href="#2-2-1-常用的编码方式" class="headerlink" title="2.2.1 常用的编码方式"></a>2.2.1 常用的编码方式</h4><ol><li><p><strong>不归零制</strong>：正电平表示1，负电平表示0</p></li><li><p><strong>归零制</strong>：正脉冲代表1，负脉冲表示0</p></li><li><p><strong>曼彻斯特编码</strong>：位周期中心的向上跳表示0，位周期中心的向下跳表示1.也可以反过来定义。</p></li><li><p><strong>差分曼彻斯特编码</strong>：位周期中心仍然有跳变。位开始时，边界有跳变表示0，边界没有跳变表示1。</p><p><img src="https://pic.imgdb.cn/item/614305502ab3f51d912baafc.jpg"></p></li></ol><ul><li>由上图，曼彻斯特编码和差分曼彻斯特编码产生的信号频率比不归零制高</li><li>不归零制不能从信号波形本身中提取信号时钟频率（没有自同步能力），<b style="color: red">曼彻斯特编码和差曼彻斯特编码具有自同步能力</b></li></ul><h4 id="2-2-2-基本的带通调制方法"><a href="#2-2-2-基本的带通调制方法" class="headerlink" title="2.2.2 基本的带通调制方法"></a>2.2.2 基本的带通调制方法</h4><ol><li><strong>调幅（AM）</strong>：载波的振幅随基带数字信号而变化</li><li><strong>调频（FM）</strong>：载波的频率随基带数字信号的变化而变化</li><li><strong>调相（PM</strong>）：载波的初始相位随基带数字信号的变化而变化</li></ol><p><img src="https://pic.imgdb.cn/item/614307462ab3f51d912e3d11.jpg"></p><h5 id="正交振幅调制QAM"><a href="#正交振幅调制QAM" class="headerlink" title="正交振幅调制QAM"></a>正交振幅调制QAM</h5><p>作用：达到更高的信息传输速率</p><p><img src="https://pic.imgdb.cn/item/6144261a2ab3f51d9190701d.jpg"></p><p>由上图：</p><ul><li><p>可供选择的相位有12种，即0，30°，60°，…，360°</p></li><li><p>对于每一种相位有1或2种振幅可供选择。总共有16种组合，即16个码元。</p><ul><li><p>上图中选的相位只有一种振幅选择</p></li><li><p>上图中<b style="color: red">红箭头</b>的相位有2种振幅选择</p><p><img src="https://pic.imgdb.cn/item/614427982ab3f51d919296ff.jpg"></p></li></ul></li><li><p>由于4bit编码共有16种不同的组合，所以上图的16个点中的每一个点都可以对应1种4bit的编码。数据传输率可提高4倍。</p></li></ul><p><b style="color: red">码元不是越多越好</b>，物极必反，当每一个码元对应的比特数越多，在接收端进行解调时要正确识别每一种状态就会越困难，出错率也会增加。</p><h4 id="2-2-3-信道的极限容量"><a href="#2-2-3-信道的极限容量" class="headerlink" title="2.2.3 信道的极限容量"></a>2.2.3 信道的极限容量</h4><p>码元传输的速率越大，或信号传输的距离越远，或传输媒体质量越差，在信道的输出端的波形的失真就会越严重。</p><p><img src="https://pic.imgdb.cn/item/614429cf2ab3f51d9195bc50.jpg"></p><h5 id="限制码元在信道上的传输速率的因素"><a href="#限制码元在信道上的传输速率的因素" class="headerlink" title="限制码元在信道上的传输速率的因素"></a>限制码元在信道上的传输速率的因素</h5><ol><li><p><strong>信道能够通过的频率范围</strong></p><ul><li>奈氏准则</li><li>在任何信道中，<b style="color: red">码元传输的速率是有上限的</b>，否则会出现<b style="color: red">码间串扰</b>的问题，使接收端对码元的识别成为不可能。</li><li>信道的频带越宽，即能够通过的信号高频分量越多，就可以用更高的速率传送码元而不出现码间串扰。</li></ul></li><li><p><strong>信噪比</strong></p><ul><li><b style="color: red">信噪比</b>是信号的平均功率和噪声的平均功率之比。记为S/N，单位为分贝(db)</li></ul><p><img src="https://pic.imgdb.cn/item/61442c9d2ab3f51d919a067f.jpg"></p><ul><li><p>香农公式：香农用信息论推导出，带宽受限且有高斯白噪声干扰的信道的<b style="color: red">极限</b>、<b style="color: red">无差错</b>的信息传输速率</p></li><li><p>信道的极限信息传输速率C可以表示为：</p><p><img src="https://pic.imgdb.cn/item/61442d922ab3f51d919b6c03.jpg"></p><p><strong>香农公式表明</strong>：</p><ul><li>信道的带宽或信道的信噪比越大，信息的极限速率越大</li><li>只要信息传输速率低于信道的极限信息传输速率，就一定可以找到方法来实现无差错的传输</li><li>如果信道带宽W或信噪比S/N没有上限，则信道的极限信息传输速率C也没有上限（理论上）</li></ul><p>对于频带宽度已经确定的信道，如果信噪比和码元传输速率都已经达到了上限，可以通过<b style="color: red">用编码的方法让每一个马原携带更多比特的信息量</b>来提高信息的传输速率。</p></li></ul></li></ol><h2 id="3-物理层下的传输媒体"><a href="#3-物理层下的传输媒体" class="headerlink" title="3 物理层下的传输媒体"></a>3 物理层下的传输媒体</h2><ul><li><strong>传输媒体</strong>：又称传输介质或传输媒介。它是数据传输系统中发送器和接收器之间的物理通路。</li><li>传输媒体可分为导引型传输媒体和非导引型传输媒体。</li><li>在导引型传输媒体中，电磁波被导引沿着固体媒体（铜线或光纤）传播。</li><li>非导引型传输媒体是指自由空间。在非导引型传输媒体中，电磁波的传输被称为无线传输。</li></ul><h3 id="3-1-导引型传输媒体"><a href="#3-1-导引型传输媒体" class="headerlink" title="3.1 导引型传输媒体"></a>3.1 导引型传输媒体</h3><ol><li><strong>双绞线</strong>：<ul><li>最常用的传输媒体</li><li>模拟传输和数字传输都可以使用双绞线，通信距离为几到十几公里</li><li><strong>屏蔽双绞线STP</strong></li><li><strong>无屏蔽双绞线UTP</strong></li><li>双胶线标准规定了5各种类的UTP标准（从1类线到5类线），现在最常用的UTP是5类线。</li></ul></li></ol><p><img src="https://pic.imgdb.cn/item/614440bd2ab3f51d91b81ae5.jpg"></p><ol start="2"><li><strong>同轴电缆</strong>：<ul><li>同轴电缆具有很好的抗干扰特性，被广泛用于传输较高速率的数据</li><li>同轴电缆的带宽取决于电缆的质量</li><li><strong>50Ω同轴电缆</strong>：LAN / 数字传输常用</li><li><strong>75Ω同轴电缆</strong>：有线电视 / 模拟传输常用</li></ul></li></ol><p><img src="https://pic.imgdb.cn/item/614442042ab3f51d91ba0487.jpg"></p><ol start="3"><li><p><strong>光缆</strong>：</p><ul><li><p>光纤是光纤通信的传输媒体</p></li><li><p>光纤通信系统的传输带宽远远大于目前其他传输媒体的带宽：原因：可见光的频率非常高，10<sup>8</sup>MHz的量级。</p></li><li><p><strong>工作原理</strong>：只要从纤芯中射到纤芯表面的光线的入射角大于某个临界角度，就可以产生全反射。</p><p><img src="https://pic.imgdb.cn/item/614443f52ab3f51d91bcc4d2.jpg"></p></li><li><p><strong>多模光纤</strong>：可以存在多条不同角度入射的光线在一条光纤中传输</p></li><li><p><strong>单模光纤</strong>：光线一直向前传播，不会产生多次反射。</p></li><li><p><strong>优点</strong>：</p><ol><li>通信容量很大</li><li>传输损耗小，中继距离长</li><li>抗雷电和电磁干扰性好</li><li>没有<a href="https://zhidao.baidu.com/question/521596849.html">串音干扰</a>，保密性好</li><li>体积小，重量轻</li></ol></li></ul></li></ol><h3 id="3-2-非导引型传输媒体"><a href="#3-2-非导引型传输媒体" class="headerlink" title="3.2 非导引型传输媒体"></a>3.2 非导引型传输媒体</h3><ul><li>自由空间</li><li>无线传输使用的频段很广</li><li>短波通信（高频通信）主要靠电离层的反射，短波信道的通信质量较差，传输速率小</li><li>微波在空间主要是直线传播</li><li>传统微波通信有两种方式：<ol><li>地面微波接力通信</li><li>卫星通信</li></ol></li></ul><h2 id="4-信道复用技术"><a href="#4-信道复用技术" class="headerlink" title="4 信道复用技术"></a>4 信道复用技术</h2><p>复用是指允许用户使用一个共享信道进行通信，从而降低成本，提高利用率。</p><p><img src="https://pic.imgdb.cn/item/6146e00f2ab3f51d919024ce.jpg"></p><h3 id="4-1-频分复用FDM"><a href="#4-1-频分复用FDM" class="headerlink" title="4.1 频分复用FDM"></a>4.1 频分复用FDM</h3><ul><li>将整个带宽分为多份，用户在分配到一定的频带后，在通信过程中始终占用这个频带</li><li>频分复用的所有用户在同样的时间<strong>占用不同的带宽资源</strong>(这里是指频率带宽而不是数据的发送速率)</li></ul><p><img src="https://pic.imgdb.cn/item/6149a1952ab3f51d91efc11e.jpg"></p><h3 id="4-2-时分复用TDM"><a href="#4-2-时分复用TDM" class="headerlink" title="4.2 时分复用TDM"></a>4.2 时分复用TDM</h3><ul><li><p>时分复用是将时间划分为一段段等长的<strong>时分复用帧</strong>(TDM帧)，每一个时分复用的用户在每一个TDM帧中占用固定序号的时隙</p></li><li><p>每一个用户所占用的时隙是<strong>周期性出现的</strong>(周期就是TDM帧的长度)</p></li><li><p>TDM信号也被称为<strong>等时</strong>信号</p></li><li><p><strong>时分复用的所有用户在不同的时间占用相同的频带宽度</strong></p><p><img src="https://pic.imgdb.cn/item/6149a2e62ab3f51d91f1d548.jpg"></p></li><li><p><b style="color: red">时分复用可能会造成线路资源的浪费</b></p><p><img src="https://pic.imgdb.cn/item/6149a38b2ab3f51d91f2da2c.jpg"></p></li></ul><h3 id="4-3-统计时分复用STDM"><a href="#4-3-统计时分复用STDM" class="headerlink" title="4.3 统计时分复用STDM"></a>4.3 统计时分复用STDM</h3><p>STDM帧<strong>不是固定分配</strong>时隙，而是<strong>按需动态地</strong>分配时隙。所以统计时分复用可以提高线路的利用率。(优化了时分复用，减小线路资源的浪费)</p><p><img src="https://pic.imgdb.cn/item/6149a4532ab3f51d91f429c5.jpg"></p><h3 id="4-4-波分复用WDM"><a href="#4-4-波分复用WDM" class="headerlink" title="4.4 波分复用WDM"></a>4.4 波分复用WDM</h3><p>波分复用就是指光的频分复用。使用一根光纤来同时传输多个光载波信号</p><p><img src="https://pic.imgdb.cn/item/6149a4b72ab3f51d91f4d502.jpg"></p><h3 id="4-5-码分复用CDM"><a href="#4-5-码分复用CDM" class="headerlink" title="4.5 码分复用CDM"></a>4.5 码分复用CDM</h3><ul><li>常用名词<strong>码分多址</strong>CDMA</li><li>各用户使用经过特殊挑选的不同码型，因此彼此之间不会造成干扰</li><li>这种系统发出的信号有很强的抗干扰能力</li></ul><p><strong>码片序列</strong>：</p><ul><li>每一个比特时间划分为m个短的间隔，称为<strong>码片</strong></li><li>每个站被指派一个唯一的m bit 码片序列<ul><li>如果发送比特1，就发送自己的m bit 码片序列</li><li>如果发送比特0， 就发送该码片序列的二进制反码</li></ul></li><li>例如，S站的8 bit 码片序列是 0001 1011<ul><li>发送比特1时，就发送序列0001 1011</li><li>发送比特0时，就发送序列1110 0100</li></ul></li><li>S站的码片序列是(-1 -1 -1 +1 +1 -1 +1 +1)</li></ul><p><strong>CDMA的重要特点</strong>：</p><ul><li>每个站分配的码片序列<b style="color: red">必须各不相同</b>, 并且还<b style="color: red">必须互相正交</b></li><li>在使用的系统中使用<strong>伪随机码序列</strong></li></ul><p><strong>码片序列的正交关系</strong>：</p><ul><li><p>向量S表示站S的码片向量，T表示其他任何站的码片向量</p></li><li><p>两个不同站的码片序列正交，就是向量S和T的规格化<strong>内积</strong>等于0</p><p><img src="C:\Users\CZH0318\AppData\Roaming\Typora\typora-user-images\image-20210923225303662.png" alt="image-20210923225303662"></p></li><li><p>任何一个码片向量和自生的规格化内积都是1</p></li><li><p>一个码片向量和该码片反码的向量的规格化内积值是-1</p></li></ul><h2 id="5-数字传输系统"><a href="#5-数字传输系统" class="headerlink" title="5 数字传输系统"></a>5 数字传输系统</h2><p>PCM有两个互不兼容的国际标准：</p><ul><li>北美的24路PCM(简称为T1)， 速率是1.544 Mbit / s</li><li>欧洲的30路PCM(简称为E1), 速率是2.048 Mbit / s，是我国采用的标准</li></ul><p><strong>旧数字传输系统两大缺点</strong>：</p><ul><li><strong>速率不统一</strong></li><li><strong>不是同步传输</strong></li></ul><h2 id="6-宽带接入技术"><a href="#6-宽带接入技术" class="headerlink" title="6 宽带接入技术"></a>6 宽带接入技术</h2><p>从宽带接入的媒体来分，可以分为两大类：</p><ul><li>有线宽带接入</li><li>无线宽带接入</li></ul><h3 id="6-1-ADSL技术"><a href="#6-1-ADSL技术" class="headerlink" title="6.1 ADSL技术"></a>6.1 ADSL技术</h3><ul><li><strong>非对称数字用户线ADSL</strong>技术就是用数字技术对现有的模拟电话用户先进行改造，使它能够承载宽带业务</li><li>标准模拟电话信号的频带被限制在300~3400Hz之间，但是用户线本身实际可通过的信号频率超过1 MHz</li><li>ADSL把0~4 kHz低端频谱留给传统电话使用，原来没有被用上的高端频谱留给用户上网使用</li><li>DSL是<strong>数字用户线</strong>（Digital Subscriber Line）的缩写</li></ul><p><strong>ADSL的传输距离</strong>：</p><ul><li>ADSL的传输距离取决于数据率和用户线的线径(用户线越细，信号传输时的衰减就越大)</li><li>ADSL能得到的最高数据传输速率与实际的用户线上的信噪比密切相关</li></ul><p><strong>ADSL的特点</strong>：</p><ul><li>上行和下行的带宽是不对称的(上行指的是从用户到ISP, 下行指的是从ISP到用户)</li><li>ADSL在用户线的两端各安装一个<strong>ADSL调制解调器</strong></li></ul><p><strong>ADSL的数据率</strong>：</p><ul><li><strong>ADSL采用自适应调制技术使用户线能够传送尽可能高的数据率</strong></li><li><strong>ADSL不能保证固定的数据率</strong>，质量差的用户线可能无法开通ADSL</li></ul><p><strong>第二代ADSL</strong>:</p><ul><li>包括ADSL2和ADSL2+</li><li>通过提高调制效率得到了<strong>更高的数据率</strong></li><li>采用<strong>无缝速率自适应技术SRA</strong>，可以在运营中不中断通信和不产生误码的情况下，自适应地调整数据率</li><li>改善了线路质量和故障定位功能，对提高网络的运行维护水平具有重要的意义</li></ul><h3 id="6-2-光纤同轴混合网-HFC网"><a href="#6-2-光纤同轴混合网-HFC网" class="headerlink" title="6.2 光纤同轴混合网(HFC网)"></a>6.2 光纤同轴混合网(HFC网)</h3><ul><li><p>HFC网是在目前覆盖面很广的有线电视网CATV的基础上开发的一种居民宽带接入网</p></li><li><p>HFC网除可传送CATV外，还提供电话、数据和其他宽带交互型业务</p></li><li><p>现有的CATV网是树型拓扑结构的同轴电缆网络，采用模拟技术的频分复用对电视节目进行单向传输</p></li><li><p>HFC网对CATV网进行了改造</p></li><li><p>HFC网将原CATV网中的同轴电缆<strong>主干部分换成光纤</strong>，并使用<strong>模拟光纤技术</strong></p></li><li><p>在模拟光纤中采用<strong>光的振幅调制AM</strong></p></li></ul><p><strong>HFC网具有双向传输功能，扩展了传输频带</strong></p><h3 id="6-3-FTTx技术"><a href="#6-3-FTTx技术" class="headerlink" title="6.3  FTTx技术"></a>6.3  FTTx技术</h3><ul><li>FTTx是一种实现宽带居民接入网的方案，代表多种宽带光纤接入方式</li><li>FTTx代表Fiber To The … （光纤到…）<ul><li><strong>光纤到户FTTH</strong>：光纤一直铺设到用户家庭</li><li><strong>光纤到达楼FTTB</strong>：光纤进入大楼后转换成电信号，然后用电缆或双绞线分配到各用户</li><li><strong>光纤到路边FTTC</strong>：光纤铺到路边，从路边到各用户可使用星形结构双绞线作为传输媒体。</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库学习笔记(一)</title>
      <link href="/2021/10/20/SQL-1/"/>
      <url>/2021/10/20/SQL-1/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库学习笔记-一"><a href="#数据库学习笔记-一" class="headerlink" title="数据库学习笔记(一)"></a>数据库学习笔记(一)</h1><p><b style="color: red">个人习惯，SQL都直接用小写字母，SQL不区分大小写，大写个人看着别扭。</b></p><h2 id="1-SQL概述"><a href="#1-SQL概述" class="headerlink" title="1. SQL概述"></a>1. SQL概述</h2><ul><li><p>SQL(Structured Query Language)：结构化查询语言，是关系数据库的标准语言。</p></li><li><p>SQL是一个通用的、功能极强的关系数据库语言</p></li><li><p>SQL以同一种语法结构提供多种使用方式</p><ol><li>SQL是一门独立的语言，能够独立地用于联机交互的使用方式</li><li>SQL也是一门嵌入式语言，能够嵌入到高级语言(如C、Java)中</li></ol></li></ul><h2 id="2-数据定义"><a href="#2-数据定义" class="headerlink" title="2. 数据定义"></a>2. 数据定义</h2><h3 id="2-1-模式的定义与删除"><a href="#2-1-模式的定义与删除" class="headerlink" title="2.1 模式的定义与删除"></a>2.1 模式的定义与删除</h3><h4 id="2-1-1-定义模式"><a href="#2-1-1-定义模式" class="headerlink" title="2.1.1 定义模式"></a>2.1.1 定义模式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> schema &quot;S-T&quot; <span class="hljs-keyword">authorization</span> Wang   # 为用户Wang定义一个模式S<span class="hljs-operator">-</span>T<br></code></pre></td></tr></table></figure><p>如果没有指定模式名，则模式名隐含为用户名</p><h4 id="2-1-2-删除模式"><a href="#2-1-2-删除模式" class="headerlink" title="2.1.2 删除模式"></a>2.1.2 删除模式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> schema <span class="hljs-operator">&lt;</span>模式名<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>cascade<span class="hljs-operator">|</span>restrict<span class="hljs-operator">&gt;</span><br></code></pre></td></tr></table></figure><ul><li>cascade(级联)：删除模式的同时把该模式中的所有数据库对象(如表等)全部删除</li><li>restrict(限制)：如果该模式中定义了数据库对象(如表、视图等)，则会拒绝该删除语句的执行</li></ul><h3 id="2-2-基本表的定义、删除与修改"><a href="#2-2-基本表的定义、删除与修改" class="headerlink" title="2.2 基本表的定义、删除与修改"></a>2.2 基本表的定义、删除与修改</h3><h4 id="2-2-1-基本表定义"><a href="#2-2-1-基本表定义" class="headerlink" title="2.2.1 基本表定义"></a>2.2.1 基本表定义</h4><p>语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">&lt;</span>表名<span class="hljs-operator">&gt;</span><br>(<span class="hljs-operator">&lt;</span>列名<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>数据类型<span class="hljs-operator">&gt;</span> [<span class="hljs-operator">&lt;</span>列级完整性约束条件<span class="hljs-operator">&gt;</span>]<br>     [,<span class="hljs-operator">&lt;</span>列名<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>数据类型<span class="hljs-operator">&gt;</span> [<span class="hljs-operator">&lt;</span>列级完整性约束条件<span class="hljs-operator">&gt;</span>]]<br>     ...<br>     [,<span class="hljs-operator">&lt;</span>表级完整性约束条件<span class="hljs-operator">&gt;</span>]);<br></code></pre></td></tr></table></figure><p>基本表定义：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> Student<br>(Sno <span class="hljs-type">char</span>(<span class="hljs-number">9</span>) <span class="hljs-keyword">primary</span> key,# 列级完整性约束条件，Sno是主码<br>     Sname <span class="hljs-type">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">unique</span>, # Sname取唯一值<br>     Sage <span class="hljs-type">smallint</span><br>    );<br></code></pre></td></tr></table></figure><p>有外码的基本表定义</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> Course<br>(Cno <span class="hljs-type">char</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">primary</span> key,<br>     Cname <span class="hljs-type">char</span>(<span class="hljs-number">40</span>),<br>     <span class="hljs-keyword">foreign</span> key(Cpno) <span class="hljs-keyword">references</span> Course(Cno) # 表级完整性约束条件<br>     # Cpno是外码，被参照表是Course,被参照列是Cno<br>    );<br></code></pre></td></tr></table></figure><h4 id="2-2-2-模式与表"><a href="#2-2-2-模式与表" class="headerlink" title="2.2.2 模式与表"></a>2.2.2 模式与表</h4><ul><li><p>每一个基本表都属于某一个模式</p></li><li><p>一个模式包含多个基本表</p></li><li><p>定义基本表所属模式</p><ol><li><p>在表名中给出模式名</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> &quot;S-T&quot;.Student(...);   # 模式名为S<span class="hljs-operator">-</span>T<br></code></pre></td></tr></table></figure></li><li><p>在创建模式语句中同时创建表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> schema Test <span class="hljs-keyword">authorization</span> Zhang<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> tab(...);<br></code></pre></td></tr></table></figure></li><li><p>设置所属的模式</p></li></ol></li><li><p>创建基本表(以及其他数据库对象)，如果没有指定模式，系统会根据<strong>搜索对象</strong>来确定该对象所属的模式</p></li><li><p>关系数据库管理系统会使用模式列表中<strong>第一个存在的模式</strong>作为数据库对象的模式名</p></li></ul><p>显示当前的搜索路径: <code> show search_path;</code></p><h4 id="2-2-3-修改基本表"><a href="#2-2-3-修改基本表" class="headerlink" title="2.2.3 修改基本表"></a>2.2.3 修改基本表</h4><ul><li><p>增加列</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> Student <span class="hljs-keyword">add</span> S_entrance <span class="hljs-type">Date</span>;<br><span class="hljs-comment">/* 向Student表中增加列S_entrance, 数据类型为日期型 */</span><br></code></pre></td></tr></table></figure><p><strong>新增的列为空值</strong></p></li><li><p>修改列的数据类型</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> Student <span class="hljs-keyword">alter</span> <span class="hljs-keyword">column</span> Sage <span class="hljs-type">int</span>;<br><span class="hljs-comment">/* 将年龄那一列地数据类型变为整型 */</span><br></code></pre></td></tr></table></figure></li><li><p>增加列的约束条件</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> Course <span class="hljs-keyword">add</span> <span class="hljs-keyword">unique</span>(Cname)<br><span class="hljs-comment">/* 为表Course的Cname列增加必须取唯一值的约束条件 */</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="2-2-4-删除基本表"><a href="#2-2-4-删除基本表" class="headerlink" title="2.2.4 删除基本表"></a>2.2.4 删除基本表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">&lt;</span>表名<span class="hljs-operator">&gt;</span> [cascade<span class="hljs-operator">|</span>restrict]  # 参考删除模式<br></code></pre></td></tr></table></figure><h3 id="2-3-索引的建立与删除"><a href="#2-3-索引的建立与删除" class="headerlink" title="2.3   索引的建立与删除"></a>2.3   索引的建立与删除</h3><p>建立索引的目的：加快查询速度</p><h4 id="2-3-1-建立索引"><a href="#2-3-1-建立索引" class="headerlink" title="2.3.1 建立索引"></a>2.3.1 建立索引</h4><p>语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> [<span class="hljs-keyword">unique</span>] [cluster] index <span class="hljs-operator">&lt;</span>索引名<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">on</span> <span class="hljs-operator">&lt;</span>表名<span class="hljs-operator">&gt;</span>(<span class="hljs-operator">&lt;</span>列名<span class="hljs-operator">&gt;</span>[<span class="hljs-operator">&lt;</span>次序<span class="hljs-operator">&gt;</span>]);<br></code></pre></td></tr></table></figure><ul><li>次序：指定索引值的排列次序，升序：asc，降序：desc，默认值是asc</li><li>unique：该索引的每一个索引值只对应唯一的数据记录</li><li>cluster：表示要建立的索引是聚簇索引</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">unique</span> index Stusno <span class="hljs-keyword">on</span> Student(Sno); # Student表按学号升序建唯一索引<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">unique</span> index SCno <span class="hljs-keyword">on</span> SC(Sno, <span class="hljs-keyword">asc</span>, Cno, <span class="hljs-keyword">desc</span>);<br><span class="hljs-comment">/* SC表按学号升序和课程号降序建唯一索引 */</span><br></code></pre></td></tr></table></figure><h4 id="2-3-2-修改索引"><a href="#2-3-2-修改索引" class="headerlink" title="2.3.2 修改索引"></a>2.3.2 修改索引</h4><p>语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> index <span class="hljs-operator">&lt;</span>旧索引名<span class="hljs-operator">&gt;</span> rename <span class="hljs-keyword">to</span> <span class="hljs-operator">&lt;</span>新索引名<span class="hljs-operator">&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> index SCno rename <span class="hljs-keyword">to</span> SCSno; # 将SC表的SCno索引名改为SCSno<br></code></pre></td></tr></table></figure><h4 id="2-3-3-删除索引"><a href="#2-3-3-删除索引" class="headerlink" title="2.3.3 删除索引"></a>2.3.3 删除索引</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> index SCno; # 删除SCno索引<br></code></pre></td></tr></table></figure><h2 id="3-数据查询"><a href="#3-数据查询" class="headerlink" title="3. 数据查询"></a>3. 数据查询</h2><h3 id="3-1-单表查询"><a href="#3-1-单表查询" class="headerlink" title="3.1 单表查询"></a>3.1 单表查询</h3><p><strong>查询只涉及一个表</strong></p><ul><li><p>选择表中的若干列</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">/* 1. 查询指定列 */</span><br>selete Sno, Sname <span class="hljs-keyword">from</span> Student;<br><br><span class="hljs-comment">/* 2. 查询全部列 */</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Student;<br><br><span class="hljs-comment">/* 3. 查询经过计算的值 */</span><br><span class="hljs-keyword">select</span> Sname, <span class="hljs-number">2021</span><span class="hljs-operator">-</span>Sage <span class="hljs-keyword">from</span> Student;<br></code></pre></td></tr></table></figure></li><li><p>选择表中的若干元组</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">/* 如果没有指定distinct关键词，则默认为all，all不会去重 */</span><br><span class="hljs-keyword">select</span> Sno <span class="hljs-keyword">from</span> SC;<br># 等价于<br><span class="hljs-keyword">select</span> <span class="hljs-keyword">all</span> Sno <span class="hljs-keyword">from</span> SC;<br><br><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> Sno <span class="hljs-keyword">from</span> SC; # 会去重<br><br><span class="hljs-comment">/* 查询满足条件的元组 */</span><br><span class="hljs-comment">/* 1. 比较大小 */</span><br><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> Sno <span class="hljs-keyword">from</span> SC<br><span class="hljs-keyword">where</span> Grade<span class="hljs-operator">&lt;</span><span class="hljs-number">60</span>;  # 查询考试成绩有不及格的学生的学号<br><br><span class="hljs-comment">/* 2. 确定范围 */</span><br><span class="hljs-keyword">select</span> Sname <span class="hljs-keyword">from</span> Student <br><span class="hljs-keyword">where</span> Sage <span class="hljs-keyword">between</span> <span class="hljs-number">20</span> <span class="hljs-keyword">and</span> <span class="hljs-number">23</span>; # 用谓词<span class="hljs-keyword">between</span> ... <span class="hljs-keyword">and</span> ... 来确定范围<br><br><span class="hljs-comment">/* 3. 确定集合 */</span><br><span class="hljs-keyword">select</span> Sname <span class="hljs-keyword">from</span> Student <br><span class="hljs-keyword">where</span> Sdept <span class="hljs-keyword">in</span> (<span class="hljs-string">&#x27;CS&#x27;</span>, <span class="hljs-string">&#x27;MA&#x27;</span>, <span class="hljs-string">&#x27;Is&#x27;</span>); # 查询CS系、MA系、<span class="hljs-keyword">IS</span>系的学生的姓名<br><br><span class="hljs-comment">/* 4. 字符匹配 */</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Student <br><span class="hljs-keyword">where</span> Sno <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;201211123&#x27;</span>; # 查询学号为<span class="hljs-number">201211123</span>的学生的信息<br><br><span class="hljs-keyword">select</span> Sname <span class="hljs-keyword">from</span> Student <br><span class="hljs-keyword">where</span> Sname <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;_阳%&#x27;</span>  # 查询名字中第二个字为&quot;阳&quot;的学生的姓名<br><span class="hljs-comment">/* 通配符%代表任意长度的(包括长度为0)的字符串，而通配符_代表匹配任意单个字符 */</span><br><br><span class="hljs-keyword">select</span> Cno <span class="hljs-keyword">from</span> Course<br><span class="hljs-keyword">where</span> Cname <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;DB/_Design&#x27;</span> <span class="hljs-keyword">escape</span> &quot;/&quot;; <span class="hljs-comment">/*使用换码字符&quot;/&quot;将通配符转义为普通字符*/</span><br><br><span class="hljs-comment">/* 5. 涉及空值的查询 */</span><br><span class="hljs-keyword">select</span> Sno <span class="hljs-keyword">from</span> SC<br><span class="hljs-keyword">where</span> Grade <span class="hljs-keyword">is</span> <span class="hljs-keyword">NULL</span>;  # 查询没有成绩的学生的学号<br><br></code></pre></td></tr></table></figure></li><li><p>order by子句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> Sno <span class="hljs-keyword">from</span> SC <br><span class="hljs-keyword">where</span> Cno<span class="hljs-operator">=</span><span class="hljs-string">&#x27;3&#x27;</span><br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> Grade <span class="hljs-keyword">DESC</span>; # 查询选修了<span class="hljs-number">3</span>号课程的学生的学号，结果按分数降序排列<br></code></pre></td></tr></table></figure></li><li><p>聚集函数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> Student;   # 查询学生总人数<br><br><span class="hljs-keyword">select</span> <span class="hljs-built_in">avg</span>(Grade) <span class="hljs-keyword">from</span> SC<br><span class="hljs-keyword">where</span> Cno<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1&#x27;</span>;  # 查询<span class="hljs-number">1</span>号课程的学生的平均成绩<br></code></pre></td></tr></table></figure></li><li><p>group by子句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> Cno, <span class="hljs-built_in">count</span>(Sno) <span class="hljs-keyword">from</span> SC<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> Cno; # 根据Cno分组，会去重<br><br><span class="hljs-keyword">select</span> Cno, <span class="hljs-built_in">count</span>(Sno) <span class="hljs-keyword">from</span> SC<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> Cno, Sno; # 根据Cno,Sno分组，只有Cno和Sno相同的会分为一组<br><br><span class="hljs-comment">/* 增加条件表达式 */</span><br><span class="hljs-keyword">select</span> Sno <span class="hljs-keyword">from</span> Sc<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> Sno<br><span class="hljs-keyword">having</span> <span class="hljs-built_in">avg</span>(Grade)<span class="hljs-operator">&gt;=</span><span class="hljs-number">90</span>; <br></code></pre></td></tr></table></figure><p><strong>having短语与where自居的区别</strong>：</p><ul><li>作用对象不同</li><li>where子句作用于基表或视图，从中选择满足条件的元组</li><li>having短语作用于组，从中选择满足条件的元组</li></ul><p><b style="color: red">where子句中不能使用聚集函数作为条件表达式</b></p></li></ul><h3 id="3-2-连接查询"><a href="#3-2-连接查询" class="headerlink" title="3.2 连接查询"></a>3.2 连接查询</h3><p>连接查询：同时涉及两个以上的表的查询</p><ul><li><p>等值与非等值连接查询</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">/* 等值连接 */</span><br><span class="hljs-keyword">select</span> Student.<span class="hljs-operator">*</span>, SC.<span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Studentm SC<br><span class="hljs-keyword">where</span> Student.Sno <span class="hljs-operator">=</span> SC.Sno   # 查询每个学生及其选修课程的情况<br><br><span class="hljs-comment">/*  自然连接 */</span><br><span class="hljs-keyword">select</span> Student.Sno, Sname, Sage, Cno, GRade <span class="hljs-keyword">from</span> Student, SC<br><span class="hljs-keyword">where</span> Student.Sno <span class="hljs-operator">=</span> SC.Sno  # 上面的查询用自然连接完成<br></code></pre></td></tr></table></figure></li><li><p>自身连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> First.Cno, Second.Cpno <br><span class="hljs-keyword">from</span> Course <span class="hljs-keyword">First</span>, Course <span class="hljs-keyword">Second</span> # 因为所有属性名都是同名的，所以需要使用别名前缀<br><span class="hljs-keyword">where</span> First.Cpno <span class="hljs-operator">=</span> Second.Cno;  # 查询每一门课的间接先修课<br></code></pre></td></tr></table></figure></li><li><p>外连接</p></li><li><p>多表连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> Student.Sno, Sname, Cname <br><span class="hljs-keyword">from</span> Student, SC, Course<br><span class="hljs-keyword">where</span> Student.Sno <span class="hljs-operator">=</span> SC.Sno <span class="hljs-keyword">and</span> SC.Cno <span class="hljs-operator">=</span> Course.Cno;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-3-嵌套查询"><a href="#3-3-嵌套查询" class="headerlink" title="3.3 嵌套查询"></a>3.3 嵌套查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">/*  1. 带有in谓词的子查询 */</span><br><span class="hljs-keyword">select</span> Sno, Sname, Sdept <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sdept <span class="hljs-keyword">in</span><br>(<span class="hljs-keyword">select</span> Sdept <span class="hljs-keyword">from</span> Student<br>     <span class="hljs-keyword">where</span> Sname<span class="hljs-operator">=</span><span class="hljs-string">&#x27;刘成&#x27;</span><br>    );   # 查询和&quot;刘成&quot;在同一个系的学生<br>    <br>    <br><span class="hljs-comment">/* 2. 带有比较运算符的子查询 */</span><br><span class="hljs-keyword">select</span> Sno, Cno <span class="hljs-keyword">from</span> SC x<br><span class="hljs-keyword">where</span> Grade <span class="hljs-operator">&gt;=</span> (<span class="hljs-keyword">select</span> <span class="hljs-built_in">avg</span>(Grade) <span class="hljs-keyword">from</span> SC y<br>   <span class="hljs-keyword">where</span> y.Sno <span class="hljs-operator">=</span> x.Sno);<br><br><span class="hljs-comment">/* 3. 带有any(some)或all谓词的子查询 */</span><br># 使用<span class="hljs-keyword">any</span>或<span class="hljs-keyword">all</span>谓词时需要同时使用比较运算<br># <span class="hljs-keyword">any</span>表示子查询结果中的某个值, <span class="hljs-keyword">all</span>表示子查询结果中的所有值<br><br><span class="hljs-keyword">select</span> Sname, Sage <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sage <span class="hljs-operator">&lt;</span> <span class="hljs-keyword">any</span>(<span class="hljs-keyword">select</span> Sage <span class="hljs-keyword">from</span> Student<br>                 <span class="hljs-keyword">where</span> Sdept<span class="hljs-operator">=</span><span class="hljs-string">&#x27;CS&#x27;</span>)<br><span class="hljs-keyword">and</span> Sdept <span class="hljs-operator">&lt;&gt;</span> <span class="hljs-string">&#x27;CS&#x27;</span>;   # 父查询块中的条件，<span class="hljs-string">&#x27;&lt;&gt;&#x27;</span>作用和<span class="hljs-string">&#x27;!=&#x27;</span>一样<br><span class="hljs-comment">/* 子查询先把所有CS系的学生的年龄找出来，然后使用any谓词找出比找出来的结果中任意一个年龄小的 */</span><br><br><span class="hljs-comment">/* 4. 带有exists谓词的子查询 */</span><br><span class="hljs-keyword">select</span> Sname <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> <span class="hljs-keyword">exists</span>   # 带有<span class="hljs-keyword">exists</span>谓词的子查询不返回任何数据，若内层查询结果为空，则外层的<span class="hljs-keyword">where</span>子句返回假值<br>(<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> SC<br>     <span class="hljs-keyword">where</span> Sno <span class="hljs-operator">=</span> Student.Sno <span class="hljs-keyword">and</span> Cno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;1&#x27;</span><br>    );  <br><br></code></pre></td></tr></table></figure><h3 id="3-4-集合查询"><a href="#3-4-集合查询" class="headerlink" title="3.4 集合查询"></a>3.4 集合查询</h3><ul><li><p>并集union</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sdept<span class="hljs-operator">=</span><span class="hljs-string">&#x27;CS&#x27;</span><br><span class="hljs-keyword">union</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sage<span class="hljs-operator">&lt;=</span><span class="hljs-number">19</span>  # 查询CS系以及年龄不超过<span class="hljs-number">19</span>岁的学生<br><span class="hljs-comment">/* union: 将多个查询结果合并起来，系统会自动去重 */</span><br><span class="hljs-comment">/* union all: 将多个查询结果合并起来后，不去重 */</span><br></code></pre></td></tr></table></figure></li><li><p>交集intersect</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sdept<span class="hljs-operator">=</span><span class="hljs-string">&#x27;CS&#x27;</span><br><span class="hljs-keyword">intersect</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sage<span class="hljs-operator">&lt;=</span><span class="hljs-number">19</span>   # 查询CS系而且年龄不超过<span class="hljs-number">19</span>岁的学生<br></code></pre></td></tr></table></figure></li><li><p>差集except</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sdept<span class="hljs-operator">=</span><span class="hljs-string">&#x27;CS&#x27;</span><br><span class="hljs-keyword">except</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sage<span class="hljs-operator">&lt;=</span><span class="hljs-number">19</span>   # 查询CS系中年龄超过<span class="hljs-number">19</span>岁的学生<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-数据更新"><a href="#4-数据更新" class="headerlink" title="4. 数据更新"></a>4. 数据更新</h2><h3 id="4-1-插入数据"><a href="#4-1-插入数据" class="headerlink" title="4.1 插入数据"></a>4.1 插入数据</h3><p>两种插入方式：</p><ul><li><p>插入元组</p><p>语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-operator">&lt;</span>表名<span class="hljs-operator">&gt;</span> [(<span class="hljs-operator">&lt;</span>属性列<span class="hljs-number">1</span><span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span>属性列<span class="hljs-number">2</span><span class="hljs-operator">&gt;</span>...)]<br><span class="hljs-keyword">values</span>(<span class="hljs-operator">&lt;</span>常量<span class="hljs-number">1</span><span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span>常量<span class="hljs-number">2</span><span class="hljs-operator">&gt;</span>...);<br></code></pre></td></tr></table></figure><p>作用：将元组插入到指定表中</p><p>into子句：</p><ol><li>指定要插入的表名及属性列</li><li>属性列的顺序和表定义的顺序可以不一致</li><li>没有指定属性列：表示要插入的是完整的元组，而且属性列顺序和表定义的顺序需要一致</li><li>指定部分属性列：插入的元组在其余属性列上取空值</li></ol><p>values子句：提供的值必须和into子句匹配，包括值的个数和值的类型</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC(Sno, Cno)<br><span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;20121112&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>);   # 增加选课记录<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Student<br><span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;2012322221&#x27;</span>, <span class="hljs-string">&#x27;ttt&#x27;</span>, <span class="hljs-string">&#x27;男&#x27;</span>, <span class="hljs-number">111</span>, <span class="hljs-string">&#x27;CS&#x27;</span>);  # <span class="hljs-keyword">into</span>子句没有给出指定属性列，所以插入的是完整的元组<br></code></pre></td></tr></table></figure></li><li><p>插入子查询结果</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">/* 1. 建表 */</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> Dept_age<br>(Sdept <span class="hljs-type">char</span>(<span class="hljs-number">15</span>)<br>     Avg_age <span class="hljs-type">smallint</span>);<br>  <br><span class="hljs-comment">/* 2. 插入数据 */</span><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Dept_age(Sdept, Avg_age)<br><span class="hljs-keyword">select</span> Sdept, <span class="hljs-built_in">avg</span>(Sage) <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> Sdept;<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-2-修改数据"><a href="#4-2-修改数据" class="headerlink" title="4.2 修改数据"></a>4.2 修改数据</h3><p>语句格式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">update <span class="hljs-operator">&lt;</span>表名<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">set</span> <span class="hljs-operator">&lt;</span>列名<span class="hljs-operator">&gt;=</span><span class="hljs-operator">&lt;</span>表达式<span class="hljs-operator">&gt;</span>[, <span class="hljs-operator">&lt;</span>列名<span class="hljs-operator">&gt;=</span><span class="hljs-operator">&lt;</span>表达式<span class="hljs-operator">&gt;</span>]...<br>[<span class="hljs-keyword">where</span> <span class="hljs-operator">&lt;</span>条件<span class="hljs-operator">&gt;</span>]  # 省略<span class="hljs-keyword">where</span>子句，表示要修改表中的所有元组<br></code></pre></td></tr></table></figure><h4 id="4-2-1-修改某一个元组的值"><a href="#4-2-1-修改某一个元组的值" class="headerlink" title="4.2.1 修改某一个元组的值"></a>4.2.1 修改某一个元组的值</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">update Student <br><span class="hljs-keyword">set</span> Sage <span class="hljs-operator">=</span> <span class="hljs-number">22</span><br><span class="hljs-keyword">where</span> Sno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;201123012&#x27;</span>;<br></code></pre></td></tr></table></figure><h4 id="4-2-2-修改多个元组的值"><a href="#4-2-2-修改多个元组的值" class="headerlink" title="4.2.2 修改多个元组的值"></a>4.2.2 修改多个元组的值</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">update Student<br><span class="hljs-keyword">set</span> Sage <span class="hljs-operator">=</span> Sage <span class="hljs-operator">+</span> <span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><h4 id="4-2-3-带子查询的修改语句"><a href="#4-2-3-带子查询的修改语句" class="headerlink" title="4.2.3 带子查询的修改语句"></a>4.2.3 带子查询的修改语句</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">update SC<br><span class="hljs-keyword">set</span> Grade <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">where</span> Sno <span class="hljs-keyword">in</span><br>(<span class="hljs-keyword">select</span> Sno <span class="hljs-keyword">from</span> Student<br>     <span class="hljs-keyword">where</span> Sdept <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;CS&#x27;</span>);<br></code></pre></td></tr></table></figure><h3 id="4-3-删除数据"><a href="#4-3-删除数据" class="headerlink" title="4.3 删除数据"></a>4.3 删除数据</h3><h4 id="4-3-1-删除某一个元组的值"><a href="#4-3-1-删除某一个元组的值" class="headerlink" title="4.3.1 删除某一个元组的值"></a>4.3.1 删除某一个元组的值</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;201233215&#x27;</span>;<br></code></pre></td></tr></table></figure><h4 id="4-3-2-删除多个元组的值"><a href="#4-3-2-删除多个元组的值" class="headerlink" title="4.3.2 删除多个元组的值"></a>4.3.2 删除多个元组的值</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> SC;<br></code></pre></td></tr></table></figure><h4 id="4-3-3-带子查询的删除语句"><a href="#4-3-3-带子查询的删除语句" class="headerlink" title="4.3.3 带子查询的删除语句"></a>4.3.3 带子查询的删除语句</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> SC<br><span class="hljs-keyword">where</span> Sno <span class="hljs-keyword">in</span><br>(<span class="hljs-keyword">select</span> Sno <span class="hljs-keyword">from</span> Student<br>     <span class="hljs-keyword">where</span> Sdept<span class="hljs-operator">=</span><span class="hljs-string">&#x27;CS&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="5-空值的处理"><a href="#5-空值的处理" class="headerlink" title="5. 空值的处理"></a>5. 空值的处理</h2><p><strong>空值</strong>：不知道或不存在或无意义的值，有以下几种情况</p><ul><li>该属性应该有值，但是目前不知道它的具体值</li><li>该属性不应该有值</li><li>由于某种原因不便于填写</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 产生空值<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC(Sno, Cno, Grade)<br><span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;2012345632&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-keyword">null</span>);<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC(Sno, Cno) <br><span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;2012345621&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>);# 没有赋值的属性，其值为空值<br><br>update Student<br><span class="hljs-keyword">set</span> Sdept <span class="hljs-operator">=</span> <span class="hljs-keyword">null</span><br><span class="hljs-keyword">where</span> Sno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;20123245656&#x27;</span>;<br><br># 空值的判断<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sname <span class="hljs-keyword">is</span> <span class="hljs-keyword">null</span>;<br></code></pre></td></tr></table></figure><p><strong>不能取空值的情况</strong>：</p><ul><li>有not null约束条件不能取空值</li><li>加了unique限制的属性不能取空值</li><li>码属性不能取空值</li></ul><p><strong>空值与另一个值(包括空值)的算术运算的结果是空值</strong></p><p><strong>空值与另一个值(包括空值)的比较运算结果是unknown</strong></p><h2 id="6-视图"><a href="#6-视图" class="headerlink" title="6. 视图"></a>6. 视图</h2><p>视图的特点：</p><ul><li>虚表，是从一个或几个基本表导出的表</li><li>只存放视图的定义，不存放视图对应的数据</li><li>基表中的数据发生变化，从试图中查询出来的数据也会改变</li></ul><h3 id="6-1-定义视图"><a href="#6-1-定义视图" class="headerlink" title="6.1 定义视图"></a>6.1 定义视图</h3><h4 id="6-1-1-建立视图"><a href="#6-1-1-建立视图" class="headerlink" title="6.1.1 建立视图"></a>6.1.1 建立视图</h4><p>语法格式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> <span class="hljs-operator">&lt;</span>视图名<span class="hljs-operator">&gt;</span> [<span class="hljs-operator">&lt;</span>列名<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span>列名<span class="hljs-operator">&gt;</span>...]<br><span class="hljs-keyword">as</span> <span class="hljs-operator">&lt;</span>子查询<span class="hljs-operator">&gt;</span><br>[<span class="hljs-keyword">with</span> <span class="hljs-keyword">check</span> option];<br># <span class="hljs-keyword">with</span> <span class="hljs-keyword">check</span> option：对视图进行update、<span class="hljs-keyword">insert</span>和<span class="hljs-keyword">delete</span>操作时要保证更新、插入和删除的行满足视图定义中的谓词条件<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> IS_Student<br><span class="hljs-keyword">as</span> <br><span class="hljs-keyword">select</span> Sno <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sdept <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;IS&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="6-1-2-删除视图"><a href="#6-1-2-删除视图" class="headerlink" title="6.1.2 删除视图"></a>6.1.2 删除视图</h4><p>语法格式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">view</span> <span class="hljs-operator">&lt;</span>视图名<span class="hljs-operator">&gt;</span> [cascade];# 使用cascade级联删除语句，会把该视图和由它导出的所有的所有试图一起删除<br></code></pre></td></tr></table></figure><p><strong>删除基表时，需要显式的使用drop view语句删除，或者使用cascade级联删除</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">view</span> IS_Student;<br></code></pre></td></tr></table></figure><h3 id="6-2-查询视图"><a href="#6-2-查询视图" class="headerlink" title="6.2 查询视图"></a>6.2 查询视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> Sno, Sage <span class="hljs-keyword">from</span> IS_Student<br><span class="hljs-keyword">where</span> Sage <span class="hljs-operator">&lt;</span> <span class="hljs-number">20</span>;<br><br># 视图消解转换后的查询语句：<br><span class="hljs-keyword">select</span> Sno, Sage <span class="hljs-keyword">from</span> Student<br><span class="hljs-keyword">where</span> Sdept <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;IS&#x27;</span> <span class="hljs-keyword">and</span> Sage <span class="hljs-operator">&lt;</span> <span class="hljs-number">20</span>;<br><br><span class="hljs-comment">/* 视图消解法：1. 进行有效性检查</span><br><span class="hljs-comment">2. 转换成等价的对基本表的查询</span><br><span class="hljs-comment">3. 执行修正后的查询</span><br></code></pre></td></tr></table></figure><h3 id="6-3-更新视图"><a href="#6-3-更新视图" class="headerlink" title="6.3 更新视图"></a>6.3 更新视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql">update IS_Student<br><span class="hljs-keyword">set</span> Sname <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;clz&#x27;</span><br><span class="hljs-keyword">where</span> Sno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;20213114565&#x27;</span>;<br><br># 转换后的语句：<br>update Student <br><span class="hljs-keyword">set</span> Sname <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;clz&#x27;</span><br><span class="hljs-keyword">where</span> Sno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;20213114565&#x27;</span> <span class="hljs-keyword">and</span> Sdept <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;IS&#x27;</span>;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> IS_Student<br><span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;202132456&#x27;</span>, <span class="hljs-string">&#x27;clz&#x27;</span>, <span class="hljs-number">21</span>);<br><br># 转换后的语句：<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Student(Sno, Sname, Sage, Sdept)<br><span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;202132456&#x27;</span>, <span class="hljs-string">&#x27;clz&#x27;</span>, <span class="hljs-number">21</span>, <span class="hljs-string">&#x27;IS&#x27;</span>);<br></code></pre></td></tr></table></figure><h3 id="6-4-视图的作用"><a href="#6-4-视图的作用" class="headerlink" title="6.4 视图的作用"></a>6.4 视图的作用</h3><ul><li>视图能够简化用户的操作</li><li>视图使用户能以多种角度看待同一数据</li><li>视图对重构数据库提供了一定程度的逻辑独立性</li><li>视图能够对机密数据提供安全保护</li><li>适当的利用视图可以更清晰的表达查询</li></ul>]]></content>
      
      
      <categories>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python(二) 序列</title>
      <link href="/2021/10/20/python-2/"/>
      <url>/2021/10/20/python-2/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-二-序列"><a href="#Python-二-序列" class="headerlink" title="Python(二)       序列"></a>Python(二)       序列</h1><p>常用的序列结构：列表、元组、字符串、字典、range、zip、enumerate等</p><h2 id="1-列表"><a href="#1-列表" class="headerlink" title="1. 列表"></a>1. 列表</h2><p><strong>列表对象常用方法</strong></p><p>​     1. append(x)：将元素x添加到列表尾部</p><p>​     2. extend(可迭代对象)：将可迭代对象中所有的元素添加到列表尾部</p><p>​     3. insert(index, x)：在列表指定位置index处添加元素x</p><p>​     4. remove(x)：在列表中删除首次出现的指定元素</p><p>​     5. pop([index])：删除并返回列表中指定位置的元素，默认为最后一个元素</p><p>​     6. clear()：删除列表中所有元素，会保留列表对象</p><p>​     7. index(x)：返回第一个值为x的元素的下标，不存在则抛出异常</p><p>​     8. count(x)：返回指定元素x在列表中的出现次数</p><p>​     9. reverse()：对列表元素进行原地翻转</p><p>​     10. sort()：对列表元素进行排序</p><p>​     11. copy()：返回列表对象的浅复制</p><h3 id="1-1-列表创建、元素的增加、元素的删除"><a href="#1-1-列表创建、元素的增加、元素的删除" class="headerlink" title="1.1 列表创建、元素的增加、元素的删除"></a>1.1 列表创建、元素的增加、元素的删除</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python">a_list = [<span class="hljs-number">1</span>, <span class="hljs-string">&quot;Hello&quot;</span>, <span class="hljs-string">&quot;World&quot;</span>]<br><span class="hljs-built_in">print</span>(a_list)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(a_list))  <span class="hljs-comment"># 列表的创建</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-string">&quot;Hello World!&quot;</span>))  <span class="hljs-comment"># 通过list()方法将可迭代对象类型转换为列表</span><br><span class="hljs-built_in">print</span>()<br><br>a_list += [<span class="hljs-number">7</span>]   <span class="hljs-comment"># 元素增加方法1</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;元素增加方法1：&quot;</span>)<br><span class="hljs-built_in">print</span>(a_list)<br><span class="hljs-built_in">print</span>()<br><br>a_list.append(<span class="hljs-string">&quot;two&quot;</span>)    <span class="hljs-comment"># 元素增加方法2(append())</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;元素增加方法2：&quot;</span>)<br><span class="hljs-built_in">print</span>(a_list)<br><span class="hljs-built_in">print</span>()<br><br>a_list.extend([<span class="hljs-string">&quot;three1&quot;</span>, <span class="hljs-string">&quot;three2&quot;</span>])     <span class="hljs-comment"># 元素增加方法3(extend())</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;元素增加方法3：&quot;</span>)<br><span class="hljs-built_in">print</span>(a_list)<br><span class="hljs-built_in">print</span>()<br><br>a_list.insert(<span class="hljs-number">0</span>, <span class="hljs-number">99</span>)    <span class="hljs-comment"># 元素增加方法4(insert),第一个参数是要新增元素插入的位置,第二个参数是要增加的元素</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;元素增加方法4：&quot;</span>)<br><span class="hljs-built_in">print</span>(a_list)<br><span class="hljs-built_in">print</span>()<br><br>a_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br><span class="hljs-keyword">del</span> a_list[<span class="hljs-number">1</span>]   <span class="hljs-comment"># 使用del命令删除列表指定位置上的元素</span><br><span class="hljs-built_in">print</span>(a_list)<br><span class="hljs-built_in">print</span>()<br><br><span class="hljs-built_in">print</span>(a_list.pop())    <span class="hljs-comment"># 使用列表的pop()删除并返回指定位置上的元素(默认是最后一个)</span><br><span class="hljs-built_in">print</span>(a_list)<br><span class="hljs-built_in">print</span>()<br><br>a_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>]<br>a_list.remove(<span class="hljs-number">2</span>)    <span class="hljs-comment"># 使用列表的remove()删除第一次出现的指定元素</span><br><span class="hljs-built_in">print</span>(a_list)<br></code></pre></td></tr></table></figure><h3 id="1-2-列表元素的访问、计数、成员资格判断"><a href="#1-2-列表元素的访问、计数、成员资格判断" class="headerlink" title="1.2 列表元素的访问、计数、成员资格判断"></a>1.2 列表元素的访问、计数、成员资格判断</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">aList = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>]<br><span class="hljs-built_in">print</span>(aList[<span class="hljs-number">2</span>])     <span class="hljs-comment"># 列表的访问</span><br>aList[<span class="hljs-number">2</span>] = <span class="hljs-string">&quot;Hello&quot;</span>  <span class="hljs-comment"># 修改元素</span><br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;计数：&quot;</span>)<br>aList = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]<br><span class="hljs-built_in">print</span>(aList.count(<span class="hljs-number">7</span>))   <span class="hljs-comment"># 指定元素在列表中出现的次数</span><br><span class="hljs-built_in">print</span>(aList.count(<span class="hljs-number">0</span>))<br><span class="hljs-built_in">print</span>()<br><br>aList = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;成员判断：&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> <span class="hljs-keyword">in</span> aList)<br><span class="hljs-built_in">print</span>(<span class="hljs-number">5</span> <span class="hljs-keyword">in</span> aList)<br><span class="hljs-built_in">print</span>(<span class="hljs-number">5</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> aList)<br><br></code></pre></td></tr></table></figure><h3 id="1-3-切片"><a href="#1-3-切片" class="headerlink" title="1.3 切片"></a>1.3 切片</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python">aList = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>]<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;切片:&quot;</span>)<br><span class="hljs-built_in">print</span>(aList[::])<br><span class="hljs-built_in">print</span>(aList[::-<span class="hljs-number">1</span>])  <span class="hljs-comment"># 步长为负数时，切片从后往前切</span><br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>(aList[<span class="hljs-number">2</span>:<span class="hljs-number">6</span>:<span class="hljs-number">2</span>])     <span class="hljs-comment"># 下标范围在[2, 6)且间隔为2</span><br><span class="hljs-built_in">print</span>(aList[<span class="hljs-number">3</span>:])    <span class="hljs-comment"># 得到下标&gt;=3的元素</span><br><br>aList[<span class="hljs-built_in">len</span>(aList):] = [<span class="hljs-number">89</span>]     <span class="hljs-comment"># 在尾部追加元素</span><br><span class="hljs-built_in">print</span>(aList)<br><br>aList[:<span class="hljs-number">3</span>] = [<span class="hljs-number">77</span>, <span class="hljs-number">88</span>, <span class="hljs-number">99</span>]    <span class="hljs-comment"># 替换前3个元素</span><br><span class="hljs-built_in">print</span>(aList)<br><br>aList[:<span class="hljs-number">3</span>] = []      <span class="hljs-comment"># 删除前三个元素</span><br><span class="hljs-built_in">print</span>(aList)<br><br>aList = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]<br><span class="hljs-keyword">del</span> aList[:<span class="hljs-number">3</span>]   <span class="hljs-comment"># 结合del删除前3个元素</span><br><span class="hljs-built_in">print</span>(aList)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python">aList = [<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>]<br>bList = aList[:]    <span class="hljs-comment"># 切片，浅复制</span><br><br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>(bList)<br><span class="hljs-built_in">print</span>(aList == bList)   <span class="hljs-comment"># bList和aList包含同样的元素引用</span><br><span class="hljs-built_in">print</span>(aList <span class="hljs-keyword">is</span> bList)   <span class="hljs-comment"># 不是同一个对象</span><br><br>bList[<span class="hljs-number">0</span>] = <span class="hljs-number">99</span>   <span class="hljs-comment"># 这个时候，bList里面的都是整型， 所以修改bList不影响aList</span><br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>(bList)<br><br>aList = [<span class="hljs-number">1</span>, [<span class="hljs-number">88</span>], <span class="hljs-number">2</span>]<br>bList = aList[:]<br><br>bList[<span class="hljs-number">1</span>].append(<span class="hljs-number">99</span>)     <span class="hljs-comment"># 这里使用append方法改变bList会同时影响到aList，如果是直接通过复制，则结果会和上面的相同</span><br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>(bList)<br><br><span class="hljs-comment"># 下面的例子是深复制的例子</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;下面的例子是深复制的例子&quot;</span>)<br><span class="hljs-keyword">import</span> copy<br>aList = [<span class="hljs-number">1</span>, [<span class="hljs-number">88</span>], <span class="hljs-number">2</span>]<br>bList = copy.deepcopy(aList)    <span class="hljs-comment"># aList和bList完全独立，互相不影响</span><br><br><span class="hljs-built_in">print</span>(aList == bList)   <span class="hljs-comment"># bList和aList包含同样的元素引用</span><br><span class="hljs-built_in">print</span>(aList <span class="hljs-keyword">is</span> bList)   <span class="hljs-comment"># 不是同一个对象</span><br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>(bList)<br><br>bList[<span class="hljs-number">1</span>].append(<span class="hljs-number">99</span>)     <span class="hljs-comment"># 深复制，修改bList不会影响到aList</span><br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>(bList)<br></code></pre></td></tr></table></figure><h3 id="1-4-列表排序和逆序"><a href="#1-4-列表排序和逆序" class="headerlink" title="1.4 列表排序和逆序"></a>1.4 列表排序和逆序</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;排序：&quot;</span>)<br>aList = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">15</span>, <span class="hljs-number">256</span>, <span class="hljs-number">51</span>, <span class="hljs-number">8</span>]<br><br>aList.sort()    <span class="hljs-comment"># 默认升序排列</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;sort()升序&quot;</span>)<br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>()<br><br>aList.sort(reverse=<span class="hljs-literal">True</span>)    <span class="hljs-comment"># 降序排列</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;sort()降序&quot;</span>)<br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>()<br><br>aList.sort(key=<span class="hljs-keyword">lambda</span> x: <span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>(x)))       <span class="hljs-comment"># 按转换为字符串后的长度排序</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;sort()其他方式排序：转换为字符串后的长度排序&quot;</span>)<br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;sorted()升序&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sorted</span>(aList))    <span class="hljs-comment"># sorted()默认升序，返回新列表,不会改变原列表</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;sorted()降序&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sorted</span>(aList, reverse=<span class="hljs-literal">True</span>))  <span class="hljs-comment"># 降序</span><br><span class="hljs-built_in">print</span>()<br><br>aList = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>]<br>aList.reverse()  <span class="hljs-comment"># 原地逆序</span><br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>()<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># reversed方法返回逆序排列后的迭代对象，不会影响到原列表</span><br>aList = [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>]<br>newList = <span class="hljs-built_in">reversed</span>(aList)<br><span class="hljs-built_in">print</span>(newList)<br><br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(newList))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(newList))    <span class="hljs-comment"># 访问过的元素不可以再次访问</span><br></code></pre></td></tr></table></figure><h3 id="1-5-用于序列操作的常用内置函数"><a href="#1-5-用于序列操作的常用内置函数" class="headerlink" title="1. 5 用于序列操作的常用内置函数"></a>1. 5 用于序列操作的常用内置函数</h3><p>any()用来测试序列或可迭代对象中是否存在等价于True的元素</p><p>all()用来测试序列或可迭代对象中是否所有元素都等价于True</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;any():&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">any</span>([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>]))   <span class="hljs-comment"># any()用来测试序列或可迭代对象中是否存在等价于True的元素</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">any</span>([<span class="hljs-number">0</span>]))<br><span class="hljs-built_in">print</span>()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;all():&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">all</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]))    <span class="hljs-comment"># all()用来测试序列或可迭代对象中是否所有元素都等价于True</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">all</span>([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]))<br></code></pre></td></tr></table></figure><p>sum()：对数值型列表的元素进行求和运算，对于非数值型列表需要指定第二个参数，适用于元组、集合、range对象、字典、map对象、filter对象等。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">a = &#123;<br>    <span class="hljs-number">1</span>: <span class="hljs-number">77</span>,<br>    <span class="hljs-number">2</span>: <span class="hljs-number">88</span>,<br>    <span class="hljs-number">3</span>: <span class="hljs-number">99</span><br>&#125;<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>(a))       <span class="hljs-comment"># 对字典的键进行求和</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>(a.values()))      <span class="hljs-comment"># 对字典的值进行求和</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>([[<span class="hljs-number">1</span>], [<span class="hljs-number">2</span>], [<span class="hljs-string">&quot;name&quot;</span>]], []))    <span class="hljs-comment"># 非数值型，第二个参数需要指定</span><br></code></pre></td></tr></table></figure><p>zip()方法、enumerate()方法参考python(一)</p><h3 id="1-5-列表推导式"><a href="#1-5-列表推导式" class="headerlink" title="1.5 列表推导式"></a>1.5 列表推导式</h3><p>列表推导式语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">[exp <span class="hljs-keyword">for</span> variable <span class="hljs-keyword">in</span> iterable <span class="hljs-keyword">if</span> condition]<br></code></pre></td></tr></table></figure><p>列表推导式使用非常简洁的方式来快速生成满足特定需求的列表。（<b style="color: red">非常简洁，以至于有时候很难看懂，应多看多敲</b>）</p><p>几个例子</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python">aList = [x*x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]<br><span class="hljs-built_in">print</span>(aList)<br><span class="hljs-built_in">print</span>()<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">相当于</span><br><span class="hljs-string">aList = []</span><br><span class="hljs-string">for x in range(10):</span><br><span class="hljs-string">    aList.append(x * x)</span><br><span class="hljs-string"></span><br><span class="hljs-string">print(aList)</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br>vec = [[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;使用列表推导式实现嵌套列表的平铺&quot;</span>)<br><span class="hljs-built_in">print</span>(vec)<br><span class="hljs-built_in">print</span>([num <span class="hljs-keyword">for</span> elem <span class="hljs-keyword">in</span> vec <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> elem])    <span class="hljs-comment"># 使用列表推导式实现嵌套列表的平铺</span><br><span class="hljs-built_in">print</span>()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;在列表推导式中使用多个循环&quot;</span>)<br><span class="hljs-built_in">print</span>([(x, y) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>) <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>)])     <span class="hljs-comment"># 在列表推导式中使用多个循环</span><br></code></pre></td></tr></table></figure><h2 id="2-元组"><a href="#2-元组" class="headerlink" title="2. 元组"></a>2. 元组</h2><h3 id="2-1-元组的创建和删除"><a href="#2-1-元组的创建和删除" class="headerlink" title="2.1 元组的创建和删除"></a>2.1 元组的创建和删除</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">myTuple = ()<br><span class="hljs-built_in">print</span>(myTuple)  <span class="hljs-comment"># 空元组</span><br><br>myTuple = (<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;Hello&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-literal">True</span>)<br><span class="hljs-built_in">print</span>(myTuple)<br><br>myTuple = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-literal">True</span>, <span class="hljs-string">&quot;Hello&quot;</span>   <span class="hljs-comment"># 有逗号时可以没有括号</span><br><span class="hljs-built_in">print</span>(myTuple)<br><br>myTuple = (<span class="hljs-number">2</span>)     <span class="hljs-comment"># 不是元组，即使元组只有一个元素，元素后面也必须要带逗号，即myTuple = (2, )才对</span><br><span class="hljs-built_in">print</span>(myTuple)<br><br>myTuple = <span class="hljs-built_in">tuple</span>(<span class="hljs-string">&#x27;Hello World!&#x27;</span>)<br><span class="hljs-built_in">print</span>(myTuple)       <span class="hljs-comment"># 通过tuple()函数可以把列表、字符串、集合等可迭代对象转为元组</span><br><br><span class="hljs-keyword">del</span> myTuple     <span class="hljs-comment"># 只能通过del命令删除整个元组对象，不能删除只删除特定元素，因为元组属于不可变序列</span><br></code></pre></td></tr></table></figure><h3 id="2-2-元组和列表的区别"><a href="#2-2-元组和列表的区别" class="headerlink" title="2.2 元组和列表的区别"></a>2.2 元组和列表的区别</h3><ul><li>列表属于可变序列， 元组属于不可变序列</li><li>元组没有提供append()、extend()、insert()和remove()、pop()方法</li><li>元组不支持对元组元素进行del操作，只能用del命令删除整个元组</li><li>元组也支持切片操作，但只能通过切片来访问元组中的元素</li><li>元组的访问和处理速度比列表更快</li></ul><p><b style="color: red">元组属于不可变序列，其元素的值是不可改变的，但是元组中含有可变序列的话，可以通过调用可变序列的方法来改变可变序列的值。</b></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">myTuple = (<span class="hljs-number">1</span>, [<span class="hljs-number">77</span>, <span class="hljs-number">88</span>], <span class="hljs-number">8</span>)<br><span class="hljs-built_in">print</span>(myTuple)<br><br>myTuple[<span class="hljs-number">1</span>].append(<span class="hljs-number">99</span>)   <span class="hljs-comment"># 调用元组里的可变序列的方法来改变可变序列的值</span><br><span class="hljs-built_in">print</span>(myTuple)<br><br>myTuple[<span class="hljs-number">1</span>] += [<span class="hljs-number">111</span>]  <span class="hljs-comment"># 这样子相当于直接给可变序列赋值，即给元组的元素赋值，会报错</span><br><span class="hljs-built_in">print</span>(myTuple)<br></code></pre></td></tr></table></figure><h3 id="2-3-序列解包"><a href="#2-3-序列解包" class="headerlink" title="2.3 序列解包"></a>2.3 序列解包</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">x, y, z = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span><br><span class="hljs-built_in">print</span>(x, y, z)<br><br>myTuple = (<span class="hljs-literal">True</span>, <span class="hljs-string">&quot;Hello&quot;</span>, <span class="hljs-number">88</span>)<br>(x, y, z) = myTuple<br><br><span class="hljs-built_in">print</span>(x, y, z)<br></code></pre></td></tr></table></figure><p>序列解包用于列表和字典</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">a, b, c = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]<br><span class="hljs-built_in">print</span>(a, b, c)<br><br><span class="hljs-comment"># 下面是序列解包用于字典</span><br>s = &#123;<br>    <span class="hljs-string">&#x27;Hello&#x27;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&#x27;World&#x27;</span>: <span class="hljs-number">2</span>,<br>    <span class="hljs-string">&#x27;!&#x27;</span>: <span class="hljs-number">3</span>,<br>&#125;<br><br>a, b, c = s              <span class="hljs-comment"># 序列解包对字典使用，默认是对字典&quot;键&quot;操作</span><br><span class="hljs-built_in">print</span>(a, b, c)<br><br>a, b, c = s.items()     <span class="hljs-comment"># 使用字典的items()方法说明，是对字典&quot;键:值&quot;操作</span><br><span class="hljs-built_in">print</span>(a, b, c)<br><br>a, b, c = s.values()    <span class="hljs-comment"># 使用字典的values()方法说明，是对字典&quot;值&quot;操作</span><br><span class="hljs-built_in">print</span>(a, b, c)<br></code></pre></td></tr></table></figure><p>使用序列解包方便同时遍历多个序列。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">keys = [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>]<br>values = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<br><br><span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(keys, values):<br>    <span class="hljs-built_in">print</span>(k, v)<br>    <br></code></pre></td></tr></table></figure><p>可以加上一个或两个星号(*)进行序列解包</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(*[<span class="hljs-number">1</span>], *[<span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-number">4</span>, *[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>])<br><br><span class="hljs-built_in">print</span>(&#123;*<span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>), <span class="hljs-number">5</span>, *(<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>)&#125;)<br><br><span class="hljs-built_in">print</span>(&#123;<br>    <span class="hljs-string">&#x27;x&#x27;</span>: <span class="hljs-number">1</span>,<br>    **&#123;<span class="hljs-string">&#x27;y&#x27;</span>: <span class="hljs-number">2</span>&#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="2-4-生成器表达式"><a href="#2-4-生成器表达式" class="headerlink" title="2.4 生成器表达式"></a>2.4 生成器表达式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">g = ((i + <span class="hljs-number">2</span>)**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))     <span class="hljs-comment"># 生成器表达式，和列表推导式非常接近</span><br><span class="hljs-built_in">print</span>(g)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(g))      <span class="hljs-comment"># 转化为列表</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(g))      <span class="hljs-comment"># 元素已经遍历完了，所以输出空数组</span><br><br>g = ((i + <span class="hljs-number">2</span>)**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))<br><span class="hljs-built_in">print</span>(g.__next__())     <span class="hljs-comment"># 通过生成器对象的__next__()方法获取下一个元素</span><br><span class="hljs-built_in">print</span>(g.__next__())     <span class="hljs-comment"># 生成器对象中的每个元素只能访问一次，所以两次输出不一样</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(g))      <span class="hljs-comment"># 使用内置函数next()获取下一个元素</span><br><br>g = ((i + <span class="hljs-number">2</span>)**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> g:     <span class="hljs-comment"># 使用循环遍历生成器对象中的元素</span><br>    <span class="hljs-built_in">print</span>(i, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>    <br></code></pre></td></tr></table></figure><h2 id="3-字典"><a href="#3-字典" class="headerlink" title="3. 字典"></a>3. 字典</h2><h3 id="3-1-字典的创建与删除"><a href="#3-1-字典的创建与删除" class="headerlink" title="3.1 字典的创建与删除"></a>3.1 字典的创建与删除</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python">mydict = &#123;<br>    <span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-number">2</span><br>&#125;<br><span class="hljs-built_in">print</span>(mydict)<br><br>keys = [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>]<br>values = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">dict</span>(<span class="hljs-built_in">zip</span>(keys, values)))      <span class="hljs-comment"># 通过内置函数dict()创建字典</span><br><br>mydict = <span class="hljs-built_in">dict</span>()   <span class="hljs-comment"># 空字典</span><br><span class="hljs-built_in">print</span>(mydict)    <span class="hljs-comment"># 看着像集合，但是是字典</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(mydict))<br><br>mydict = &#123;&#125;     <span class="hljs-comment"># 空字典</span><br><span class="hljs-built_in">print</span>(mydict)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(mydict))<br><br>mydict = <span class="hljs-built_in">dict</span>(name=<span class="hljs-string">&#x27;clz&#x27;</span>, age=<span class="hljs-number">21</span>, sex=<span class="hljs-string">&#x27;male&#x27;</span>, address=<span class="hljs-string">&#x27;QQ&#x27;</span>)   <span class="hljs-comment"># 通过dict()键值对形式创建字典</span><br><span class="hljs-built_in">print</span>(mydict)<br><br><span class="hljs-keyword">del</span> mydict[<span class="hljs-string">&#x27;age&#x27;</span>]<br><span class="hljs-built_in">print</span>(mydict)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;----pop()----------&#x27;</span>)<br><span class="hljs-built_in">print</span>(mydict.pop(<span class="hljs-string">&#x27;sex&#x27;</span>))     <span class="hljs-comment"># 删除指定&quot;键&quot;的元素，并返回对应被删除的值</span><br><span class="hljs-built_in">print</span>(mydict)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;----popitem()------&#x27;</span>)<br><span class="hljs-built_in">print</span>(mydict.popitem())     <span class="hljs-comment"># 删除并返回字典中的一个元素</span><br><span class="hljs-built_in">print</span>(mydict)<br><br>mydict.clear()      <span class="hljs-comment"># 删除字典中的所有元素,字典变为空字典，不像del&quot;连根拔起&quot;</span><br><span class="hljs-built_in">print</span>(mydict)<br><br></code></pre></td></tr></table></figure><h3 id="3-2-字典元素的读取"><a href="#3-2-字典元素的读取" class="headerlink" title="3.2 字典元素的读取"></a>3.2 字典元素的读取</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">mydict = <span class="hljs-built_in">dict</span>(name=<span class="hljs-string">&#x27;clz&#x27;</span>, age=<span class="hljs-number">21</span>, sex = <span class="hljs-string">&#x27;male&#x27;</span>)   <span class="hljs-comment"># 通过dict()键值对形式创建字典</span><br><br><span class="hljs-built_in">print</span>(mydict[<span class="hljs-string">&#x27;name&#x27;</span>])   <span class="hljs-comment"># 直接使用字典的&quot;键&quot;作为下标访问字典元素的值,找不到会报错</span><br><br><span class="hljs-built_in">print</span>(mydict.get(<span class="hljs-string">&#x27;age&#x27;</span>))       <span class="hljs-comment"># 使用字典对象的get()方法访问字典元素的值，找不到会返回None</span><br><br><span class="hljs-built_in">print</span>(mydict.keys())        <span class="hljs-comment"># 返回字典的&quot;键&quot;</span><br><br><span class="hljs-built_in">print</span>(mydict.values())        <span class="hljs-comment"># 返回字典的&quot;值&quot;</span><br><br><span class="hljs-built_in">print</span>(mydict.items())        <span class="hljs-comment"># 返回字典的键值对</span><br><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> mydict.items():      <span class="hljs-comment"># 序列解包，遍历每个元素的&quot;键&quot;和&quot;值&quot;</span><br>    <span class="hljs-built_in">print</span>(key, value, sep=<span class="hljs-string">&#x27;:&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="3-3-字典的添加与修改"><a href="#3-3-字典的添加与修改" class="headerlink" title="3.3 字典的添加与修改"></a>3.3 字典的添加与修改</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">mydict = <span class="hljs-built_in">dict</span>(name=<span class="hljs-string">&#x27;clz&#x27;</span>, age=<span class="hljs-number">21</span>, sex = <span class="hljs-string">&#x27;male&#x27;</span>)   <span class="hljs-comment"># 通过dict()键值对形式创建字典</span><br><br>mydict[<span class="hljs-string">&#x27;name&#x27;</span>] = <span class="hljs-string">&#x27;czh&#x27;</span>      <span class="hljs-comment"># 当前已经有name这个键了，所以修改这个键的值</span><br><span class="hljs-built_in">print</span>(mydict)<br><br>mydict[<span class="hljs-string">&#x27;address&#x27;</span>] = <span class="hljs-string">&#x27;QQ&#x27;</span>    <span class="hljs-comment"># 当前还没有address这个键，所以添加一个新元素</span><br><span class="hljs-built_in">print</span>(mydict)<br><br>mydict2 = <span class="hljs-built_in">dict</span>(name=<span class="hljs-string">&#x27;czh&#x27;</span>, age=<span class="hljs-number">22</span>, sex = <span class="hljs-string">&#x27;male&#x27;</span>, haha = <span class="hljs-string">&#x27;Hello&#x27;</span>)<br>mydict.update(mydict2)   <span class="hljs-comment"># 以调用这个方法的字典对象为准，把它没有的键对应的键值对加入到字典中</span><br><span class="hljs-built_in">print</span>(mydict)<br></code></pre></td></tr></table></figure><h2 id="4-集合"><a href="#4-集合" class="headerlink" title="4. 集合"></a>4. 集合</h2><p>特点：没有重复的元素</p><h3 id="4-1-集合的创建和删除"><a href="#4-1-集合的创建和删除" class="headerlink" title="4.1 集合的创建和删除"></a>4.1 集合的创建和删除</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python">myset = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>&#125;<br><span class="hljs-built_in">print</span>(myset)<br><br>myset = <span class="hljs-built_in">set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br><span class="hljs-built_in">print</span>(myset)<br><br>myset = <span class="hljs-built_in">set</span>()  <span class="hljs-comment"># 空集合</span><br><span class="hljs-built_in">print</span>(myset)<br><br>myset.add(<span class="hljs-number">3</span>)   <span class="hljs-comment"># 使用add方法添加元素</span><br><span class="hljs-built_in">print</span>(myset)<br>myset.add(<span class="hljs-number">2</span>)   <span class="hljs-comment"># add()方法是在前面添加元素</span><br>myset.add(<span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(myset)<br><br>myset.pop()<br><span class="hljs-built_in">print</span>(myset)   <span class="hljs-comment"># pop()方法是弹出在最前面元素,不接受参数</span><br><br>myset.remove(<span class="hljs-number">3</span>)  <span class="hljs-comment"># remove()删除指定元素</span><br><span class="hljs-built_in">print</span>(myset)<br><br></code></pre></td></tr></table></figure><h3 id="4-2-集合运算"><a href="#4-2-集合运算" class="headerlink" title="4.2 集合运算"></a>4.2 集合运算</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">aset = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>&#125;<br>bset = &#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>&#125;<br><br><span class="hljs-built_in">print</span>(aset | bset)      <span class="hljs-comment"># 并集</span><br><br><span class="hljs-built_in">print</span>(aset &amp; bset)      <span class="hljs-comment"># 交集</span><br><br><span class="hljs-built_in">print</span>(aset - bset)      <span class="hljs-comment"># 差集</span><br><br><span class="hljs-built_in">print</span>(aset ^ bset)      <span class="hljs-comment"># 对称差集</span><br><br>aset = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;<br>bset = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>&#125;<br><span class="hljs-built_in">print</span>(bset &lt; aset)<br><span class="hljs-built_in">print</span>(bset == aset)<br><span class="hljs-built_in">print</span>(bset &gt; aset)   <span class="hljs-comment"># 三个都是false，因为a集合和b集合没有关系</span><br><br>cset = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>&#125;<br><span class="hljs-built_in">print</span>(aset &lt; cset)  <span class="hljs-comment"># a集合是c集合的子集，所以是true</span><br></code></pre></td></tr></table></figure><h2 id="5-复杂数据结构"><a href="#5-复杂数据结构" class="headerlink" title="5. 复杂数据结构"></a>5. 复杂数据结构</h2><h3 id="5-1-堆"><a href="#5-1-堆" class="headerlink" title="5.1 堆"></a>5.1 堆</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># heapq模块默认建最小堆</span><br><span class="hljs-keyword">import</span> heapq<br><span class="hljs-keyword">import</span> random<br>data = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))<br>random.shuffle(data)        <span class="hljs-comment"># 随机打乱顺序</span><br><span class="hljs-built_in">print</span>(data)<br><br>heap = []<br><span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> data:<br>    heapq.heappush(heap, n)     <span class="hljs-comment"># 建堆</span><br><br><span class="hljs-built_in">print</span>(heap)<br><br>heapq.heappush(heap, <span class="hljs-number">0.5</span>)   <span class="hljs-comment"># 新数据入堆</span><br><span class="hljs-built_in">print</span>(heap)<br><span class="hljs-built_in">print</span>(heapq.heappop(heap))  <span class="hljs-comment"># 弹出最小的元素，堆会自动重建</span><br><span class="hljs-built_in">print</span>(heap)<br><br>myheap = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>, <span class="hljs-number">434</span>]<br>heapq.heapify(myheap)  <span class="hljs-comment"># 将列表转化为堆</span><br><span class="hljs-built_in">print</span>(myheap)<br><br>heapq.heapreplace(myheap, <span class="hljs-number">6</span>)  <span class="hljs-comment"># 替换堆中的最小元素值，堆会自动重建</span><br><span class="hljs-built_in">print</span>(myheap)<br><br><span class="hljs-built_in">print</span>(heapq.nlargest(<span class="hljs-number">4</span>, myheap))  <span class="hljs-comment"># 返回堆中最大的4个元素(是数值最大，不是层数)，按从大到小排序</span><br><span class="hljs-built_in">print</span>(heapq.nsmallest(<span class="hljs-number">5</span>, myheap))  <span class="hljs-comment"># 返回堆中最小的5个元素，按从小到大排序</span><br><br></code></pre></td></tr></table></figure><h3 id="5-2-队列"><a href="#5-2-队列" class="headerlink" title="5.2 队列"></a>5.2 队列</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> queue<br>q = queue.Queue()  <span class="hljs-comment"># 创建队列的实例</span><br><br>q.put(<span class="hljs-number">1</span>)    <span class="hljs-comment"># 入队</span><br>q.put(<span class="hljs-number">5</span>)<br>q.put(<span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(q.queue)<br><br><span class="hljs-built_in">print</span>(q.get())   <span class="hljs-comment"># 队列头元素出队</span><br><span class="hljs-built_in">print</span>(q.queue)<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">后进先出队列</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>LiFoQueue = queue.LifoQueue(<span class="hljs-number">5</span>)<br>LiFoQueue.put(<span class="hljs-number">1</span>)<br>LiFoQueue.put(<span class="hljs-number">2</span>)<br>LiFoQueue.put(<span class="hljs-number">3</span>)<br><br><span class="hljs-built_in">print</span>(LiFoQueue.queue)<br><span class="hljs-built_in">print</span>(LiFoQueue.get())<br><span class="hljs-built_in">print</span>(LiFoQueue.queue)<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">优先级队列</span><br><span class="hljs-string">优先级队列,自动依照元素的权值排列。权值最高者排在最前面</span><br><span class="hljs-string">没有去权值时，则按建堆来排列</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>PriQueue = queue.PriorityQueue(<span class="hljs-number">5</span>)<br>PriQueue.put(<span class="hljs-number">3</span>)<br>PriQueue.put(<span class="hljs-number">5</span>)<br>PriQueue.put(<span class="hljs-number">1</span>)<br>PriQueue.put(<span class="hljs-number">7</span>)<br><span class="hljs-built_in">print</span>(PriQueue.queue)<br><br><span class="hljs-built_in">print</span>(PriQueue.get())<br><span class="hljs-built_in">print</span>(PriQueue.queue)<br></code></pre></td></tr></table></figure><h3 id="5-3-栈"><a href="#5-3-栈" class="headerlink" title="5.3 栈"></a>5.3 栈</h3><p>可以使用列表来实现栈，append()方法用于实现入栈操作，pop()方法用于实现出栈操作。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">mystack = []<br>mystack.append(<span class="hljs-number">1</span>)<br>mystack.append(<span class="hljs-number">3</span>)<br>mystack.append(<span class="hljs-number">5</span>)<br><br><span class="hljs-built_in">print</span>(mystack)<br><span class="hljs-built_in">print</span>(mystack.pop())<br><span class="hljs-built_in">print</span>(mystack)<br><br>mystack.pop()<br><span class="hljs-built_in">print</span>(mystack)<br>mystack.pop()<br><span class="hljs-built_in">print</span>(mystack)<br></code></pre></td></tr></table></figure><p><b style="color: red">用列表来实现栈不足：1. 当列表为空时，再执行pop()会抛出异常； 2. 无法限制栈的大小</b></p><p>可以自己自定义栈结构来实现。</p><h3 id="5-4-链表"><a href="#5-4-链表" class="headerlink" title="5.4 链表"></a>5.4 链表</h3><p>可以使用列表来实现链表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">linkTable = []<br>linkTable.append(<span class="hljs-number">1</span>)<br>linkTable.append(<span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(linkTable)<br><br>linkTable.insert(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># 正在链表中间插入节点</span><br><span class="hljs-built_in">print</span>(linkTable)<br><br>linkTable.remove(linkTable[<span class="hljs-number">2</span>])   <span class="hljs-comment"># 删除节点</span><br><span class="hljs-built_in">print</span>(linkTable)<br></code></pre></td></tr></table></figure><h3 id="5-5-二叉树"><a href="#5-5-二叉树" class="headerlink" title="5.5 二叉树"></a>5.5 二叉树</h3><p>自定义二叉树</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BinaryTree</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, value</span>):</span><br>        self.__left = <span class="hljs-literal">None</span>    <span class="hljs-comment"># 和c++中的一开始让左孩子指向null类似</span><br>        self.__right = <span class="hljs-literal">None</span><br>        self.__data = value<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">buildLeftChild</span>(<span class="hljs-params">self, value</span>):</span><br>        <span class="hljs-keyword">if</span> self.__left:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;左孩子已经存在&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            self.__left = BinaryTree(value)<br>            <span class="hljs-keyword">return</span> self.__left<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">buildRightChild</span>(<span class="hljs-params">self, value</span>):</span><br>        <span class="hljs-keyword">if</span> self.__right:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;右孩子已经存在&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            self.__right = BinaryTree(value)<br>            <span class="hljs-keyword">return</span> self.__right<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">print</span>(self.__data)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">preOrder</span>(<span class="hljs-params">self</span>):</span>     <span class="hljs-comment"># 前序遍历</span><br>        <span class="hljs-built_in">print</span>(self.__data)<br>        <span class="hljs-keyword">if</span> self.__left:<br>            self.__left.preOrder()<br>        <span class="hljs-keyword">if</span> self.__right:<br>            self.__right.preOrder()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inOrder</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">if</span> self.__left:<br>            self.__left.inOrder()<br>        <span class="hljs-built_in">print</span>(self.__data)<br>        <span class="hljs-keyword">if</span> self.__right:<br>            self.__right.inOrder()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">postOrder</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">if</span> self.__left:<br>            self.__left.postOrder()<br>        <span class="hljs-keyword">if</span> self.__right:<br>            self.__right.postOrder()<br>        <span class="hljs-built_in">print</span>(self.__data)<br></code></pre></td></tr></table></figure><h2 id="选择结构"><a href="#选择结构" class="headerlink" title="选择结构"></a>选择结构</h2><p>之前没有学到的特别用法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">5</span> <span class="hljs-keyword">if</span> <span class="hljs-number">2</span> &gt; <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">6</span>   <span class="hljs-comment"># 后面不能写成x=6，只能是值的形式</span><br><span class="hljs-built_in">print</span>(x)<br><br><span class="hljs-comment"># 等价于</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">if 2 &gt; 1:</span><br><span class="hljs-string">    x = 5</span><br><span class="hljs-string">else:</span><br><span class="hljs-string">    x = 6</span><br><span class="hljs-string"></span><br><span class="hljs-string">print(x)</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>远程仓库小技能</title>
      <link href="/2021/10/20/git-skills/"/>
      <url>/2021/10/20/git-skills/</url>
      
        <content type="html"><![CDATA[<h1 id="远程仓库小技能"><a href="#远程仓库小技能" class="headerlink" title="远程仓库小技能"></a>远程仓库小技能</h1><h2 id="1-github-dev"><a href="#1-github-dev" class="headerlink" title="1. github_dev"></a>1. github_dev</h2><p>这个功能gitee<strong>好像</strong>没有，突然发现的工具，可以在网页直接编辑仓库文件，而且有vscode支持，和直接用vscode差不多</p><ol><li><p>进入要修改的仓库，按下键盘.(句号那个键)</p><p><img src="https://pic.imgdb.cn/item/616d9f642ab3f51d911fce14.jpg"></p></li><li><p>等一小会，进入以下界面</p><p><img src="https://pic.imgdb.cn/item/616d9fcb2ab3f51d91203540.jpg"></p></li><li><p>直接开始修改代码，这个 网页版的vscode会实时保存，所以，当你修改后，在下图红框框中会出现小标，当你手动恢复原状时，小标又会消失</p></li></ol><p>  <img src="https://pic.imgdb.cn/item/616da0362ab3f51d91209c0f.jpg"></p><ol start="4"><li><p>点击小标后，按顺序点击下图的1， 2，和vscode类似，比vscode简单，相当于没有远程库了，因为你在网页上打开的就是github上的库，所以只需要执行git add . 和 git commit -m “add test3”就行，1和2分别对应这两个步骤</p><p><img src="https://pic.imgdb.cn/item/616da1742ab3f51d9121bc0b.jpg"></p></li><li><p>回到仓库，会发现已经修改成功</p><p><img src="https://pic.imgdb.cn/item/616da30b2ab3f51d9123332a.jpg"></p></li><li><p>删除文件也是同理，通过这个工具再也不用为了删除一个无关文件，而把整个库克隆到本地，再修改提交到远程仓库了</p></li></ol><h2 id="2-gitee项目仓库流程"><a href="#2-gitee项目仓库流程" class="headerlink" title="2. gitee项目仓库流程"></a>2. gitee项目仓库流程</h2><ol><li><p>管理员建仓库</p></li><li><p>邀请成员</p><p><img src="https://pic.imgdb.cn/item/616fab6e2ab3f51d918e5798.jpg"></p><p><img src="https://pic.imgdb.cn/item/616fabb62ab3f51d918e8108.jpg"></p></li><li><p>设置保护分支，防止项目成员不小心误推</p><p>「保护分支」是 Gitee 针对团队协作中代码权限管理的功能，即为了减小成员误操作带来的损失，对一些关键的分支进行保护，防止被破坏。保护以后，只有仓库的管理员才能对这个分支进行修改、合并等操作。(转自gitee)</p><p><img src="https://pic.imgdb.cn/item/616fad072ab3f51d918f4c08.jpg"></p></li><li><p>设置保护分支规则(比如谁可以推之类的)</p><p><img src="https://pic.imgdb.cn/item/616fadb32ab3f51d918fc252.jpg"></p><p><img src="https://pic.imgdb.cn/item/616fad882ab3f51d918fa574.jpg"></p></li><li><p>既然添加了保护分支规则，那就肯定不是所有项目成员都可以直接push到仓库的了，这里就需要先fork仓库，再push到自己的仓库，然后发起pull request请求</p><p><img src="https://pic.imgdb.cn/item/616fb3062ab3f51d91930d9a.jpg"></p><p><img src="https://pic.imgdb.cn/item/616fb36f2ab3f51d9193512d.jpg"></p><p><img src="https://pic.imgdb.cn/item/616fb4612ab3f51d9193d0fb.jpg"></p></li><li><p>等待管理员合并代码</p><p>tips: git使用https协议，每次pull,push都要输入密码，使用git协议，使用ssh密钥可以省去每次输密码</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 小技能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> git_dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue学习笔记(三)</title>
      <link href="/2021/10/15/vue-3/"/>
      <url>/2021/10/15/vue-3/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue学习笔记-三"><a href="#Vue学习笔记-三" class="headerlink" title="Vue学习笔记(三)"></a>Vue学习笔记(三)</h1><h2 id="1-插槽"><a href="#1-插槽" class="headerlink" title="1. 插槽"></a>1. 插槽</h2><p>插槽允许开发者在封装组件时，把<strong>不确定的、希望由用户指定的部分</strong>定义为插槽。</p><p>我们使用标签时，开始标签和结束标签之间之前都没有写东西。组件的标签和正常的双标签，如div、p等一样，可以在里面写东西。但是，直接在里面写，会发现，写的东西不会显示出来，也找不到了，被丢弃了。其实这个也挺好理解的，组件本来就有东西了，vue又不知道你写的东西要插到哪里去。所以，vue提供了插槽，可以在想要插的地方加上一个插槽，之后再把内容插过去。</p><p>用法例子：</p><p><img src="https://pic.imgdb.cn/item/61529ba52ab3f51d917efa3d.jpg"></p><p>效果：</p><p><img src="https://pic.imgdb.cn/item/61529bb92ab3f51d917f0fce.jpg"></p><p><b style="color: red">没有预留插槽的话，用户提供的自定义内容都会被丢弃。</b></p><ul><li><p>封装组件时，可以为预留的插槽提供默认内容，如果组件的使用者没有为插槽提供内容，默认内容就会生效。</p><p><img src="https://pic.imgdb.cn/item/61529cdb2ab3f51d91804660.jpg"></p></li></ul><h3 id="1-1-具名插槽"><a href="#1-1-具名插槽" class="headerlink" title="1.1 具名插槽"></a>1.1 具名插槽</h3><p><img src="https://pic.imgdb.cn/item/61529e812ab3f51d91821f07.jpg"></p><p>上面的例子中，有多个插槽，输入的文章头这段信息原本想插在第一个插槽里面的，但是会发现，它插到了所有的插槽中。</p><p>这个时候就需要使用<strong>具名插槽了</strong>。</p><p><b style="color: red">具名插槽</b>：如果在封装组件时需要预留多个插槽，则需要为每个插槽指定具体的名称。这种带有具体名称的插槽就叫”具名插槽”。</p><p><img src="https://pic.imgdb.cn/item/6152a22c2ab3f51d91870ab3.jpg"></p><p>如果没有给插槽起名字，则插槽默认叫”default”。要插入插槽的内容如果没有指定要插到哪里去，则会插到名为”default”的插槽中。</p><p>这就是为什么上面没有使用具名插槽时，内容会插到所有的插槽中去。</p><h3 id="1-2-作用域插槽"><a href="#1-2-作用域插槽" class="headerlink" title="1.2 作用域插槽"></a>1.2 作用域插槽</h3><p>在封装组件时，可以为预留的slot插槽绑定props数据，这个<strong>带有props数据的slot插槽</strong>叫做<strong>作用域插槽</strong></p><p><img src="https://pic.imgdb.cn/item/6152a5bd2ab3f51d918bc348.jpg"></p><p><strong>解构插槽</strong>：因为得到的数据是对象形式的，所以可以解构，得到要用的数据</p><p><img src="https://pic.imgdb.cn/item/6152a6332ab3f51d918c5a45.jpg"></p><h2 id="2-自定义指令"><a href="#2-自定义指令" class="headerlink" title="2. 自定义指令"></a>2. 自定义指令</h2><h3 id="2-1-私有自定义指令"><a href="#2-1-私有自定义指令" class="headerlink" title="2.1 私有自定义指令"></a>2.1 私有自定义指令</h3><p>在每个vue组件中，可以在directives节点下声明<strong>私有自定义指令</strong>。</p><p><img src="https://pic.imgdb.cn/item/6152a81d2ab3f51d918eacae.jpg"></p><ul><li><p>为自定义指令动态绑定参数值</p><p>通过=的方式，为当前指令动态添加参数值，通过形参中的第二个参数<strong>binding</strong>来接收指令的参数值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app-container&quot;&gt;<br>    &lt;h1 v-color=&quot;color&quot;&gt;App根组件&lt;/h1&gt;<br>    &lt;hr /&gt;<br>    <br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      color: &#x27;blue&#x27;<br>    &#125;<br>  &#125;,<br>  directives: &#123;<br>    color:&#123;   //自定义指令名字<br>      bind(el, binding) &#123;  //el是绑定了这个指令的DOM对象<br>        // el.style.color = &#x27;red&#x27;;<br>        console.log(binding)<br>      &#125;,<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot;&gt;<br>.app-container &#123;<br>  padding: 1px 20px 20px;<br>  background-color: #efefef;<br>&#125;<br>.box &#123;<br>  display: flex;<br>&#125;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p>打印的结果：</p><p><img src="https://pic.imgdb.cn/item/6152a97c2ab3f51d9190653f.jpg"></p><p>可以知道binding.value就是参数值。</p><p>所以上面的bind()改为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"> bind(el, binding) &#123;  //el是绑定了这个指令的DOM对象<br>  el.style.color = binding.value;<br>&#125;,<br></code></pre></td></tr></table></figure><p>就可以实现为自定义指令动态绑定参数值</p></li><li><p><b style="color: red">update函数</b>：bind函数只会调用一次，当指令第一次绑定到元素时调用，<strong>当DOM更新时bind函数不会触发</strong>。update()函数则是<strong>每当DOM更新时</strong>，都会触发。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app-container&quot;&gt;<br>    &lt;h1 v-color=&quot;color&quot;&gt;App根组件&lt;/h1&gt;<br>    &lt;button @click=&quot;color = color==&#x27;red&#x27; ? &#x27;blue&#x27; : &#x27;red&#x27;&quot;&gt;变色&lt;/button&gt;<br>    &lt;hr /&gt;<br>    <br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      color: &#x27;blue&#x27;<br>    &#125;<br>  &#125;,<br>  directives: &#123;<br>    color:&#123;   //自定义指令名字<br>      bind(el, binding) &#123;  //el是绑定了这个指令的DOM对象<br>        el.style.color = binding.value;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot;&gt;<br>.app-container &#123;<br>  padding: 1px 20px 20px;<br>  background-color: #efefef;<br>&#125;<br>.box &#123;<br>  display: flex;<br>&#125;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p>上面的示例中，无论怎么点击变色按钮，颜色都不会变，这就是因为bind()方法只在当指令第一次绑定到元素时调用，且<strong>只调用一次</strong>，所以此时需要用update()方法。<b style="color: red">不能只有update()，没有bind()。每当DOM更新时，都会触发，但是指令第一次绑定到元素时，update()不会调用</b>。</p><p>directives节点改为以下代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">directives: &#123;<br>    color:&#123;   //自定义指令名字<br>      bind(el, binding) &#123;  //el是绑定了这个指令的DOM对象<br>        el.style.color = binding.value;<br>        console.log(&quot;bind&quot;);<br>      &#125;,<br>      update(el, binding) &#123;  //el是绑定了这个指令的DOM对象<br>        el.style.color = binding.value;<br>        console.log(&quot;update&quot;);<br>      &#125;,<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><p>连续点击变色按钮。</p><p><img src="https://pic.imgdb.cn/item/6152ae852ab3f51d9196e16e.jpg"></p><p>简写：上面那张图，可以看到bind()和update()方法的业务逻辑一样，此时，可以使用简写形式。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">color(el, binding) &#123;  //el是绑定了这个指令的DOM对象<br>  el.style.color = binding.value;<br>&#125;,<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-2-公有自定义指令"><a href="#2-2-公有自定义指令" class="headerlink" title="2.2 公有自定义指令"></a>2.2 公有自定义指令</h3><p>所有组件都能使用。</p><p>在main.js中通过**Vue.directive()**进行声明</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">Vue.directive(<span class="hljs-string">&#x27;color&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">el, binding</span>) =&gt;</span> &#123;<br>  el.style.color = binding.value;<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="3-ESlint使用"><a href="#3-ESlint使用" class="headerlink" title="3. ESlint使用"></a>3. ESlint使用</h2><p>ESLint最初是由<a href="http://nczonline.net/">Nicholas C. Zakas</a> 于2013年6月创建的开源项目。它的目标是提供一个插件化的javascript代码检测工具。(用来团队协作时，不会因为代码规范问题酿成大错，事先规定好代码的规范，不符合规范会报错或警告)</p><p>新建vue项目时选择</p><p><img src="https://pic.imgdb.cn/item/6157f7df2ab3f51d91ce06f9.jpg"></p><p><img src="https://pic.imgdb.cn/item/6157f7f22ab3f51d91ce2dcf.jpg"></p><p><img src="https://pic.imgdb.cn/item/6157f84e2ab3f51d91cee142.jpg"></p><p>故意在main.js中空两行结果：</p><p><img src="https://pic.imgdb.cn/item/6157f9cc2ab3f51d91d19a79.jpg"></p><p>复制上图红框框的字，到<a href="https://eslint.bootcss.com/">ESLint - 插件化的 JavaScript 代码检测工具</a>查找错误原因</p><p><img src="https://pic.imgdb.cn/item/6157fa4a2ab3f51d91d27d96.jpg"></p><p>ctrl+F,把复制的内容粘贴上去</p><p><img src="https://pic.imgdb.cn/item/6157fb542ab3f51d91d46249.jpg"></p><p><strong>修改规则</strong>：</p><p>可以自己修改规则</p><p><img src="https://pic.imgdb.cn/item/6157fc4f2ab3f51d91d63059.jpg"></p><p><img src="https://pic.imgdb.cn/item/6157fcdc2ab3f51d91d736d9.jpg"></p><p><img src="https://pic.imgdb.cn/item/6157fdf62ab3f51d91d92893.jpg"></p><h2 id="4-axios优化"><a href="#4-axios优化" class="headerlink" title="4. axios优化"></a>4. axios优化</h2><p>axios用法可查看<a href="https://13535944743.github.io/2021/10/01/vue-1/">Vue学习笔记(一)</a></p><p>用之前的方法每次新的组件需要使用axios时，都需要反复导入，通过main.js和原型链把axios挂载到Vue的原型上</p><p><img src="https://pic.imgdb.cn/item/61580a122ab3f51d91f0224f.jpg"></p><p>用的时候不需要重新导入，而是直接通过this.$http调用即可</p><p><img src="https://pic.imgdb.cn/item/61580a762ab3f51d91f0dc6f.jpg"></p><p><strong>全局配置axios的请求根路径</strong>：</p><p><img src="https://pic.imgdb.cn/item/61580bb22ab3f51d91f3338e.jpg"></p><p><b style="color: red">较高效用法</b>：</p><ol><li>通过axios.create()设置好基址</li></ol><p><img src="https://pic.imgdb.cn/item/6165589c2ab3f51d91012d2e.jpg"></p><ol start="2"><li><p>其他要用到的地方导入使用即可</p><p><img src="https://pic.imgdb.cn/item/616559282ab3f51d9101d5cb.jpg"></p></li></ol><h2 id="5-路由"><a href="#5-路由" class="headerlink" title="5. 路由"></a>5. 路由</h2><h3 id="5-1-前端路由的概念"><a href="#5-1-前端路由的概念" class="headerlink" title="5.1 前端路由的概念"></a>5.1 前端路由的概念</h3><p>路由(router)是<strong>对应关系</strong>，前端路由则是Hash地址与组件之间的对应关系</p><p><strong>SPA和前端路由</strong>：SPA指的是一个web网站只有唯一的一个HTML页面，通过<strong>组件的展示和切换</strong>来实现类似多个HTML页面的效果。<strong>不同组件之间的切换</strong>需要通过<strong>前端路由</strong>来实现。</p><p><strong>前端路由的工作方式</strong>：</p><ol><li>用户点击了页面上的<strong>路由链接</strong></li><li>导致URL地址栏中的Hash值发生变化</li><li>前端路由监听到Hash地址的变化</li><li>前端路由把当前Hash地址的组件渲染到浏览器中</li></ol><p>例子：</p><p><img src="https://pic.imgdb.cn/item/615853f62ab3f51d916a363a.jpg"></p><h3 id="5-2-vue-router"><a href="#5-2-vue-router" class="headerlink" title="5.2 vue-router"></a>5.2 vue-router</h3><p>只能结合vue项目进行使用，可以轻松地管理SPA项目中组件的切换。</p><h4 id="5-2-1-基本用法"><a href="#5-2-1-基本用法" class="headerlink" title="5.2.1 基本用法"></a>5.2.1 基本用法</h4><ol><li><p>安装vue-router</p><p><code> npm install vue-router -S</code></p></li><li><p>创建路由模块</p><p><img src="https://pic.imgdb.cn/item/61585e2e2ab3f51d917d6792.jpg"></p></li><li><p>导入并挂载路由模块</p><p>src/main.js入口文件</p><p><img src="https://pic.imgdb.cn/item/615861a52ab3f51d91856ad6.jpg"></p></li><li><p>声明<strong>路由链接</strong>和<strong>占位符</strong></p><p>用vue-router提供的<strong>router-link</strong>来声明<strong>路由链接</strong>，</p><p>用<strong>router-view</strong>来声明<strong>占位符</strong>，用来放路由链接对应的组件</p><p><img src="https://pic.imgdb.cn/item/615863112ab3f51d91885e23.jpg"></p></li><li><p>声明路由的<strong>匹配规则</strong></p><p>在src/router/index.js路由模块中，通过<strong>routes数组</strong>声明路由的匹配规则。</p><p><img src="https://pic.imgdb.cn/item/615866172ab3f51d918e4905.jpg"></p></li><li><p>路由重定向</p><p>经过上面五步后，会发现根路径不会出现首页，这个时候需要<strong>路由重定向</strong>。</p><p><strong>路由重定向</strong>：用户在访问地址A时，强制用户跳转到特定的组件页面。通过路由规则的redirect属性，指定一个新的路由地址。</p><p><img src="https://pic.imgdb.cn/item/615868152ab3f51d9191f89c.jpg"></p><p>用component也指定Home可以实现类似结果。区别是，用重定向的方法相当于是没有根路径，进入根路径时会强制重定向地址。而用component也指定Home的方法则是有两个一样的页面。</p></li></ol><h4 id="5-2-2-嵌套路由"><a href="#5-2-2-嵌套路由" class="headerlink" title="5.2.2 嵌套路由"></a>5.2.2 嵌套路由</h4><p>和路由的基本用法类似，不同的是用来声明路由的匹配规则不能直接写在router/index.js下的routes中，而应是在已经有的匹配规则中添加chilaren节点，再添加嵌套路由匹配规则。</p><p>声明路由链接和占位符和路由的基本用法一样</p><p><img src="https://pic.imgdb.cn/item/6159155f2ab3f51d91547419.jpg"></p><p><img src="https://pic.imgdb.cn/item/615915e92ab3f51d9155333a.jpg"></p><p>​    <img src="https://pic.imgdb.cn/item/615afb912ab3f51d9106dd53.jpg"></p><h4 id="5-2-3-动态路由匹配"><a href="#5-2-3-动态路由匹配" class="headerlink" title="5.2.3 动态路由匹配"></a>5.2.3 动态路由匹配</h4><p><strong>动态路由</strong>：把Hash地址中可变的部分定义为参数项，从而提高路由规则的复用性。使用<code>:</code>来定义路由的参数项。</p><p><img src="https://pic.imgdb.cn/item/615919432ab3f51d9159c444.jpg"></p><p><img src="https://pic.imgdb.cn/item/615919892ab3f51d915a217a.jpg"></p><p>经过上面的步骤后可以实现点击三部电影，都出现电影的组件。</p><p>可以在展示的组件中，通过**$route.params参数对象**得到参数值</p><p><img src="https://pic.imgdb.cn/item/615be3132ab3f51d91fe2c81.jpg"></p><p><b style="color: red">获取参数的另一个方法，开启props传参</b></p><p><img src="https://pic.imgdb.cn/item/61591d3c2ab3f51d915f3ee0.jpg"></p><p><img src="https://pic.imgdb.cn/item/61591fa02ab3f51d9162c542.jpg"></p><p><img src="https://pic.imgdb.cn/item/6187434a2ab3f51d911cc2d4.jpg"></p><h4 id="5-2-4-编程式导航"><a href="#5-2-4-编程式导航" class="headerlink" title="5.2.4 编程式导航"></a>5.2.4 编程式导航</h4><ul><li><b style="color: red">编程式导航</b>：通过<strong>调用API方法</strong>实现导航的方式，如通过<strong>location.href</strong>跳转到新页面的方式</li><li><b style="color: red">声明式导航</b>：<strong>点击链接</strong>实现导航的方式，如点击<strong>a链接</strong>和点击vue项目中的<strong>router-link</strong></li></ul><p><strong>vue-router中的编程式导航API</strong>：</p><ol><li><p><strong>$router.push(‘hash地址’)<strong>：跳转到指定的hash地址，并</strong>增加一条历史记录</strong></p></li><li><p><strong>$router.replace(‘hash地址’)<strong>：跳转到指定的hash地址，并</strong>替换当前历史记录</strong></p></li><li><p>**$router.go(‘数值’)**：实现导航历史的前进、后退</p><p><img src="https://pic.imgdb.cn/item/61596ca92ab3f51d91ec585a.jpg"></p></li><li><p>**$router.back()**：回退到历史记录中的上一个界面</p></li><li><p>**$router.forward()**：前进到历史记录中的下一个界面</p></li></ol><h4 id="5-2-5-导航守卫"><a href="#5-2-5-导航守卫" class="headerlink" title="5.2.5 导航守卫"></a>5.2.5 导航守卫</h4><p><strong>导航守卫</strong>可以<strong>控制路由的访问权限</strong>。</p><p><img src="https://pic.imgdb.cn/item/61596e432ab3f51d91ef09c9.jpg"></p><p><strong>全局前置守卫</strong>：每次发生路由的导航跳转时，都会触发全局前置守卫。通过全局前置守卫可以对每个路由进行权限的控制。</p><p>通过router.beforeEach(fn)可以实现声明全局前置守卫。</p><p>fn接收3个形参(to, from, next)，<strong>to</strong>是将要访问的路由的信息对象, <strong>from</strong>是将要离开的路由的信息对象，next是一个函数，调用next()表示可以前往。</p><p><img src="https://pic.imgdb.cn/item/6159a0ce2ab3f51d913fa530.jpg"></p><p><strong>导航守卫控制权限</strong>示例：</p><p><img src="https://pic.imgdb.cn/item/6159a50d2ab3f51d91477abf.jpg"></p><p>学习链接：</p><p><a href="https://www.bilibili.com/video/BV1zq4y1p7ga">黑马程序员Vue全套视频教程</a></p><p><a href="https://vuejs.org/">Vue.js (vuejs.org)</a></p><p><a href="https://router.vuejs.org/zh/guide/#html">Vue Router (vuejs.org)</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS选择器</title>
      <link href="/2021/10/15/css-selector/"/>
      <url>/2021/10/15/css-selector/</url>
      
        <content type="html"><![CDATA[<h1 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h1><h2 id="1-标签选择器"><a href="#1-标签选择器" class="headerlink" title="1. 标签选择器"></a>1. 标签选择器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">background-color</span>: pink;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-ID选择器"><a href="#2-ID选择器" class="headerlink" title="2. ID选择器"></a>2. ID选择器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#box</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">background-color</span>: pink;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-类选择器"><a href="#3-类选择器" class="headerlink" title="3. 类选择器"></a>3. 类选择器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.box</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">background-color</span>: pink;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-通配符选择器"><a href="#4-通配符选择器" class="headerlink" title="4. 通配符选择器*"></a>4. 通配符选择器*</h2><p>匹配任何标签。<strong>页面标签越多，效率越低</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>World<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">* &#123;<br>    <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-后代选择器"><a href="#5-后代选择器" class="headerlink" title="5. 后代选择器"></a>5. 后代选择器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;father&quot;</span>&gt;</span><br>    Father<br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        Son<br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>孙子<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.father</span> <span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6-子元素选择器"><a href="#6-子元素选择器" class="headerlink" title="6. 子元素选择器"></a>6. 子元素选择器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;father&quot;</span>&gt;</span><br>    Father<br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        Son1<br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>孙子<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">color</span>: blue;<br>&#125;<br><br><span class="hljs-selector-class">.father</span>&gt;<span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-交集选择器"><a href="#7-交集选择器" class="headerlink" title="7. 交集选择器"></a>7. 交集选择器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>h3<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;test&quot;</span>&gt;</span>.test<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;test&quot;</span>&gt;</span>h3.test<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">h3</span><span class="hljs-selector-class">.test</span> &#123;<br>    <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="8-并集选择器"><a href="#8-并集选择器" class="headerlink" title="8. 并集选择器"></a>8. 并集选择器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>h3<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span>box<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>span<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>h2<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">h3</span>,<br><span class="hljs-selector-class">.box</span>,<br><span class="hljs-selector-tag">span</span> &#123;<br>    <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-属性选择器"><a href="#9-属性选择器" class="headerlink" title="9. 属性选择器"></a>9. 属性选择器</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;aa hh&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;a b&quot;</span>&gt;</span>aa<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;b a c&quot;</span>&gt;</span>bb<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span> <span class="hljs-attr">title</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;a&quot;</span>&gt;</span>cc<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;jsvascript:;&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;ac&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;a-test&quot;</span>&gt;</span>ac<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;jsvascript:;&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;ca&quot;</span>&gt;</span>ca<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><p>[attr]</p><p>选择存在attr属性的元素, attr属性没有值也会选中</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[title]</span> &#123;<br>  <span class="hljs-comment">/** 选择存在title属性的&lt;a&gt;元素, title属性没有值也会选中**/</span><br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>[attr=value]</p><p>选择存在attr属性且属性值为value的元素</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[title=<span class="hljs-string">&quot;aa&quot;</span>]</span> &#123;<br>  <span class="hljs-comment">/** 选择存在title属性且属性值为aa的&lt;a&gt;元素**/</span><br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>[attr*=value]</p><p>选择存在attr属性且属性值中包含value值的元素</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[title*=<span class="hljs-string">&quot;a&quot;</span>]</span> &#123;<br>  <span class="hljs-comment">/** 选择存在title属性且属性值中有a的&lt;a&gt;元素**/</span><br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>[attr^=value]</p><p>选择存在attr属性且属性值中以value值开头的元素</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[title^=<span class="hljs-string">&quot;a&quot;</span>]</span> &#123;<br>  <span class="hljs-comment">/** 选择存在title属性且属性值以a为开头的&lt;a&gt;元素**/</span><br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>[attr$=value]</p><p>选择存在attr属性且属性值中以value值结尾的元素</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[title$=<span class="hljs-string">&quot;a&quot;</span>]</span> &#123;<br>  <span class="hljs-comment">/** 选择存在title属性且属性值以a为结尾的&lt;a&gt;元素**/</span><br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>[attr~=value]</p><p>选择存在attr属性，且该属性是一个以空格作为分隔的值列表，其中至少有一个值为 value的元素</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[class~=<span class="hljs-string">&quot;a&quot;</span>]</span> &#123;<br>  <span class="hljs-comment">/** 选择存在class属性,且属性值是以空格作为分隔的值一系列值，其中至少有一个属性值是a**/</span><br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>[attr|=value]</p><p>选择存在attr属性，且属性值为“value”或是以“value-”为前缀的元素</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[class|=<span class="hljs-string">&quot;a&quot;</span>]</span> &#123;<br>  <span class="hljs-comment">/** 选择存在class属性，且属性值为“a”或是以“a-”为前缀的元素**/</span><br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="10-伪类选择器"><a href="#10-伪类选择器" class="headerlink" title="10. 伪类选择器"></a>10. 伪类选择器</h2><p><strong>伪类</strong>：同一个元素，有<strong>不同的状态，有不同的样式</strong></p><p>可分为两种。</p><ol><li><p><strong>静态伪类</strong>：只能用于<strong>超链接</strong>的样式</p><ul><li><code> :link</code>：超链接点击之前</li><li><code> :visited</code>：超链接被访问之后</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;http://www.xxx.com&quot;</span>&gt;</span>xxx<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:link</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:visited</span> &#123;<br>  <span class="hljs-attribute">color</span>: pink;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>动态伪类</strong>：<strong>所有标签</strong>都使用的样式</p><ul><li><code> :hover</code>：鼠标悬停在标签上的时候</li><li><code> :active</code>：鼠标点击标签，但是还没松手的时候</li><li><code>:focus</code>：标签获得焦点时的样式</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;获得焦点变色(:focus)&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>悬停变色(:hover)<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span>按住变色(:active)<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:focus</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br><br><span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">color</span>: blue;<br>&#125;<br><br><span class="hljs-selector-class">.box</span><span class="hljs-selector-pseudo">:active</span> &#123;<br>  <span class="hljs-attribute">color</span>: purple;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="超链接的四个状态"><a href="#超链接的四个状态" class="headerlink" title="超链接的四个状态"></a>超链接的四个状态</h3><ul><li><code>:link</code></li><li><code> :visited</code></li><li><code> :hover</code></li><li>` :active</li></ul><p><b style="color: red">在css中，超链接的四个状态必须按固定的顺序写：<code> :link -&gt; :visited -&gt; :hover -&gt; :active</code>，否则可能会失效</b></p><p><strong>按顺序一切正常</strong>：</p><p><code> &lt;a href=&quot;http://www.com&quot;&gt;www&lt;/a&gt;</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:link</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:visited</span> &#123;<br>  <span class="hljs-attribute">color</span>: blue;<br>&#125;<br><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">color</span>: purple;<br>&#125;<br><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:active</span> &#123;<br>  <span class="hljs-attribute">color</span>: pink;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>:active换到最前面去</strong>：按住链接时，不会变粉色了</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:active</span> &#123;<br>  <span class="hljs-attribute">color</span>: pink;<br>&#125;<br><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:link</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:visited</span> &#123;<br>  <span class="hljs-attribute">color</span>: blue;<br>&#125;<br><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">color</span>: purple;<br>&#125;<br></code></pre></td></tr></table></figure><p>原因：</p><p>css样式是由权重的，上面的权重都相同，所以a:hover的样式会覆盖掉前面的a:active的样式，因为链接被激活时，鼠标也是悬停在链接上方的，所以效果是什么样，就看谁没有被覆盖了。</p><p>知道原理后，就可能会提出，这样的话，就没有必要一定要按照顺序了，只需要提高权重就行了。如下：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:active</span> &#123;<br>  <span class="hljs-attribute">color</span>: pink <span class="hljs-meta">!important</span>;<br>&#125;<br><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:link</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:visited</span> &#123;<br>  <span class="hljs-attribute">color</span>: blue;<br>&#125;<br><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">color</span>: purple;<br>&#125;<br></code></pre></td></tr></table></figure><p>虽然这样子确实可以，但是按照代码规范就可以避免的问题，为什么要绕弯路呢？这样做以后也可能会引发出大问题。</p><h2 id="11-相邻兄弟选择器"><a href="#11-相邻兄弟选择器" class="headerlink" title="11. 相邻兄弟选择器"></a>11. 相邻兄弟选择器</h2><p><strong>相邻兄弟选择器</strong> (<code>+</code>) 介于两个选择器之间，当第二个元素<em>紧跟在</em>第一个元素之后，并且两个元素都是属于同一个父元素的子元素，则第二个元素将被选中。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>上<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>相邻兄弟选择器<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>下1<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>下2<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">h2</span>+<span class="hljs-selector-tag">p</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="12-通用兄弟选择器"><a href="#12-通用兄弟选择器" class="headerlink" title="12. 通用兄弟选择器"></a>12. 通用兄弟选择器</h2><p><strong>a~b</strong>：a和b同级，选择a元素之后所有同级的b元素</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>上<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>通用兄弟选择器<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>下1<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>下2<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>不同级<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">h2</span>~<span class="hljs-selector-tag">p</span> &#123;<br>  <span class="hljs-attribute">color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="13-nth-child-选择器"><a href="#13-nth-child-选择器" class="headerlink" title="13.  :nth-child() 选择器"></a>13.  :nth-child() 选择器</h2><p><strong>:nth-child()这个伪类选择器会先找到当前元素的兄弟元素，然后按位置先后顺序从1开始排序</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Myself<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">    <span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) &#123;</span><br><span class="css">      <span class="hljs-attribute">color</span>: red;</span><br><span class="css">      <span class="hljs-comment">/* 先把p的兄弟元素找出来，排序，因为h2也是p的兄弟元素，所以h2的序号是1,所以p-1会变红 */</span></span><br><span class="css">    &#125;</span><br><span class="css"></span><br><span class="css">    <span class="hljs-comment">/* ele:nth-child()选择器是用来选择符合条件的ele元素的，所以p:nth-child(1)不会选择到任何元素，因为没有序号为1的p元素 */</span></span><br><span class="css">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>h2-1<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-1<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-2<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-3<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-4<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-5<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-6<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-7<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-8<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>其他用法：</p><p><b style="color: red">如果:nth-child()括号中不是数字而是表达式，如2n + 1，n是从零开始整数，所以会选择序号为1, 3, 5, … , 2n+1的元素。</b></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>n + <span class="hljs-number">1</span>)  <span class="hljs-comment">/* 表示选中序号为奇数的p元素,这里的n是从零开始的 */</span><br><span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>n)  <span class="hljs-comment">/* 表示选中序号为偶数数的p元素 */</span><br><br><span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-child</span>(odd)<span class="hljs-comment">/* 表示选中序号为奇数的p元素 */</span><br><span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-child</span>(even)<span class="hljs-comment">/* 表示选中序号为偶数的p元素 */</span><br><br><span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-child</span>(n + <span class="hljs-number">3</span>)<span class="hljs-comment">/* 表示选中序号大于等于3的p元素 */</span><br><span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-child</span>(-n + <span class="hljs-number">3</span>)<span class="hljs-comment">/* 表示选中序号小于等于3的p元素 */</span><br></code></pre></td></tr></table></figure><p>:nth-last-child()和:nth-child()用法类似，不同的是它从结尾开始排序。</p><h2 id="14-nth-of-type-选择器"><a href="#14-nth-of-type-选择器" class="headerlink" title="14. :nth-of-type()选择器"></a>14. :nth-of-type()选择器</h2><p>用法和:nth-child()选择器类似。</p><p>不同的是：<b style="color: red">:nth-of-type()选择器是把要选择的元素按先后顺序排序。</b>如下面的例子，p:nth-of-type(2)会先把所有的p标签排序，而不是把p标签的兄弟元素进行排序，所以变红的就是p-2</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Myself<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">    <span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">2</span>) &#123;</span><br><span class="css">      <span class="hljs-attribute">color</span>: red;</span><br><span class="css">    &#125;</span><br><span class="css">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>h2-1<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-1<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-2<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-3<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-4<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-5<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-6<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-7<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>p-8<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="15-first-child选择器"><a href="#15-first-child选择器" class="headerlink" title="15. :first-child选择器"></a>15. :first-child选择器</h2><p>和:nth-child(1)用法一样</p><h2 id="16-first-of-type选择器"><a href="#16-first-of-type选择器" class="headerlink" title="16. :first-of-type选择器"></a>16. :first-of-type选择器</h2><p>和:nth-of-type(1)用法一样</p><p>参考链接:</p><p><a href="https://developer.mozilla.org/zh-CN/">MDN Web Docs (mozilla.org)</a></p><p><a href="https://www.cnblogs.com/qianguyihao/p/8280814.html">CSS选择器：伪类（图文详解） - 千古壹号 - 博客园 (cnblogs.com)</a></p><p><a href="https://blog.csdn.net/DYD850804/article/details/80997251?utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~default-1.control&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~default-1.control">CSS的四种基本选择器和四种高级选择器_Jack-CSDN博客_高级选择器</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue学习笔记(二)</title>
      <link href="/2021/10/08/vue-2/"/>
      <url>/2021/10/08/vue-2/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue学习笔记-二"><a href="#Vue学习笔记-二" class="headerlink" title="Vue学习笔记(二)"></a>Vue学习笔记(二)</h1><p><strong>单页面应用程序SPA</strong>，指的是<strong>一个Web网站中只有唯一一个HTML页面</strong>，所有的功能和交互都在这个唯一的页面内完成。</p><h2 id="1-vue-cli"><a href="#1-vue-cli" class="headerlink" title="1. vue-cli"></a>1. vue-cli</h2><p>vue-cli是Vue.js开发的标准工具。</p><h3 id="1-1-安装"><a href="#1-1-安装" class="headerlink" title="1.1  安装"></a>1.1  安装</h3><p><code> npm install -g @vue/cli</code></p><h3 id="1-2-vue项目的部分文件功能"><a href="#1-2-vue项目的部分文件功能" class="headerlink" title="1.2 vue项目的部分文件功能"></a>1.2 vue项目的部分文件功能</h3><p>vue通过main.js把App.vue渲染到index.html的指定区域中。</p><ul><li>App.vue用来编写待渲染的模板结构</li><li>index.html需要预留一个el区域等待渲染</li><li>main.js把App.vue渲染到index.html预留的区域中</li></ul><p><strong>$(mount)用法</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> MyCom <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/myComponent&#x27;</span><br><br>Vue.config.productionTip = <span class="hljs-literal">false</span><br><br><span class="hljs-comment">// new Vue(&#123;</span><br><span class="hljs-comment">//   el: &#x27;#app&#x27;,</span><br><span class="hljs-comment">//   render: h =&gt; h(MyCom),</span><br><span class="hljs-comment">// &#125;)</span><br><br><span class="hljs-keyword">new</span> Vue(&#123;<br>  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> h(MyCom)<br>&#125;).$mount(<span class="hljs-string">&#x27;#app&#x27;</span>) <span class="hljs-comment">//$(mount)和上面的el属性用法一样</span><br></code></pre></td></tr></table></figure><h2 id="2-组件"><a href="#2-组件" class="headerlink" title="2. 组件"></a>2. 组件</h2><p> <strong>组件化开发</strong>：把<strong>页面上可复用的UI结构封装成组件</strong>，从而方便项目的开发和维护</p><p>vue<strong>支持组件化开发</strong>。组件的后缀名是**.vue**</p><p>每个.vue组件可有三个部分组成：</p><ul><li><strong>template</strong>：组件的模板结构(<strong>必须包含</strong>), <b style="color: red">只能有一个根节点</b></li><li><strong>script</strong>：组件的Javascript行为</li><li><strong>style</strong>：组件的样式</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;h2&gt;用户名：&#123;&#123; username &#125;&#125;&lt;/h2&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>    // data: &#123;<br>    //     username: &#x27;admin&#x27;<br>    // &#125;        //.vue文件中的数据源不可以用对象形式，而应是函数形式<br><br>    data() &#123;<br>        return &#123;<br>            username: &#x27;admin&#x27;<br>        &#125;<br>    &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>    div&gt;h2 &#123;<br>        color: red;<br>    &#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p><strong>在vue中使用less</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;style lang=&quot;less&quot;&gt;<br>    .box &#123;<br>        background-color: pink;<br>        h2 &#123;<br>            color: red;<br>        &#125;<br>    &#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h3 id="2-1-组件使用的三个步骤"><a href="#2-1-组件使用的三个步骤" class="headerlink" title="2.1 组件使用的三个步骤"></a>2.1 组件使用的三个步骤</h3><ol><li>使用import语法导入要用的组件</li><li>在components节点注册组件</li><li>直接把组件当成标签在要渲染的地方使用</li></ol><p><img src="https://pic.imgdb.cn/item/614d68ff2ab3f51d91b8ffbd.jpg"></p><h3 id="2-2-注册全局组件"><a href="#2-2-注册全局组件" class="headerlink" title="2.2 注册全局组件"></a>2.2 注册全局组件</h3><p>上面的注册组件的方法是私有注册，即每一个需要用到经常用的组件，都需要反复注册。这个时候，可以直接在main.js中进行全局组件的注册</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> Test <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Test.vue&#x27;</span> <span class="hljs-comment">//导入要注册的全局组件</span><br><br>Vue.config.productionTip = <span class="hljs-literal">false</span><br><br>Vue.component(<span class="hljs-string">&quot;Mytest&quot;</span>, Test) <span class="hljs-comment">//使用Vue.component()来进行全局组件的注册，第一个参数是要注册的组件的名称，第二个参数是要注册的组件</span><br><br><span class="hljs-keyword">new</span> Vue(&#123;<br>  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> h(App),<br>&#125;).$mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="2-3-组件的props"><a href="#2-3-组件的props" class="headerlink" title="2.3 组件的props"></a>2.3 组件的props</h3><p>props是组件的自定义属性，在封装通用组件时，合理使用props可以<strong>提高组件的复用性</strong>，允许使用者通过自定义属性，为当前组件指定初始值</p><p><img src="https://pic.imgdb.cn/item/614d7b6d2ab3f51d91d23d39.jpg"></p><p><b style="color: red">props是只读的</b>。</p><p><img src="https://pic.imgdb.cn/item/614d7bfe2ab3f51d91d32164.jpg"></p><p>要修改的话，可以把得到的初始值赋给data中的属性，再进行修改，props中的属性的值会一直是初始值</p><p><img src="https://pic.imgdb.cn/item/614d7cff2ab3f51d91d4a226.jpg"></p><p><strong>default属性、type属性和required属性</strong>：如果使用者使用使用组件时，没有传递init属性, 则默认值生效</p><p>使用语法示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vue">props: &#123;<br>    init: &#123;<br>        default: 0,  //用default属性定义属性的默认值<br>        type: Number,  //限定传递的属性的类型，不匹配会报错<br>        required: true,  //设置为true时，必须要传递参数，否则即使有默认值，也会报错<br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure><h3 id="2-4-组件之间的样式冲突"><a href="#2-4-组件之间的样式冲突" class="headerlink" title="2.4 组件之间的样式冲突"></a>2.4 组件之间的样式冲突</h3><p>默认情况下，写在**.vue组件中的样式会全局生效<strong>，所以很容易造成</strong>多个组件之间的样式冲突问题**</p><p>导致组件之间的样式冲突的原因：</p><ol><li>单页面应用程序中，所有的组件的DOM结构都是基于<strong>唯一的index.html页面</strong>呈现的</li><li>每个组件中的样式都会<strong>影响到整个index.html页面</strong>中的所有DOM元素</li></ol><p><img src="https://pic.imgdb.cn/item/614d8ab52ab3f51d91e9188c.jpg"></p><p><strong>通过给要设置样式的组件的style标签中添加”scoped”属性，可以实现不影响到其他组件的样式</strong></p><p><img src="https://pic.imgdb.cn/item/614d8b8b2ab3f51d91ea2bae.jpg"></p><p>原理：给组件里的所有标签都来一个自定义样式，然后通过属性选择器实现样式只会影响到该组件</p><p>上面使用”scoped”的代码，不使用”scoped”属性实现:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;left-container&quot; data-d-001&gt;<br>    &lt;h3 data-d-001&gt;Left 组件&lt;/h3&gt;<br>    &lt;MyCount :init=&quot;5&quot; data-d-001&gt;&lt;/MyCount&gt;  <br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot;&gt;<br>.left-container &#123;<br>  padding: 0 20px 20px;<br>  background-color: orange;<br>  min-height: 250px;<br>  flex: 1;<br>&#125;<br>h3[data-d-001] &#123;<br>  color: red;<br>&#125;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p><b style="color: red">只是使用”scoped”的话，无法实现单独修改用上的其他组件的样式</b></p><p><img src="https://pic.imgdb.cn/item/614d8e572ab3f51d91edfcc3.jpg"></p><p>如果想要让某些样式对子组件生效，可以使用**/deep/ 深度选择器**</p><p><img src="https://pic.imgdb.cn/item/614d8f3a2ab3f51d91ef4356.jpg"></p><p>通过浏览器查看生效样式：</p><p><img src="https://pic.imgdb.cn/item/61697df82ab3f51d91535348.jpg"></p><p><strong>属性选择器使用不一定需要依靠其他选择器，单独使用表示选择所有有对应属性的元素</strong></p><p><img src="https://pic.imgdb.cn/item/614d91de2ab3f51d91f2f9cb.jpg"></p><h2 id="3-组件的生命周期"><a href="#3-组件的生命周期" class="headerlink" title="3. 组件的生命周期"></a>3. 组件的生命周期</h2><p><strong>生命周期</strong>是指一个组件从<strong>创建</strong>-&gt;<strong>运行</strong>-&gt;<strong>销毁</strong>的整个阶段，强调的是一个时间段</p><p><strong>生命周期函数</strong>：由vue框架提供的<strong>内置函数</strong>，会伴随组件的生命周期，<strong>自动按次序执行</strong>。</p><p><b style="color: red">生命周期强调的是时间段，生命周期函数强调的是时间点</b></p><p><strong>组件生命周期函数的分类</strong>：</p><p><img src="https://pic.imgdb.cn/item/614daf602ab3f51d9118fe5c.jpg"></p><p><strong>生命周期图示</strong>：</p><p><img src="https://cn.vuejs.org/images/lifecycle.png"></p><h3 id="3-1-组件创建阶段"><a href="#3-1-组件创建阶段" class="headerlink" title="3.1 组件创建阶段"></a>3.1 组件创建阶段</h3><h4 id="3-1-1-beforeCreate"><a href="#3-1-1-beforeCreate" class="headerlink" title="3.1.1 beforeCreate()"></a>3.1.1 beforeCreate()</h4><p>组件的<strong>props</strong>、<strong>data</strong>、<strong>methods</strong>还没有被创建，都处于<strong>不可用</strong>状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>      &lt;h2&gt;test组件&lt;/h2&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>    props: [&#x27;info&#x27;],<br>    data() &#123;<br>        return &#123;<br>            message: &#x27;message&#x27;<br>        &#125;<br>    &#125;,<br>    methods: &#123;<br>        show() &#123;<br>            console.log(&#x27;show&#x27;);<br>        &#125;<br>    &#125;,<br>    beforeCreate() &#123;<br>        // console.log(this.info);<br>        // console.log(this.message);<br>        this.show();<br>    &#125;<br><br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/614dd1372ab3f51d914cdc07.jpg"></p><h4 id="3-1-2-created"><a href="#3-1-2-created" class="headerlink" title="3.1.2  created()"></a>3.1.2  created()</h4><p>组件的<strong>props</strong>、<strong>data</strong>、<strong>methods</strong>已经创建完，处于<strong>可用</strong>状态。</p><p><img src="https://pic.imgdb.cn/item/614dd21e2ab3f51d914e5be3.jpg"></p><p><b style="color: red">created方法很重要，经常在里面调用methods的方法，请求服务器的数据，并把请求到的数据转存到data中，供渲染时使用</b>,因为应该尽可能早的请求数据。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>      &lt;h2&gt;共有 &#123;&#123; books.length &#125;&#125; 本书&lt;/h2&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>    props: [&#x27;info&#x27;],<br>    data() &#123;<br>        return &#123;<br>            message: &#x27;message&#x27;,<br>            books: [],<br>        &#125;<br>    &#125;,<br>    methods: &#123;<br>        show() &#123;<br>            console.log(&#x27;show&#x27;);<br>        &#125;,<br>        initBooklist() &#123;<br>            const xhr = new XMLHttpRequest();<br>            xhr.open(&#x27;get&#x27;, &#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;);<br>            xhr.send(null);<br>            xhr.addEventListener(&#x27;load&#x27;, () =&gt; &#123;<br>                const result = JSON.parse(xhr.responseText);<br>                this.books = result.data;<br>            &#125;)//使用ajax获取图书信息示例<br>        &#125;<br>    &#125;,<br>    created() &#123;<br>        this.initBooklist();<br>    &#125;<br><br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p><strong>组件的模板结构还没生成</strong>(DOM节点现在不能操作)</p><p><img src="https://pic.imgdb.cn/item/614dd72c2ab3f51d91571ed9.jpg"></p><h4 id="3-1-3-beforeMount"><a href="#3-1-3-beforeMount" class="headerlink" title="3.1.3 beforeMount()"></a>3.1.3 beforeMount()</h4><p><strong>将要</strong>把内存中编译好的<strong>HTML结构</strong>渲染到当前组件的DOM结构</p><p><img src="https://pic.imgdb.cn/item/614dd9232ab3f51d915a7d7e.jpg"></p><h4 id="3-1-4-mounted"><a href="#3-1-4-mounted" class="headerlink" title="3.1.4 mounted()"></a>3.1.4 mounted()</h4><p><b style="color: red">重要，要操作当前组件的DOM，最早只能在mounted阶段</b>，已经把内存中的HTML结构成功的渲染到了浏览器中，此时已经包含了当前组件的<strong>DOM结构</strong></p><p><img src="https://pic.imgdb.cn/item/614ddac12ab3f51d915d7206.jpg"></p><h3 id="3-2-组件的运行阶段"><a href="#3-2-组件的运行阶段" class="headerlink" title="3.2 组件的运行阶段"></a>3.2 组件的运行阶段</h3><h4 id="3-2-1-beforeUpdate"><a href="#3-2-1-beforeUpdate" class="headerlink" title="3.2.1 beforeUpdate()"></a>3.2.1 beforeUpdate()</h4><p><strong>将要</strong>根据变化过后、最新的数据，<strong>重新渲染</strong>到组件的模板结构。(即现在data里的数据已经变化了，但是DOM元素里的数据还没来得及变)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>      &lt;h3&gt;<br>          用于测试运行阶段的message: <br>          &lt;span&gt;&#123;&#123; message &#125;&#125;&lt;/span&gt;<br>      &lt;/h3&gt;<br>      &lt;button @click=&quot;datachange&quot;&gt;更改数据&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>    props: [&#x27;info&#x27;],<br>    data() &#123;<br>        return &#123;<br>            message: &#x27;Hello&#x27;,<br>        &#125;<br>    &#125;,<br>    methods: &#123;<br>        datachange() &#123;<br>            this.message += &#x27;!&#x27;;<br>        &#125;<br>    &#125;,<br>    beforeUpdate() &#123;<br>        const span = document.querySelector(&#x27;h3 span&#x27;);<br><br>        console.log(&#x27;data里的数据：&#x27; + this.message);<br>        console.log(&#x27;DOM中的数据：&#x27; + span.innerHTML);<br>    &#125;<br><br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/614e760c2ab3f51d9122b3c6.jpg"></p><h4 id="3-2-2-updated"><a href="#3-2-2-updated" class="headerlink" title="3.2.2 updated()"></a>3.2.2 updated()</h4><p>已经<strong>完成了</strong>组件DOM结构的<strong>重新渲染</strong></p><p><img src="https://pic.imgdb.cn/item/614e76782ab3f51d9123223b.jpg"></p><p><b style="color: red">数据发生变化时，如果要操作重新渲染过的DOM，应在updated()中执行</b></p><h3 id="3-3-组件销毁阶段"><a href="#3-3-组件销毁阶段" class="headerlink" title="3.3 组件销毁阶段"></a>3.3 组件销毁阶段</h3><h4 id="3-3-1-beforeDestroy"><a href="#3-3-1-beforeDestroy" class="headerlink" title="3.3.1 beforeDestroy()"></a>3.3.1 beforeDestroy()</h4><p><strong>将要</strong>销毁组件,组件还处于正常工作的状态</p><h4 id="3-3-2-destroyed"><a href="#3-3-2-destroyed" class="headerlink" title="3.3.2 destroyed()"></a>3.3.2 destroyed()</h4><p>DOM结构已经完全销毁</p><h2 id="4-组件间的数据共享"><a href="#4-组件间的数据共享" class="headerlink" title="4. 组件间的数据共享"></a>4. 组件间的数据共享</h2><h3 id="4-1-父组件向子组件传递数据"><a href="#4-1-父组件向子组件传递数据" class="headerlink" title="4.1 父组件向子组件传递数据"></a>4.1 父组件向子组件传递数据</h3><p>父组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app-container&quot;&gt;<br>    &lt;h1&gt;父组件数据: &#123;&#123; message &#125;&#125; &lt;br&gt;<br>       &#123;&#123; present &#125;&#125;&lt;/h1&gt;<br>    &lt;Test :msg=&quot;message&quot; :pst=&quot;present&quot;&gt;&lt;/Test&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import Test from &#x27;@/components/Test.vue&#x27;<br><br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      message: &#x27;Hello Son!&#x27;,<br>      present: &#123;<br>        fruit: &#x27;apple&#x27;,<br>        toy: &#x27;car&#x27;<br>      &#125;<br>    &#125;<br>  &#125;,<br>  components: &#123;<br>    Test<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot;&gt;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p>子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;test&quot;&gt;<br>      &lt;h3 class=&quot;de&quot;&gt;<br>          子组件<br>      &lt;/h3&gt;<br>      &lt;p&gt;接收父组件传来的message: &#123;&#123;msg &#125;&#125;&lt;/p&gt;<br>      &lt;p&gt;接收父组件传来的present: &#123;&#123;pst &#125;&#125;&lt;/p&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>    props: [&quot;msg&quot;, &quot;pst&quot;],<br>    data() &#123;<br>        return &#123;<br>            message: &#x27;Hello&#x27;,<br>        &#125;<br>    &#125;,<br>    methods: &#123;<br>        datachange() &#123;<br>            this.message += &#x27;!&#x27;;<br>        &#125;<br>    &#125;,<br><br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scope&gt;<br>.de &#123;<br>    color: red<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>实现父组件向子组件传递数据，主要依靠</p><ul><li><b style="color: red">在子组件自定义属性</b></li><li><b style="color: red">在父组件通过v-bind传递数据给子组件的自定义属性</b></li></ul><p><b style="color: red">通过上面的方法，传递给子组件的数据在props的属性中，只读，所以需要修改的话，要把接收的数据赋给子组件data中的元素</b></p><p><img src="https://pic.imgdb.cn/item/614e88112ab3f51d91389e87.jpg"></p><h3 id="4-2-子组件向父组件传递数据"><a href="#4-2-子组件向父组件传递数据" class="headerlink" title="4.2 子组件向父组件传递数据"></a>4.2 子组件向父组件传递数据</h3><p>通过<b style="color: red">在父组件处自定义事件</b>,和<b style="color: red">在子组件处通过$.emit()方法触发自定义事件</b>来实现子组件向父组件传递数据</p><p><img src="https://pic.imgdb.cn/item/614e8b3c2ab3f51d913d17f9.jpg"></p><h3 id="4-3-兄弟组件组件的数据共享"><a href="#4-3-兄弟组件组件的数据共享" class="headerlink" title="4.3 兄弟组件组件的数据共享"></a>4.3 兄弟组件组件的数据共享</h3><p>兄弟组件之间的数据共享方案是<strong>EventBus</strong></p><p>步骤：</p><ol><li>创建eventBus.js文件，向外共享一个Vue的实例对象(用法相当于中转站)</li><li>在数据<strong>发送方</strong>，调用<strong>bus.$emit</strong>(‘事件名称’, 要发送的数据)方法<strong>触发自定义事件</strong></li><li>在数据<strong>接收方</strong>，调用<strong>bus.$on</strong>(‘事件名称’, 事件处理函数)方法<strong>注册一个自定义事件</strong></li></ol><p><img src="https://pic.imgdb.cn/item/614e925e2ab3f51d91467cbc.jpg"></p><h2 id="5-ref引用"><a href="#5-ref引用" class="headerlink" title="5. ref引用"></a>5. ref引用</h2><p>ref用来辅助开发者在<strong>不依赖jQuery的情况下</strong>，获取DOM元素或组件的引用。</p><p>每个vue的组件实例上，都包含一个**$refs对象<strong>，里面存储着对应的DOM元素或组件的引用。默认情况下，</strong>组件的$refs指向一个空对象**。</p><p><img src="https://pic.imgdb.cn/item/61605a9c2ab3f51d9141b3d1.jpg"></p><p><strong>使用ref引用DOM元素</strong>：</p><p><img src="https://pic.imgdb.cn/item/614f36e72ab3f51d9129cdaf.jpg"></p><p>所以上面要操作DOM元素可以通过<strong>this.$refs.myh3</strong>来修改，如：</p><p><img src="https://pic.imgdb.cn/item/614f379f2ab3f51d912adbae.jpg"></p><p><strong>使用ref引用组件实例</strong>：<br><img src="https://pic.imgdb.cn/item/614f3c552ab3f51d9131ad80.jpg"></p><p><strong>控制文本框和按钮的按需切换</strong>：(点击按钮，按钮隐藏，文本框显示；文本框失去焦点，按钮显示，文本框隐藏；文本框显示时自动获取焦点)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app-container&quot;&gt;<br>    &lt;h3 ref=&quot;myh3&quot;&gt;MyRef组件&lt;/h3&gt;<br>    &lt;input type=&quot;text&quot; v-if=&quot;inputVisible&quot; ref=&quot;myipt&quot; @blur=&quot;showButton&quot;&gt;<br>    &lt;button v-else @click=&quot;showInput&quot;&gt;展示输入框&lt;/button&gt;<br>    <br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>// import Left from &#x27;@/components/Left.vue&#x27;<br>// import Right from &#x27;@/components/Right.vue&#x27;<br><br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      inputVisible: false<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    showInput() &#123;<br>      this.inputVisible = true;<br>      console.log(this.$refs.myipt);   //调用showInput时，数据刚刚发生了改变，而这行和上一行代码之间的时间间隔太短，<br>                                      // 导致DOM结构没有进行完渲染，所以此时出现undefined<br>      this.$nextTick(() =&gt; &#123;           //组件的$nextTick()方法，会把回调函数推迟到下一个DOM更新周期之后执行<br>        console.log(this.$refs.myipt);<br>        this.$refs.myipt.focus();<br>      &#125;)<br>    &#125;,<br>    showButton() &#123;<br>      this.inputVisible = false;  <br>    &#125;<br>  &#125;,<br>  // components: &#123;<br>  //   Left, <br>  // &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot;&gt;<br>.app-container &#123;<br>  padding: 1px 20px 20px;<br>  background-color: #efefef;<br>&#125;<br>.box &#123;<br>  display: flex;<br>&#125;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p><b style="color: red">this.$nextTick(callback)方法</b>：</p><p>组件的**$nextTick(callback)方法<strong>会把callback</strong>推迟到下一个DOM更新周期之后执行**，即等组件的DOM更新完之后，再执行callback回调函数。从而保证回调函数能操作到最新的DOM元素。</p><p>上面的例子不能在生命周期函数中的updated()中使用input.focus()，因为data中的数据一发生变化，updated()都会执行一次，即input隐藏时也会执行，此时压根没有input元素，又何来input.focus()之说呢。</p><h2 id="6-动态组件"><a href="#6-动态组件" class="headerlink" title="6. 动态组件"></a>6. 动态组件</h2><p>动态组件指的是<strong>动态切换组件的显示与隐藏</strong></p><p>vue提供了一个内置的<component>组件，<strong>专门用来实现动态组件的渲染</strong>。</p><ul><li><p>使用组件的三大步骤：</p><ol><li>引入组件</li><li>注册组件</li><li>通过标签使用组件</li></ol><p><img src="https://pic.imgdb.cn/item/61605ab92ab3f51d9141f278.jpg"></p><p>第三步，可以使用内置的component组件，通过is属性来动态指定要渲染的组件</p><p>即上面的3可以换成<code> &lt;component :is=&quot;&#39;Left&#39;&quot;&gt;&lt;/component&gt;</code></p></li></ul><p>动态指定渲染组件示例：</p><p>App组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app-container&quot;&gt;<br>    &lt;h1&gt;App 根组件&lt;/h1&gt;<br>    &lt;button @click=&quot;comName=&#x27;Left&#x27;&quot;&gt;展示Left组件&lt;/button&gt;<br>    &lt;button @click=&quot;comName=&#x27;Right&#x27;&quot;&gt;展示Right组件&lt;/button&gt;<br>    &lt;hr /&gt;<br><br>    &lt;div class=&quot;box&quot;&gt;<br>      &lt;component :is=&quot;comName&quot;&gt;&lt;/component&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import Left from &#x27;@/components/Left.vue&#x27;<br>import Right from &#x27;@/components/Right.vue&#x27;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      comName: &#x27;Left&#x27;<br>    &#125;<br>  &#125;,<br>  components: &#123;<br>    Left,<br>    Right<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot;&gt;<br>.app-container &#123;<br>  padding: 1px 20px 20px;<br>  background-color: #efefef;<br>&#125;<br>.box &#123;<br>  display: flex;<br>&#125;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p>Left组件(注释代码是后面的部分才用上的)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;left-container&quot;&gt;<br>    &lt;h3&gt;Left 组件&lt;/h3&gt;<br>    &lt;h4&gt;count的值是 &#123;&#123; count &#125;&#125;&lt;/h4&gt;<br>    &lt;button @click=&quot;count += 1&quot;&gt;+1&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  // name: &#x27;MyLeft&#x27;,<br>  data() &#123;<br>    return &#123;<br>      count: 0<br>    &#125;<br>  &#125;,<br>  created() &#123;<br>    console.log(&#x27;左侧被创建了&#x27;);<br>  &#125;,<br>  destroyed() &#123;<br>    console.log(&#x27;左侧被销毁了&#x27;);<br>  &#125;,<br>  // activated() &#123;<br>  //   console.log(&#x27;左侧被激活了&#x27;);<br>  // &#125;,<br>  // deactivated() &#123;<br>  //   console.log(&#x27;左侧休息了&#x27;);<br>  // &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;less&quot;&gt;<br>.left-container &#123;<br>  padding: 0 20px 20px;<br>  background-color: orange;<br>  min-height: 250px;<br>  flex: 1;<br>&#125;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p><strong>问题</strong>：在上面的示例中，点击Left组件的+1按钮，已经改变了数值，但是，点击展示Right组件后，再重新展示Left组件，会发现数值又回归了初始状态。从控制台中的输出，可以知道，原因是动态指定渲染Right组件时，Left组件会被销毁，之后右重新创建，所以数据会是初始状态。</p><p>可以通过vue内置的<b style="color: red"><code> &lt;keep-alive&gt;组件 </code></b>保持动态组件的状态。</p><p>用法：用keep-alive组件包住动态组件就可以。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;keep-alive&gt;<br>   &lt;component :is=&quot;comName&quot;&gt;&lt;/component&gt;<br>&lt;/keep-alive&gt;<br></code></pre></td></tr></table></figure><p>当组件被激活时，会自动触发组件的<strong>activated</strong>生命周期函数。</p><p>当组件休眠时，会自动触发组件的<strong>deactivated</strong>生命周期函数。</p><p>把上面Left组件的注释代码启用。可以发现，当Left组件激活时(展示Left)，会打印出”左侧被激活了”；而Left休眠时(展示Right)，会打印出”左侧休息了”。</p><p><b style="color: red">include属性</b><strong>：实现只有名字匹配的组件才会被缓存。就是说，上面的例子中，Left组件中有数据，想要保存Left的状态，但是Right组件没有必要缓存，甚至有可能Right组件是一次性的用法。这个时候通过include属性，可以指定谁会被缓存。多个组件间用</strong>英文的逗号**分隔。</p><p><img src="https://pic.imgdb.cn/item/61528f9f2ab3f51d9172712f.jpg"></p><p><strong>逗号左右不要有空格</strong></p><p>用法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;keep-alive include=&quot;Left&quot;&gt;<br>   &lt;component :is=&quot;comName&quot;&gt;&lt;/component&gt;<br>&lt;/keep-alive&gt;<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/61528db32ab3f51d916ff37c.jpg"></p><p>可以发现，上面的Right组件在调试工具中显示的名字并不是Right，而是自定义的MyRight。这是通过组件的name节点修改的。</p><p><img src="https://pic.imgdb.cn/item/61528e8d2ab3f51d917118c6.jpg"></p><p>如果修改了组件的名称，那么在include属性中的名字应该是修改后的名字。</p><p><b style="color: red">exclude属性</b>：表示不缓存哪些组件。和include属性一起用没有意义，要不就是取消掉include属性的作用。要不就是多此一举。还会让代码可读性下降。</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo博客自制背景动画(代码雨)</title>
      <link href="/2021/10/04/blog-bg-animate/"/>
      <url>/2021/10/04/blog-bg-animate/</url>
      
        <content type="html"><![CDATA[<h1 id="hexo博客自制背景动画-代码雨"><a href="#hexo博客自制背景动画-代码雨" class="headerlink" title="hexo博客自制背景动画(代码雨)"></a>hexo博客自制背景动画(代码雨)</h1><p>起因：看到<a href="https://pranx.com/matrix-code-rain/">比较厉害的特效</a>，想学一下加到自己的博客中看看效果。</p><h2 id="1-首先，在单独一个html文件中实现动画效果"><a href="#1-首先，在单独一个html文件中实现动画效果" class="headerlink" title="1. 首先，在单独一个html文件中实现动画效果"></a>1. 首先，在单独一个html文件中实现动画效果</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>代码雨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">            <span class="hljs-selector-id">#canvas</span> &#123;</span><br><span class="css">                <span class="hljs-attribute">position</span>: fixed;</span><br><span class="css">                <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="css">                <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">                <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">                <span class="hljs-attribute">z-index</span>: -<span class="hljs-number">1</span>;</span><br><span class="css">            &#125;</span><br><span class="css">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;canvas&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">            <span class="hljs-built_in">window</span>.onload = <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="javascript">                <span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;canvas&quot;</span>)</span><br><span class="javascript">                <span class="hljs-keyword">const</span> window_screen = <span class="hljs-built_in">window</span>.screen</span><br><span class="javascript">                <span class="hljs-keyword">const</span> w = (canvas.width = window_screen.width)</span><br><span class="javascript">                <span class="hljs-keyword">const</span> h = (canvas.height = window_screen.height)</span><br><span class="javascript">                <span class="hljs-keyword">const</span> fontSize = <span class="hljs-number">12</span></span><br><span class="javascript">                <span class="hljs-keyword">const</span> context = canvas.getContext(<span class="hljs-string">&#x27;2d&#x27;</span>) <span class="hljs-comment">// 返回一个用于在画布上绘图的环境</span></span><br><span class="javascript"></span><br><span class="javascript">                <span class="hljs-keyword">let</span> col = <span class="hljs-number">0</span> <span class="hljs-comment">// 列数</span></span><br><span class="javascript">                <span class="hljs-keyword">let</span> drops = [] <span class="hljs-comment">// 保存每一列当前的位置</span></span><br><span class="javascript"></span><br><span class="javascript">                col = <span class="hljs-built_in">Math</span>.floor(w / fontSize) <span class="hljs-comment">// 得到代码雨的列数</span></span><br><span class="javascript"></span><br><span class="javascript">                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; col; i++) &#123;</span><br><span class="javascript">                    drops.push(<span class="hljs-number">0</span>)</span><br><span class="javascript">                &#125;</span><br><span class="javascript"></span><br><span class="javascript">                <span class="hljs-keyword">var</span> str = <span class="hljs-string">&#x27;qwertyuiopasdfghjklzxcvbnm0123456789&#x27;</span> <span class="hljs-comment">//代码雨中的文字</span></span><br><span class="javascript"></span><br><span class="javascript">                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rain</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">                    context.fillStyle = <span class="hljs-string">&#x27;rgba(0, 0, 0, .1)&#x27;</span> <span class="hljs-comment">// 增加一个遮盖层</span></span><br><span class="javascript">                    context.fillRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, w, h)</span><br><span class="javascript">                    context.fillStyle = <span class="hljs-string">&#x27;#00ff00&#x27;</span> <span class="hljs-comment">// 先为要显示的文字设置好颜色</span></span><br><span class="javascript"></span><br><span class="javascript">                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; col; i++) &#123;</span><br><span class="javascript">                        <span class="hljs-keyword">const</span> index = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * str.length)</span><br><span class="javascript">                        <span class="hljs-keyword">const</span> x = i * fontSize</span><br><span class="javascript">                        <span class="hljs-keyword">const</span> y = drops[i] * fontSize</span><br><span class="javascript"></span><br><span class="javascript">                        context.fillText(str[index], x, y) <span class="hljs-comment">// 把文字写到画布上去</span></span><br><span class="javascript">                        <span class="hljs-keyword">if</span> (y &gt;= canvas.height &amp;&amp; <span class="hljs-built_in">Math</span>.random() &gt;= <span class="hljs-number">0.99</span>) &#123;</span><br><span class="javascript">                            <span class="hljs-comment">// 通过random()实现列与列位置的差别</span></span><br><span class="javascript">                            drops[i] = <span class="hljs-number">0</span></span><br><span class="javascript">                        &#125;</span><br><span class="javascript">                        drops[i]++</span><br><span class="javascript">                    &#125;</span><br><span class="javascript">                &#125;</span><br><span class="javascript"></span><br><span class="javascript">                <span class="hljs-built_in">setInterval</span>(rain, <span class="hljs-number">30</span>)</span><br><span class="javascript">            &#125;</span><br><span class="javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><a href="https://codepen.io/13535944743/pen/VwWOrxx">结果展示</a></p><p>现在的效果可能有点不太好看，因为是看了很多代码雨的js代码，明白了大概如何实现之后依葫芦画瓢做出来的，待未来优化。</p><h2 id="2-实现动画效果后，把它加到hexo主题中去"><a href="#2-实现动画效果后，把它加到hexo主题中去" class="headerlink" title="2. 实现动画效果后，把它加到hexo主题中去"></a>2. 实现动画效果后，把它加到hexo主题中去</h2><ul><li><p>在<code>blog\themes\hexo-theme-matery\source\js</code>中添加名为digitalRain.js的js文件，把之前写的js代码复制粘贴上去。</p><p>这样子的话，部署(<code>hexo g -d</code>)之后可以在<code>blog\public\js</code>中发现新增的js文件</p></li></ul><p><img src="https://pic.imgdb.cn/item/615a9f742ab3f51d91819a05.jpg"></p><ul><li><p>这个时候，js文件到位了，但是html文件并没有引入js文件，就要使用hexo主题的功能了</p><p>找到下图框框中的文件</p><p><img src="https://pic.imgdb.cn/item/615aa0492ab3f51d9182f8b3.jpg"></p><p>打开后，可以看到它引入了很多js文件，只是引入的方式有点高端，但是先普通的引入，按下图框框中引入，<b style="color: red">这个路径并不是当前路径，而是相对于<code>blog\public</code>的路径</b>。</p><p><img src="https://pic.imgdb.cn/item/615aa0c02ab3f51d9183bb5e.jpg"></p><p>如果路径填错了，会报一个404错误。这个时候可以到github下的博客仓库看一下，js文件有没有在上面</p><p><img src="https://pic.imgdb.cn/item/615aa3112ab3f51d9187710e.jpg"></p></li></ul><p>引入成功的话，如下图，双击下图js文件时会去到js文件的地址</p><p><img src="https://pic.imgdb.cn/item/615aa3cd2ab3f51d9188a271.jpg"></p><ul><li><p>把js引入后，就需要设置一下样式了。样式可以通过js设置，但是这样子，样式部分和行为部分就混在一起了，之后想改进时会变得很困难。所以样式应该放到css文件中</p><p>在<code> blog\themes\hexo-theme-matery\source\css</code>中原有的css文件中添加canvas的样式，可能有权重问题</p></li></ul><p><img src="https://pic.imgdb.cn/item/615a9ed82ab3f51d91809926.jpg"></p><h2 id="3-部署网站"><a href="#3-部署网站" class="headerlink" title="3. 部署网站"></a>3. 部署网站</h2><p>如果它原本就有<code>&lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;</code>，那么就可以正常实现背景动画，但是，当它原本没有canvas标签时，就需要微操一下js代码了。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/****** 微操前 ************/</span><br><span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;canvas&#x27;</span>);<br><span class="hljs-keyword">const</span> window_screen = <span class="hljs-built_in">window</span>.screen<br>                <br><span class="hljs-comment">/****** 微操后 ************/</span><br><span class="hljs-keyword">const</span> body = <span class="hljs-built_in">document</span>.body <span class="hljs-comment">// 获取body节点</span><br><span class="hljs-keyword">const</span> canvas = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&#x27;canvas&#x27;</span>) <span class="hljs-comment">// 动态生成canvas标签</span><br>canvas.id = <span class="hljs-string">&#x27;canvas&#x27;</span><br>body.insertBefore(canvas, body.children[<span class="hljs-number">0</span>]) <span class="hljs-comment">// 插入body节点中</span><br><br><span class="hljs-keyword">const</span> window_screen = <span class="hljs-built_in">window</span>.screen<br><br></code></pre></td></tr></table></figure><p>成功实现，结束。</p>]]></content>
      
      
      <categories>
          
          <category> 小技能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> blog </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript_元素三大系列</title>
      <link href="/2021/10/03/Javascript-threeSeries/"/>
      <url>/2021/10/03/Javascript-threeSeries/</url>
      
        <content type="html"><![CDATA[<h1 id="元素三大系列"><a href="#元素三大系列" class="headerlink" title="元素三大系列"></a>元素三大系列</h1><p style="color:red">这里讲的三大系列的属性返回的是数值，不带单位</p><h2 id="元素偏移量offset系列"><a href="#元素偏移量offset系列" class="headerlink" title="元素偏移量offset系列"></a>元素偏移量offset系列</h2><p>使用offset系列相关属性可以动态得到该元素的位置（偏移）、大小等。</p><p>作用：</p><ol><li>获得元素距离定位父元素的位置（如果没有父元素或者父元素都没有定位，则是距离body的位置）</li><li>获得元素自身宽度高度</li></ol><p style="color:red">返回的是数值，不带单位</p><p>offset系列常用属性:</p><table><thead><tr><th>offset系列属性</th><th align="center">作用</th></tr></thead><tbody><tr><td>element.offsetParent</td><td align="center">返回该元素带有定位的父级元素，都没有定位则返回body</td></tr><tr><td>element.offsetTop</td><td align="center">返回该元素相对于带有定位父元素上方的偏移</td></tr><tr><td>element.offsetLeft</td><td align="center">返回该元素相对于带有定位父元素左边框的偏移</td></tr><tr><td>element.offsetWidth</td><td align="center">返回该元素自身包括padding、边框、内容区的宽度）</td></tr><tr><td>element.offsetHeight</td><td align="center">返回该元素自身高度（同上）</td></tr></tbody></table><p style="color:red">返回的是数值，不带单位</p><p><a href="https://codepen.io/13535944743/pen/YzQqBLb">offsetParent示例</a></p><p><a href="https://codepen.io/13535944743/pen/QWgKEer">offsetTop和offsetLeft示例</a></p><p><a href="https://codepen.io/13535944743/pen/VwWKKKm">offsetWidth和offsetHeight示例</a></p><h3 id="offset和style的区别"><a href="#offset和style的区别" class="headerlink" title="offset和style的区别"></a>offset和style的区别</h3><table><thead><tr><th>offset</th><th align="center">style</th></tr></thead><tbody><tr><td>offset可以得到所有样式表的样式值</td><td align="center">style只能得到行内样式表中的样式值</td></tr><tr><td>offset得到的是数值,没有单位</td><td align="center">style得到的是带有单位的字符串</td></tr><tr><td>offsetWidth包含width+padding+border</td><td align="center">style.width只包含width,不包含padding和border</td></tr><tr><td>offset系列属性是只读属性，只能获取不能赋值</td><td align="center">style.width等是可读写属性，可以获取也能赋值</td></tr></tbody></table><p style="color:red">获取元素大小位置，offset更合适，更改元素大小位置，style更合适</p><p>offset各属性示意图：</p><p><img src="https://i.loli.net/2021/09/04/jV21Y8vt6dJeKTO.png"></p><p>例子：</p><p><a href="https://codepen.io/13535944743/pen/rNwMmqz">计算鼠标在盒子里的坐标</a></p><h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p>拖动的模态框</p><h2 id="元素可视区client系列"><a href="#元素可视区client系列" class="headerlink" title="元素可视区client系列"></a>元素可视区client系列</h2><p>使用client系列相关属性来获取元素可视区的相关信息。</p><p>作用：</p><ol><li>动态得到该元素的边框大小</li><li>动态得到该元素的元素大小</li></ol><p style="color:red">返回的是数值，不带单位</p><table><thead><tr><th>client系列属性</th><th align="center">作用</th></tr></thead><tbody><tr><td>element.clientTop</td><td align="center">返回元素上边框大小</td></tr><tr><td>element.clientLeft</td><td align="center">返回元素左边框大小</td></tr><tr><td>element.clientWidth</td><td align="center">返回自身包括padding、内容区的宽度，不含边框</td></tr><tr><td>elemeng.clientHeight</td><td align="center">返回自身高度（同上）</td></tr></tbody></table><p style="color:red">返回的是数值，不带单位</p><p>示例：</p><p><a href="https://codepen.io/13535944743/pen/YzQGvJR">client系列</a></p><h2 id="立即执行函数"><a href="#立即执行函数" class="headerlink" title="立即执行函数"></a>立即执行函数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">(function()&#123;<br> //代码<br>&#125;)();<br><br>或<br>(function() &#123;<br> //代码<br>&#125;())<br><br><br></code></pre></td></tr></table></figure><p>作用：创建一个独立的作用域，避免命名冲突的问题，因为里面的变量都是局部变量。</p><p>第一种形式比较好理解，首先需要定义函数，但是是立即执行函数，所以不需要函数名，不加函数名的话有可能是写错代码了，所以立即执行函数的语法就是用”()”包住立即执行函数，就可以区分出错误代码和立即执行函数。之后的”()”便是函数调用。</p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">(function(a, b) &#123;<br> console.log(a * b);<br>&#125;)(9, 8);<br><br>//********************<br><br>(function(a, b) &#123;<br> console.log(a * b);<br>&#125;(9, 8));<br><br><br></code></pre></td></tr></table></figure><h2 id="元素滚动scroll系列"><a href="#元素滚动scroll系列" class="headerlink" title="元素滚动scroll系列"></a>元素滚动scroll系列</h2><p>使用scroll系列的相关属性可以动态的得到该元素的大小，滚动距离等。</p><p style="color:red">返回的是数值，不带单位</p><table><thead><tr><th>scroll系列属性</th><th align="center">作用</th></tr></thead><tbody><tr><td>element.scrollTop</td><td align="center">返回被卷去的上侧距离</td></tr><tr><td>element.scrollLeft</td><td align="center">被卷去的左侧距离</td></tr><tr><td>element.scrollWidth</td><td align="center">返回自身<b style="color: red">实际</b>宽度，不含边框</td></tr><tr><td>element.scrollHeight</td><td align="center">返回自身实际高度(同上)</td></tr></tbody></table><p style="color:red">返回的是数值，不带单位</p><p>scrollWidth、scrollHeight：返回自身实际宽度、高度，即使内容区的内容不显示出来</p><p>示例：</p><p><a href="https://codepen.io/13535944743/pen/ZEyBQZz">scroll系列</a></p><h3 id="案例："><a href="#案例：" class="headerlink" title="案例："></a>案例：</h3><p>仿淘宝固定侧边栏</p><p>知识点：</p><p>element.scrollTop是返回元素被卷去的上侧距离，而window.pageYOffset是页面被卷去的距离</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p style="color:red">返回的是数值，不带单位</p><table><thead><tr><th>三大系列大小对比</th><th align="center">作用</th></tr></thead><tbody><tr><td>element.offsetWidth</td><td align="center">返回自身包括padding、边框、内容区的宽度</td></tr><tr><td>element.clientWidth</td><td align="center">返回自身包括padding、内容区的宽度，不含边框</td></tr><tr><td>element.scrollWidth</td><td align="center">返回自身实际的宽度，不含边框</td></tr></tbody></table><p>用法：</p><ol><li>offset系列经常用于获得元素位置（<b style="color: red">offsetTop、offsetLeft</b>）</li><li>client系列经常用于获取元素大小（<b style="color: red">clientWidth、clientHeight</b>）</li><li>scroll经常用于获取滚动距离（<b style="color: red">scrollTop、scrollLeft</b>）</li><li>页面滚动距离不是通过scrollTop、scrollLeft获取，而是通过window.pageXOffset、window.pageYOffset获取</li></ol><p>学习链接：<br><a href="https://www.bilibili.com/video/BV1Sy4y1C7ha">pink老师前端入门</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BOM</title>
      <link href="/2021/10/01/Javascript-BOM/"/>
      <url>/2021/10/01/Javascript-BOM/</url>
      
        <content type="html"><![CDATA[<h1 id="BOM-浏览器对象模型"><a href="#BOM-浏览器对象模型" class="headerlink" title="BOM(浏览器对象模型)"></a>BOM(浏览器对象模型)</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>BOM(Brower Object Model) 即浏览器对象，它提供了独立于内容而与浏览器窗口进行交互的对象，核心对象是window。</p><p>BOM缺乏标准，Javascript语法的标准化组织是ECMA，DOM的标准化组织是W3C，BOM最初是Netscape浏览器标准的一部分</p><h3 id="BOM和DOM"><a href="#BOM和DOM" class="headerlink" title="BOM和DOM"></a>BOM和DOM</h3><p><img src="https://pic.imgdb.cn/item/612e171044eaada739b68a93.jpg"></p><h3 id="BOM构成"><a href="#BOM构成" class="headerlink" title="BOM构成"></a>BOM构成</h3><p>BOM比DOM更大，它包括DOM。</p><p><img src="https://pic.imgdb.cn/item/612e176e44eaada739b76e73.jpg"></p><p>window对象是浏览器的顶级对象。</p><ol><li>它是JS访问浏览器窗口的一个接口</li><li>它是一个全局对象。定义在全局作用域中的变量函数都会变成window对象的属性和方法。调用时可以省略window,alert()和prompt()都是window对象方法。</li></ol><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">var num = 1;<br>      console.log(num); //实际console.log(window.num);<br><br>      function fn() &#123;<br>          alert(1); //window.alert(1);<br>      &#125;<br>      fn(); //window.fn();<br><br><br></code></pre></td></tr></table></figure><h2 id="window对象的常见事件"><a href="#window对象的常见事件" class="headerlink" title="window对象的常见事件"></a>window对象的常见事件</h2><h3 id="窗口加载事件"><a href="#窗口加载事件" class="headerlink" title="窗口加载事件"></a>窗口加载事件</h3><h4 id="load事件"><a href="#load事件" class="headerlink" title="load事件"></a>load事件</h4><p><code>window.addEventListener(&quot;load&quot;, function()&#123;&#125;);</code></p><p>是窗口（页面）加载事件，当文档内容完全加载完成后会触发事件（包括图像、脚本文件、CSS文件等），就调用的处理函数。</p><p>作用：有了窗口加载事件就可以把JS代码放在页面元素上方。因为load事件是等页面内容完全加载完毕，才去执行事件处理函数。</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;zh-CN&quot;&gt;<br><br>&lt;head&gt;<br>  &lt;meta charset=&quot;UTF-8&quot;&gt;<br>  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>  &lt;title&gt;Myself&lt;/title&gt;<br>  &lt;script&gt;<br>      window.addEventListener(&quot;load&quot;, () =&gt; &#123;<br>          const btn = document.querySelector(&quot;button&quot;);<br>          btn.addEventListener(&quot;click&quot;, () =&gt; &#123;<br>              alert(1);<br>          &#125;);<br>      &#125;);<br>  &lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>  &lt;button&gt;点击&lt;/button&gt;<br><br>&lt;/body&gt;<br><br>&lt;/html&gt;<br><br><br></code></pre></td></tr></table></figure><h4 id="DOMContentLoaded事件"><a href="#DOMContentLoaded事件" class="headerlink" title="DOMContentLoaded事件"></a>DOMContentLoaded事件</h4><p><code>document.addEventListener(&quot;DOMContentLoaded&quot;, function()&#123;&#125;);</code></p><p>DOMContentLoaded事件触发时，仅当DOM加载完成时，不包括样式表，图片等。IE9以上才支持。</p><p>应用背景：当页面的图片很多时，从用户访问到onload触发可能需要较长的时间，会影响到用户的体验，此时用DOMContentLoaded事件更合适。</p><p>用法和load事件类似。</p><h3 id="调整窗口大小事件"><a href="#调整窗口大小事件" class="headerlink" title="调整窗口大小事件"></a>调整窗口大小事件</h3><p><code>window.addEventListener(&quot;resize&quot;, function()&#123;&#125;);</code></p><p>只要窗口大小发生变化，就会触发事件。</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">const btn = document.querySelector(&quot;button&quot;);<br>      window.addEventListener(&quot;resize&quot;, () =&gt; &#123;<br>          if (window.innerWidth &lt; 800) &#123; //window.innerWidth是当前窗口大小<br>              btn.style.display = &quot;none&quot;;<br>          &#125; else &#123;<br>              btn.style.display = &quot;inline&quot;;<br>          &#125;<br>      &#125;)<br><br></code></pre></td></tr></table></figure><h2 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h2><h3 id="setTimeout-定时器"><a href="#setTimeout-定时器" class="headerlink" title="setTimeout()定时器"></a>setTimeout()定时器</h3><p><code>window.setTimeout(调用函数，[延迟的毫秒数]);</code></p><p>用于设置一个定时器，在时间到后执行调用函数。</p><p>注意：</p><ol><li>window可以省略</li><li>延迟的毫秒数默认是0</li><li>一般给定时器一个标识符，方便停止定时器等操作</li></ol><p>调用函数也称为回调函数callback。普通函数按照代码顺序直接调用，而setTimeout需要等待时间，时间到了才调用函数，因此被称为回调函数。</p><p>注册事件时的事件处理函数也是回调函数。</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">let timer = setTimeout(fn, 1000);<br><br>      function fn() &#123;<br>          console.log(&quot;时间到了&quot;);<br>      &#125;<br><br></code></pre></td></tr></table></figure><h3 id="停止setTimeout-定时器"><a href="#停止setTimeout-定时器" class="headerlink" title="停止setTimeout()定时器"></a>停止setTimeout()定时器</h3><p><code>window.clearTimeout(timeoutID)</code></p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">let timer = setTimeout(fn, 1000);<br><br>      function fn() &#123;<br>          console.log(&quot;时间到了&quot;);<br>      &#125;<br><br>      clearTimeout(timer);<br><br></code></pre></td></tr></table></figure><h3 id="setInterval-定时器"><a href="#setInterval-定时器" class="headerlink" title="setInterval()定时器"></a>setInterval()定时器</h3><p><code>window.setInterval(回调函数，[延迟的毫秒数]);</code></p><p>和setTimeout()基本一样，不一样的是，setInterval()会重复调用回调函数，每隔一段时间，就调用一次回调函数。</p><p>注意：第一次执行也是需要等待延迟的毫秒数才会执行</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">let timer = setInterval(fn, 1000);<br><br>      function fn() &#123;<br>          console.log(&quot;时间到了&quot;);<br>      &#125;<br><br></code></pre></td></tr></table></figure><h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>倒计时效果</p><h3 id="停止setInterval-定时器"><a href="#停止setInterval-定时器" class="headerlink" title="停止setInterval()定时器"></a>停止setInterval()定时器</h3><p><code>window.clearInterval(intervalID)</code></p><p>需要注意的是setTimeout()和setInterval()共用一个编号池，技术上，clearTimeout()和 clearInterval() 可以互换。但是，为了避免混淆，不要混用取消定时函数。<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout">来源</a></p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">const start = document.querySelector(&quot;.start&quot;);<br>      const stop = document.querySelector(&quot;.pause&quot;);<br>      let timer = null;<br><br>      start.addEventListener(&quot;click&quot;, () =&gt; &#123;<br>          timer = setInterval(() =&gt; &#123;<br>              console.log(&quot;时间到了&quot;);<br>          &#125;, 1000);<br>      &#125;);<br>      stop.addEventListener(&quot;click&quot;, () =&gt; &#123;<br>          clearInterval(timer);<br>      &#125;);<br><br></code></pre></td></tr></table></figure><h4 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h4><p>发送短信案例</p><h2 id="this指向"><a href="#this指向" class="headerlink" title="this指向"></a>this指向</h2><p>this的指向只有在函数执行的时候才能确定指向，一般情况下this指向的是调用它的对象。</p><ol><li>全局作用域和普通函数中this指向全局对象window,定时器里面的this也是指向window</li></ol><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">console.log(this);<br><br>      function fn() &#123;<br>          console.log(this);<br>      &#125;<br>      fn();<br><br>      setTimeout(function () &#123;<br>          console.log(this);<br>      &#125;, 200);<br><br></code></pre></td></tr></table></figure><ol start="2"><li>方法调用中谁调用this，this就指向谁</li></ol><p style ="color: red">注意：匿名函数和箭头函数的区别：匿名函数和传统方式一样会创建独有的this对象（即触发事件的元素），而箭头函数是继承绑定它所在函数的this对象</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">let o = &#123;            sayHi: function () &#123;                console.log(this);            &#125;        &#125;;        o.sayHi();<br></code></pre></td></tr></table></figure><ol start="3"><li>构造函数中this指向构造函数的实例</li></ol><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">function Student() &#123;            console.log(this);        &#125;        let st = new Student();<br></code></pre></td></tr></table></figure><h2 id="JS执行机制"><a href="#JS执行机制" class="headerlink" title="JS执行机制"></a>JS执行机制</h2><p>Javascript语言的一个特点是单线程。</p><h3 id="同步和异步"><a href="#同步和异步" class="headerlink" title="同步和异步"></a>同步和异步</h3><p>单线程会导致所有任务都要排队，即假如有计时器，程序会堵住。为了解决这个问题，利用多核CPU的计算能力，HTML5提出Web Worker标准，允许Javascript开启多个线程，于是，JS出现了同步和异步。</p><p>同步：前一个任务结束后再执行下一个任务。</p><p>异步：可以同时执行多个任务。</p><p>JS为防止任务有排队或者等待时间较长的问题，把任务分为<b>同步任务</b>和<b>异步任务</b>两大类。</p><p>同步任务都在主线程上执行，形成一个执行栈。</p><p>异步任务：JS的异步时通过回调函数实现的。一般有三种类型。异步任务的相关回调函数放在<b>任务队列</b>(消息队列)中。</p><ol><li>普通事件，如click,resize等</li><li>资源加载，如load,error等</li><li>定时器，如setTimeout,setInterval等</li></ol><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">console.log(1);    //①        setTimeout(function () &#123;            console.log(3);        &#125;, 0);             //②        console.log(2);     //③<br></code></pre></td></tr></table></figure><p>分析：</p><ol><li>首先，执行主线程执行栈第一个任务，打印出1</li><li>第二个任务有回调函数，通过异步进程处理， 满足条件后（即点击事件点击了，定时器事件时间到了），把异步任务（回调函数）添加到任务队列中，但是不执行</li><li>继续执行第三个任务，打印出2；</li><li>如果执行栈中的同步任务执行完后，系统会按顺序读取任务队列的异步任务，被读取的异步任务进入执行栈，执行。</li><li>执行栈中没有任务后，还会一直监听着任务队列（比如click事件，用户一直有点击的可能），又称为”事件循环”,任务队列中有新任务，则该任务进入执行栈。</li></ol><p><img src="https://pic.imgdb.cn/item/6132123344eaada739c8261a.jpg"></p><p><a href="https://www.bilibili.com/video/BV1Sy4y1C7ha">更详细见P280</a></p><h2 id="location对象"><a href="#location对象" class="headerlink" title="location对象"></a>location对象</h2><h3 id="什么是location对象"><a href="#什么是location对象" class="headerlink" title="什么是location对象"></a>什么是location对象</h3><p>window对象给我们提供了一个location属性用于<b style="color:red">获取或设置窗体的URL</b>,并且可以用于<b style="color:red">解析URL</b>。这个属性返回的是一个对象，所以这个属性也称为location对象。</p><h4 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h4><p>统一资源定位符（Uniform Resource Locator, URL）是互联网上标准资源的地址。互联网上每个文件都有一个唯一的URL。</p><p>URL的一般语法格式:</p><p><code>protocal://host[:port]/path/[?query]#fragment</code></p><p>样例：<a href="http://www.itcast.cn/index.html?name=andy&amp;age=18#link">http://www.itcast.cn/index.html?name=andy&amp;age=18#link</a></p><p><img src="https://pic.imgdb.cn/item/61321aca44eaada739d92d9a.jpg"></p><h3 id="location对象的属性"><a href="#location对象的属性" class="headerlink" title="location对象的属性"></a>location对象的属性</h3><table><thead><tr><th>location对象属性</th><th align="center">返回值</th></tr></thead><tbody><tr><td><b style="color:red">location.href</b></td><td align="center">获取或设置整个URL</td></tr><tr><td>location.host</td><td align="center">返回域名</td></tr><tr><td>location.post</td><td align="center">返回端口号</td></tr><tr><td>location.pathname</td><td align="center">返回路径</td></tr><tr><td>location.search</td><td align="center">返回参数</td></tr><tr><td>location.hash</td><td align="center">返回片段，上图的fragment部分（#后面内容）</td></tr></tbody></table><h3 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h3><p>5秒钟之后跳转页面</p><p>获取URL参数</p><h3 id="location对象的方法"><a href="#location对象的方法" class="headerlink" title="location对象的方法"></a>location对象的方法</h3><table><thead><tr><th>location对象方法</th><th align="center">作用</th></tr></thead><tbody><tr><td>location.assign()</td><td align="center">跳转页面，可回退</td></tr><tr><td>location.replace()</td><td align="center">替换当前页面，不能回退</td></tr><tr><td>location.reload()</td><td align="center">重新加载页面，即刷新页面</td></tr></tbody></table><h2 id="navigator对象"><a href="#navigator对象" class="headerlink" title="navigator对象"></a>navigator对象</h2><p>navigator对象包含有关浏览器的信息，有很多属性，最常用的是userAgent，作用是可以实现通过识别用户使用手机还是电脑打开页面，并跳转到对应的页面。</p><h2 id="history对象"><a href="#history对象" class="headerlink" title="history对象"></a>history对象</h2><p>history对象与浏览器历史记录进行交互。它包含用户在浏览器窗口中访问的URL。</p><table><thead><tr><th>history对象方法</th><th align="center">作用</th></tr></thead><tbody><tr><td>history.back()</td><td align="center">后退功能</td></tr><tr><td>history.forward()</td><td align="center">前进功能</td></tr><tr><td>history.go(参数n)</td><td align="center">n&gt;0,前进n个页面；n&lt;0,后退n个页面</td></tr></tbody></table><p>参考链接：<br><a href="https://www.bilibili.com/video/BV1Sy4y1C7ha">pink老师前端入门</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
            <tag> BOM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack</title>
      <link href="/2021/10/01/webpack/"/>
      <url>/2021/10/01/webpack/</url>
      
        <content type="html"><![CDATA[<h1 id="前端工程化和webpack"><a href="#前端工程化和webpack" class="headerlink" title="前端工程化和webpack"></a>前端工程化和webpack</h1><p>前端开发四大要点：</p><ol><li><strong>模块化</strong>：js、css、资源的模块化</li><li><strong>组件化</strong>：UI结构、样式、行为可复用</li><li><strong>规范化</strong>：目录结构、编码、接口、文档规范化、git分支管理</li><li><strong>自动化</strong>：自动化构建、自动部署、自动化测试</li></ol><h2 id="1-前端工程化"><a href="#1-前端工程化" class="headerlink" title="1. 前端工程化"></a>1. 前端工程化</h2><p><strong>前端工程化</strong>：在企业级的前端项目开发中，把前端开发所需的工具、技术、经验等进行规范化、标准化。</p><p>早期的前端工程化解决方案：</p><ul><li>grunt</li><li>gulp</li></ul><p>目前主流的前端工程化解决方案：[webpack](<a href="https://www.webpackjs.com/">webpack 中文文档 | webpack 中文网 (webpackjs.com)</a>)</p><h2 id="2-webpack的基本使用"><a href="#2-webpack的基本使用" class="headerlink" title="2. webpack的基本使用"></a>2. webpack的基本使用</h2><p><strong>webpack</strong>是前端项目工程化的具体解决方案。</p><p>主要功能：提供友好的<strong>前端模块化开发</strong>支持，以及<strong>代码压缩混淆</strong>，<strong>处理浏览器端Javascript的兼容性</strong>，<strong>性能优化</strong>等功能。</p><p>优点：<strong>提高了前端开发效率和项目的可维护性</strong></p><p>例子：</p><p>创建列表隔行换色项目</p><p>步骤：</p><ol><li><p>新建项目空白目录（路径英文），运行<code> npm init -y</code>命令，初始化包管理配置文件package.json</p><p><img src="https://pic.imgdb.cn/item/61473bdd2ab3f51d9129e6f5.jpg"></p></li><li><p>新建src源代码目录</p></li><li><p>新建src/index.html首页和src/index.js文件</p></li><li><p>初始化首页基本的结构</p><p><img src="https://pic.imgdb.cn/item/61473e572ab3f51d912eb768.jpg"></p></li><li><p>运行<code> npm install jquery -S</code>命令，安装jQuery,其中-S是–save的缩写</p><p><img src="https://pic.imgdb.cn/item/61473f4c2ab3f51d91307175.jpg"></p></li><li><p>编写index.js，实现隔行换色效果</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> $ <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;jquery&#x27;</span> <span class="hljs-comment">/*导入jquery，用$符号接*/</span><br><br>$(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    $(<span class="hljs-string">&quot;ul li:odd&quot;</span>).css(<span class="hljs-string">&quot;background&quot;</span>, <span class="hljs-string">&quot;pink&quot;</span>);<br>    $(<span class="hljs-string">&quot;ul li:even&quot;</span>).css(<span class="hljs-string">&quot;background&quot;</span>, <span class="hljs-string">&quot;purple&quot;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure><p>报错：</p><p><img src="https://pic.imgdb.cn/item/614741a22ab3f51d9134bfed.jpg"></p><p>原因：import方法较高级，浏览器执行会出错,可使用webpack解决问题</p></li><li><p>在项目中安装webpack</p><p>安装webpack相关的两个包<code> npm install webpack webpack-cli -D</code>（-D是–save-dev的缩写）</p><p><img src="https://pic.imgdb.cn/item/6147436b2ab3f51d91383879.jpg"></p></li><li><p>配置webpack</p><ol><li><p>在项目根目录下，创建名为webpack.config.js的webpack配置文件，并初始化配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">module</span>.exports = &#123;<br><span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span> <span class="hljs-comment">//mode用来指定模式，可以是development(开发模式)或production(生产模式)</span><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/614745542ab3f51d913c1e41.jpg"></p></li><li><p>在package.json的scripts节点下，新增dev脚本</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;dev&quot;</span>: <span class="hljs-string">&quot;webpack&quot;</span>  <br> &#125;<br><span class="hljs-comment">//dev脚本名字可变，后面的webpack是命令名，不可变，script节点下的脚本可以通过npm run执行，如npm run dev</span><br></code></pre></td></tr></table></figure></li></ol></li><li><p>执行<code> npm run dev</code>命令，启动webpack进行项目的打包构建</p><p><img src="https://pic.imgdb.cn/item/614747862ab3f51d91408073.jpg"></p></li><li><p>更换使用的js文件为新生成的js文件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../dist/main.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/01/23/SJUBCnszLdmr1ZQ.png" alt="image-20210919222517017"></p></li></ol><p>配置webpack时mode节点的可选值有两个：</p><ol><li><p>development</p><ul><li><strong>开发环境</strong></li><li><strong>不会</strong>对打包生成的文件进行<strong>代码压缩</strong>和<strong>性能优化</strong></li><li>打包<strong>速度快</strong>， 适合在开发阶段使用</li></ul></li><li><p>production</p><ul><li><strong>生产环境</strong></li><li>会<strong>对打包生成的文件进行</strong>代码压缩<strong>和</strong>性能优化**</li><li>打包<strong>速度很慢</strong>， 适合在项目发布阶段使用</li></ul><p><img src="https://pic.imgdb.cn/item/6147fdf62ab3f51d917ac9e7.jpg"></p><p>webpack.config.js是webpack的配置文件。webpack在真正开始打包构建之前，会<strong>先读取这个配置文件</strong>，然后根据给定的配置，对项目进行打包。</p><p>webpack4.x和5.x的版本中：</p><ol><li>默认的打包入口文件为src/index.js</li><li>默认的输出文件路径为dist/main.js</li></ol><p>找不到入口文件会报错，如更改src文件夹和更改index.js文件名</p><p><img src="https://pic.imgdb.cn/item/6147ffc82ab3f51d917d6373.jpg"></p><p>可以更改通过webpack的配置文件来自定义打包的入口和出口。通过<strong>entry节点</strong>指定<strong>打包的入口</strong>，通过<strong>output节点</strong>指定<strong>打包的出口</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;path&quot;</span>) <span class="hljs-comment">//导入node.js中专门操作路径的模块</span><br><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>, <span class="hljs-comment">//mode用来指定模式，可以是development(开发模式)或production(生产模式)</span><br><br>    <span class="hljs-attr">entry</span>: path.join(__dirname, <span class="hljs-string">&quot;./src/myindex.js&quot;</span>), <span class="hljs-comment">//打包入口文件路径</span><br>    <span class="hljs-attr">output</span>: &#123;<br>        <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&quot;./dist/mymain.js&quot;</span>), <span class="hljs-comment">//打包的出口路径</span><br>        <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;mymain.js&quot;</span> <span class="hljs-comment">//输出文件名称</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/614802ab2ab3f51d918171aa.jpg"></p><p><b style="color: red">问题：更改myindex.js，页面用的还是打包的版本，需要再次执行<code>npm run dev</code>命令</b></p></li></ol><h2 id="3-webpack插件"><a href="#3-webpack插件" class="headerlink" title="3. webpack插件"></a>3. webpack插件</h2><h3 id="3-1-webpack-dev-server"><a href="#3-1-webpack-dev-server" class="headerlink" title="3.1 webpack-dev-server"></a>3.1 webpack-dev-server</h3><p>每当修改了源代码，webpack会自动进行项目的打包和构建</p><ul><li><p>安装webpack-dev-server，<code>npm install webpack-dev-server@3.11.2 -D</code>，-D表示只在开发阶段会用到，这里练习时，不加版本号报错</p></li><li><p>配置webpack-dev-server：修改package.json中的script节点的dev命令为”webpack serve”</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;dev&quot;</span>: <span class="hljs-string">&quot;webpack serve&quot;</span><br>  &#125;<br></code></pre></td></tr></table></figure></li><li><p>再次执行<code> npm run dev</code>命令，重新进行项目的打包<img src="https://pic.imgdb.cn/item/614806e12ab3f51d91870a28.jpg"></p><p>命令没有结束，会一直监听源代码有没有变化，每当保存源代码，都会自动打包</p><p><img src="https://pic.imgdb.cn/item/614808012ab3f51d91889be0.jpg"></p><p><b style="color: red">注意：这里又会出现问题，自动打包后，vscode，右键打开index.html文件会发现，没有变化</b>。因为webpack-dev-server会启动一个<strong>实时打包的http服务器</strong>，即无法通过file协议查看打包效果，需要通过http协议查看效果</p></li><li><p>在浏览器中访问 <a href="http://localhost:8080/">http://localhost:8080</a> 地址，查看自动打包效果</p><p>问题还是没有解决：样式还是没有实时变化。</p><p><img src="https://pic.imgdb.cn/item/614816732ab3f51d919d71ee.jpg"></p><p>原因：</p><p>配置了webpack-dev-server后，打包生成的文件并没有放在物理磁盘上，而是放到了<strong>内存</strong>中，可以在<a href="http://localhost:8080/mymain.js%EF%BC%88%E5%90%8E%E9%9D%A2%E6%98%AF%E7%94%9F%E6%88%90%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8D%EF%BC%89%E4%B8%AD%E6%9F%A5%E7%9C%8B%E7%9C%9F%E6%AD%A3%E7%94%9F%E6%88%90%E7%9A%84js%E6%96%87%E4%BB%B6%E3%80%82">http://localhost:8080/mymain.js（后面是生成的文件名）中查看真正生成的js文件。</a></p><p>为什么要放在内存中呢？</p><p>因为可能会需要频繁保存源代码，需要频繁读写文件，放在内存中，可以提高实时打包输出的性能，因内存比物理磁盘快很多。</p></li><li><p>这样子的话，引入js文件的路径就得变成内存中的位置才对了</p><script src="/mymain.js"></script></li><li><p>之后，每次更改源代码，会实时刷新，可以实时查看效果</p></li></ul><h3 id="3-2-html-webpack-plugin"><a href="#3-2-html-webpack-plugin" class="headerlink" title="3.2 html-webpack-plugin"></a>3.2 html-webpack-plugin</h3><p>html-webpack-plugin是**webpack中的HTML插件，通过此插件可以复制html文件放到其他位置（内存中）</p><ul><li><p>安装html-webpack-plugin插件，<code> npm install html-webpack-plugin@5.3.2 -D</code></p></li><li><p>配置html-webpack-plugin，(在webpack.config.js中)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//1. 导入HTML插件，得到一个构造函数</span><br><span class="hljs-keyword">const</span> HtmlPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;html-webpack-plugin&quot;</span>)<br><br><span class="hljs-comment">//2. 创建HTML插件的实例对象</span><br><span class="hljs-keyword">const</span> htmlPlugin = <span class="hljs-keyword">new</span> HtmlPlugin(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">&quot;./src/index.html&quot;</span>, <span class="hljs-comment">//指定要复制的文件路径</span><br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;./index.html&quot;</span> <span class="hljs-comment">//指定生成的文件的路径</span><br>&#125;)<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>, <br>    <br>    <span class="hljs-comment">//3. 通过plugins节点，使htmlPlugin插件生效</span><br>    <span class="hljs-attr">plugins</span>: [htmlPlugin],<br>    <span class="hljs-comment">//plugins：插件的数组，webpack运行时会加载并调用这些插件</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>这里只有配置html-webpack-plugin的内容，为了看起来更清晰</strong></p></li><li><p>重新执行<code> npm run dev</code>命令，打开<a href="http://localhost:8080/%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E6%9F%A5%E7%9C%8B%E6%95%88%E6%9E%9C%EF%BC%8C%E4%B9%9F%E6%98%AF%E4%BC%9A%E5%AE%9E%E6%97%B6%E6%9B%B4%E6%96%B0">http://localhost:8080/，可以直接查看效果，也是会实时更新</a></p><p>通过插件复制的index.html页面，<strong>被放到了内存中</strong></p><p>HTML插件在生成复制的index.html页面时，会自动引入打包的js文件（即不需要自己引入js文件）</p><p><img src="https://pic.imgdb.cn/item/61483d642ab3f51d91e05328.jpg"></p></li></ul><h3 id="3-3-devServer节点"><a href="#3-3-devServer节点" class="headerlink" title="3.3 devServer节点"></a>3.3 devServer节点</h3><p>在webpack.config.js配置文件中，可以通过devServer节点进行其他配置，如实现初次打包时，自动打开浏览器等</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">devServer: &#123;<br>        <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">host</span>: <span class="hljs-string">&quot;127.0.0.1&quot;</span>, <span class="hljs-comment">//使用的主机地址</span><br>        <span class="hljs-attr">port</span>: <span class="hljs-number">80</span>, <span class="hljs-comment">//实时打包使用的端口号</span><br>    &#125;<br></code></pre></td></tr></table></figure><h2 id="4-loader"><a href="#4-loader" class="headerlink" title="4. loader"></a>4. loader</h2><p>webpack默认只能打包处理以.js后缀为结尾的模块。其他不是以.js后缀为结尾的模块webpack默认处理不了，<strong>需要调用loader加载器才可以正常打包</strong>。</p><p>loader加载器的作用：协助webpack打包处理特定的文件模块</p><ul><li>css-loader：可以打包处理.css相关文件</li><li>less-loader：可以打包处理.less相关的文件</li><li>babel-loader：可以打包处理webpack无法处理的高级JS语法</li></ul><p>例子：</p><h3 id="4-1-打包处理css文件"><a href="#4-1-打包处理css文件" class="headerlink" title="4.1 打包处理css文件"></a>4.1 打包处理css文件</h3><ol><li><p>编写CSS文件</p></li><li><p>myindex.js文件导入css</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> $ <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;jquery&#x27;</span> <span class="hljs-comment">/*导入jquery，用$符号接*/</span><br><br><span class="hljs-comment">//导入样式，在webpack中，一切都是模块</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./css/index.css&#x27;</span><br><br>$(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    $(<span class="hljs-string">&quot;ul li:odd&quot;</span>).css(<span class="hljs-string">&quot;background&quot;</span>, <span class="hljs-string">&quot;red&quot;</span>);<br>    $(<span class="hljs-string">&quot;ul li:even&quot;</span>).css(<span class="hljs-string">&quot;background&quot;</span>, <span class="hljs-string">&quot;pink&quot;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>安装处理css文件的loader，<code> npm i style-loader@3.0.0 css-loader@5.2.6 -D</code></p></li><li><p>在webpack的配置文件中的module-&gt;rules数组中，添加loader规则</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>: &#123; <span class="hljs-comment">//所有第三方文件模板的匹配规则</span><br>        <span class="hljs-attr">rules</span>: [ <span class="hljs-comment">//对应文件的匹配规则</span><br>            &#123;<br>                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,<br>                <span class="hljs-comment">//test表示匹配的文件类型（后缀名）</span><br><br>                use: [<span class="hljs-string">&quot;style-loader&quot;</span>, <span class="hljs-string">&quot;css-loader&quot;</span>]<br>                <span class="hljs-comment">//use表示对应要调用的loader,多个loader的调用顺序是从后往前调用，</span><br>                <span class="hljs-comment">//即先调用css-loader，再调用style-loader，前面没有loader后给会webpack，webpack把style-loader处理的结果，合并到/dist/mymain.js中，生成最终打包好的文件</span><br>            &#125;<br>        ]<br>    &#125;<br></code></pre></td></tr></table></figure></li><li><p>npm run dev，<b style="color: red">注意，这里如果index.html导入了css文件，myindex.js文件也导入css文件，会报错</b></p></li></ol><h3 id="4-2-打包处理less文件"><a href="#4-2-打包处理less文件" class="headerlink" title="4.2 打包处理less文件"></a>4.2 打包处理less文件</h3><ol><li><p>编写less文件</p></li><li><p>myindex.js文件导入less</p></li><li><p>安装处理less文件的loader，<code> npm i less-loader@10.0.1 -D</code></p></li><li><p>添加loader规则</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>: &#123; <span class="hljs-comment">//所有第三方文件模板的匹配规则</span><br>        <span class="hljs-attr">rules</span>: [ <span class="hljs-comment">//对应文件的匹配规则</span><br>            &#123;<br>                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,<br>                use: [<span class="hljs-string">&quot;style-loader&quot;</span>, <span class="hljs-string">&quot;css-loader&quot;</span>]<br>            &#125;,<br>            &#123;<br>                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.less$/</span>,<br>                use: [<span class="hljs-string">&quot;style-loader&quot;</span>, <span class="hljs-string">&quot;css-loader&quot;</span>, <span class="hljs-string">&quot;less-loader&quot;</span>]<br>            &#125;<br>        ]<br>    &#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="4-3-打包处理与url路径相关的文件"><a href="#4-3-打包处理与url路径相关的文件" class="headerlink" title="4.3 打包处理与url路径相关的文件"></a>4.3 打包处理与url路径相关的文件</h3><ol><li><p>通过myindex.js导入图片</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> $ <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;jquery&#x27;</span> <span class="hljs-comment">/*导入jquery，用$符号接*/</span><br><br><span class="hljs-comment">//导入样式，在webpack中，一切都是模块</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./css/index.css&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./css/myindex.less&#x27;</span><br><br><span class="hljs-keyword">import</span> logo <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./images/logo.png&#x27;</span><br><br>$(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    $(<span class="hljs-string">&quot;img&quot;</span>).attr(<span class="hljs-string">&quot;src&quot;</span>, logo);<br><br>    $(<span class="hljs-string">&quot;ul li:odd&quot;</span>).css(<span class="hljs-string">&quot;background&quot;</span>, <span class="hljs-string">&quot;red&quot;</span>);<br>    $(<span class="hljs-string">&quot;ul li:even&quot;</span>).css(<span class="hljs-string">&quot;background&quot;</span>, <span class="hljs-string">&quot;pink&quot;</span>);<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>运行命令，<code> npm i url-loader@4.1.1 file-loader@6.2.0 -D</code></p></li><li><p>添加loader规则</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>: &#123; <span class="hljs-comment">//所有第三方文件模板的匹配规则</span><br>        <span class="hljs-attr">rules</span>: [ <span class="hljs-comment">//对应文件的匹配规则</span><br>            &#123;<br>                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.jpg|png|gif$/</span>,<br>                use: <span class="hljs-string">&quot;url-loader&quot;</span><br>            &#125;<br>        ]<br>    &#125;<br></code></pre></td></tr></table></figure><p>上面的use中，后面可以增加参数</p><p>如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>: &#123; <span class="hljs-comment">//所有第三方文件模板的匹配规则</span><br>        <span class="hljs-attr">rules</span>: [ <span class="hljs-comment">//对应文件的匹配规则</span><br>            &#123;<br>                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.jpg|png|gif$/</span>,<br>                use: <span class="hljs-string">&quot;url-loader?limit=300&quot;</span><br>            &#125;<br>        ]<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>limie用来指定图片格式的大小，单位是字节</li><li>只有&lt;=limit大小的图片，才会被转成base64格式的图片</li></ul><p>练习用图片大小：337字节</p><p>limit=300时，输出logo</p><p><img src="https://pic.imgdb.cn/item/61485acb2ab3f51d91108a8f.jpg"></p><p>limit=400时，输出logo</p><p><img src="https://pic.imgdb.cn/item/61485b5d2ab3f51d911146e2.jpg"></p></li></ol><h2 id="5-打包发布"><a href="#5-打包发布" class="headerlink" title="5. 打包发布"></a>5. 打包发布</h2><p>项目开发完成之后，需要使用webpack对项目进行打包发布。原因：</p><ol><li>开发环境下，打包生成的文件<strong>存在于内存中</strong>，无法获取到最终生成的文件</li><li>开发环境下，打包生成的文件<strong>不会出现代码压缩和性能优化</strong></li></ol><p>配置webpack的打包发布</p><p>在package.json文件的script节点下，增加新的命令：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>  <span class="hljs-attr">&quot;dev&quot;</span>: <span class="hljs-string">&quot;webpack serve&quot;</span>,  <br>   <span class="hljs-comment">//开发环境中，运行dev命令(npm run dev)</span><br>  <span class="hljs-attr">&quot;build&quot;</span>: <span class="hljs-string">&quot;webpack --mode production&quot;</span><br>    <span class="hljs-comment">//项目发布时，运行build命令(npm run build)，--mode用来指定webpack的运行模式。会覆盖webpack.config.js中的model选项</span><br>&#125;<br></code></pre></td></tr></table></figure><p>执行npm run dev命令后，会发现生成的js文件、图片文件（只有base64格式的图片会生成）和index.html文件都直接放在dist文件夹下。</p><h3 id="5-1-把js文件统一放到生成的js目录中"><a href="#5-1-把js文件统一放到生成的js目录中" class="headerlink" title="5.1 把js文件统一放到生成的js目录中"></a>5.1 把js文件统一放到生成的js目录中</h3><p>在webpack.config.js的output节点中，进行配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">output: &#123;<br>        <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&quot;./dist&quot;</span>), <span class="hljs-comment">//打包的出口路径</span><br>        <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;js/mymain.js&quot;</span> <span class="hljs-comment">//输出文件名称</span><br>    &#125;<br></code></pre></td></tr></table></figure><h3 id="5-2-把图片文件统一放到生成的images目录下"><a href="#5-2-把图片文件统一放到生成的images目录下" class="headerlink" title="5.2 把图片文件统一放到生成的images目录下"></a>5.2 把图片文件统一放到生成的images目录下</h3><p>在webpack.config.js配置文件中的module下的rules，对应的url路径相关的文件下的use后增加参数，位置具体参考4.3</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.jpg|png|gif$/</span>,<br>    use: <span class="hljs-string">&quot;url-loader?limit=300&amp;outputPath=images&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>outputPath选项可以指定图片文件的输出路径</p><p>没有及时删除dist再重新npm run build会出现以下下问题</p><p><img src="https://pic.imgdb.cn/item/6148907c2ab3f51d91660de2.jpg"></p><h3 id="5-3-自动清理dist目录下的旧文件"><a href="#5-3-自动清理dist目录下的旧文件" class="headerlink" title="5.3 自动清理dist目录下的旧文件"></a>5.3 自动清理dist目录下的旧文件</h3><p>为了在每次打包发布时<strong>自动清理dist目录下的旧文件</strong>，可以安装clean-webpack-plugin插件</p><ol><li>安装</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">npm install --save-dev clean-webpack-plugin<br></code></pre></td></tr></table></figure><ol start="2"><li><p>配置（在webpack.config.js中）</p><p><img src="https://pic.imgdb.cn/item/614892a72ab3f51d916a3df4.jpg"></p></li></ol><h2 id="6-Souce-Map"><a href="#6-Souce-Map" class="headerlink" title="6. Souce Map"></a>6. Souce Map</h2><p>前端项目在投入生产环境之前，都要对Javascript源代码进行压缩混淆，减小文件体积，提高文件加载效率。</p><p>对压缩混淆之后的代码除错很困难：</p><ul><li>变量会被替换成没有任何语义的名称，如a, b, c等</li><li>空行和注释被剔除</li></ul><p>Source Map时一个信息文件，里面存着位置信息。Source Map文件中存着压缩混淆后的代码对应变化前的位置。</p><p>有了它，出错时会直接显示原始代码，而不是转换后的代码，方便了程序员的调试。</p><h3 id="6-1-默认Source-Map的问题"><a href="#6-1-默认Source-Map的问题" class="headerlink" title="6.1 默认Source Map的问题"></a>6.1 默认Source Map的问题</h3><p>在开发环境下，webpack默认启用了Source Map功能。当程序出错时，可以直接在控制台显示错误行的位置，并定位到具体的源代码。</p><p>默认生成的Source Map记录的是生成后的代码的位置，会导致报错时的行数与源代码的行数不一致。</p><p><img src="https://pic.imgdb.cn/item/6148966b2ab3f51d91711419.jpg"></p><h3 id="6-2-解决默认Source-Map的问题"><a href="#6-2-解决默认Source-Map的问题" class="headerlink" title="6.2 解决默认Source Map的问题"></a>6.2 解决默认Source Map的问题</h3><p>开发环境下，在webpack.config.js中添加以下配置，就可以实现运行时报错的行数和源代码的行数保持一致</p><p><img src="https://pic.imgdb.cn/item/614897432ab3f51d9172ab98.jpg"></p><p>生产环境中，如果省略devtool选项，那么生成的文件中不包含Source Map。这样可以防止源代码通过Source Map的形式暴露出去。</p><p><img src="https://pic.imgdb.cn/item/614898c42ab3f51d9175a293.jpg"></p><p><strong>只定位行数，不暴露源码</strong>：在生产环境下，只想知道报错的地方在源码的具体行数，而且不想暴露源码，将devtool的值设置为<strong>nosources-source-map</strong>。</p><p><img src="https://pic.imgdb.cn/item/614899f92ab3f51d917801c4.jpg"></p><p><strong>定位行数，暴露源码</strong>：将devtool的值设置为<strong>source-map</strong>。了解即可，<b style="color:red">极其不安全</b></p><p>总结：</p><p><img src="https://pic.imgdb.cn/item/61489a962ab3f51d91792fbc.jpg"></p><p>学习链接：</p><p><a href="https://www.bilibili.com/video/BV1zq4y1p7ga">黑马程序员Vue全套视频教程</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue学习笔记(一)</title>
      <link href="/2021/10/01/vue-1/"/>
      <url>/2021/10/01/vue-1/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue学习笔记-一"><a href="#Vue学习笔记-一" class="headerlink" title="Vue学习笔记(一)"></a>Vue学习笔记(一)</h1><h2 id="1-vue简介"><a href="#1-vue简介" class="headerlink" title="1. vue简介"></a>1. vue简介</h2><p>Vue是一套<strong>用于构建用户界面</strong>的前端<strong>框架</strong></p><h3 id="1-1-vue的两个特性"><a href="#1-1-vue的两个特性" class="headerlink" title="1.1 vue的两个特性"></a>1.1 vue的两个特性</h3><ol><li><p><strong>数据驱动视图</strong></p><ul><li>使用了vue的页面，vue会监听数据的变化，<strong>自动</strong>重新渲染页面的结构</li><li><img src="https://pic.imgdb.cn/item/614957ae2ab3f51d917d98ae.jpg"></li><li>数据驱动视图是<strong>单向的数据绑定</strong>，即只能由数据来影响页面结构</li></ul></li><li><p><strong>双向数据绑定</strong></p><ul><li><p><b style="color: red">填写表单</b>时，双向数据绑定可以让开发者在<strong>不操作DOM的前提下</strong>，自动把用户填写的内容同步到数据源中</p><p><img src="https://pic.imgdb.cn/item/614958cb2ab3f51d917f049a.jpg"></p></li></ul></li></ol><h3 id="1-2-MVVM"><a href="#1-2-MVVM" class="headerlink" title="1.2  MVVM"></a>1.2  MVVM</h3><p>vue实现<strong>数据驱动视图</strong>和<strong>双向数据绑定</strong>的核心原理。</p><p>M指的是Model，V指的是View，VM指的是ViewModel</p><p>​    <strong>Model</strong>：表示当前页面渲染时依赖的数据源</p><p>​    <strong>View</strong>：表示当前页面所渲染DOM结构</p><p>​    <strong>ViewModel</strong>：表示vue的实例，是MVVM的核心</p><p><strong>MVVM的工作原理</strong>：ViewModel作为MVVM的核心，它把当前页面的<strong>数据源</strong>(Model)和<strong>页面的结构</strong>(View)连在一起。</p><ul><li>当数据源发生变化时，会被ViewModel监听到，VM会自动更新页面的结构</li><li>当表单元素的值发生变化时，也会被VM监听到，VM会把更新的值自动同步到数据源(Model)中</li></ul><p><img src="https://pic.imgdb.cn/item/61495b702ab3f51d9182657f.jpg"></p><h2 id="2-vue的基本使用"><a href="#2-vue的基本使用" class="headerlink" title="2. vue的基本使用"></a>2. vue的基本使用</h2><p><strong>步骤</strong></p><ol><li>导入vue.js文件</li><li>在页面中声明要被vue操作的DOM区域</li><li>创建vue实例对象</li></ol><p><img src="https://pic.imgdb.cn/item/61873bf12ab3f51d9112f478.jpg"></p><h2 id="3-vue的指令"><a href="#3-vue的指令" class="headerlink" title="3. vue的指令"></a>3. vue的指令</h2><p><strong>指令</strong>是vue为开发者提供的<strong>模板语法</strong>，用于<strong>辅助开发者渲染页面的基本结构</strong></p><p>按照用途可分为6大类：</p><ol><li>内容渲染指令</li><li>属性绑定指令</li><li>事件绑定指令</li><li>双向绑定指令</li><li>条件绑定指令</li><li>列表渲染指令</li></ol><h3 id="3-1-内容渲染指令"><a href="#3-1-内容渲染指令" class="headerlink" title="3.1 内容渲染指令"></a>3.1 内容渲染指令</h3><ol><li><p><strong>v-text</strong></p><p>会覆盖元素内默认内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"> <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span>姓名：<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>   <br>     <span class="hljs-comment">&lt;!-- 这里的姓名会被直接覆盖成下面数据源中的username --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;clz&#x27;</span></span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>插值表达式<code>&#123;&#123;&#125;&#125;</code></strong></p><p>不会覆盖元素内默认内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>姓名：&#123;&#123; username &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>     <span class="hljs-comment">&lt;!-- 下面数据源中的username会被渲染到姓名后面 --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;clz&#x27;</span></span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>v-html</strong></p><p>可以把包含html标签的字符串渲染成页面的HTML元素</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; test_v_html &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;test_v_html&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;test_v_html&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">test_v_html</span>: <span class="hljs-string">&#x27;&lt;b style=&quot;color: red&quot;&gt;Hello!&lt;/b&gt;&#x27;</span></span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://pic.imgdb.cn/item/614962692ab3f51d918b4755.jpg"></p></li></ol><h3 id="3-2-属性绑定指令"><a href="#3-2-属性绑定指令" class="headerlink" title="3.2 属性绑定指令"></a>3.2 属性绑定指令</h3><p>为<strong>元素的属性</strong>动态绑定属性值时，需要用到<strong>v-bind</strong>属性绑定指令</p><p><b style="color: red">简写形式”:”</b></p><p><img src="https://pic.imgdb.cn/item/614966832ab3f51d919111c5.jpg"></p><p>vue提供的模板渲染语法，除了支持<strong>绑定简单的数据</strong>之外，还<strong>支持Javascript表达式的运算</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>         1 + 1 = &#123;&#123; 1 + 1  &#125;&#125;<br>     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>     <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>         &#123;&#123; hello &#125;&#125; 反转后: &#123;&#123; hello.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;<br>     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;&#x27;box&#x27; + index&quot;</span>&gt;</span>鼠标悬浮一下<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>     <span class="hljs-comment">&lt;!-- 使用属性绑定指令时，进行字符串拼接的字符串需要使用嵌套引号 --&gt;</span><br>     <span class="hljs-comment">&lt;!-- 否则，会到data中找要渲染的数据，找不到会报错 --&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br> <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">     <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">         <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">         <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">             <span class="hljs-attr">hello</span>: <span class="hljs-string">&quot;Hello World!&quot;</span>,</span><br><span class="javascript">             <span class="hljs-attr">index</span>: <span class="hljs-number">3</span></span><br><span class="javascript">         &#125;</span><br><span class="javascript">     &#125;)</span><br><span class="javascript"> </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-3-事件绑定指令"><a href="#3-3-事件绑定指令" class="headerlink" title="3.3 事件绑定指令"></a>3.3 事件绑定指令</h3><p>vue提供<strong>v-on事件绑定指令</strong>，用来辅助程序员为DOM元素绑定事件监听。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>count的值是: &#123;&#123; count &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;addCount&quot;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">count</span>: <span class="hljs-number">0</span></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-attr">methods</span>: &#123;<span class="hljs-comment">//事件处理函数放在methods节点里</span></span><br><span class="javascript">            <span class="hljs-comment">// addCount: function () &#123;</span></span><br><span class="javascript">            <span class="hljs-comment">//     this.count++;</span></span><br><span class="javascript">            <span class="hljs-comment">// &#125;</span></span><br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">addCount</span>(<span class="hljs-params"></span>)</span> &#123; <span class="hljs-comment">//简便方式</span></span><br><span class="javascript">                <span class="hljs-built_in">this</span>.count++;</span><br><span class="javascript">            &#125;</span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><b style="color: red">v-on事件绑定指令简写形式”@”</b>，而且如果事件处理函数的代码只有一行，可以直接写在行内</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>count的值是: &#123;&#123; count &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;count += 1&quot;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">count</span>: <span class="hljs-number">0</span></span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>事件参数对象</strong>：通过e.target使被点击的按钮变色</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>count的值是: &#123;&#123; count &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addCount&quot;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">count</span>: <span class="hljs-number">0</span></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">addCount</span>(<span class="hljs-params">e</span>)</span> &#123;</span><br><span class="javascript">                <span class="hljs-built_in">this</span>.count++;</span><br><span class="javascript">                e.target.style.backgroundColor = <span class="hljs-string">&#x27;red&#x27;</span>;</span><br><span class="javascript">            &#125;</span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>传参</strong>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>count的值是: &#123;&#123; count &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addCount(3)&quot;</span>&gt;</span>+3<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">count</span>: <span class="hljs-number">0</span></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">addCount</span>(<span class="hljs-params">step</span>)</span> &#123;</span><br><span class="javascript">                <span class="hljs-built_in">this</span>.count += step;</span><br><span class="javascript">            &#125;</span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>可实现传参后，可以发现事件参数对象被参数覆盖了，而vue提供一个特殊变量**$event<strong>，用来表示</strong>原生的事件参数对象event<strong>，然后手动把</strong>$event**当成参数传进去用。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>count的值是: &#123;&#123; count &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addCount($event, 3)&quot;</span>&gt;</span>+3<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">count</span>: <span class="hljs-number">0</span></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">addCount</span>(<span class="hljs-params">e, step</span>)</span> &#123;</span><br><span class="javascript">                e.target.style.backgroundColor = <span class="hljs-string">&#x27;red&#x27;</span>;</span><br><span class="javascript">                <span class="hljs-built_in">this</span>.count += step;</span><br><span class="javascript">            &#125;</span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>事件修饰符</strong>：vue提供了事件修饰符的概念，辅组程序员更方便地<strong>对事件的触发进行控制</strong></p><p><img src="https://pic.imgdb.cn/item/614982882ab3f51d91bd5be9.jpg"></p><p><img src="https://pic.imgdb.cn/item/614982232ab3f51d91bcb021.jpg"></p><p><strong>按键修饰符</strong>：在监听<strong>键盘事件</strong>时，如果需要<strong>判断详细的按键</strong>，可以为键盘相关事件添加<strong>按键修饰符</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> @<span class="hljs-attr">keyup.esc</span>=<span class="hljs-string">&quot;clearIpt&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 通过按键修饰符可以判断详细的按键 --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">clearIpt</span>(<span class="hljs-params">e</span>)</span> &#123;</span><br><span class="javascript">                e.target.value = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="javascript">            &#125;</span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-4-双向绑定指令"><a href="#3-4-双向绑定指令" class="headerlink" title="3.4 双向绑定指令"></a>3.4 双向绑定指令</h3><p>用来辅助开发者在<strong>不操作DOM</strong>的前提下，<strong>快速获取表单的数据</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>用户名是: &#123;&#123; username &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 在input中填入的数据会让h2中的数据实时变化 --&gt;</span><br>    <span class="hljs-comment">&lt;!-- 可以添加修饰符.lazy,实现在&quot;change&quot;时才更新，比如，用户把焦点移出input了 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model.lazy</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;clz&#x27;</span></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>v-model指令的修饰符</strong></p><p><img src="https://pic.imgdb.cn/item/6149894c2ab3f51d91c870ec.jpg"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">&quot;n1&quot;</span>&gt;</span> +<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">&quot;n2&quot;</span>&gt;</span> =<br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123; n1 + n2 &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">n1</span>: <span class="hljs-number">1</span>,</span><br><span class="javascript">            <span class="hljs-attr">n2</span>: <span class="hljs-number">2</span></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-5-条件渲染指令"><a href="#3-5-条件渲染指令" class="headerlink" title="3.5 条件渲染指令"></a>3.5 条件渲染指令</h3><p>条件渲染指令用来辅助开发者<strong>按需来控制DOM的显示与隐藏</strong>。</p><p>有两个条件渲染指令</p><ul><li>v-if</li><li>v-show</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- v-if和v-show都是根据&quot;=&quot;后的部分为true或false来决定是显示还是隐藏--&gt;</span><br>    <span class="hljs-comment">&lt;!-- 为true时显示，为false时隐藏 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span>v-if<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span>v-if<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span>v-show<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">flag</span>: <span class="hljs-literal">false</span></span><br><span class="javascript"></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="javascript"></span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>区别：</p><p>实现原理不同：</p><ul><li>v-if是通过<strong>动态创建或移除DOM元素</strong>来控制元素在页面上的显示与隐藏，隐藏后，还贴心的把隐藏的节点所在的位置变为空注释，暗示有东西藏着</li><li>v-show指令会动态为元素<strong>添加或移除style=”display: none;”样式</strong>，来控制元素的显示与隐藏</li></ul><p>性能消耗不同：</p><ul><li>v-if的切换开销更高，而v-show的初始渲染开销更高</li><li><strong>需要频繁切换</strong>，使用v-show</li><li><strong>运行时条件很少变化</strong>，用v-if</li></ul><p><img src="https://pic.imgdb.cn/item/61498d7d2ab3f51d91cf68e5.jpg"></p><p>v-if 可以单独使用，也可以搭配v-else、v-else-if使用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;type&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;A&quot;</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;B&quot;</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;C&quot;</span>&gt;</span>C<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;D&quot;</span>&gt;</span>D<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;E&quot;</span>&gt;</span>E<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;type === &#x27;A&#x27;&quot;</span>&gt;</span>优秀<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;type === &#x27;B&#x27;&quot;</span>&gt;</span>良好<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;type === &#x27;C&#x27;&quot;</span>&gt;</span>及格<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-else</span>&gt;</span>差<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;A&#x27;</span></span><br><span class="javascript"></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="javascript"></span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-6-列表渲染指令"><a href="#3-6-列表渲染指令" class="headerlink" title="3.6 列表渲染指令"></a>3.6 列表渲染指令</h3><p>v-for列表渲染指令，用于实现<strong>基于一个数组来渲染一个列表结构</strong>。v-for指令需要使用<strong>item in items</strong>形式的特殊语法，items是要循环的数组，item是循环的每一项</p><p>v-for指令支持一个可选的第二个参数，即当前项的索引。语法为<code> (item, index) in items</code></p><p><b style="color: red">需要为每一项提供唯一的key属性，用于维护列表的状态</b></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;table table-bordered table-hover table-striped&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>索引<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Id<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>姓名<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(user, index) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;user.id&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; index &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; user.id &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; user.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, <span class="hljs-comment">//表示操作的区域，值是选择器</span></span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123; <span class="hljs-comment">//Model数据源</span></span><br><span class="javascript">            <span class="hljs-attr">list</span>: [&#123;</span><br><span class="javascript">                    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,</span><br><span class="javascript">                    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;张三&quot;</span></span><br><span class="javascript">                &#125;,</span><br><span class="javascript">                &#123;</span><br><span class="javascript">                    <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,</span><br><span class="javascript">                    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;李四&quot;</span></span><br><span class="javascript">                &#125;,</span><br><span class="javascript">                &#123;</span><br><span class="javascript">                    <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>,</span><br><span class="javascript">                    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;王五&quot;</span></span><br><span class="javascript">                &#125;</span><br><span class="javascript">            ]</span><br><span class="javascript"></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="javascript"></span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>key的注意事项</strong>：</p><ol><li><p>key的值只能是*字符串或<strong>数字</strong>类型</p></li><li><p>key的值必须具有<strong>唯一性</strong></p></li><li><p>建议把<strong>数据项的id属性</strong>作为key的值(因为id属性的值具有唯一性)</p></li><li><p>使用v-for指令时<strong>一定要指定key的值</strong>(既可以提升性能，又可以防止列表状态混乱)</p></li><li><p>使用index的值作为key的值没有意义(因为index的值不具有唯一性)</p><p>index的值看起来像是具有唯一性，但是这个是假唯一性</p><p>例子：</p><p>现在又一个数组list，list=[“张三”，”李四”]，假如选择index作为key值的话，选择key=1,即现在选中了李四，这个时候在数组的头那里插入一个新人”王五”，那么李四的key值将会变成2,而之前选的是key为1的，所以，张三就篡位了。</p></li></ol><h2 id="4-过滤器"><a href="#4-过滤器" class="headerlink" title="4. 过滤器"></a>4. 过滤器</h2><p>过滤器常用于<strong>文本的格式化</strong>，可用于<strong>插值表达式</strong>和<strong>v-bind属性绑定</strong></p><p>过滤符由**管道符”|”**进行调用</p><p><img src="https://pic.imgdb.cn/item/614bd7912ab3f51d91a452e0.jpg"></p><p><b style="color: red">在filters节点下定义的过滤器，是私有过滤器，只能在当前的vm实例所控制的el区域内可以使用。</b>要实现<strong>多个vue实例之间共享过滤器</strong>，可以定义<strong>全局过滤器</strong>。</p><p><b style="color: red">注意，全局过滤器要放在要用到的vm实例之前</b></p><p><img src="https://pic.imgdb.cn/item/614bdc422ab3f51d91a963a7.jpg"></p><p><b style="color: red">注意，查看上面的结果可以发现，只有vm2控制的区域后面会跟着”全局版本”,这是因为vm也有一个私有过滤器mychange，所以vm就直接用自己的了（懒得再去全局那里拿来用）</b></p><p>过滤器可以<strong>串联的</strong>进行调用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;&#123; message | fileterA | filterB &#125;&#125;  <span class="hljs-comment">//先把message的值给过滤器filterA处理，之后把处理的结果给B处理，最后再把最后的结果渲染到页面上</span><br></code></pre></td></tr></table></figure><p><strong>过滤器可以传参</strong>：过滤器本质是函数，可以传参，只不过，<b style = "color: red">第一个参数已经规定好了，是管道符”|”之前的数据。</b></p><h2 id="5-侦听器"><a href="#5-侦听器" class="headerlink" title="5. 侦听器"></a>5. 侦听器</h2><p>允许开发者监视数据的变化，从而<strong>针对数据的变化做特定的操作</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="javascript">            <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;admin&#x27;</span></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-attr">watch</span>: &#123;</span><br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">username</span>(<span class="hljs-params">newVal, oldVal</span>)</span> &#123; <span class="hljs-comment">//要监听谁，就把谁的名字作为方法名，新值在前，旧值在后</span></span><br><span class="javascript">                <span class="hljs-built_in">console</span>.log(newVal, oldVal);</span><br><span class="javascript">            &#125;</span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;);</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-1-immediate选项"><a href="#5-1-immediate选项" class="headerlink" title="5.1 immediate选项"></a>5.1 immediate选项</h3><p><strong>默认情况下，组件在初次加载完时，不会调用watch侦听器</strong>。想要watch侦听器<strong>立即被调用</strong>，需要把<strong>immediate</strong>选项变为true(默认值为false)，<b style="color: red">这个时候的侦听器应该是对象形式的。</b></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="javascript">            <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;admin&#x27;</span></span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-attr">watch</span>: &#123;</span><br><span class="javascript">            <span class="hljs-attr">username</span>: &#123;<span class="hljs-comment">//对象形式</span></span><br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">handler</span>(<span class="hljs-params">newVal, oldVal</span>)</span> &#123;</span><br><span class="javascript">                    <span class="hljs-built_in">console</span>.log(newVal, oldVal);</span><br><span class="javascript">                &#125;,</span><br><span class="javascript">                <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">//实现初次加载完成时也会调用监听器</span></span><br><span class="javascript">            &#125;</span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;);</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-2-deep选项"><a href="#5-2-deep选项" class="headerlink" title="5.2 deep选项"></a>5.2 deep选项</h3><p>如果watch监听的是一个对象，如果对象中的属性值发生了变化，则无法被监听到。（就像是监视一个人，只能看到他干了什么，没法看到他里面的消化系统在干什么），这个时候需要把<strong>deep选项</strong>变为true</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;info.username&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="javascript">            <span class="hljs-attr">info</span>: &#123;</span><br><span class="javascript">                <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;admin&#x27;</span></span><br><span class="javascript">            &#125;</span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-attr">watch</span>: &#123;</span><br><span class="javascript">            <span class="hljs-attr">info</span>: &#123;</span><br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">handler</span>(<span class="hljs-params">newVal</span>)</span> &#123;</span><br><span class="javascript">                    <span class="hljs-built_in">console</span>.log(newVal.username);</span><br><span class="javascript">                &#125;,</span><br><span class="javascript">                <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>,</span><br><span class="javascript">                <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span></span><br><span class="javascript">            &#125;,</span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;);</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>上面的例子，如果<strong>只是想监听单个属性的变化</strong>，可以不变化deep选项，按以下方式即可</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;info.username&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="javascript">            <span class="hljs-attr">info</span>: &#123;</span><br><span class="javascript">                <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;admin&#x27;</span></span><br><span class="javascript">            &#125;</span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-attr">watch</span>: &#123;</span><br><span class="javascript">            <span class="hljs-string">&#x27;info.username&#x27;</span>: &#123; <span class="hljs-comment">//监听单个属性需要用字符串形式</span></span><br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">handler</span>(<span class="hljs-params">newVal</span>)</span> &#123; <span class="hljs-comment">//这个时候的新值newVal，就是属性变化后的值</span></span><br><span class="javascript">                    <span class="hljs-built_in">console</span>.log(newVal);</span><br><span class="javascript">                &#125;,</span><br><span class="javascript">                <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>,</span><br><span class="javascript">            &#125;,</span><br><span class="javascript">        &#125;</span><br><span class="javascript">    &#125;);</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="6-计算属性"><a href="#6-计算属性" class="headerlink" title="6. 计算属性"></a>6. 计算属性</h2><p>计算属性是指通过一系列计算之后，最终得到一个<strong>属性值</strong>，这个<strong>动态计算出来的属性值</strong>可以被模板结构或methods方法使用。</p><p><strong>特点</strong>：</p><ol><li>计算属性声明的时候被定义为方法，但是计算属性的<strong>本质是一个属性</strong></li><li>只要<strong>计算属性依赖的数据源变化</strong>了，那么计算属性就会<strong>自动重新求值</strong></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Myself<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.box</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;</span><br><span class="css">        &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>R: <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">&quot;r&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>G: <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">&quot;g&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>B: <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">&quot;b&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123;backgroundColor: rgb&#125;&quot;</span>&gt;</span>  <br>            &#123;&#123; rgb &#125;&#125;<br>            <span class="hljs-comment">&lt;!-- 使用时，就和普通属性一样用法 --&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showColor&quot;</span>&gt;</span>按钮<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.6.12.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">        <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="javascript">            <span class="hljs-attr">data</span>: &#123;</span><br><span class="javascript">                <span class="hljs-attr">r</span>: <span class="hljs-number">0</span>,</span><br><span class="javascript">                <span class="hljs-attr">g</span>: <span class="hljs-number">0</span>,</span><br><span class="javascript">                <span class="hljs-attr">b</span>: <span class="hljs-number">0</span></span><br><span class="javascript">            &#125;,</span><br><span class="javascript">            <span class="hljs-attr">methods</span>: &#123;</span><br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">showColor</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">                    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.rgb);</span><br><span class="javascript">                &#125;</span><br><span class="javascript">            &#125;,</span><br><span class="javascript">            <span class="hljs-attr">computed</span>: &#123;</span><br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">rgb</span>(<span class="hljs-params"></span>)</span> &#123;<span class="hljs-comment">//计算属性，声明时是函数形式</span></span><br><span class="javascript">                    <span class="hljs-keyword">return</span> <span class="hljs-string">`rgb(<span class="hljs-subst">$&#123;<span class="hljs-built_in">this</span>.r&#125;</span>, <span class="hljs-subst">$&#123;<span class="hljs-built_in">this</span>.g&#125;</span>, <span class="hljs-subst">$&#123;<span class="hljs-built_in">this</span>.b&#125;</span>)`</span></span><br><span class="javascript">                &#125;</span><br><span class="javascript">            &#125;</span><br><span class="javascript">        &#125;);</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(vm);</span><br><span class="javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/614c3c872ab3f51d912f40cc.jpg"></p><h2 id="7-axios"><a href="#7-axios" class="headerlink" title="7. axios"></a>7. axios</h2><p>axios是一个专注于数据请求的库。</p><p><strong>基本使用</strong>：</p><p>安装命令</p><p><code> npm install axios -S</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;lib/axios.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">     <span class="hljs-comment">//axios()方法返回一个promise对象</span></span><br><span class="javascript">     axios(&#123;</span><br><span class="javascript">         <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span>, <span class="hljs-comment">//请求方式</span></span><br><span class="javascript">         <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>, <span class="hljs-comment">//请求路径</span></span><br><span class="javascript">     &#125;).then(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> &#123;</span><br><span class="javascript">         <span class="hljs-built_in">console</span>.log(result); <span class="hljs-comment">//这里得到的result不是得到的数据，result.data才是，result是数据被axios包装后得到的</span></span><br><span class="javascript">         <span class="hljs-built_in">console</span>.log(result.data);</span><br><span class="javascript">     &#125;)</span><br><span class="javascript"> </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><ol><li><p>发起get请求</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;lib/axios.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-comment">//axios()方法返回一个promise对象</span></span><br><span class="javascript">    axios(&#123;</span><br><span class="javascript">        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span>, <span class="hljs-comment">//请求方式</span></span><br><span class="javascript">        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>, <span class="hljs-comment">//请求路径</span></span><br><span class="javascript">        <span class="hljs-attr">params</span>: &#123; <span class="hljs-comment">//查询参数，即请求方式为get时的参数</span></span><br><span class="javascript">            <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,</span><br><span class="javascript">        &#125;,</span><br><span class="javascript">        <span class="hljs-comment">// data: &#123;</span></span><br><span class="javascript">        <span class="hljs-comment">//     //请求体参数：post时的参数，和params二选一</span></span><br><span class="javascript">        <span class="hljs-comment">// &#125;</span></span><br><span class="javascript">    &#125;).then(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(result.data);</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>发起post请求</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>发起POST请求<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;lib/axios.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;button&quot;</span>).addEventListener(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-keyword">async</span> () =&gt; &#123;</span><br><span class="javascript">        <span class="hljs-comment">// //axios()方法返回一个promise对象</span></span><br><span class="javascript">        <span class="hljs-comment">// axios(&#123;</span></span><br><span class="javascript">        <span class="hljs-comment">//     method: &#x27;post&#x27;, //请求方式</span></span><br><span class="javascript">        <span class="hljs-comment">//     url: &#x27;http://www.liulongbin.top:3006/api/post&#x27;, //请求路径</span></span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-comment">//     data: &#123;</span></span><br><span class="javascript">        <span class="hljs-comment">//         name: &#x27;张三&#x27;,</span></span><br><span class="javascript">        <span class="hljs-comment">//         age: 11</span></span><br><span class="javascript">        <span class="hljs-comment">//     &#125;</span></span><br><span class="javascript">        <span class="hljs-comment">// &#125;).then((result) =&gt; &#123;</span></span><br><span class="javascript">        <span class="hljs-comment">//     console.log(result.data);</span></span><br><span class="javascript">        <span class="hljs-comment">// &#125;)</span></span><br><span class="javascript"></span><br><span class="javascript"></span><br><span class="javascript">        <span class="hljs-comment">//不用then，简化版本</span></span><br><span class="javascript">        <span class="hljs-comment">//如果调用某个方法的返回值时Promise实例，则前面可以加await</span></span><br><span class="javascript">        <span class="hljs-comment">//await只能在被async修饰的方法中</span></span><br><span class="javascript">        <span class="hljs-keyword">const</span> &#123;</span><br><span class="javascript">            <span class="hljs-attr">data</span>: result</span><br><span class="javascript">        &#125; = <span class="hljs-keyword">await</span> axios(&#123; <span class="hljs-comment">//使用解构赋值,把data属性结构出来,并重命名为result</span></span><br><span class="javascript">            <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;post&#x27;</span>,</span><br><span class="javascript">            <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/post&#x27;</span>,</span><br><span class="javascript"></span><br><span class="javascript">            <span class="hljs-attr">data</span>: &#123;</span><br><span class="javascript">                <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;张三&#x27;</span>,</span><br><span class="javascript">                <span class="hljs-attr">age</span>: <span class="hljs-number">11</span></span><br><span class="javascript">            &#125;</span><br><span class="javascript">        &#125;);</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(result);</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="7-1-axios-get"><a href="#7-1-axios-get" class="headerlink" title="7.1 axios.get()"></a>7.1 axios.get()</h3><p>   语法：</p>   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">axios.get(<span class="hljs-string">&#x27;url地址&#x27;</span>, &#123;<br><span class="hljs-attr">params</span>: &#123;<br>        get参数<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span>get<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;lib/axios.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;.get&quot;</span>).addEventListener(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-keyword">async</span> () =&gt; &#123;</span><br><span class="javascript">        <span class="hljs-keyword">const</span> &#123;</span><br><span class="javascript">            <span class="hljs-attr">data</span>: result</span><br><span class="javascript">        &#125; = <span class="hljs-keyword">await</span> axios.get(<span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>, &#123;</span><br><span class="javascript">            <span class="hljs-attr">params</span>: &#123;</span><br><span class="javascript">                <span class="hljs-attr">id</span>: <span class="hljs-number">1</span></span><br><span class="javascript">            &#125;</span><br><span class="javascript">        &#125;);</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(result.data);</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="7-2-axios-post"><a href="#7-2-axios-post" class="headerlink" title="7.2 axios.post()"></a>7.2 axios.post()</h3><p>   语法：</p>   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">axios.post(<span class="hljs-string">&#x27;url&#x27;</span>, &#123;<br>请求体参数   <span class="hljs-comment">//注意，这里不需要写在data里面</span><br>&#125;)<br></code></pre></td></tr></table></figure>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span>post<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;lib/axios.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript">    <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;.post&quot;</span>).addEventListener(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-keyword">async</span> () =&gt; &#123;</span><br><span class="javascript">        <span class="hljs-keyword">const</span> &#123;</span><br><span class="javascript">            <span class="hljs-attr">data</span>: result</span><br><span class="javascript">        &#125; = <span class="hljs-keyword">await</span> axios.post(<span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/post&#x27;</span>, &#123;</span><br><span class="javascript">            <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;张三&#x27;</span>,</span><br><span class="javascript">            <span class="hljs-attr">age</span>: <span class="hljs-number">21</span></span><br><span class="javascript">        &#125;);</span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(result);</span><br><span class="javascript">    &#125;)</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>   学习链接：</p><p>   <a href="https://www.bilibili.com/video/BV1zq4y1p7ga">黑马程序员Vue全套视频教程</a></p><p>   <a href="https://vuejs.org/">Vue.js (vuejs.org)</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python(一)</title>
      <link href="/2021/09/25/python-1/"/>
      <url>/2021/09/25/python-1/</url>
      
        <content type="html"><![CDATA[<h1 id="Python-一"><a href="#Python-一" class="headerlink" title="Python(一)"></a>Python(一)</h1><p>本系列是个人学习Python的学习笔记。董付国编著的Python程序设计（第三版）</p><h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1. 介绍"></a>1. 介绍</h2><ul><li>Python是一门<b style="color: red">跨平台、开源、免费的解释型高级动态编程语言</b>b&gt;，支持伪编译将Python源程序转换为字节码来优化程序和提高运行速度，支持使用py2exe、<strong>pyinstaller</strong>或cx_Freeze工具将Python程序转换为二进制可执行程序。</li><li>Python支持<b style="color: red">命令式编程、函数式编程</b>，完全支持面向对象程序设计，拥有大量成熟<b style="color: red">扩展库</b>。</li></ul><h2 id="2-对象模型"><a href="#2-对象模型" class="headerlink" title="2. 对象模型"></a>2. 对象模型</h2><p>对象是python中最基本的概念，在python中处理的一切都是对象。</p><p><img src="https://pic.imgdb.cn/item/61401ef344eaada739a0a693.jpg"></p><p><img src="https://pic.imgdb.cn/item/61401f0c44eaada739a0cf04.jpg"></p><h2 id="3-变量"><a href="#3-变量" class="headerlink" title="3. 变量"></a>3. 变量</h2><ul><li><p>不需要事先声明变量名及其类型，直接赋值即可创建各种类型的对象变量。</p></li><li><p>Python属于<b style="color: red">强类型编程语言</b>，Python解释器会根据赋值或运算来自动推断变量类型。</p></li><li><p>Python还是一种<b style="color: red">动态类型语言</b>，变量的类型可以随时变化。</p></li><li><p><strong>字符串和元组属于不可变序列</strong>，不能通过下标的方式来修改其中的元素值。</p></li><li><p>Python允许多个变量指向同一个值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">3</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(x))<br><br>y = x<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(y))<br></code></pre></td></tr></table></figure></li></ul><p><img src="https://s2.loli.net/2022/01/11/ysDYe9Cfp5VBgZU.png" alt="image-20210914130135133"></p><p>​        其中的一个变量修改值之后，对应的内存地址会发生变化，但是不会影响另一个变量</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">3</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(x))<br><br>y = x<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(y))<br><br>x += <span class="hljs-number">6</span><br><span class="hljs-built_in">print</span>(x)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(x))<br><br><span class="hljs-built_in">print</span>(y)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(y))<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/01/11/CNzZvMPSsVLEIGd.png" alt="image-20210914130401482"></p><p>上面两个例子原因：Python采用<b style="color: red">基于值的内存管理方式</b>,如果为不同变量复制为相同值，这个值在内存中只保存一份，多个变量指向同一个值的内存空间首地址，这样可以减少内存空间的占用，提高内存利用率。</p><p>Python启动时，会对[-5, 256]区间的整数进行缓存，即多个变量的值相等，为整数，且介于[-5, 256]区间内，这些变量公用同一个值的内存空间。</p><p>在区间[-5, 256]区间之外的整数以及剩下的实数，会分为同一个程序和交互模式的区分。交互模式不常用，暂不考虑。同一个程序的同值不同变量会共用同一个内存空间</p><ul><li>赋值语句的执行过程：首先把等号右侧表达式的值计算出来，然后在内存中寻找一个位置把值放进去，最后创建变量并指向这个内存地址。<b style="color: red">Python中的变量并不是直接存储值，而是存储值的内存地址或者引用</b>，这也是变量类型可以随时改变的原因。</li><li>Python具有<strong>自动管理内存</strong>的功能，会跟踪所有的值，并自动删除不再使用或引用次数为0的值。</li></ul><h2 id="4-数字"><a href="#4-数字" class="headerlink" title="4. 数字"></a>4. 数字</h2><ul><li><p>可以表示任意大小的值</p></li><li><p>整数类型可以分为：</p><pre><code>1. 十进制整数： 如0， -1232. 十六进制整数：必须用0x开头，如0xabcdf93. 八进制整数：必须以0o开头，如0o354. 二进制整数：必须以0b开头，如0b101</code></pre></li><li><p>浮点数，如15.0、1.2e2、1.2e-2</p></li><li><p>Python支持复数类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-number">3</span> + <span class="hljs-number">4j</span><br>b = <span class="hljs-number">5</span> + <span class="hljs-number">6j</span><br>c = a + b<br><br><span class="hljs-built_in">print</span>(c)<br><br><span class="hljs-built_in">print</span>(c.real)      <span class="hljs-comment">#查看复数实部</span><br><span class="hljs-built_in">print</span>(c.imag)      <span class="hljs-comment">#查看复数虚部</span><br><br><span class="hljs-built_in">print</span>(c.conjugate())      <span class="hljs-comment">#返回共轭复数</span><br><br><span class="hljs-built_in">print</span>(a * b)    <span class="hljs-comment"># 复数乘法</span><br></code></pre></td></tr></table></figure></li><li><p>Python 3.6.x开始支持在数字中间位置使用单个下划线作为分隔来提高数字的可读性</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-number">1_000_000</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-number">1_2_3_3</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-number">1_2</span> + <span class="hljs-number">3_4j</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-number">1_2.3_45_678</span>)<br></code></pre></td></tr></table></figure></li></ul><h2 id="5-字符串"><a href="#5-字符串" class="headerlink" title="5. 字符串"></a>5. 字符串</h2><p>字符串前面加字母r或R表示原始字符串，其中的特殊字符不进行转义，但字符串的最后一个字符不能是\。</p><p><img src="https://pic.imgdb.cn/item/6141966a2ab3f51d91c404f8.jpg"></p><h2 id="6-运算符和表达式"><a href="#6-运算符和表达式" class="headerlink" title="6. 运算符和表达式"></a>6. 运算符和表达式</h2><ul><li>+运算符除了用于算数加法外，还可以用于列表、元组、字符串的连接，但<b style="color: red">不支持不同类型的对象之间相加或连接</b>，部分语言字符串和数字相加时，会把数字转成字符串后连接。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>b = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]<br><span class="hljs-built_in">print</span>(a + b)<br><br>a = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br>b = (<span class="hljs-number">4</span>,)  <span class="hljs-comment"># 元组只有一个元素时，后面应该带一个&quot;,&quot;</span><br><span class="hljs-built_in">print</span>(a + b)<br><br>a = <span class="hljs-string">&quot;Hello&quot;</span><br>b = <span class="hljs-string">&quot; World!&quot;</span><br><span class="hljs-built_in">print</span>(a + b)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-literal">True</span> + <span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-literal">False</span> + <span class="hljs-number">4</span>)   <span class="hljs-comment"># python会把True当成1，把False当成0处理</span><br></code></pre></td></tr></table></figure><ul><li>*运算符除了用于算数乘法外，还可以用于列表、字符串、元组等类型，对内容进行重复，并返回重复后的新对象</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;a&quot;</span> * <span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>] * <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>((<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>) * <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><ul><li><p>python中的除法有两种，”/“表示除法运算(真正数学意义上的除法)，”//“表示整除运算</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> / <span class="hljs-number">5</span>)         <span class="hljs-comment"># 0.6</span><br><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> // <span class="hljs-number">5</span>)        <span class="hljs-comment"># 0</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-number">3.0</span> / <span class="hljs-number">5</span>)       <span class="hljs-comment"># 0.6</span><br><span class="hljs-built_in">print</span>(<span class="hljs-number">3.0</span> // <span class="hljs-number">5</span>)      <span class="hljs-comment"># 0.0</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-number">13</span> // <span class="hljs-number">10</span>)      <span class="hljs-comment"># 1</span><br><span class="hljs-built_in">print</span>(-<span class="hljs-number">13</span> // <span class="hljs-number">10</span>)     <span class="hljs-comment"># -2, -13 = -2 * 10 + 7</span><br></code></pre></td></tr></table></figure></li><li><p>关系运算符可以进行连用，一般用于<b style="color: red">同类型对象之间</b>的大小比较，或者测试集合之间的包含关系。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-number">1</span> &lt; <span class="hljs-number">3</span> &lt; <span class="hljs-number">5</span>)    <span class="hljs-comment"># 等价 1 &lt; 3 and 3 &lt; 5</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello&quot;</span> &gt; <span class="hljs-string">&quot;world&quot;</span>)    <span class="hljs-comment"># 比较字符串大小</span><br><br><span class="hljs-built_in">print</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>] &lt; [<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>])   <span class="hljs-comment"># 比较列表大小</span><br><br><span class="hljs-built_in">print</span>(&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125; &lt; &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>&#125;)      <span class="hljs-comment"># 测试是否是子集</span><br></code></pre></td></tr></table></figure></li><li><p>成员测试运算符in用于成员测试，即测试一个对象是否是另一个对象的元素。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-number">4</span> <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])  <span class="hljs-comment"># 测试4是否存在于列表[1, 2, 3]中</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-number">5</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>))   <span class="hljs-comment"># 测试5是否在[1, 10)中</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;abc&quot;</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;abcdef&quot;</span>)     <span class="hljs-comment"># 子字符串测试</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> (<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>):<br>    <span class="hljs-built_in">print</span>(i, end = <span class="hljs-string">&#x27; &#x27;</span>)  <span class="hljs-comment"># 循环，成员遍历， end = &#x27; &#x27;,可以更换print()的默认模式，print()默认会换行，这里改成空格</span><br></code></pre></td></tr></table></figure></li><li><p>同一性测试运算符is用来测试两个对象是否是同一个，如果是，返回True，否则返回False。<b style="color: red">如果两个对象是同一个，二者具有相同的内存地址</b>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-number">300.0</span><br>b = <span class="hljs-number">300.0</span><br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)<br><br>x = [<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>]<br><span class="hljs-built_in">print</span>(x[<span class="hljs-number">0</span>] <span class="hljs-keyword">is</span> x[<span class="hljs-number">1</span>])   <span class="hljs-comment"># 基于值的内存管理，同一个值在内存中只有一份</span><br><br>a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>b = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br><span class="hljs-built_in">print</span>(a <span class="hljs-keyword">is</span> b)<br></code></pre></td></tr></table></figure></li><li><p><strong>位运算符只能用于整数</strong>，内部执行过程：先将整数转换为二进制数，然后右对齐，必要的时候左侧补0，按位进行运算。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> &lt;&lt; <span class="hljs-number">2</span>)<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">左移一位相当于乘以2，移两位相当于乘以4</span><br><span class="hljs-string">0011</span><br><span class="hljs-string">1100</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> &amp; <span class="hljs-number">7</span>)  <span class="hljs-comment"># 位与运算</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">0011 &amp; 0111 = 0011 </span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> | <span class="hljs-number">8</span>)  <span class="hljs-comment"># 位或运算</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> ^ <span class="hljs-number">5</span>)  <span class="hljs-comment"># 位异或运算</span><br></code></pre></td></tr></table></figure></li><li><p>集合的交集、并集、对称差集等运算借助位运算符来实现，而差集利用减号运算符实现（<b style="color: red">并集运算符不是用加号</b>）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125; | &#123;<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;)       <span class="hljs-comment"># 并集，自动去除重复元素</span><br><br><span class="hljs-built_in">print</span>(&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125; &amp; &#123;<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>&#125;)         <span class="hljs-comment"># 交集</span><br><br><span class="hljs-built_in">print</span>(&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125; ^ &#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>&#125;)      <span class="hljs-comment"># 对称差集</span><br><br><span class="hljs-built_in">print</span>(&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125; - &#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;)        <span class="hljs-comment"># 差集</span><br></code></pre></td></tr></table></figure></li><li><p>and和or对应于c语言的&amp;&amp;和||，具有惰性求值的特点，只计算必须计算的表达式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> &gt; <span class="hljs-number">5</span> <span class="hljs-keyword">and</span> a &gt; <span class="hljs-number">3</span>)<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">PyCharm会显示错误，不过运行不会出现错误</span><br><span class="hljs-string">因为 3 &gt; 5 的值为False,由于and运算符的惰性求值，不会计算之后的表达式</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> &lt; <span class="hljs-number">5</span> <span class="hljs-keyword">or</span> a &gt; <span class="hljs-number">3</span>)   <span class="hljs-comment"># 同理</span><br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">print(3 &gt; 5 or a &gt; 3) </span><br><span class="hljs-string">这个输出会报错，因为3&gt;5的值为False，所以or被迫要去计算之后的表达式</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-number">5</span> <span class="hljs-keyword">and</span> <span class="hljs-number">3</span>)  <span class="hljs-comment"># 最后一个计算表达式的值作为整个表达式的值</span><br><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> <span class="hljs-keyword">and</span> <span class="hljs-number">5</span> &lt; <span class="hljs-number">3</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]) <span class="hljs-comment"># 逻辑非运算符not，对应于c语言的!</span><br></code></pre></td></tr></table></figure></li><li><p>逗号不是运算符，只是普通分隔符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-keyword">in</span> (<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>))<br><br>x = <span class="hljs-number">3</span>,     <span class="hljs-comment"># 赋值时使用逗号，变量会变为元组</span><br><span class="hljs-built_in">print</span>(x)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(x))<br><br>x = <span class="hljs-number">3</span> + <span class="hljs-number">5</span>, <span class="hljs-number">7</span><br><span class="hljs-built_in">print</span>(x)<br></code></pre></td></tr></table></figure></li><li><p><b style="color: red">Python不支持++和–运算符</b></p></li></ul><h2 id="7-常用内置函数"><a href="#7-常用内置函数" class="headerlink" title="7. 常用内置函数"></a>7. 常用内置函数</h2><p>int()：把实数转换为整数，或者把数字字符串按指定进制转换为十进制数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">int</span>(<span class="hljs-number">3.5</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">int</span>(-<span class="hljs-number">3.5</span>))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">int</span>(<span class="hljs-string">&quot; \t  8 \n &quot;</span>))  <span class="hljs-comment"># 自动忽略数字两侧的空格</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">int</span>(<span class="hljs-string">&#x27;101&#x27;</span>, <span class="hljs-number">2</span>))    <span class="hljs-comment"># 转换为二进制</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">int</span>(<span class="hljs-string">&#x27;101&#x27;</span>, <span class="hljs-number">16</span>))   <span class="hljs-comment"># 转换为十六进制</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">int</span>(<span class="hljs-string">&#x27;x2&#x27;</span>, <span class="hljs-number">36</span>))    <span class="hljs-comment"># 转换为三十六进制</span><br></code></pre></td></tr></table></figure><ul><li><p>ord()和chr()是一对功能相反的函数。ord()返回单个字符对应的 ASCII 数值，或者 Unicode 数值。chr()返回传入的整数对应的字符。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">chr</span>(<span class="hljs-number">65</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">chr</span>(<span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;A&#x27;</span>) + <span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure></li><li><p>str()：将任意类型参数转换成字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>(<span class="hljs-number">7777</span>))<br><span class="hljs-built_in">print</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>])<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>(<span class="hljs-literal">True</span>))<br></code></pre></td></tr></table></figure></li><li><p>max()和min()的key参数可以指定比较规则</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">arr = [<span class="hljs-number">12</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">67</span>, <span class="hljs-number">99</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(arr))<br><br>arr = [<span class="hljs-string">&quot;0123&quot;</span>, <span class="hljs-string">&quot;456&quot;</span>, <span class="hljs-string">&quot;88&quot;</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(arr))   <span class="hljs-comment"># 正常比，比较每个字符的ASCII值，直到找到最大值</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(arr, key=<span class="hljs-built_in">len</span>))    <span class="hljs-comment"># 比较字符串长度最大值</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(arr, key=<span class="hljs-built_in">int</span>))    <span class="hljs-comment"># 字符串转为整型后比较最大值</span><br></code></pre></td></tr></table></figure></li><li><p>sum()可以实现<strong>非数值型列表元素</strong>的求和</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>( <span class="hljs-built_in">sum</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]) )<br></code></pre></td></tr></table></figure></li><li><p>type()和isinstance()可以判断数据类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>([<span class="hljs-number">3</span>]))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>((<span class="hljs-number">3</span>, )))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(&#123;<span class="hljs-number">3</span>&#125;) <span class="hljs-keyword">in</span> (<span class="hljs-built_in">list</span>, <span class="hljs-built_in">tuple</span>, <span class="hljs-built_in">dict</span>))     <span class="hljs-comment"># 判断&#123;3&#125;是否是list、tuple或dict的类型</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(<span class="hljs-number">2</span>, <span class="hljs-built_in">int</span>))       <span class="hljs-comment"># 判断3是否是int类型的实例</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(<span class="hljs-number">3j</span>, (<span class="hljs-built_in">int</span>, <span class="hljs-built_in">float</span>, <span class="hljs-built_in">complex</span>)))    <span class="hljs-comment"># 判断3j是否为int,float或complex的类型</span><br></code></pre></td></tr></table></figure></li><li><p>sorted()对列表、元组、字典、集合或其他可迭代对象进行排序并返回新列表。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">a = (<span class="hljs-number">2</span>, <span class="hljs-number">77</span>, <span class="hljs-number">33</span>, <span class="hljs-number">33</span>, <span class="hljs-number">0</span>, <span class="hljs-number">12</span>, <span class="hljs-number">99</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sorted</span>(a))<br></code></pre></td></tr></table></figure></li><li><p>reversed()对可迭代对象（生成器对象和具有惰性求值特性的zip、map、filter、enumeate等类似对象除外）进行翻转，并返回可迭代的reversed对象。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">a = (<span class="hljs-number">2</span>, <span class="hljs-number">77</span>, <span class="hljs-number">33</span>, <span class="hljs-number">33</span>, <span class="hljs-number">0</span>, <span class="hljs-number">12</span>, <span class="hljs-number">99</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">reversed</span>(a))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-built_in">reversed</span>(a)))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">reversed</span>(a)))   <span class="hljs-comment"># 列表 list() 方法用于将可迭代对象（字符串、列表、元祖、字典）转换为列表。</span><br></code></pre></td></tr></table></figure></li><li><p>range([start, ] end [,step]), 返回具有懒惰求值特点的range对象，其中范围是[start, end)内以step为步长的整数。start默认为0，step默认为1.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>))         <span class="hljs-comment"># start默认为0，step默认为1</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">3</span>)))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, -<span class="hljs-number">3</span>)))  <span class="hljs-comment"># 步长为负数时，如果start比end小，得到的range对象不含有任何整数</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">3</span>)))<br></code></pre></td></tr></table></figure></li><li><p>enumerate()：用来枚举可迭代对象中的元素，返回可迭代的enumerate对象，其中每个元素都是包含索引和值和元组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">enumerate</span>(<span class="hljs-string">&quot;abcd&quot;</span>)))          <span class="hljs-comment"># 枚举字符串的元素</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">enumerate</span>([<span class="hljs-string">&#x27;Hello&#x27;</span>, <span class="hljs-string">&quot;World&quot;</span>])))   <span class="hljs-comment"># 枚举列表的元素</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">enumerate</span>(&#123;      <span class="hljs-comment"># 枚举字典的元素</span><br>    <span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-number">97</span>,<br>    <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-number">98</span>,<br>    <span class="hljs-string">&#x27;c&#x27;</span>: <span class="hljs-number">99</span><br>&#125;.items())))    <span class="hljs-comment"># items() 函数以列表返回可遍历的(键, 值) 元组数组。</span><br></code></pre></td></tr></table></figure></li><li><p>map()：把一个函数func依次映射到序列或迭代器对象的每个元素上，并返回一个可迭代map对象作为结果，map对象中的每个元素是原序列中元素经过函数func处理后的结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)))   <span class="hljs-comment"># 把列表中的元素转换为字符串</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>))))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)))   <span class="hljs-comment"># 没有用map方法的</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add5</span>(<span class="hljs-params">a</span>):</span><br>    <span class="hljs-keyword">return</span> a + <span class="hljs-number">5</span><br><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(add5, <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))))   <span class="hljs-comment"># 相当于把range()中的所有整数都会去调用add5</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span>(<span class="hljs-params">x, y</span>):</span><br>    <span class="hljs-keyword">return</span> x + y<br><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(add, <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>), <span class="hljs-built_in">range</span>(<span class="hljs-number">6</span>, <span class="hljs-number">12</span>))))<span class="hljs-comment"># 两个参数版本的</span><br></code></pre></td></tr></table></figure></li><li><p>filter()：通过参数中的函数来筛选参数中的序列中符合条件的元素组成的filter对象，如果指定函数为None，则返回序列中等价于True的元素。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">arr = [<span class="hljs-string">&#x27;123&#x27;</span>, <span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-string">&#x27;45?&#x27;</span>, <span class="hljs-string">&#x27;***&#x27;</span>]<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">x</span>):</span><br>    <span class="hljs-keyword">return</span> x.isalnum()  <span class="hljs-comment"># 测试是否是字母或数字</span><br><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">filter</span>(func, arr))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(func, arr)))<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-built_in">str</span>.isalnum, arr)))    <span class="hljs-comment"># 等价用法</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">data = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>))<br><br>filterObject = <span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>, data)   <span class="hljs-comment"># 过滤，只留下所有奇数</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> <span class="hljs-keyword">in</span> filterObject)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(filterObject))       <span class="hljs-comment"># filter只会访问一次元素，所以，3和3之前的元素不会输出</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(filterObject))       <span class="hljs-comment"># 上面的语句访问了所有的元素</span><br></code></pre></td></tr></table></figure></li><li><p>zip()：把多个可迭代对象中的元素压缩在一起，返回一个可迭代的zip对象，其中每个元素都是包含原来的多个可迭代对象对应位置上元素的元组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">zip</span>(<span class="hljs-string">&#x27;abcd&#x27;</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])))     <span class="hljs-comment"># 压缩字符串和列表</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">zip</span>(<span class="hljs-string">&#x27;123&#x27;</span>, <span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-string">&#x27;,?!&#x27;</span>)))       <span class="hljs-comment"># 压缩3个序列</span><br></code></pre></td></tr></table></figure></li><li><p>map、filter、enumeraye、zip等对象具有惰性求值的特点，<b style="color: red">访问过的元素不可以再次访问</b>。</p><p>例子见filter()的第二个例子</p></li></ul><h2 id="8-基本输入输出"><a href="#8-基本输入输出" class="headerlink" title="8. 基本输入输出"></a>8. 基本输入输出</h2><h3 id="8-1-input-：返回输入的对象。"><a href="#8-1-input-：返回输入的对象。" class="headerlink" title="8.1 input()：返回输入的对象。"></a>8.1 input()：返回输入的对象。</h3><p><b style="color: red">input()函数的返回结果都是字符串</b></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入第一个数:&quot;</span>)<br>b = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入第二个数:&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;加法运算结果是:&quot;</span> + <span class="hljs-built_in">str</span>(<span class="hljs-built_in">int</span>(a) + <span class="hljs-built_in">int</span>(b)))<span class="hljs-comment"># a, b都是字符串，转换为int类型后进行加法运算，之后再转换成字符串和前面的字符串进行拼接操作</span><br></code></pre></td></tr></table></figure><h3 id="8-2-print-：进行输出"><a href="#8-2-print-：进行输出" class="headerlink" title="8.2 print()：进行输出"></a>8.2 print()：进行输出</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, sep=<span class="hljs-string">&#x27;:: &#x27;</span>)     <span class="hljs-comment"># 指定分隔符</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> (<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>):<br>    <span class="hljs-built_in">print</span>(i, end=<span class="hljs-string">&#x27;!! &#x27;</span>)<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">循环，成员遍历， end = &#x27; &#x27;,可以更换print()的默认模式</span><br><span class="hljs-string">print()默认会换行，这里改成空格</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="9-模块的导入"><a href="#9-模块的导入" class="headerlink" title="9. 模块的导入"></a>9. 模块的导入</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><span class="hljs-built_in">print</span>(random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>))    <span class="hljs-comment"># 获得[1, 100]上的整数</span><br></code></pre></td></tr></table></figure><ul><li><p><code>  from 模块名 import 对象名[ as 别名]</code>  可以减少查询次数，提高执行速度</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> sin <span class="hljs-keyword">as</span> f<br><span class="hljs-built_in">print</span>(f(<span class="hljs-number">1.57</span>))<br></code></pre></td></tr></table></figure></li><li><p>如果需要导入多个模块，一般建议以下顺序进行导入</p><ol><li>标准库</li><li>成熟的第三方扩展库</li><li>自己开发的库</li></ol></li></ul>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机与网络(一)</title>
      <link href="/2021/09/25/computer-network-1/"/>
      <url>/2021/09/25/computer-network-1/</url>
      
        <content type="html"><![CDATA[<h1 id="计算机与网络-一"><a href="#计算机与网络-一" class="headerlink" title="计算机与网络(一)"></a>计算机与网络(一)</h1><p>写了几个月的学习笔记（虽然是每周一篇），发现了新世界，以前只觉得花时间写学习笔记效率不是很高，一直没有写过学习笔记之类的，但是实际上，写学习笔记的过程实际上又是重新复习了一下。</p><p style="color:red">学习计算机网络的笔记系列，参考谢希仁编著的计算机网络（第七版），用自己的话尽量复述一边，无法复述，就自己手敲一次，加深印象。</p><h2 id="1-引子"><a href="#1-引子" class="headerlink" title="1. 引子"></a>1. 引子</h2><p><b>计算机和网络已经成为当今信息时代的核心，已经成为信息社会的命脉和发展知识经济的重要基础。</b></p><p>网络：泛指把人或物互连在一起而形成的系统。</p><p>大众熟悉的三大网络：</p><ol><li>电信网络：提供电话、电报及传真等服务</li><li>有线电视网络：向用户传送各种电视节目</li><li>计算机网络：使用户能在计算机之间传送数据文件。</li></ol><p>其中，发展最快并起到核心作用的是计算机网络。</p><h2 id="2-计算机网络的定义及其特点"><a href="#2-计算机网络的定义及其特点" class="headerlink" title="2. 计算机网络的定义及其特点"></a>2. 计算机网络的定义及其特点</h2><h3 id="2-1-定义"><a href="#2-1-定义" class="headerlink" title="2.1 定义"></a>2.1 定义</h3><p>首先，计算机网络的精确定义现在还没有统一。</p><p>较好的定义：<br>计算机网络主要由一些通用的、可编程的硬件互连而成的，而这些硬件并非用来实现某一特定目的（如传送数据或视频信号）。这些可编程硬件能够用来传送多种不同的数据，并能支持广泛的和日益增长的应用。</p><p>定义中重要的两点：</p><ol><li>多种硬件:包括计算机、智能手机、智能传感器等</li><li>多种应用：包括数据、语音、视频，以及未来可能出现的应用</li></ol><h3 id="2-2-计算机网络的特点"><a href="#2-2-计算机网络的特点" class="headerlink" title="2.2 计算机网络的特点"></a>2.2 计算机网络的特点</h3><p><b style="color:red">连通性</b>：</p><ol><li>使上网用户之间都可以交换信息。</li><li>互联网具有虚拟的特点，无法准确知道对方身份和位置等。</li></ol><p><b style="color:red">共享</b>：</p><ol><li>指资源共享</li><li>多方面，如信息共享、软件共享和硬件共享等。</li><li>由于网络的存在，这些资源就像在用户身边一样，非常方便。</li></ol><h4 id="网络的表示"><a href="#网络的表示" class="headerlink" title="网络的表示"></a>网络的表示</h4><ol><li>用图表示网络</li></ol><p><img src="https://pic.imgdb.cn/item/613a21b244eaada7399270df.jpg"></p><ol start="2"><li>用云表示网络（主机在云里）</li></ol><p><img src="https://pic.imgdb.cn/item/613a21e444eaada73992e3ca.jpg"></p><ol start="3"><li>用云表示网络（主机在云外）</li></ol><p><img src="https://pic.imgdb.cn/item/613a220b44eaada739933a69.jpg"></p><h2 id="3-互联网概述"><a href="#3-互联网概述" class="headerlink" title="3. 互联网概述"></a>3. 互联网概述</h2><h3 id="3-1-互联网概念"><a href="#3-1-互联网概念" class="headerlink" title="3.1 互联网概念"></a>3.1 互联网概念</h3><p>互联网是目前技术最为成功、应用最为广泛的计算机网络。</p><h4 id="3-1-1-互联网定义"><a href="#3-1-1-互联网定义" class="headerlink" title="3.1.1 互联网定义"></a>3.1.1 互联网定义</h4><p>互联网，特指Internet，起源于美国，是由数量极大的各种计算机网络互连起来而形成的一个互连网络。它采用TCP/IP协议族作为通信规则，是一个覆盖全球的、实现全球范围内连通性和资源共享的计算机网络。（定义超长）</p><p><b style="color:red">TCP/IP、覆盖全球、实现连通性和资源共享、计算机网络</b></p><h4 id="3-1-2-internet和Internet的区别"><a href="#3-1-2-internet和Internet的区别" class="headerlink" title="3.1.2 internet和Internet的区别"></a>3.1.2 internet和Internet的区别</h4><p>对大小写敏感？？？</p><ol><li>小写字母”i”开始： internet(互连网，没有写错)，是通用名词。泛指由多个计算机网络互连而成的网络。</li><li>大写字母”I”开始：Internet（互联网或因特网）是专有名词。指当前全球最大的、开放的、由众多网络相互连接而成的特定计算机网络，它采用TCP/IP协议族作为通信规则，其前身是美国的ARPANET。（1990年正式宣布关闭)。</li></ol><p>相似之处：网络的网络</p><p>不同之处：</p><table><thead><tr><th>互联网(Internet)</th><th align="center">互连网(internet)</th></tr></thead><tbody><tr><td>特指采用TCP/IP标准、利用路由器将各种计算机网络互连起来而形成的、一个覆盖全球的、特定的互连网</td><td align="center">泛指由多个不同类型的计算机网络互连而成的网络</td></tr><tr><td>使用TCP/IP</td><td align="center">除TCP/IP外，可使用其他协议</td></tr><tr><td>专有名词</td><td align="center">通用名词</td></tr></tbody></table><h3 id="3-2-互联网基础结构发展的三个阶段"><a href="#3-2-互联网基础结构发展的三个阶段" class="headerlink" title="3.2 互联网基础结构发展的三个阶段"></a>3.2 互联网基础结构发展的三个阶段</h3><h4 id="第一阶段"><a href="#第一阶段" class="headerlink" title="第一阶段"></a>第一阶段</h4><p><b style="color:red">从单个网络ARPANET向互联网发展的过程。</b></p><ol><li>1983年，TCP/IP协议成为ARPANET上的标准协议，使得所有TCP、IP协议的计算机都能利用互连网相互通信。</li><li>人们把1983年作为互联网的诞生时间。</li><li>1990年，ARPANET正式宣布关闭。</li></ol><h4 id="第二阶段"><a href="#第二阶段" class="headerlink" title="第二阶段"></a>第二阶段</h4><p>建立了三级结构的互联网</p><p>如图所示</p><p><img src="https://pic.imgdb.cn/item/613b70be44eaada739664181.jpg"></p><p>上图是一个三级计算机网络，分为主干网、地区网和校园网。</p><h4 id="第三阶段"><a href="#第三阶段" class="headerlink" title="第三阶段"></a>第三阶段</h4><p>逐渐形成了多层次ISP结构的互联网</p><ol><li>出现了互联网服务提供商ISP（Internet Service Provider）</li><li>任何机构和个人只要向ISP交纳规定费用，就可以从该ISP获取所需IP地址的使用权，并能够通过该ISP接入到互联网</li><li>根据提供服务的覆盖面积和所拥有的IP地址数目的不同，ISP可以分成不同层次的ISP:主干ISP、地区ISP和本地ISP</li></ol><p>示意图：</p><p><img src="https://pic.imgdb.cn/item/613b724544eaada739699b58.jpg"></p><p>IXP:互联网交换点。作用是允许两个网络直接相连并交换分组，而不用通过它们的上层ISP来转发分组。（可以少给上一层交钱）</p><h3 id="3-3-互联网的标准化工作"><a href="#3-3-互联网的标准化工作" class="headerlink" title="3.3  互联网的标准化工作"></a>3.3  互联网的标准化工作</h3><p>互联网的标准化工作对互联网的发展起到了非常重要的作用</p><p>所有的互联网标准都以RFC的形式在互联网上发表。</p><p>之前要经过三个阶段：</p><ol><li>互联网草案：有效期只有六个月。还不是RFC文档</li><li>建议标准：开始成为RFC文档</li><li>互联网标准：达到正式标准后，每个标准分配一个编号STD xxxx。一个标准可以和多个RFC文档关联。</li></ol><p>现在没有互联网草案阶段，只需要建议标准、互联网标准两个阶段即可。</p><h2 id="4-互联网的组成"><a href="#4-互联网的组成" class="headerlink" title="4. 互联网的组成"></a>4. 互联网的组成</h2><p>可以划分为两大块（按互联网的工作方式来分）：</p><ul><li><strong>边缘部分</strong>：由所有连接在互联网上的主机组成，这部分是用户直接使用的。</li><li><strong>核心部分</strong>：由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供连通性和交换等服务的。</li></ul><h3 id="4-1-互联网的边缘部分"><a href="#4-1-互联网的边缘部分" class="headerlink" title="4.1 互联网的边缘部分"></a>4.1 互联网的边缘部分</h3><p>处在互联网边缘的部分是连接在互联网上的所有主机（不只是电脑，可以是智能手机、网络摄像头等）。这些主机也被称为<strong>端系统</strong>。</p><p><strong>端系统之间的通信</strong>：运行在主机A上的某个程序和运行在主机B上的某个程序进行通信。</p><p>端系统之间的通信方式可划分为两类：</p><h4 id="客户-服务器方式（C-S方式）"><a href="#客户-服务器方式（C-S方式）" class="headerlink" title="客户-服务器方式（C/S方式）"></a>客户-服务器方式（C/S方式）</h4><p>即Client/Server方式。</p><ul><li><strong>客户</strong>和<strong>服务器</strong>都是指通信中的两个应用进程。</li><li>客户-服务器方式描述的是进程之间服务和被服务的关系</li><li>客户是<strong>服务的请求方</strong>，服务器是<strong>服务的提供方</strong>。</li></ul><p><b style="color: red">服务请求方和服务提供方都需要使用网络核心部分所提供的服务</b>。</p><p><img src="https://pic.imgdb.cn/item/6146e7b32ab3f51d919ec153.jpg"></p><p><strong>客户软件的特点</strong>：</p><ul><li><p>被用户调用后运行，通信前主动向服务器发起通信（请求服务）。所以，<b style="color: red">客户程序需要知道服务器的地址</b></p></li><li><p>不需要很复杂的操作系统，也不需要特别强大的硬件</p></li></ul><p><strong>服务器软件的特点</strong>：</p><ul><li>一种专门用来提供服务的程序，可同时处理多个请求</li><li>系统启动后会一直持续运行，等待并接受客户的通信请求。<b style="color: red">服务器程序不需要知道客户程序的地址</b></li><li>需要高级的操作系统和强大的硬件支持</li></ul><p><b style="color: red">客户和服务器的通信关系建立后，客户和服务器都可以发送和接收数据</b></p><h4 id="对等方式（P2P方式）"><a href="#对等方式（P2P方式）" class="headerlink" title="对等方式（P2P方式）"></a>对等方式（P2P方式）</h4><p>即Peer-to-Peer方式。</p><ul><li><p><strong>对等连接</strong>是指两个主机在通信时不会区分谁是服务请求方和谁是服务提供方</p></li><li><p>只要两个主机都运行了对等连接软件，他们就可以进行**平等的、对等连接通信</p></li><li><p>双方都可以下载对方存储在硬盘中的共享文档</p><p><img src="https://pic.imgdb.cn/item/6147eeb92ab3f51d9161f825.jpg"></p></li></ul><p><strong>对等连接方式的特点</strong>：</p><ul><li>对等连接中的<b style="color: red">每一个主机既是客户，又是服务器</b></li><li>主机C请求D的服务时，C是客户，D是服务器。C同时向F提供服务时，C同时又起着服务器的作用</li></ul><p><b style="color: red">对等连接工作方式可支持大量对等用户（如上百万个）同时工作</b></p><h3 id="4-2-互联网的核心部分"><a href="#4-2-互联网的核心部分" class="headerlink" title="4.2 互联网的核心部分"></a>4.2 互联网的核心部分</h3><ul><li>网络核心部分是互联网最复杂的部分</li><li>网络中的核心部分要向网络边缘中的大量主机提供连通性，使边缘部分中的任何主机都能和其他主机通信</li><li><strong>路由器</strong>在网络核心部分起着特殊作用</li><li>路由器是实现<strong>分组交换</strong>的关键构件，任务是<b style="color: red">转发收到的分组</b>，这是网络核心部分最重要的功能。</li></ul><p>典型的交换技术包括：</p><ol><li>电路交换</li><li>分组交换</li><li>报文交换</li></ol><p><b style="color: red">互联网的核心部分采用了分组交换技术</b></p><ol><li><p><b style="color: red">电路交换</b><strong>：每一部电话都直接连接到交换机上，而交换机通过</strong>交换**的方法，让电话用户彼此之间可以很方便地通信。</p><ul><li><p>主要特点：需要互相通话的2部电话机需要一对电线直接连接</p><p>N部电话机需要实现两两互相通话，需要<strong>N(N-1)/2</strong>对电线</p><p>当电话机的数量增多时，要使用<strong>交换机</strong>来完成全网的交换任务。</p><p><img src="https://pic.imgdb.cn/item/6147f4a32ab3f51d916b66e8.jpg"></p></li><li><p>交换机的<strong>交换</strong>：把一条电话线转接到另一条，使它们连通起来。（交换机知道那两个电话机需要通话后，把它们的线配对）。按照某种方式<strong>动态地分配</strong>传输线路的资源</p></li><li><p><strong>电路交换特点</strong>：</p><ul><li><p>电路交换是<strong>面向连接</strong>的</p></li><li><p>电路交换分为三个阶段</p><ol><li><strong>建立连接</strong>：建立一条专用的物理通路，保证通话时的通信资源在通信时不会被占用</li><li><strong>通信</strong></li><li><strong>释放连接</strong>：使用通信的时候占用的所有通信资源</li></ol><p><img src="https://pic.imgdb.cn/item/6147f56f2ab3f51d916ca838.jpg"></p></li><li><p>计算机数据具有突发性，导致在传送计算机数据时，通信线路的利用率很低（传数据的时间不到10%，甚至不到1%）</p></li></ul></li></ul></li><li><p><b style="color: red">分组交换</b></p><p>主要特点：</p><ul><li><p>采用<strong>存储转发</strong>技术</p></li><li><p>在发送端，先把长报文<strong>划分成短的、固定长度的数据段</strong></p><ul><li><p>在一个数据段前面添加上<strong>首部</strong>构成<strong>分组</strong>。</p><p><img src="https://pic.imgdb.cn/item/6147f7462ab3f51d916f7f8a.jpg"></p></li><li><p>分组交换以<strong>分组</strong>作为数据传输单元，依次把各分组发送到接收端</p></li></ul></li><li><p>接收端收到分组后，把分组的首部剥去，把收到的数据还原成报文</p></li></ul><p>分组交换的传输单元：</p><ul><li>每一个分组的首部都含有地址（目的地址和源地址）等控制信息</li><li>分组交换网中的节点交换机根据收到的分组首部中的地址信息，把分组<strong>转发</strong>到下一个节点转换机</li><li>每个分组在互联网中<strong>独立选择传输路径</strong></li><li>用这样的存储转发的方式，最后分组就能到达最终目的地</li></ul><p><img src="https://pic.imgdb.cn/item/6148a87f2ab3f51d9192bd75.jpg"></p><p><img src="C:\Users\CZH0318\AppData\Roaming\Typora\typora-user-images\image-20210920233318396.png" alt="image-20210920233318396"></p><p>假如上图b中的主机要向主机5发送数据：</p><ol><li>主机H1先将分组逐个地发往与它直接相连的路由器A，当分组正在H1–A链路上传送时，链路H1–A会被占用，其他空闲时间，链路H1–A也可以为其他主机发送的分组使用</li><li>路由器把主机H1发来的分组放入缓存。在路由表A的转发表中查找下一个转发点，假如是C,所以会把分组转发到链路A–C。分组传送给路由器C。当分组在链路A–C传送时，该分组不占用网络其他部分的资源。</li><li>路由器C继续按上面的方式查找转发表，假设要转发给路由器E。当分组到达E后，E会把分组直接交给主机H5。</li></ol><p><b style="color: red">分组传送过程中，如果出现链路A–C的通信量太大，路由器A可以换路走（先转发到路由器B，再到E，再到H5）</b></p><p>在网络中可以同时有多台主机进行通信。</p><p>上面路由器处理分组的过程精简化：</p><p><img src="https://pic.imgdb.cn/item/6148ad502ab3f51d919badf7.jpg"></p><p><strong>主机和路由器的作用不同</strong>：</p><ul><li>主机是<strong>为用户进行信息处理的</strong>，并向网络发送分组，从网络接受分组</li><li>路由器对分组进行<strong>存储转发</strong>，最后把分组交给目的主机</li></ul><p><img src="https://pic.imgdb.cn/item/6148adf82ab3f51d919d1005.jpg"></p><p><strong>分组交换带来的问题</strong>：</p><ul><li>分组在各节点存储转发时需要排队，会造成一定的时延</li><li>分组必须携带的首部也会造成一定的开销</li></ul><p><img src="https://pic.imgdb.cn/item/6148aea22ab3f51d919ee664.jpg"></p><p><strong>三种交换的比较</strong>：</p><ul><li>要连续传输大量的数据，而且传送时间远远大于连接建立时间的话，电路交换的传输速率较快</li><li>报文转换和分组转换不需要预先分配传输带宽，在传送突发数据时可以提高整个网络的信道利用率</li><li>y因为一个分组的长度往往小于整个报文的长度，所以分组交换比报文交换的时延小，同时还具有更好的灵活性</li></ul></li></ol><h2 id="5-几种不同类别计算机网络"><a href="#5-几种不同类别计算机网络" class="headerlink" title="5. 几种不同类别计算机网络"></a>5. 几种不同类别计算机网络</h2><h3 id="5-1-按照网络的作用范围分类"><a href="#5-1-按照网络的作用范围分类" class="headerlink" title="5.1 按照网络的作用范围分类"></a>5.1 按照网络的作用范围分类</h3><ul><li><strong>广域网WAN</strong>(Wide Area Network)：作用范围通常是几十到几千公里</li><li><strong>城域网MAN</strong>(Metropolitan Area Network)：作用范围5到50公里</li><li><strong>局域网LAN</strong>(Local Area Network)：作用范围1公里左右</li><li><strong>个人局域网PAN</strong>(Personal Area Network)：作用范围10米左右</li></ul><p><strong>多处理机系统</strong>：中央处理机之间的距离非常小（如1米的数量级及以下），不称为计算机网络</p><h3 id="5-2-按照网络的使用者分类"><a href="#5-2-按照网络的使用者分类" class="headerlink" title="5.2 按照网络的使用者分类"></a>5.2 按照网络的使用者分类</h3><ul><li>公用网：按规定交纳费用的人可以使用的网络，也称公众网</li><li>专用网：为特殊业务工作的需要而建的网络</li></ul><h3 id="5-3-用来把用户接入到互联网的网络"><a href="#5-3-用来把用户接入到互联网的网络" class="headerlink" title="5.3 用来把用户接入到互联网的网络"></a>5.3 用来把用户接入到互联网的网络</h3><ul><li><strong>接入网AN</strong>(Access Network)：又称本地接入网或居民接入网</li><li>接入网是一类特殊的计算机网络，用于将用户接入互联网</li><li>接入网既不属于互联网的核心部分。也不属于互联网的边缘部分</li><li>接入网是从某个用户端系统到互联网中的<strong>第一个路由器</strong>（也称边缘路由器）之间的一种网络</li></ul><h2 id="6-计算机网络的性能"><a href="#6-计算机网络的性能" class="headerlink" title="6. 计算机网络的性能"></a>6. 计算机网络的性能</h2><h3 id="6-1-计算机网络的性能指标"><a href="#6-1-计算机网络的性能指标" class="headerlink" title="6.1 计算机网络的性能指标"></a>6.1 计算机网络的性能指标</h3><ol><li><p><strong>速率</strong></p><ul><li>比特(bit)是计算机中数据量的单位</li><li>速率是计算机网络中最重要的一个性能指标，指的是<strong>数据的传输速率</strong>，也称为<strong>数据率</strong>或<strong>比特率</strong></li><li>速率的单位是bit / s、kbit / s、Mbit / s、Gbit / s等</li><li>速率往往是指额定速率或标称速率，非实际运行速率</li></ul></li><li><p><strong>带宽</strong></p><p>两种意义：</p><ul><li>带宽本来是指信号具有的<strong>频带宽度</strong>，单位是赫</li><li>在计算机网络中，带宽用来表示网络中某通道传送数据的能力，表示在单位时间内网络中的某信道所能通过的”最高数据率”。单位是bit / s</li></ul></li><li><p><strong>吞吐量</strong></p><ul><li>吞吐量表示在单位时间内通过某个网络(或信道、接口)的数据量</li><li>根据吞吐量可以知道<strong>实际上有多少数据量可以通过网络</strong></li><li><strong>吞吐量受网络的带宽或网络的额定功率的限制</strong></li></ul></li><li><p><strong>时延</strong></p><ul><li><p>时延是指数据从网络的一段到另一端所需的时间</p></li><li><p>网络中的时延由以下几个部分组成</p><ol><li><p>发送时延</p><ul><li>也称<strong>传输时延</strong></li><li>发送数据时，数据帧从节点进入到传输媒体所需要的时间</li><li><img src="https://pic.imgdb.cn/item/6148b71a2ab3f51d91c2f7bf.jpg"></li></ul></li><li><p>传播时延</p><ul><li>电磁波在信道中传输一定距离而花费的时间</li><li>信号的<strong>发送速率</strong>和信号在信道上的<strong>传播速率</strong>是<strong>完全不同</strong>的概念</li><li><img src="https://pic.imgdb.cn/item/6148b7a22ab3f51d91c59dd2.jpg"></li></ul></li><li><p>处理时延</p><ul><li>主机或路由器在收到分组时，为处理分组（如分析首部、提取数据、差错检验、查找路由）所花费的时间</li></ul></li><li><p>排队时延</p><ul><li>分组在路由器输入输出队列中<strong>排队等待处理</strong>所经历的时延</li><li><strong>排队时延的长短取决于网络中当时的通信量</strong></li></ul></li></ol></li></ul></li></ol><p><b style="color: red">总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延</b></p><p>四种时延产生的地方：</p><p><img src="https://pic.imgdb.cn/item/6148b8d62ab3f51d91cb13d8.jpg"></p><p>对于高速网络链路，提高的只是数据的发送速率而不是数据在链路上的传播速率</p><p>提高链路带宽减小了数据的发送时延</p><ol start="5"><li><p><strong>时延带宽积</strong></p><p>链路的时延带宽积又称为<strong>以比特为单位的链路长度</strong></p><p><img src="https://pic.imgdb.cn/item/6148b9db2ab3f51d91cfba7d.jpg"></p></li><li><p><strong>往返时间</strong></p><ul><li><strong>往返时间RTT</strong>(round-trip time)表示从发送方发送数据开始，到发送方收到来自接收方的确认，经历的时间</li><li>在互联网中，往返时间还包括个中间节点的处理时延、排队时延以及转发数据是的发送时延</li><li>在使用卫星通信是，RTT相对较长，是很重要的一个性能指标</li></ul></li><li><p><strong>利用率</strong></p><ul><li>分为<strong>信道利用率</strong>和<strong>网络利用率</strong></li><li>信道利用率是指某一信道有百分之几的时间是被利用的(有数据通过)</li><li>网络利用率是全网络的信道利用率的加权平均值3</li><li>信道利用率不是越高越好。当信道的利用率增大时，引起的时延也会随之增加</li></ul><p>时延与利用率的关系</p><p><img src="https://pic.imgdb.cn/item/6148bbea2ab3f51d91d5a8b1.jpg"></p></li></ol><h3 id="6-2-计算机网络的非性能指标"><a href="#6-2-计算机网络的非性能指标" class="headerlink" title="6.2 计算机网络的非性能指标"></a>6.2 计算机网络的非性能指标</h3><ul><li>费用</li><li>质量</li><li>标准化</li><li>可靠性</li><li>可扩展性和可升级性</li><li>易于管理与维护</li></ul>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>响应式布局</title>
      <link href="/2021/09/25/Responsive-Layout/"/>
      <url>/2021/09/25/Responsive-Layout/</url>
      
        <content type="html"><![CDATA[<h1 id="响应式布局"><a href="#响应式布局" class="headerlink" title="响应式布局"></a>响应式布局</h1><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>使用媒体查询针对不同宽度的设备进行布局和样式的设置，从而适配不同设备。</p><table><thead><tr><th>设备</th><th align="center">尺寸区间</th></tr></thead><tbody><tr><td>手机</td><td align="center">&lt;768px</td></tr><tr><td>平板</td><td align="center">[768px, 992px)</td></tr><tr><td>桌面显示器</td><td align="center">[992px, 1200px)</td></tr><tr><td>大桌面显示器(电脑)</td><td align="center">&gt;=1200px</td></tr></tbody></table><h2 id="响应式布局容器"><a href="#响应式布局容器" class="headerlink" title="响应式布局容器"></a>响应式布局容器</h2><p>响应式布局需要一个父级作为布局容器，让子级元素实现变化效果</p><p><b style="color: red">原理</b>：在不同屏幕下，通过媒体查询来改变布局容器的大小，再改变里面子元素的排列方式和大小，从而实现在不同大小的屏幕下，看到不同的页面布局和样式。</p><p>常用的响应式尺寸划分：</p><table><thead><tr><th>设备</th><th align="center">尺寸区间</th><th align="center">宽度设置</th></tr></thead><tbody><tr><td>手机</td><td align="center">&lt;768px</td><td align="center">100%</td></tr><tr><td>平板</td><td align="center">[768px, 992px)</td><td align="center">750px</td></tr><tr><td>桌面显示器</td><td align="center">[992px, 1200px)</td><td align="center">970px</td></tr><tr><td>大桌面显示器(电脑)</td><td align="center">&gt;=1200px</td><td align="center">1170px</td></tr></tbody></table><p>除了手机的宽度设置是100%外，其他设备的宽度设置都会比设备的尺寸区间最小值小一点，原因是留空一点，不占满屏幕，然后容器可以居中显示。</p><p>例子：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Myself<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">        * &#123;</span><br><span class="css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span><br><span class="css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;</span><br><span class="css">            <span class="hljs-attribute">background-color</span>: pink;</span><br><span class="css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-comment">/*媒体查询，根据设备的宽度设置容器的宽度*/</span></span><br><span class="css">        <span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">767px</span>) &#123;</span><br><span class="css">            <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">            &#125;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) &#123;</span><br><span class="css">            <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">750px</span>;</span><br><span class="css">            &#125;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">992px</span>) &#123;</span><br><span class="css">            <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">970px</span>;</span><br><span class="css">            &#125;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">1200px</span>) &#123;</span><br><span class="css">            <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">1170px</span>;</span><br><span class="css">            &#125;</span><br><span class="css">        &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="Bootstrap"><a href="#Bootstrap" class="headerlink" title="Bootstrap"></a>Bootstrap</h2><p>Bootstrap 是最受欢迎的 HTML、CSS 和 JS 框架，用于开发响应式布局、移动设备优先的 WEB 项目。</p><h3 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h3><ol><li><p><a href="https://v3.bootcss.com/">下载Bootstrap</a></p></li><li><p>把会用到的文件夹放到要用的站点文件夹下</p><p><img src="https://pic.imgdb.cn/item/614451aa2ab3f51d91d17745.jpg"></p><p>另外，要防止低版本ie没办法用h5、css3的新东西，导致出问题，html骨架需要加点料。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 要求当前网页使用IE浏览器最高版本的内核来渲染 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 视口标签的设置：视口的宽度和设备一致，默认的缩放比例和PC端一致，用户不能自行缩放 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0, user-scalable=0&quot;</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--[if lt IE 9]&gt;</span><br><span class="hljs-comment">  &lt;script src=&quot;https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">  &lt;script src=&quot;https://oss.maxcdn.com/respond/1.4.2/respond.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">&lt;![endif]--&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Myself<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br></code></pre></td></tr></table></figure><p><b style="color: red">注意！这里if这一段是注释，但是，注释的部分只是说浏览器不渲染，不显示被注释的代码，但是，浏览器还是回去读注释的代码的（刷新想法）</b></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 解决ie9以下浏览器对html5新增标签的不识别，并导致CSS不起作用的问题 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 解决ie9以下浏览器对css3 Media Query的不识别 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://oss.maxcdn.com/respond/1.4.2/respond.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>引入要用的css文件等</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../bootstrap-3.4.1-dist/css/bootstrap.min.css&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>在<a href="https://v3.bootcss.com/css/">全局 CSS 样式</a>中选要用的东西，复制对应标签</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-danger&quot;</span>&gt;</span>（危险）Danger<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>根据自己需要修改</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">     <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="css">         <span class="hljs-attribute">width</span>: <span class="hljs-number">750px</span>;</span><br><span class="css">         <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;</span><br><span class="css">     &#125;</span><br><span class="css"></span><br><span class="css">     <span class="hljs-selector-class">.blue</span> &#123;</span><br><span class="css">         <span class="hljs-attribute">background-color</span>: skyblue <span class="hljs-meta">!important</span>;</span><br><span class="css">     &#125;</span><br><span class="css"> </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-danger blue&quot;</span>&gt;</span>登录<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><p>组件使用例子：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 字体图标 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;glyphicon glyphicon-ok&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 巨幕 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;jumbotron&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, world!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>One plus one equals two!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-primary btn-lg&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;button&quot;</span>&gt;</span>Learn more<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="Bootstrap布局容器"><a href="#Bootstrap布局容器" class="headerlink" title="Bootstrap布局容器"></a>Bootstrap布局容器</h3><p>Bootstrap预定义了两个container容器</p><ol><li><strong>container类</strong><ul><li>响应式布局的容器，固定宽度</li><li>大屏(电脑)(&gt;=1200px)：宽度固定为1170px</li><li>中屏(桌面显示器)(&gt;=992px)：宽度固定为970px</li><li>小屏(平板)(&gt;=768px)：宽度固定为750px</li><li>超小屏(手机)(&lt;768px)：宽度固定为100%</li></ul></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 要求当前网页使用IE浏览器最高版本的内核来渲染 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 视口标签的设置：视口的宽度和设备一致，默认的缩放比例和PC端一致，用户不能自行缩放 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0, user-scalable=0&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--[if lt IE 9]&gt;</span><br><span class="hljs-comment">    &lt;script src=&quot;https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">    &lt;script src=&quot;https://oss.maxcdn.com/respond/1.4.2/respond.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">    &lt;![endif]--&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Myself<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;</span><br><span class="css">            <span class="hljs-attribute">background-color</span>: pink;</span><br><span class="css">        &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../bootstrap-3.4.1-dist/css/bootstrap.min.css&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>上面的例子等价于响应式布局容器的例子，简单来说就是，有大佬已经把它封装好了，可以直接用</p><ol start="2"><li><strong>container-fluid类</strong><ul><li>流式布局容器，100%宽度</li><li>占据全部视口(viewport)的容器</li><li>适合于单独做移动端开发</li></ul></li></ol><h3 id="栅格系统"><a href="#栅格系统" class="headerlink" title="栅格系统"></a>栅格系统</h3><p>栅格系统是将页面布局划分为等宽的列，然后通过列数的定义来模块化页面布局。</p><p>Bootstrap提供了一套响应式、移动设备优先的流动栅格系统，会把container分为12列。</p><p>栅格系统通过一系列的行(row)和列(column)的组合来创建页面布局。</p><p>规则：</p><ul><li><p>行(row)必须要放在container布局容器里面</p></li><li><p>要实现列的平均划分，需要给类添加<b style="color: red">类前缀</b></p></li></ul><table><thead><tr><th>设备</th><th align="center">尺寸区间</th><th align="center">宽度设置</th><th align="center">类前缀</th></tr></thead><tbody><tr><td>手机</td><td align="center">&lt;768px</td><td align="center">100%</td><td align="center">.col-xs-</td></tr><tr><td>平板</td><td align="center">[768px, 992px)</td><td align="center">750px</td><td align="center">.col-sm-</td></tr><tr><td>桌面显示器</td><td align="center">[992px, 1200px)</td><td align="center">970px</td><td align="center">.col-md-</td></tr><tr><td>大桌面显示器(电脑)</td><td align="center">&gt;=1200px</td><td align="center">1170px</td><td align="center">.col-lg-</td></tr></tbody></table><ul><li>xs(extra small)：超小；sm(small)：小；md(medium)：中等；lg(large)：大</li><li>列的总和大于12的话，多余的列会另起一行排列</li><li>每一列默认有左右15像素的padding</li><li>可以同时为一列指定多个设备的类名，例如<code>class=&quot;col-md-4 col-sm-6&quot;</code></li></ul><p>例子</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 要求当前网页使用IE浏览器最高版本的内核来渲染 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 视口标签的设置：视口的宽度和设备一致，默认的缩放比例和PC端一致，用户不能自行缩放 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0, user-scalable=0&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--[if lt IE 9]&gt;</span><br><span class="hljs-comment">    &lt;script src=&quot;https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">    &lt;script src=&quot;https://oss.maxcdn.com/respond/1.4.2/respond.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">    &lt;![endif]--&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Myself<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-selector-attr">[class^=<span class="hljs-string">&quot;col&quot;</span>]</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.container</span>&gt;<span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>) <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">background-color</span>: pink;</span><br><span class="css">        &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../bootstrap-3.4.1-dist/css/bootstrap.min.css&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-3 col-md-4 col-sm-6 col-xs-12&quot;</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-3 col-md-4 col-sm-6 col-xs-12&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-3 col-md-4 col-sm-6 col-xs-12&quot;</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-3 col-md-4 col-sm-6 col-xs-12&quot;</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-6&quot;</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-1&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-1&quot;</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-4&quot;</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-comment">&lt;!-- 总份数小于12 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-3&quot;</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-3&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-3&quot;</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-1&quot;</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>        <span class="hljs-comment">&lt;!-- 总份数大于12 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-5&quot;</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-5&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-3&quot;</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-lg-3&quot;</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="列嵌套"><a href="#列嵌套" class="headerlink" title="列嵌套"></a>列嵌套</h3><p>栅格系统可以将一个列再分成若干个小列。</p><p>例子：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 要求当前网页使用IE浏览器最高版本的内核来渲染 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 视口标签的设置：视口的宽度和设备一致，默认的缩放比例和PC端一致，用户不能自行缩放 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0, user-scalable=0&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--[if lt IE 9]&gt;</span><br><span class="hljs-comment">    &lt;script src=&quot;https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">    &lt;script src=&quot;https://oss.maxcdn.com/respond/1.4.2/respond.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">    &lt;![endif]--&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Myself<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-selector-attr">[class^=<span class="hljs-string">&quot;col&quot;</span>]</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.row</span> <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">background-color</span>: pink;</span><br><span class="css">        &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../bootstrap-3.4.1-dist/css/bootstrap.min.css&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-3&quot;</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- 直接把列分成小列，会出现小列无法铺满原来的列，因为小列的父元素会有padding值 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-6&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: red&quot;</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-6&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: red&quot;</span>&gt;</span>12<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-3&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-3&quot;</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-3&quot;</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-3&quot;</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- 把列分成行后，再把行分成小列，可以实现取消父元素的padding值 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-6&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: red&quot;</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-6&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: red&quot;</span>&gt;</span>12<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-3&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-3&quot;</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-3&quot;</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="列偏移"><a href="#列偏移" class="headerlink" title="列偏移"></a>列偏移</h3><p>使用<code>类前缀-offset-*类</code>可以将列向右侧偏移，这些类实际是通过*选择器为当前元素增加了左边距（margin）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 要求当前网页使用IE浏览器最高版本的内核来渲染 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 视口标签的设置：视口的宽度和设备一致，默认的缩放比例和PC端一致，用户不能自行缩放 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0, user-scalable=0&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--[if lt IE 9]&gt;</span><br><span class="hljs-comment">    &lt;script src=&quot;https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">    &lt;script src=&quot;https://oss.maxcdn.com/respond/1.4.2/respond.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">    &lt;![endif]--&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Myself<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-selector-attr">[class^=<span class="hljs-string">&quot;col&quot;</span>]</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.row</span> <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">background-color</span>: pink;</span><br><span class="css">        &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../bootstrap-3.4.1-dist/css/bootstrap.min.css&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- 两个div，空出中间一块，只需要右边的盒子偏移 12 - 左盒子占的份数 - 右盒子占的份数即可 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-4&quot;</span>&gt;</span>左<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-4 col-md-offset-4&quot;</span>&gt;</span>右<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>            <span class="hljs-comment">&lt;!-- 一个盒子占中间位置，只需给这个盒子偏移 (12 - 盒子占的份数) / 2即可 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-6 col-md-offset-3&quot;</span>&gt;</span>中<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="列排序"><a href="#列排序" class="headerlink" title="列排序"></a>列排序</h3><p>使用<code>类前缀-push-*和类前缀-pull-*</code>可以改变列的顺序（<b style="color: red">往左边是pull，往右边是push,写错的话得不到预期的结果</b>）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 要求当前网页使用IE浏览器最高版本的内核来渲染 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 视口标签的设置：视口的宽度和设备一致，默认的缩放比例和PC端一致，用户不能自行缩放 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0, user-scalable=0&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--[if lt IE 9]&gt;</span><br><span class="hljs-comment">    &lt;script src=&quot;https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">    &lt;script src=&quot;https://oss.maxcdn.com/respond/1.4.2/respond.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">    &lt;![endif]--&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Myself<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-selector-attr">[class^=<span class="hljs-string">&quot;col&quot;</span>]</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.row</span> <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">background-color</span>: pink;</span><br><span class="css">        &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../bootstrap-3.4.1-dist/css/bootstrap.min.css&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- 两个div，空出中间一块，只需要右边的盒子偏移 12 - 左盒子占的份数 - 右盒子占的份数即可 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-4 &quot;</span>&gt;</span>左<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-5 col-md-offset-3&quot;</span>&gt;</span>右<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- 想要把左右盒子互换位置，可以pull(拉)右边的盒子过来，拉的份数为左盒子的份数 + 右盒子的偏移份数</span><br><span class="hljs-comment">            push(推)左边的盒子过去，推的份数为右盒子的份数 + 右盒子的偏移份数 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-4 col-md-push-8&quot;</span>&gt;</span>左<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-md-5 col-md-offset-3 col-md-pull-7&quot;</span>&gt;</span>右<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="隐藏和显示内容"><a href="#隐藏和显示内容" class="headerlink" title="隐藏和显示内容"></a>隐藏和显示内容</h3><p><img src="https://pic.imgdb.cn/item/6145f81a2ab3f51d91fed067.jpg"></p><p>和上面相反的是visible-xs, visible-sm, visible-md, visible-lg，显示内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 要求当前网页使用IE浏览器最高版本的内核来渲染 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 视口标签的设置：视口的宽度和设备一致，默认的缩放比例和PC端一致，用户不能自行缩放 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0, user-scalable=0&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--[if lt IE 9]&gt;</span><br><span class="hljs-comment">    &lt;script src=&quot;https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">    &lt;script src=&quot;https://oss.maxcdn.com/respond/1.4.2/respond.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-comment">    &lt;![endif]--&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Myself<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-selector-attr">[class^=<span class="hljs-string">&quot;col&quot;</span>]</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.row</span> <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">background-color</span>: pink;</span><br><span class="css">        &#125;</span><br><span class="css"></span><br><span class="css">        <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;</span><br><span class="css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="css">        &#125;</span><br><span class="css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../bootstrap-3.4.1-dist/css/bootstrap.min.css&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-xs-4&quot;</span>&gt;</span><br>                1<br>                <span class="hljs-comment">&lt;!-- 超小屏（手机）才会显示 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;visible-xs&quot;</span>&gt;</span>Hello! 手机<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>            <span class="hljs-comment">&lt;!-- 小屏和大屏会隐藏 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-xs-4 hidden-sm hidden-lg&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;col-xs-4&quot;</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>参考：<br>pink老师前端入门教程</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 布局 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>事件</title>
      <link href="/2021/09/09/javascript-Event/"/>
      <url>/2021/09/09/javascript-Event/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript事件"><a href="#JavaScript事件" class="headerlink" title="JavaScript事件"></a>JavaScript事件</h1><h2 id="注册事件（绑定事件）"><a href="#注册事件（绑定事件）" class="headerlink" title="注册事件（绑定事件）"></a>注册事件（绑定事件）</h2><p>给元素添加事件，称为注册事件或者绑定事件。</p><p>有传统方式和方法监听方式</p><h3 id="传统方式"><a href="#传统方式" class="headerlink" title="传统方式"></a>传统方式</h3><p>利用on开头的事件，如onclick, 同一个元素同一个事件只能设置一个处理函数，出现多个处理函数的话，后面的会覆盖前面的。</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;script&gt;<br>       var btn = document.querySelector(&quot;button&quot;);<br>       btn.onclick = function () &#123;<br>           console.log(1);<br>       &#125;;<br>       btn.onclick = function () &#123;<br>           console.log(2);<br>       &#125;<br>       //结果是2<br>   &lt;/script&gt;<br><br><br></code></pre></td></tr></table></figure><h3 id="方法监听注册方式"><a href="#方法监听注册方式" class="headerlink" title="方法监听注册方式"></a>方法监听注册方式</h3><h4 id="addEventListener"><a href="#addEventListener" class="headerlink" title="addEventListener():"></a>addEventListener():</h4><p><code>eventTarget.addEventListener(type, listener[, useCapture])</code></p><p>type: 事件类型字符串，如click、mouseover等，不带on</p><p>listener: 事件处理函数，事件发生会调用该监听函数</p><p>useCapture: 可选参数，是一个布尔值，默认是false。决定监听器的触发阶段是捕获阶段还是冒泡阶段<a href="#anchor">详见</a>。</p><p>addEventListener() 是 W3C DOM 规范中提供的注册事件监听器的方法。</p><p>优点：</p><ol><li>允许给一个事件注册多个监听器</li></ol><p>例子：</p><p>addEventListener:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">      const btn = document.getElementById(&quot;btn&quot;);<br><br>      btn.addEventListener(&quot;click&quot;, function () &#123;<br>          console.log(1);<br>      &#125;);<br>      btn.addEventListener(&quot;click&quot;, function () &#123;<br>          console.log(1);<br>      &#125;);<br><br>//结果：1, 1<br><br></code></pre></td></tr></table></figure><p>此处是个人见解：</p><p>当两个监听函数一样时，由上可发现会输出两次1,这个其实是因为上面两个匿名函数看似一样，实际它们所开辟的内存空间不一样。</p><p>把相同的方法抽出来后会发现，无法实现多个监听，就是因为两个方法变成完全一样了。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>   const btn = document.getElementById(&quot;btn&quot;);<br><br>   btn.addEventListener(&quot;click&quot;, fn)<br>   btn.addEventListener(&quot;click&quot;, fn)<br>   <br>   function fn() &#123;<br>     console.log(1);<br>   &#125;<br><br>//结果：1<br><br></code></pre></td></tr></table></figure><ol start="2"><li>可以控制监听器的触发阶段（可选捕获或冒泡）</li><li>对任何 DOM 元素都是有效的，而不仅仅只对 HTML 元素有效。(<b style="color:red">未找到合适案例</b>)</li></ol><p>参数是匿名函数和是箭头函数区别：</p><p>它们绑定不同的this对象。匿名函数和传统方式一样会创建独有的this对象（即触发事件的元素），而箭头函数是继承绑定它所在函数的this对象。</p><p>例子：</p><p>匿名函数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;div id=&quot;div&quot;&gt;<br>       &lt;button id=&quot;btn&quot;&gt;点击&lt;/button&gt;<br>   &lt;/div&gt;<br><br>   &lt;script&gt;<br>       const div = document.getElementById(&quot;div&quot;);<br><br>       const btn = document.getElementById(&quot;btn&quot;);<br>       div.addEventListener(&quot;mouseenter&quot;, function () &#123;<br>           console.log(this);<br>           btn.addEventListener(&quot;click&quot;, function () &#123;<br>               console.log(this);<br>           &#125;)<br>       &#125;);<br>   &lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://pic.imgdb.cn/item/612c38f844eaada739293bc3.jpg"></p><p>箭头函数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;div id=&quot;div&quot;&gt;<br>       &lt;button id=&quot;btn&quot;&gt;点击&lt;/button&gt;<br>   &lt;/div&gt;<br><br>   &lt;script&gt;<br>       const div = document.getElementById(&quot;div&quot;);<br><br>       const btn = document.getElementById(&quot;btn&quot;);<br>       div.addEventListener(&quot;mouseenter&quot;, function () &#123;<br>           console.log(this);<br>           btn.addEventListener(&quot;click&quot;, () =&gt; &#123;<br>               console.log(this);<br>           &#125;)<br>       &#125;);<br>   &lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://pic.imgdb.cn/item/612c398044eaada7392a354b.jpg"></p><h4 id="attachEvent"><a href="#attachEvent" class="headerlink" title="attachEvent():"></a>attachEvent():</h4><p><code>eventTarget.attachEvent(eventNameWithOn, callback)</code></p><p>eventNameWithOn: 事件类型字符串。如onclick、onmouseover，要带on</p><p>callback:  事件处理函数，事件发生会调用该回调函数</p><p>IE9之前的IE不支持，对应有attachEvent()，用法和addEventListener 近似，不过事件需要变回传统方式的on系列。</p><p>attachEvent缺点：this的值会变成window对象的引用而不是触发事件的元素。</p><h2 id="删除事件（解绑事件）"><a href="#删除事件（解绑事件）" class="headerlink" title="删除事件（解绑事件）"></a>删除事件（解绑事件）</h2><h3 id="传统方式-1"><a href="#传统方式-1" class="headerlink" title="传统方式"></a>传统方式</h3><p>eventTarget.onclick = null;</p><p>例子:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const btn = document.getElementById(&quot;btn&quot;);<br>      btn.onclick = function () &#123;<br>          console.log(1);<br>      &#125;;<br><br>      btn.onclick = null;<br><br></code></pre></td></tr></table></figure><h3 id="方法监听注册方式-1"><a href="#方法监听注册方式-1" class="headerlink" title="方法监听注册方式"></a>方法监听注册方式</h3><h4 id="对应addEventListener"><a href="#对应addEventListener" class="headerlink" title="对应addEventListener"></a>对应addEventListener</h4><p><code>eventTarget.removeEventListener(type, listener[, useCapture]);</code></p><p>移除完全匹配的监听，只有事件处理函数完全一样，包括开辟的内存空间。</p><p>完全匹配例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const btn = document.getElementById(&quot;btn&quot;);<br>      btn.addEventListener(&quot;click&quot;, fn); //第二个参数只要函数名就可以，不需要调用<br>      btn.removeEventListener(&quot;click&quot;, fn);<br><br>      function fn() &#123;<br>          console.log(1);<br>      &#125;<br><br></code></pre></td></tr></table></figure><p>不完全匹配例子（开辟的内存空间不一样）:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const btn = document.getElementById(&quot;btn&quot;);<br>      btn.addEventListener(&quot;click&quot;, function () &#123;<br>          console.log(1);<br>      &#125;);<br>      btn.removeEventListener(&quot;click&quot;, function () &#123;<br>          console.log(1);<br>      &#125;);<br><br></code></pre></td></tr></table></figure><h2 id="DOM事件流"><a href="#DOM事件流" class="headerlink" title="DOM事件流"></a>DOM事件流</h2><p id="anchor">事件流描述的是从页面中接收事件的顺序。</p><p>事件发生时会在元素节点之间按照特定的顺序传播，这个传播过程就是DOM事件流。</p><p>例如给一个div注册了事件：</p><p>DOM事件流分为3个阶段：</p><ol><li>捕获阶段</li><li>当前目标阶段</li><li>冒泡阶段</li></ol><p>事件捕获：网景最早提出，由DOM最顶层节点开始，然后逐级向下传播到绑定事件的元素接受的过程。</p><p>事件冒泡：IE最早提出，事件逐级向上传播到DOM最顶层节点的过程。</p><p><img src="https://pic.imgdb.cn/item/612c5ace44eaada7396858fb.jpg"></p><p>事件发生时会在元素节点之间按照特定的顺序传播，这个传播过程即DOM事件流。</p><p>注意：</p><ol><li>JS代码只能执行捕获或者冒泡其中一个阶段</li><li>onclick和attachEvent只能得到冒泡阶段</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const btn = document.getElementById(&quot;btn&quot;);<br>      btn.onclick = () =&gt; alert(1);<br>      document.body.onclick = () =&gt; alert(2);<br>      document.documentElement.onclick = () =&gt; alert(3);<br>      document.onclick = () =&gt; alert(4);<br>//点击按钮后，弹出顺序1、2、3、4<br><br></code></pre></td></tr></table></figure><ol start="3"><li>addEventListener(type, listener[, useCapture])第三个参数默认是false，表示在冒泡阶段调用事件处理程序，如果是true，则表示在事件捕获阶段调用事件处理程序。</li></ol><p>为false:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const btn = document.getElementById(&quot;btn&quot;);<br>      btn.addEventListener(&quot;click&quot;, () =&gt; alert(1), false);<br>      document.body.addEventListener(&quot;click&quot;, () =&gt; alert(2), false);<br>      document.documentElement.addEventListener(&quot;click&quot;, () =&gt; alert(3));<br>      document.addEventListener(&quot;click&quot;, () =&gt; alert(4));<br>//点击按钮后，弹出顺序1、2、3、4<br><br></code></pre></td></tr></table></figure><p>为true:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const btn = document.getElementById(&quot;btn&quot;);<br>      btn.addEventListener(&quot;click&quot;, () =&gt; alert(1), true);<br>      document.body.addEventListener(&quot;click&quot;, () =&gt; alert(2), true);<br>      document.documentElement.addEventListener(&quot;click&quot;, () =&gt; alert(3), true);<br>      document.addEventListener(&quot;click&quot;, () =&gt; alert(4), true);<br>//点击按钮后，弹出顺序4、3、2、1<br><br></code></pre></td></tr></table></figure><ol start="4"><li>有些事件是没有冒泡的，如blur, focus, mouseenter, onmouseleave</li></ol><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const btn = document.getElementById(&quot;btn&quot;);<br>      btn.addEventListener(&quot;mouseleave&quot;, () =&gt; alert(1));<br>      document.body.addEventListener(&quot;mouseleave&quot;, () =&gt; alert(2));<br>      document.documentElement.addEventListener(&quot;mouseleave&quot;, () =&gt; alert(3));<br>      document.addEventListener(&quot;mouseleave&quot;, () =&gt; alert(4));<br>//当鼠标放在按钮里后，离开按钮，只会弹出1<br><br></code></pre></td></tr></table></figure><ol start="5"><li>事件冒泡有时候会带来麻烦，可以通过 e.stopPropagation()方法阻止事件冒泡</li></ol><h2 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h2><p>事件处理函数可以带参数，带的参数就是事件对象。</p><p><code> eventTarget.onclick = function(event) &#123;&#125;</code></p><p><code>eventTarget.addEventListener(&quot;click&quot;, function(event)&#123;&#125;)</code></p><p>如上式所示，event就是事件对象，，它代表事件的状态，如键盘按键的状态、鼠标的位置、鼠标按钮的状态等。事件发生后，跟事件相关的一系列信息的集合都在这个对象里面。</p><p style="color:red">不需要传递实参</P><p>注册事件时，event对象会被系统自动创建，并依次传递给事件监听器（事件处理函数）。</p><p>在IE6~8中，浏览器不会给方法传递参数，需要的话，要到window.event中获取。</p><p>e = e || window.event;</p><h3 id="事件对象的常见属性和方法"><a href="#事件对象的常见属性和方法" class="headerlink" title="事件对象的常见属性和方法"></a>事件对象的常见属性和方法</h3><p><img src="https://pic.imgdb.cn/item/612cc0a644eaada7392c26d3.jpg"></p><p>e.target和this的区别：</p><p>this是事件绑定的元素（匿名函数形式），函数的调用者。</p><p>e.target是事件触发的元素。</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const ul = document.querySelector(&quot;ul&quot;);<br>      ul.addEventListener(&quot;click&quot;, function (e) &#123;<br>          console.log(this);<br>          console.log(e.target);<br>      &#125;);<br>//点击li里面的文字，依次打印出的是ul和li<br><br></code></pre></td></tr></table></figure><h4 id="阻止默认行为"><a href="#阻止默认行为" class="headerlink" title="阻止默认行为"></a>阻止默认行为</h4><p><code>e.preventDefault()</code></p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const a = document.querySelector(&quot;a&quot;);<br>      a.addEventListener(&quot;click&quot;, (e) =&gt; e.preventDefault());<br><br></code></pre></td></tr></table></figure><h4 id="阻止事件冒泡"><a href="#阻止事件冒泡" class="headerlink" title="阻止事件冒泡"></a>阻止事件冒泡</h4><p><code>e.stopPropagation()</code></p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const btn = document.getElementById(&quot;btn&quot;);<br>      btn.addEventListener(&quot;click&quot;, (e) =&gt; &#123;<br>          alert(1);<br>          e.stopPropagation();  //只要在事件处理函数里使用就会执行完这个函数，才阻止冒泡。<br>  //不过建议放在最后面，更有逻辑性的感觉<br>      &#125;);<br>      document.body.addEventListener(&quot;click&quot;, () =&gt; alert(2));<br>      document.documentElement.addEventListener(&quot;click&quot;, () =&gt; alert(3));<br>      document.addEventListener(&quot;click&quot;, () =&gt; alert(4));<br><br></code></pre></td></tr></table></figure><p>没加e.stopPropagation()之前会依次弹出1、2、3、4，在按钮绑定的事件中,加上之后只会弹出1</p><h3 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h3><p>事件委托也被称为事件代理，在jQuery里面称为事件委派。</p><h4 id="事件委托原理"><a href="#事件委托原理" class="headerlink" title="事件委托原理"></a>事件委托原理</h4><p>不需要给每个子结点单独设置事件监听器，而是把事件监听器设置在其父节点上，然后利用冒泡原理去影响子节点。</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const ul = document.querySelector(&quot;ul&quot;);<br>      ul.addEventListener(&quot;click&quot;, (e) =&gt; e.target.style.color = &quot;red&quot;);<br><br></code></pre></td></tr></table></figure><p>上面例子：直接给li的父节点绑定监听器，然后利用e.target找到当前点击的li，点击li，事件会冒泡到ul上，而ul上有注册事件，就会触发事件监听器。</p><h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>只需要操作一次DOM，提高了程序性能。</p><h3 id="常用的鼠标事件"><a href="#常用的鼠标事件" class="headerlink" title="常用的鼠标事件"></a>常用的鼠标事件</h3><p><img src="https://pic.imgdb.cn/item/612d849544eaada7399433ab.jpg"></p><p>ontextmenu：鼠标右键菜单，可用于取消默认的菜单</p><p>selectstart：开始选中，可用于禁止选中文字</p><h4 id="常用鼠标事件对象属性"><a href="#常用鼠标事件对象属性" class="headerlink" title="常用鼠标事件对象属性"></a>常用鼠标事件对象属性</h4><p><img src="https://pic.imgdb.cn/item/612d85bf44eaada7399611a9.jpg"></p><h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p>跟随鼠标的天使</p><h3 id="常用的键盘事件"><a href="#常用的键盘事件" class="headerlink" title="常用的键盘事件"></a>常用的键盘事件</h3><p><img src="https://pic.imgdb.cn/item/612d863444eaada73996cc24.jpg"></p><p style="color:red">onkeypress不识别功能键，如ctrl、shift等<br>执行顺序是： keydown-->keypress-->keyup</p><p>首先，keyup是弹起时才会触发的，所以顺序是最后的，所以只需要记得keydown优先级更高就行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>document.addEventListener(&quot;keyup&quot;, () =&gt; console.log(&quot;up&quot;));<br>      document.addEventListener(&quot;keydown&quot;, () =&gt; console.log(&quot;down&quot;));<br>      document.addEventListener(&quot;keypress&quot;, () =&gt; console.log(&quot;press&quot;));<br>//按非功能键，依次输出顺序down、press、up<br>//按功能键，则依次输出down、up<br><br></code></pre></td></tr></table></figure><h4 id="常用键盘事件对象属性"><a href="#常用键盘事件对象属性" class="headerlink" title="常用键盘事件对象属性"></a>常用键盘事件对象属性</h4><p>keyCode:返回该键的ASCII值（数字）</p><p style="color:red">onkeydown和onkeyup不区分字母大小写，onkeypress区分字母大小写</p><h3 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h3><p>模拟京东快递单号查询案例</p><p>参考链接：<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener#why_use_addeventlistener.3f">EventTarget.addEventListener()</a></p><p><a href="https://www.bilibili.com/video/BV1Sy4y1C7ha">pink老师前端入门</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript DOM（二）</title>
      <link href="/2021/09/02/Javascript-DOM-2/"/>
      <url>/2021/09/02/Javascript-DOM-2/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript-DOM（二）"><a href="#JavaScript-DOM（二）" class="headerlink" title="JavaScript DOM（二）"></a>JavaScript DOM（二）</h1><p>案例只留下案例名称，需复习的话，<a href="https://gitee.com/xiaoqiang001/java-script">下载素材</a>，按名字搜索后可找到文件</p><h2 id="节点操作"><a href="#节点操作" class="headerlink" title="节点操作"></a>节点操作</h2><p>通过上文可知获取元素可以来利用DOM提供的方法来获取元素，如getElementById、querySelector等方法，但是也可以利用节点关系来获取元素</p><h3 id="节点概述"><a href="#节点概述" class="headerlink" title="节点概述"></a>节点概述</h3><p><img src="https://pic.imgdb.cn/item/611f0cf54907e2d39ca04cce.jpg"></p><h3 id="节点层级"><a href="#节点层级" class="headerlink" title="节点层级"></a>节点层级</h3><p>利用DOM树可以把节点划分为不同的层级关系，如父子层级、兄弟层级</p><h4 id="父节点"><a href="#父节点" class="headerlink" title="父节点"></a>父节点</h4><p>node.parentNode</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>//node.parentNode<br>var son = document.querySelector(&quot;.son&quot;);<br>console.log(son.parentNode);<br><br></code></pre></td></tr></table></figure><ol><li>parentNode属性可返回最近的一个父节点</li><li>指定的节点没有父节点则返回null（测试只有document.parentNode会返回null，body里的节点的父节点可以是body）</li></ol><h4 id="子节点"><a href="#子节点" class="headerlink" title="子节点"></a>子节点</h4><ol><li>parentNode.childNodes</li></ol><p>返回包含指定节点的子节点的集合，包含元素节点、文本节点等</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;div class=&quot;father&quot;&gt;<br>&lt;div class=&quot;son&quot;&gt;&lt;/div&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>var father = document.querySelector(&quot;.father&quot;);<br>console.log(father.childNodes);<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://pic.imgdb.cn/item/611f120d4907e2d39cabddd5.jpg"></p><p>这种方法要获取元素节点，可以遍历所有节点，利用元素节点的nodeType为1的性质选出来。但是很麻烦。<br>2. parentNode.children</p><p>返回包含指定节点的子元素节点的集合，只返回元素节点</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;div class=&quot;father&quot;&gt;<br>&lt;div class=&quot;son1&quot;&gt;&lt;/div&gt;<br>&lt;div class=&quot;son2&quot;&gt;&lt;/div&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>var father = document.querySelector(&quot;.father&quot;);<br>console.log(father.children);<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://pic.imgdb.cn/item/611f13c84907e2d39cafcdad.jpg"><br>3. parentNode.firstChild</p><p>返回第一个子节点，也是所有的子节点中的第一个节点<br>4. parentNode.lastChild</p><p>返回最后一个子节点，也是所有的子节点中的最后一个节点<br>5. parentNode.firstElementChild</p><p>返回第一个子元素节点<br>6. parentNode.lastElementChild</p><p>返回最后一个子元素节点</p><p>也可以：parentNode.children[0]获取第一个子元素节点；parentNode.children[parentNode.children.length -1]获取最后一个子元素节点</p><h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>新浪下拉菜单</p><h4 id="兄弟节点"><a href="#兄弟节点" class="headerlink" title="兄弟节点"></a>兄弟节点</h4><p>两种方式，分别是所有的节点和元素节点。和获取子节点相似。</p><ol><li>node.nextSibling</li></ol><p>返回下一个兄弟节点，包含所有的节点。<br>2. node.previousSibling</p><p>返回下一个兄弟节点，包含所有的节点。<br>3. node.nextElementSibling</p><p>返回下一个兄弟元素节点<br>4. node.previousElementSibling</p><p>返回下一个兄弟元素节点</p><p>其中，3、4有兼容性问题，IE9以上才支持，可以封装兼容性函数</p><h3 id="创建节点"><a href="#创建节点" class="headerlink" title="创建节点"></a>创建节点</h3><p>document.createElement(‘tagName’)<br>创建的元素原本不存在，是动态生成的，又被称为动态创建元素节点</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>var div = document.createElement(&quot;div&quot;);<br><br></code></pre></td></tr></table></figure><h3 id="添加节点"><a href="#添加节点" class="headerlink" title="添加节点"></a>添加节点</h3><p>创建节点后，创建的节点并不会出现，而需要把节点添加上去才可以。添加节点主要是先找到要添加的位置的父节点，然后才添加进去。有两种方法</p><ol><li>node.appendChild(child)</li></ol><p>将节点child添加到指定的父节点node的子节点末尾。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;body&gt;<br>&lt;div class=&quot;box&quot;&gt;<br>&lt;div class=&quot;one&quot;&gt;&lt;/div&gt;<br>&lt;div class=&quot;two&quot;&gt;&lt;/div&gt;<br>&lt;/div&gt;<br><br>&lt;script&gt;<br>var div = document.createElement(&quot;div&quot;);<br>div.className = &quot;three&quot;;<br><br>var box = document.querySelector(&quot;.box&quot;);<br>box.appendChild(div);<br><br>&lt;/script&gt;<br>&lt;/body&gt;<br><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://i.loli.net/2021/08/23/wvRsMI43JqlcCzg.png"><br>2. node.insertBefore(child, 指定元素);</p><p>将节点child添加到父节点node的指定子节点前面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;body&gt;<br>&lt;div class=&quot;box&quot;&gt;<br>&lt;div class=&quot;one&quot;&gt;&lt;/div&gt;<br>&lt;div class=&quot;two&quot;&gt;&lt;/div&gt;<br>&lt;/div&gt;<br><br>&lt;script&gt;<br>var div = document.createElement(&quot;div&quot;);<br>div.className = &quot;three&quot;;<br><br>var box = document.querySelector(&quot;.box&quot;);<br>var one = document.querySelector(&quot;.one&quot;);<br>box.insertBefore(div, one);<br><br>&lt;/script&gt;<br>&lt;/body&gt;<br><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://i.loli.net/2021/08/23/KGhHNEVASTIpCue.png"></p><h3 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h3><p>简单版发布留言案例</p><h3 id="删除节点"><a href="#删除节点" class="headerlink" title="删除节点"></a>删除节点</h3><p>node.removeChild(child)</p><p>从父节点node的子结点中删除指定子节点。，返回删除的节点。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;div class=&quot;box&quot;&gt;<br>&lt;div class=&quot;one&quot;&gt;&lt;/div&gt;<br>&lt;div class=&quot;two&quot;&gt;&lt;/div&gt;<br>&lt;/div&gt;<br><br>&lt;script&gt;<br>var box = document.querySelector(&quot;.box&quot;);<br>console.log(box.removeChild(box.children[0]));<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p>结果:</p><p><img src="https://i.loli.net/2021/08/23/o3mu1E7GzAtxjSf.png"></p><h3 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h3><p>删除留言案例</p><h3 id="克隆节点"><a href="#克隆节点" class="headerlink" title="克隆节点"></a>克隆节点</h3><p>node.cloneNode()</p><p>返回调用该方法的节点的一个副本。</p><ol><li>参数为空或者false，则是浅拷贝，只克隆节点自身，不克隆里面的子节点，包括文本节点</li><li>参数为true，则是深拷贝，克隆节点本身以及里面所有子节点。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;div class=&quot;box&quot;&gt;<br>111<br>&lt;div class=&quot;one&quot;&gt;123&lt;/div&gt;<br>&lt;div class=&quot;two&quot;&gt;456&lt;/div&gt;<br>&lt;/div&gt;<br><br>&lt;script&gt;<br>var box = document.querySelector(&quot;.box&quot;);<br>console.log(box.cloneNode());<br>console.log(box.cloneNode(true));<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://i.loli.net/2021/08/23/JgSYLnz2ci1kdCm.png"></p><h3 id="节点操作综合案例"><a href="#节点操作综合案例" class="headerlink" title="节点操作综合案例"></a>节点操作综合案例</h3><p>动态生成表格案例</p><h3 id="三种动态创建元素方法"><a href="#三种动态创建元素方法" class="headerlink" title="三种动态创建元素方法"></a>三种动态创建元素方法</h3><ol><li>document.write()</li></ol><p>会导致页面全部重绘</p><p>例子： </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;body&gt;<br>&lt;button class=&quot;write&quot;&gt;write方法&lt;/button&gt;<br>&lt;script&gt;<br>let write = document.querySelector(&quot;.write&quot;);<br>write.onclick = () =&gt; &#123;<br>console.log(document.write(&quot;&lt;h1&gt;123&lt;/h1&gt;&quot;));<br>&#125;<br>&lt;/script&gt;<br>&lt;/body&gt;<br><br></code></pre></td></tr></table></figure><p>点击前：</p><p><img src="https://pic.imgdb.cn/item/6129f92844eaada739a03bef.jpg"></p><p>点击后:</p><p><img src="https://pic.imgdb.cn/item/6129f94d44eaada739a075d2.jpg"><br>2. element.innerHTML</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;body&gt;<br>&lt;div&gt;&lt;/div&gt;<br>&lt;script&gt;<br>let div = document.querySelector(&quot;div&quot;);<br>div.innerHTML = &quot;&lt;h1&gt;123&lt;/h1&gt;&quot;;<br>&lt;/script&gt;<br>&lt;/body&gt;<br><br></code></pre></td></tr></table></figure><ol start="3"><li>document.createElement()</li></ol><p>只能根据参数的标签名创建对应元素节点，无内容，也无类名、id等。</p><p>例子:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;div&gt;&lt;/div&gt;<br>   &lt;script&gt;<br>       let div = document.querySelector(&quot;div&quot;);<br>       let h1 = document.createElement(&quot;h1&quot;);<br>       h1.innerHTML = &quot;123&quot;;<br>       div.appendChild(h1);<br>   &lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p>效率测试：</p><ol><li>innerHTML（拼接字符串）(1000个div)</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const t1 = +new Date();<br>      for (let j = 0; j &lt; 1000; j++) &#123;<br>          document.body.innerHTML += &#x27;&lt;div&gt;&lt;/div&gt;&#x27;;<br>      &#125;<br>      const t2 = +new Date();<br>      console.log(t2 - t1);<br>      //505ms<br><br></code></pre></td></tr></table></figure><ol start="2"><li>innerHTML（数组形式拼接）（10000个div）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">const t1 = +new Date();<br>      let arr = [];<br>      for (let j = 0; j &lt; 10000; j++) &#123;<br>          arr.push(&#x27;&lt;div&gt;&lt;/div&gt;&#x27;);<br>      &#125;<br><br>      document.body.innerHTML = arr.join(&#x27;&#x27;);<br>      const t2 = +new Date();<br>      console.log(t2 - t1);<br>      //15、14、13、11、9(ms)<br><br></code></pre></td></tr></table></figure><ol start="3"><li>createElement(10000个div)</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>const t1 = +new Date();<br>      for (let j = 0; j &lt; 10000; j++) &#123;<br>          let div = document.createElement(&quot;div&quot;);<br>          document.body.appendChild(div);<br>      &#125;<br><br>      const t2 = +new Date();<br>      console.log(t2 - t1);<br>      //14、16、19、13、11<br><br></code></pre></td></tr></table></figure><p>innerHTML（数组形式拼接）的效率在测试中比createElement的稍微快一点，但只是一点点，一开始用1000个测试时，没办法分出区别，加大到10000个可以看出前者比后者稍快一点。</p><p>innerHTML（数组形式拼接）结构较复杂，需要另外用数组接，后面还得转成字符串，再塞给父节点。</p><p>createElement结构较清晰，创建后直接使用appendChild就可以添加到父节点中。</p><p>学习链接：<a href="https://www.bilibili.com/video/BV1Sy4y1C7ha">pink老师前端入门</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
            <tag> DOM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript DOM(一)</title>
      <link href="/2021/08/26/Javascript-DOM-1/"/>
      <url>/2021/08/26/Javascript-DOM-1/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript-DOM（一）"><a href="#JavaScript-DOM（一）" class="headerlink" title="JavaScript DOM（一）"></a>JavaScript DOM（一）</h1><p>整理一下学习的DOM部分知识，首先小复习一下知识点”预解析”。.</p><p>案例只留下案例名称，需复习的话，<a href="https://gitee.com/xiaoqiang001/java-script">下载素材</a>，按名字搜索后可找到文件</p><h2 id="预解析"><a href="#预解析" class="headerlink" title="预解析"></a>预解析</h2><p>运行js会分为两步。</p><ol><li>预解析</li><li>代码执行</li></ol><p>预解析：js引擎会把js里面所有的var和function提升到当前作用域的最前面</p><p>预解析分为：</p><ol><li>变量预解析(变量提升）</li></ol><p>把所有的变量声明提升到当前的最前面。<b style = "color:red;">只提升声明，不提升赋值，函数同理，不提升调用</b><br>2. 函数预解析(函数提升）</p><p>把所有的函数声明提升到当前的最前面。</p><p style="color:red">实际上，变量提升，可能会引发很多问题，会导致变量可以先使用后申明。函数提升暂时没有遇到什么问题。</p><p>例子：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><br><span class="hljs-keyword">var</span> num = <span class="hljs-number">10</span>;<br>fn();<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>&#123;<br><span class="hljs-built_in">console</span>.log(num);<br><span class="hljs-keyword">var</span> num = <span class="hljs-number">20</span>;<br>&#125;<br><br><br><span class="hljs-comment">// 执行代码之前预解析，预解析后的代码如下所示，上面和下面的代码不同，但执行是一样的</span><br><br><span class="hljs-keyword">var</span> num;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>&#123;<br><span class="hljs-keyword">var</span> num;<br><span class="hljs-built_in">console</span>.log(num);<br>num = <span class="hljs-number">20</span>;<br>&#125;<br>num = <span class="hljs-number">10</span>;<br>fn();<br><br></code></pre></td></tr></table></figure><h2 id="DOM简介"><a href="#DOM简介" class="headerlink" title="DOM简介"></a>DOM简介</h2><p>文档对象模型(Document Object Model，简称DOM), ，是W3C推荐的处理可扩展标记语言（HTML和XML）的标准编程接口。</p><p>DOM:对节点结构化表诉，并定义了一种方式可以使程序对该结构进行访问，将web页面和脚本语言连接起来。</p><p>通过DOM接口可以改变网页的内容、结构和样式。</p><p><img src="https://pic.imgdb.cn/item/61162a995132923bf8ee7848.jpg"></p><h2 id="获取元素"><a href="#获取元素" class="headerlink" title="获取元素"></a>获取元素</h2><p>用console.dir() 可以打印我们获取的元素对象，更好的查看对象里面的属性和方法</p><h3 id="根据id获取"><a href="#根据id获取" class="headerlink" title="根据id获取"></a>根据id获取</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-built_in">document</span>.getElementById(id名字符串形式);<br><span class="hljs-built_in">document</span>可以换成已经得到的元素，相应的获取的元素就只能是它的子元素<br><br></code></pre></td></tr></table></figure><p>实例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;my&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">var</span> my = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;my&#x27;</span>);</span><br><span class="javascript"><span class="hljs-built_in">console</span>.log(my);</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h3 id="根据标签名获取"><a href="#根据标签名获取" class="headerlink" title="根据标签名获取"></a>根据标签名获取</h3><p><code>document.getElementsByTagName(标签名，字符串形式);</code></p><p>得到的是一个对象的集合</p><h3 id="通过-HTML5-新增的方法获取"><a href="#通过-HTML5-新增的方法获取" class="headerlink" title="通过 HTML5 新增的方法获取"></a>通过 HTML5 新增的方法获取</h3><h4 id="根据类名获取"><a href="#根据类名获取" class="headerlink" title="根据类名获取"></a>根据类名获取</h4><p><code>document.getElementsByClassName(类名，字符串形式);</code></p><p>得到的是一个对象的集合</p><h4 id="根据选择器获取"><a href="#根据选择器获取" class="headerlink" title="根据选择器获取"></a>根据选择器获取</h4><ol><li>document.querySelector(‘选择器’)，返回第一个元素对象</li></ol><p>例子：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">var</span> id = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;#id&#x27;</span>);<br><span class="hljs-keyword">var</span> tagName = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;div&#x27;</span>);<br><span class="hljs-keyword">var</span> className = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;.className&#x27;</span>);<br><br></code></pre></td></tr></table></figure><ol start="2"><li>document.querySelectorAll(‘选择器’)，返回一个对象的集合</li></ol><h3 id="获取特殊元素-body-html"><a href="#获取特殊元素-body-html" class="headerlink" title="获取特殊元素(body, html)"></a>获取特殊元素(body, html)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">var</span> body = <span class="hljs-built_in">document</span>.body;<br><span class="hljs-keyword">var</span> html = <span class="hljs-built_in">document</span>.documentElement;<br><br></code></pre></td></tr></table></figure><h2 id="事件基础"><a href="#事件基础" class="headerlink" title="事件基础"></a>事件基础</h2><h3 id="事件概述"><a href="#事件概述" class="headerlink" title="事件概述"></a>事件概述</h3><p>事件是指可以被Javas侦测到的行为。例如，点击按钮，鼠标移动等。</p><h3 id="事件三要素"><a href="#事件三要素" class="headerlink" title="事件三要素"></a>事件三要素</h3><ol><li>事件源</li><li>事件类型</li><li>事件处理程序</li></ol><p>实例： 点击按钮弹出窗口</p><p>其中，事件源是按钮，事件类型则是点击，事件处理程序是弹出窗口</p><h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol><li>获取事件源</li><li>注册事件（绑定事件）</li><li>添加事件处理程序</li></ol><p>例子：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;button&#x27;</span>);<br>btn.onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>alert(<span class="hljs-string">&#x27;Hello!&#x27;</span>);<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="操作元素"><a href="#操作元素" class="headerlink" title="操作元素"></a>操作元素</h2><h3 id="改变元素内容"><a href="#改变元素内容" class="headerlink" title="改变元素内容"></a>改变元素内容</h3><ol><li>element.innerText</li></ol><p>不识别html标签，空格和换行也会去掉<br>2. element.innerHTML</p><p>识别html标签，保留空格和换行</p><h3 id="常见元素的属性操作"><a href="#常见元素的属性操作" class="headerlink" title="常见元素的属性操作"></a>常见元素的属性操作</h3><p>src、href、id、alt、title等</p><p>element.src</p><h3 id="表单元素的属性操作"><a href="#表单元素的属性操作" class="headerlink" title="表单元素的属性操作"></a>表单元素的属性操作</h3><p>type、value、checked、disabled、selected等</p><p>element.value</p><h4 id="案例："><a href="#案例：" class="headerlink" title="案例："></a>案例：</h4><p>仿京东显示隐藏密码</p><p><img src="https://pic.imgdb.cn/item/61163eee5132923bf814e9a5.jpg"></p><h3 id="样式属性操作"><a href="#样式属性操作" class="headerlink" title="样式属性操作"></a>样式属性操作</h3><h4 id="element-style"><a href="#element-style" class="headerlink" title="element.style"></a>element.style</h4><ol><li>样式采用驼峰命名法，如fontSize，backgroundColor;</li><li>产生的是行内样式，CSS权重比较高</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;div&#x27;</span>);<br>div.onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>div.style.backgroundColor = <span class="hljs-string">&#x27;purple&#x27;</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>点击前：</p><p><img src="https://pic.imgdb.cn/item/611638e75132923bf80a3008.jpg"></p><p>点击后：</p><p><img src="https://pic.imgdb.cn/item/611639035132923bf80a66df.jpg"></p><h5 id="案例：-1"><a href="#案例：-1" class="headerlink" title="案例："></a>案例：</h5><ol><li>关闭淘宝二维码案例</li></ol><p><img src="https://pic.imgdb.cn/item/61163f0d5132923bf8152175.jpg"><br>2. 循环精灵图</p><p><img src="https://pic.imgdb.cn/item/61163f225132923bf8154542.jpg"><br>3. 显示隐藏文本框内容</p><p><img src="https://pic.imgdb.cn/item/61163f355132923bf81566c6.jpg"></p><h4 id="element-className"><a href="#element-className" class="headerlink" title="element.className"></a>element.className</h4><p>通过另外写CSS，然后通过className来更改类名</p><ol><li>适合用于样式修改过多，通过行内样式操作会很复杂</li><li>class是保留字，所以通过使用className来操作元素类名属性</li><li>会直接更改元素的类名，即覆盖原来的类名。想要保留原来的类名的基础上改的话，则通过element.className = ‘原来的类名 新的类名’来保留。</li></ol><h5 id="案例：-2"><a href="#案例：-2" class="headerlink" title="案例："></a>案例：</h5><p>仿新浪注册页面</p><p><img src="https://pic.imgdb.cn/item/61163f595132923bf815ab5f.jpg"></p><p><img src="https://pic.imgdb.cn/item/61163bc15132923bf80f520e.jpg"></p><h3 id="排他思想"><a href="#排他思想" class="headerlink" title="排他思想"></a>排他思想</h3><p>情境：</p><p>有一组元素，我们只想要一个元素实现某种样式。</p><p>方法：</p><ol><li>所有元素全部清除样式</li><li>给当前元素设置样式</li></ol><p>实例:</p><p>三个按钮，点击按钮，对应的按钮变色，其他的原来的默认色。相当于多选一。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>按钮1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>按钮2<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>按钮3<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">var</span> btns = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&#x27;button&#x27;</span>);</span><br><span class="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; btns.length; i++) &#123;</span><br><span class="javascript">btns[i].addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; btns.length; j++) &#123;</span><br><span class="javascript">btns[j].style.backgroundColor = <span class="hljs-string">&#x27;&#x27;</span>;</span><br><span class="javascript">&#125;</span><br><span class="javascript"><span class="hljs-built_in">this</span>.style.backgroundColor = <span class="hljs-string">&#x27;pink&#x27;</span>;</span><br><span class="javascript">&#125;)</span><br><span class="javascript">&#125;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h4 id="案例：-3"><a href="#案例：-3" class="headerlink" title="案例："></a>案例：</h4><ol><li>百度换肤效果</li><li>表格隔行变色</li><li>全选反选</li></ol><p><img src="https://pic.imgdb.cn/item/61163f9a5132923bf81623b1.jpg"></p><h3 id="元素属性操作"><a href="#元素属性操作" class="headerlink" title="元素属性操作"></a>元素属性操作</h3><h4 id="获取属性值"><a href="#获取属性值" class="headerlink" title="获取属性值"></a>获取属性值</h4><ol><li>element.属性</li></ol><p style="color: red">只能获取内置属性值，无法获取自定义属性值，如index、data-index等，其中data-*是H5的自定义属性</p><p>例子：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;#demo&quot;</span>);<br><span class="hljs-built_in">console</span>.log(div.id);<br><br></code></pre></td></tr></table></figure><ol start="2"><li>element.getAttribute(‘属性’);</li></ol><p>可以获取自定义属性</p><p>例子：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;#demo&quot;</span>);<br><span class="hljs-built_in">console</span>.log(div.getAttribute(<span class="hljs-string">&quot;id&quot;</span>));<br><span class="hljs-built_in">console</span>.log(div.getAttribute(<span class="hljs-string">&quot;index&quot;</span>));<br><br></code></pre></td></tr></table></figure><h4 id="设置属性值"><a href="#设置属性值" class="headerlink" title="设置属性值"></a>设置属性值</h4><p>和获取一样，第一种方法也无法设置自定义属性值</p><ol><li>element.属性 = ‘值’</li></ol><p>例子： </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;#demo&quot;</span>);<br>div.id = <span class="hljs-string">&quot;box&quot;</span>;<br><br></code></pre></td></tr></table></figure><ol start="2"><li>element.setAttribute(‘属性’, ‘值’);</li></ol><p>例子：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;#demo&quot;</span>);<br>div.setAttribute(<span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-string">&quot;box&quot;</span>);<br>div.setAttribute(<span class="hljs-string">&quot;index&quot;</span>, <span class="hljs-number">2</span>);<br><br></code></pre></td></tr></table></figure><h4 id="移除属性"><a href="#移除属性" class="headerlink" title="移除属性"></a>移除属性</h4><p>只有一种方法，element.属性 = ‘’；只能令属性值为空，而不会移除属性</p><p>element.removeAttribute(‘属性’);</p><p>例子：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;#demo&quot;</span>);<br>div.removeAttribute(<span class="hljs-string">&quot;id&quot;</span>);<br>div.removeAttribute(<span class="hljs-string">&quot;index&quot;</span>);<br><br></code></pre></td></tr></table></figure><h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>tab栏切换</p><h3 id="H5自定义属性"><a href="#H5自定义属性" class="headerlink" title="H5自定义属性"></a>H5自定义属性</h3><p>自定义属性目的：为了保存和使用数据。有些数据可以保存到页面中而不用保存到数据库中。<b style="color: red">未解：保存到数据库：怎么存？存在哪里怎么看？怎么用？</b></p><p>由上面的元素属性操作可知，Attribute系列函数(get、set、remove)可以对自定义属性进行操作。</p><p>出现问题：不容易判断是内置属性还是自定义属性</p><h4 id="设置H5自定义属性"><a href="#设置H5自定义属性" class="headerlink" title="设置H5自定义属性"></a>设置H5自定义属性</h4><p>H5规定自定义属性data-开头作为属性名</p><ol><li>直接在标签后给属性赋值</li></ol><p>例子：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-index</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br></code></pre></td></tr></table></figure><ol start="2"><li>element.setAttribute(‘属性’, ‘值’);</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;#demo&quot;</span>);<br>div.setAttribute(<span class="hljs-string">&quot;data-index&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>);<br><br></code></pre></td></tr></table></figure><p>这里设置为数值时可以不用字符串形式</p><h4 id="获取H5自定义属性"><a href="#获取H5自定义属性" class="headerlink" title="获取H5自定义属性"></a>获取H5自定义属性</h4><ol><li>element.getAttribute(‘属性’);和上面用法一样，不同的只是自定义属性以data-开头</li><li>H5新增element.dataset.’data-后面部分’或者<br>element.dataset[‘data-后面部分’（字符串形式）]</li></ol><p>示例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;#demo&quot;</span>);<br><span class="hljs-built_in">console</span>.log(div.dataset.index);<br><span class="hljs-built_in">console</span>.log(div.dataset[<span class="hljs-string">&quot;index&quot;</span>]);<br><br></code></pre></td></tr></table></figure><p>dataset这个方法有兼容性问题，只有ie11才开始支持。（不用ie，现在一般也不去考虑兼容性，而且用Attribute系列就行了）</p><h4 id="移除H5自定义属性"><a href="#移除H5自定义属性" class="headerlink" title="移除H5自定义属性"></a>移除H5自定义属性</h4><p>element.removeAttribute(‘属性’);用法类似</p><p>学习链接：<a href="https://www.bilibili.com/video/BV1Sy4y1C7ha">pink老师前端入门</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
            <tag> DOM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML基础</title>
      <link href="/2021/08/19/HTML-yuyihuaTag/"/>
      <url>/2021/08/19/HTML-yuyihuaTag/</url>
      
        <content type="html"><![CDATA[<h2 id="HTML基础"><a href="#HTML基础" class="headerlink" title="HTML基础"></a>HTML基础</h2><p>HTML小复习(主要是自己不常用的知识点，语义化标签)</p><p>网页三大元素：</p><p>HTML：网页的基本结构</p><p>CSS:网页的展示效果</p><p>JS：网页的功能与行为</p><h3 id="HTML简介"><a href="#HTML简介" class="headerlink" title="HTML简介"></a>HTML简介</h3><p>HTML(HyperText Markup Language, 超文本标记语言)，用于构建网页基本结构及其内容的标记语言</p><p>超文本：文本中包含指向其他文本的链接</p><p>标记语言：将文本以及文本相关的其他信息结合起来，展现出关于文档结构和数据处理细节的电脑文字编码。如HTML、XML、KML、Markdown等。</p><h3 id="HTML结构"><a href="#HTML结构" class="headerlink" title="HTML结构"></a>HTML结构</h3><ol><li>HTML文档包含多个HTML元素,元素具备不同的特性</li><li>HTML元素 = 开始标签 + 结束标签 + 元素内容</li></ol><p><code>&lt;p&gt;test&lt;/p&gt; </code><br>3. 部分元素是单标签元素。如img、input、br</p><p><code>&lt;img src=&quot;images/angel.gif&quot; alt=&quot;小天使&quot;&gt;</code><br>4. HTML元素标签不区分大小写,即    <code>&lt;p&gt;&lt;/p&gt; 和&lt;P&gt;&lt;/P&gt;等价</code>,但是建议小写<br>5. 元素可以嵌套在其他元素中间<br>6. 元素可以拥有属性，属性包含有元素的额外信息，如img标签的alt属性可以用于指定图片的替换文字，即当无法正常显示图片时会显示出来的文字。</p><h4 id="HTML固定结构"><a href="#HTML固定结构" class="headerlink" title="HTML固定结构"></a>HTML固定结构</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;title&gt;Document&lt;/title&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>&lt;div&gt;<br>&lt;p class=&quot;test&quot;&gt;123&lt;/p&gt;<br>&lt;img src=&quot;images/angel.gif&quot; alt=&quot;小天使&quot;&gt;<br>&lt;/div&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br><br>1. &lt;!DOCTYPE html&gt;:HTML文档最前面的位置，加上后会按W3C的HTML5标准来解析渲染页面<br>2. &lt;html&gt;:根元素，包含整个页面的内容<br>3. &lt;head&gt;:对用户不可见，包含面向搜索引擎的关键字、页面描述、字符编码声明、CSS样式等。<br>4. &lt;body&gt;：包含能够被用户访问到的内容，包含文本、图像、视频等。<br><br></code></pre></td></tr></table></figure><h4 id="HTML页面结构"><a href="#HTML页面结构" class="headerlink" title="HTML页面结构"></a>HTML页面结构</h4><pre><code>1. &lt;meta charset=&quot;UTF-8&quot;&gt;:定义文档字符编码2. &lt;meta name=&quot;keywords&quot; content=&quot;HTML&quot;&gt;：关键字，即用搜索引擎搜索时可凭借关键字搜索到3. &lt;meta name=&quot;description&quot; content = &quot;HTML基础&quot;&gt;：页面描述</code></pre><p><img src="https://img-blog.csdnimg.cn/img_convert/b7429bf908fac3ce7d6d7f42d75eb2b0.png"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/a16f920ce9adb604a38cc097cb86dc31.png"></p><pre><code>4. &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;:视口标签，主要用于移动端5. &lt;title&gt;Document&lt;/title&gt;:页面的标题，显示在浏览器标签页上6. &lt;style&gt;:CSS样式7. &lt;meta &quot;http-equiv=&quot;expires&quot; content=&quot;31 Dec 2021&quot;&gt;：http头部，可以向浏览器发送一些信息，如网页到期时间8. &lt;link rel=&quot;shortcut icon&quot; href=&quot;favicon.ico&quot; /&gt;：标签页上的图标</code></pre><p><img src="https://img-blog.csdnimg.cn/img_convert/1bba743aefa9643f812700f732f1a70d.png"></p><pre><code>9. &lt;link rel=&quot;stylesheet&quot; href=&quot;css/menu.css&quot;&gt;链接到样式表10. &lt;script src=&quot;js/index.js&quot;&gt;&lt;/script&gt;可执行脚本，链接到js文件，也可直接在标签里写</code></pre><h3 id="常用元素"><a href="#常用元素" class="headerlink" title="常用元素"></a>常用元素</h3><h4 id="块级元素"><a href="#块级元素" class="headerlink" title="块级元素"></a>块级元素</h4><ol><li>占据父元素的整行，块级元素独占一行</li><li>能容纳其他块级元素和行内元素（内联元素）</li><li>可以控制宽高、行高、边距、边框等改变尺寸</li><li>常见块级元素：div、p、h1-h6、ul、ol、dl、table、form、blockquote、address</li></ol><h4 id="行内元素（内联元素）"><a href="#行内元素（内联元素）" class="headerlink" title="行内元素（内联元素）"></a>行内元素（内联元素）</h4><ol><li>只占据对应标签边框所占据的空间，不独占一行</li><li>只能容纳文本或其他内联元素</li><li>只能通过修改水平边距、边框或行高来改变尺寸</li><li>常见行内元素有：a、span、br(br会让后面的元素从另一行开始，但它还是属于上一行)、i、em、strong、label、code、cite</li></ol><h4 id="行内块级元素"><a href="#行内块级元素" class="headerlink" title="行内块级元素"></a>行内块级元素</h4><ol><li>元素在行内排列，不会独占一行</li><li>可以控制宽高、垂直边距、边框来改变尺寸</li><li>常见行内块级元素有：img、input、td</li></ol><h3 id="语义化标签"><a href="#语义化标签" class="headerlink" title="语义化标签"></a>语义化标签</h3><p>根据内容的结构，选择合适的标签构建出便于开发者阅读的可维护性更高的代码结构，同时能够让机器更好地解析。</p><p>样例展示：</p><p><img src="https://pic.imgdb.cn/item/611ccd864907e2d39c689b47.jpg"></p><p>图片出处：<a href="https://blog.csdn.net/weixin_32496547/article/details/117719327">html语义化标签 例子,HTML5语义化</a></p><h4 id="header标签"><a href="#header标签" class="headerlink" title="header标签"></a>header标签</h4><ol><li>展示介绍性信息</li><li>通常包含一组介绍性或辅助导航的元素，如标题、Logo、搜索框、作者名称等</li><li>不能放在footer标签、address标签和另一个header标签内部</li></ol><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;header&gt;<br>&lt;h1&gt;HTML&lt;/h1&gt;<br>&lt;p&gt; &lt;time datetime=&quot;2021-08-15&quot;&gt;&lt;/time&gt; &lt;/p&gt;<br>&lt;/header&gt;<br><br></code></pre></td></tr></table></figure><h4 id="nav标签"><a href="#nav标签" class="headerlink" title="nav标签"></a>nav标签</h4><ol><li>在当前文档中提供导航链接，如菜单、目录、索引等</li><li>用来放一些热门的链接，不常用的链接一般放在footer标签里，而footer标签放在底部</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;nav&gt;<br>&lt;ol&gt;<br>&lt;li&gt;&lt;a href=&quot;#&quot;&gt;HTML&lt;/a&gt;&lt;/li&gt;<br>&lt;li&gt;&lt;a href=&quot;#&quot;&gt;CSS&lt;/a&gt;&lt;/li&gt;<br>&lt;li&gt;&lt;a href=&quot;#&quot;&gt;JS&lt;/a&gt;&lt;/li&gt;<br>&lt;/ol&gt;<br>&lt;/nav&gt;<br><br></code></pre></td></tr></table></figure><h4 id="article标签"><a href="#article标签" class="headerlink" title="article标签"></a>article标签</h4><ol><li>定义独立的内容</li><li>内容本身必须是有意义的且必须是独立于文档的其余部分，如论坛帖子、新闻文章、博客、用户提交的评论、交互式组件等</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;article&gt;<br>  &lt;h1&gt;Internet Explorer 9&lt;/h1&gt;<br>  &lt;p&gt; Windows Internet Explorer 9(缩写为 IE9 )在2011年3月14日21:00 发布。&lt;/p&gt;<br>&lt;/article&gt;<br><br></code></pre></td></tr></table></figure><h4 id="section标签"><a href="#section标签" class="headerlink" title="section标签"></a>section标签</h4><ol><li>按主题将内容</li><li>分组，通常会有标题</li><li>section标签通常出现在文档的大纲中</li><li>不要把section作为普通容器使用，例如，用来梅花片段样式时，用div更合适</li><li>如果元素里面是独立的内容，可以单独存在，更适合用article</li></ol><p>如果只是针对一个块内容做样式化，article和section二者并无区别。</p><p>section元素用于对网站或应用程序中页面上的内容进行分块，section元素的作用是对页面上的内容进行分块，或者说对文章进行分段；一个section元素通常由内容及其标题组成，通常不推荐为那些没有标题的内容使用section元素。<b style = "color: red">引用自下面的链接</b></p><p><a href="https://blog.csdn.net/qq_22855325/article/details/72877285">H5中section和article和div的区别</a></p><h4 id="aside标签"><a href="#aside标签" class="headerlink" title="aside标签"></a>aside标签</h4><p>主要有两种用法</p><ol><li>包含在article元素中作为主要内容的附属部分，其中的内容可以是与文章有关的相关资料、名词解释等。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br><br>&lt;article&gt;<br>&lt;h1&gt;...&lt;/h1&gt;<br>&lt;p&gt;...&lt;/p&gt;<br>&lt;aside&gt;...&lt;/aside&gt;<br>&lt;/article&gt;<br><br></code></pre></td></tr></table></figure><ol start="2"><li>在article元素之外作为页面或站点的附属信息部分。如侧边栏，其中的内容可以是友情链接、博客中的其他文章列表、广告等。</li></ol><h4 id="footer标签"><a href="#footer标签" class="headerlink" title="footer标签"></a>footer标签</h4><ol><li>描述了文档的底部区域</li><li>通常包含文档的作者，著作权信息，链接的使用条款，联系信息等</li></ol><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;footer&gt;<br>  &lt;p&gt;Posted by: Hege Refsnes&lt;/p&gt;<br>  &lt;p&gt;&lt;time pubdate datetime=&quot;2012-03-01&quot;&gt;&lt;/time&gt;&lt;/p&gt;<br>&lt;/footer&gt;<br><br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/611ccd194907e2d39c66d6cb.jpg"></p><h3 id="picture元素"><a href="#picture元素" class="headerlink" title="picture元素"></a>picture元素</h3><p>picture元素允许我们在不同设备上显示不同的图片，一般用于响应式</p><p>picture元素有多个source元素和一个img元素，每个 source元素匹配不同的设备并引用不同的图像源，如果没有匹配的，就选择img元素中的图像。</p><p>img是放在最后一个source元素之后的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;picture&gt;<br>  &lt;source media=&quot;(min-width: 650px)&quot; srcset=&quot;demo1.jpg&quot;&gt;<br>  &lt;source media=&quot;(min-width: 465px)&quot; srcset=&quot;demo2.jpg&quot;&gt;<br>  &lt;img src=&quot;img_girl.jpg&quot;&gt;<br>&lt;/picture&gt;<br><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chrome调试</title>
      <link href="/2021/08/19/Chrome-Debug/"/>
      <url>/2021/08/19/Chrome-Debug/</url>
      
        <content type="html"><![CDATA[<h1 id="Chrome调试"><a href="#Chrome调试" class="headerlink" title="Chrome调试"></a>Chrome调试</h1><h2 id="Elements面板"><a href="#Elements面板" class="headerlink" title="Elements面板"></a>Elements面板</h2><p>步骤：</p><ol><li>打开 DevTools，有多种方式可以打开，F12快捷键，右键检查等</li><li>查看要检查的元素的样式，点击下图红框框，再点击页面元素，或者鼠标放在要检查的元素上面，右键检查</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/4df1e370963a48cd14e2cf393bcea7ce.png"><br>3. 在DevTools下的Styles中增删改查样式<br><img src="https://img-blog.csdnimg.cn/img_convert/777a54a2cedae3fc23d2230d726ee09e.png"><br>4. 类名操作</p><ol><li>，直接双击Elements下的类名，就可以进行修改类名    2. 点击”Styles”下的”.cls”进行操作</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/ae9a435f7997e9f7fc3d8b0ab3150407.png"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/a1e2c8ff34b23fe66c0d8aac87db6452.png"><br>5. 伪类选择器样式修改：<br>    1. 在Elements中找到对应元素，右键选择Force state，再选择伪类，如:hover,即可强制变样式，而伪类样式也可在Styles下进行修改</p><p><img src="https://img-blog.csdnimg.cn/img_convert/b1f6aa872015b3d5cad54bdbe382cd0f.png"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/bb597773891e7fe233bb48757e93924b.png"><br>    2. 点击”Styles”下的”:hover”进行操作</p><p><img src="https://img-blog.csdnimg.cn/img_convert/2e98d41882aecfe32881f8223e9e95c6.png"></p><ol start="6"><li>元素样式过多时，点击”Computed”，下面会有该元素的所有样式，点击”Filter”，输入要查看的样式即可</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/8fcc8e36ddac89b59c1be509707375bc.png"></p><h2 id="Console面板"><a href="#Console面板" class="headerlink" title="Console面板"></a>Console面板</h2><p>可以通过程序在控制台中输出东西，来检查程序是否正确运行</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;script&gt;<br>var a = 10;<br>console.log(a);<br>var b = 15;<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/img_convert/6717f32476055938b737ffb9eebbedce.png"></p><p>左侧可以选择日志等级，可以灵活运用日志等级</p><p><img src="https://img-blog.csdnimg.cn/img_convert/339bbea3bdbd0d79839a035a935f5fee.png"></p><p>console.table()用法：可以用打印对象数组，方便</p><p>例子： </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;script&gt;<br>var student = [<br>&#123;<br>name: &quot;ttt&quot;,<br>code: 111,<br>price: 11<br>&#125;,<br>&#123;<br>name: &quot;xxx&quot;,<br>code: 333,<br>price: 11<br>&#125;,<br>&#123;<br>name: &quot;yyy&quot;,<br>code: 333,<br>price: 33<br>&#125;,<br>]<br>console.log(student);<br>console.table(student);<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p>结果： </p><p><img src="https://img-blog.csdnimg.cn/img_convert/a7e687d571e4bbe9f47bae68c9c850ea.png"></p><p>红框部分是console.table()，而红框上面的是console.log()</p><p>占位符：</p><table><thead><tr><th>占位符</th><th align="center">功能</th></tr></thead><tbody><tr><td>%s</td><td align="center">字符串</td></tr><tr><td>%d</td><td align="center">整数</td></tr><tr><td>%f</td><td align="center">浮点数</td></tr><tr><td>%c</td><td align="center">css格式字符串</td></tr></tbody></table><p><img src="https://img-blog.csdnimg.cn/img_convert/2493831c35c4c8f8ee85fd0c1debe9f7.png"></p><h2 id="Sources面板"><a href="#Sources面板" class="headerlink" title="Sources面板"></a>Sources面板</h2><p>主要用来调试页面中的 JavaScript</p><p>步骤：</p><ol><li>打开Sources面板，找到要调试的js代码</li><li>点击要调试部分代码左边的数字，添加断点</li><li>刷新页面</li><li>开始调试</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/dbf743b32021771b7ea0422512e7fdc7.png"></p><p>调试常用部分：</p><p><img src="https://img-blog.csdnimg.cn/img_convert/30fb7d53b50c746b6d634b3e279eaf9a.png"></p><p>截图来源：<a href="https://blog.csdn.net/weixin_45621649/article/details/105740165">谷歌浏览器调试–Sources</a></p><p>有点点特别的：</p><ol><li>鼠标悬浮变量可以查看变量值</li><li>在程序中添加debugger;相当于在这里设置断点</li><li>特殊断点（事件断点）添加方法和上面的不同，是在Event Listener Breakpoints中添加</li></ol><p><img src="https://pic.imgdb.cn/item/611c6fcc4907e2d39cccfc22.jpg"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/8bfe87e7909ee0b5643d167a6e51b86e.png"></p><h2 id="Network面板"><a href="#Network面板" class="headerlink" title="Network面板"></a>Network面板</h2><p>可以用来模拟弱网环境</p><p><img src="https://img-blog.csdnimg.cn/img_convert/2a236c81f21ffbb64292a251b7c96327.png"></p><h2 id="Application面板"><a href="#Application面板" class="headerlink" title="Application面板"></a>Application面板</h2><p>该面板主要是记录网站加载的所有资源信息，包括存储数据（Local Storage、Session Storage、IndexedDB、Web SQL、Cookies）、缓存数据、字体、图片、脚本、样式表等。</p><h2 id="小技能"><a href="#小技能" class="headerlink" title="小技能"></a>小技能</h2><p>用上诉方法选中元素（节点），在Elements面板右键，选择下图红框即可截图</p><p><img src="https://pic.imgdb.cn/item/611ccc5d4907e2d39c645eea.jpg"></p><p>截图效果：</p><p><img src="https://pic.imgdb.cn/item/611ccca74907e2d39c655065.jpg"></p><p>拓展：<a href="https://blog.csdn.net/qianyu6200430/article/details/107679089">脱离996，Chrome DevTools 面板全攻略！！！（收藏）</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chrome_Debug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小试Python(二)</title>
      <link href="/2021/08/13/Python2/"/>
      <url>/2021/08/13/Python2/</url>
      
        <content type="html"><![CDATA[<h1 id="小试Python-二"><a href="#小试Python-二" class="headerlink" title="小试Python(二)"></a>小试Python(二)</h1><h2 id="if-x-in-y"><a href="#if-x-in-y" class="headerlink" title="if x in y"></a>if x in y</h2><p>统计两个数组的相同元素个数示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>num1 = [1, 2, 3, 4, 5, 6]<br>num2 = [4, 5, 6, 7, 8, 9]<br><br>count = 0<br>for i in num1:<br>if i in num2:<br>count += 1<br><br>print(count)<br><br></code></pre></td></tr></table></figure><p>上面的if i in num2，i是遍历num1数组的每一次值，通过if i in num2来判断i是否在num2数组中。</p><h2 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h2><p>不要求每一行的元素个数相同</p><p>二维数组定义及遍历：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>number_grid = [<br>[1, 2, 3],<br>[4, 5, 6],<br>[1, 2],<br>[1]<br>]<br>for row in number_grid:<br>for col in row:<br>print(col)<br><br></code></pre></td></tr></table></figure><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符**"></a>运算符**</h2><p>这个运算符，我目前学过的语言中并没有遇到过，它是指数运算符，它的优先级和数学上一样，是最高的。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>print(3 ** 3)<br><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://pic.imgdb.cn/item/610774cf5132923bf8ba1c79.jpg"></p><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>单行注释：&nbsp;&nbsp;<code># 注释内容</code></p><p>多行注释：三个单引号包住注释部分</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&#x27;&#x27;&#x27;<br>注释内容<br>注释内容<br>注释内容<br>&#x27;&#x27;&#x27;<br><br></code></pre></td></tr></table></figure><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p>和Java的异常处理机制一样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>try:<br>会出异常代码<br>except 监听异常类型:<br>提示出异常的代码<br><br></code></pre></td></tr></table></figure><p>可以直接在异常类型后加<code>as 变量名</code>,之后直接print(变量名)，打印出提示信息。</p><p>代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>try:<br>value = 10 / 0<br>except ZeroDivisionError as err:<br>print(&quot;Divided by Zero&quot;)<br>print(err)<br><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://pic.imgdb.cn/item/6107e4d85132923bf86dab14.jpg"></p><h2 id="文件方法"><a href="#文件方法" class="headerlink" title="文件方法"></a>文件方法</h2><p>open(参数a, 参数b)函数,参数a和参数b都是字符串形式，参数a是要打开的文件的相对路径或绝对路径，参数b是文件打开模式。后面需要关闭文件。</p><p>参数b:</p><ol><li>“r”:以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</li><li>“w”:打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。</li><li>“r+”:打开一个文件用于读写。文件指针将会放在文件的开头。</li><li>“w+”:打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。</li><li>“a”:打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</li></ol><h3 id="读文件"><a href="#读文件" class="headerlink" title="读文件"></a>读文件</h3><p>readable():查看文件是否可读</p><p>read():读整个文件</p><p>readline():读一行</p><p>readlines():返回一个数组，数组的每一个元素分别是<br>文件的一行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>file = open(&quot;test.txt&quot;, &quot;r&quot;)<br><br>print(file.readable())<br>print(file.read())<br><br>file.close()<br><br></code></pre></td></tr></table></figure><p>read()这里的代码会空两行，一行是print()的一行，还有一行是read()每打印出一行的换行。</p><p style = "color: red">read()在当前指针处开始读，而执行完一次后，指针在文件尾部，其后为空，所以之后的read()每次运行均为空。readline()、readlines()同理</p><p>readlines()</p><p>要打开的文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>123<br>456<br>789<br><br></code></pre></td></tr></table></figure><p>readlines()打印出来：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>[&#x27;123\n&#x27;, &#x27;456\n&#x27;, &#x27;789\n&#x27;]<br><br></code></pre></td></tr></table></figure><h3 id="写文件"><a href="#写文件" class="headerlink" title="写文件"></a>写文件</h3><ol><li>open()函数的第二个参数为”a”,在后面添加新内容，具体如参数b中所示。</li></ol><p>这里需要注意：没有换行符号的话会出现写的东西非常混乱。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>file = open(&quot;test.txt&quot;, &quot;a&quot;)<br><br>file.write(&quot;123&quot;)<br>file.write(&quot;123&quot;)<br><br>file.close()<br><br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>没执行程序前：<br>123<br>456<br>789<br>执行后：<br>123<br>456<br>789123123<br><br></code></pre></td></tr></table></figure><p>应该改为<code>file.write(&quot;\n123&quot;)</code>,才可以实现每一次增加的都是单独一行而不会混乱。<br>2. open()函数的第二个参数为”w”。和上面的相似，不同的是：不是在文件后添加新内容，而是重写文件内容。</p><h3 id="读写文件"><a href="#读写文件" class="headerlink" title="读写文件"></a>读写文件</h3><p>open()函数的第二个参数为”r+”或”w+”。</p><p>“r+”和”w+”相同点： </p><ol><li>文件权限都是可读可写</li><li>文件的指针放在文件的开头</li></ol><p>不同点：</p><p>“r+”不是重写文件，而是覆盖，即当原来的文件内容比写的文件内容少时，后面的内容还在，而”w+”是重写文件。</p><p>例子：</p><p>原来的内容：</p><p>123456789</p><p>写”abc”:</p><p>“r+”:变为”abc456789”</p><p>“w+”:变为”abc”</p><p>自己尝试后出现的问题:</p><ol><li>打印不出东西:</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>file = open(&quot;test.txt&quot;, &quot;r+&quot;)<br><br>file.write(&quot;\n123\n456\n789&quot;)<br>print(file.read())<br><br>file.close()<br><br></code></pre></td></tr></table></figure><ol start="2"><li>每次打印的都是文件打开前的内容，且从重写文件变化成了在文件后添加内容，即和参数为”a”时一样。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>file = open(&quot;test.txt&quot;, &quot;r+&quot;)<br><br>file.write(&quot;\n123\n456\n789&quot;)<br>print(file.readlines())<br><br>file.close()<br><br></code></pre></td></tr></table></figure><p>原因：</p><p>文件指针在文件的开头，经过write()方法对文件进行写操作后，这时候的文件指针已经来到了文件的尾部。</p><p>read()在当前指针处开始读，而当前指针在文件尾部，其后为空，所以打印文件为空（两行空行）。</p><p>readlines()时回到文件开头处开始读。而刚刚写入的还没有保存，所以只能读出写入操作之前的内容。写的时候在文件尾部写。<b style = "color:red">未解决疑问：为什么write()搭配readlines()后，写文件时是在文件尾部写，而搭配read()时是在文件开头写。</b></p><p>上面问题解决方案：使用seek()函数，让文件指针指向需要的位置。seek(0)即指向文件开头。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>file = open(&quot;test.txt&quot;, &quot;r+&quot;)<br><br>file.write(&quot;\n123\n456\n789&quot;)<br>file.seek(0)<br>print(file.read())  //print(file.readlines())<br><br>file.close()<br><br></code></pre></td></tr></table></figure><h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>def __init__(self, 参数a): # 注意下划线都是两条,第一个参数不需要传参，相当于其它语言的&quot;this&quot;<br><br></code></pre></td></tr></table></figure><p>例子：</p><p>其中，类单独放在了另一个py文件中。</p><p>Student类</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>class Student:<br><br>def __init__(self, name, major, gpa):<br>self.name = name<br>self.major = major<br>self.gpa = gpa<br><br>def on_honor_roll(self):<br>if self.gpa &gt;= 3.5:<br>return True<br>else:<br>return False<br><br></code></pre></td></tr></table></figure><p>main类:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>from Student import Student<br><br>student1 = Student(&quot;Jim&quot;, &quot;Business&quot;, 3.1)<br>student2 = Student(&quot;Pam&quot;, &quot;Business&quot;, 3.8)<br><br>print(student1.on_honor_roll())<br>print(student2.gpa)<br><br></code></pre></td></tr></table></figure><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>class 子类(父类):<br>子类方法，可以重写覆盖父类的方法，也可以增添方法<br><br></code></pre></td></tr></table></figure><p>实例：</p><p>Chef类(父类):</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">class Chef:<br><br>def make_chicken(self):<br>print(&quot;The chef makes a chicken&quot;)<br><br>def make_salad(self):<br>print(&quot;The chef makes salad&quot;)<br><br>def make_special_dish(self):<br>print(&quot;The chef makes bbq ribs&quot;)<br><br></code></pre></td></tr></table></figure><p>ChineseChef（子类）:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>from Chef import Chef<br><br>class ChineseChef(Chef):<br><br>def make_special_dish(self):<br>print(&quot;The chef makes orange chicken&quot;)<br><br>def make_fried_rice(self):<br>print(&quot;The chef makes fried rice&quot;)<br><br></code></pre></td></tr></table></figure><p>main类：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>from Chef import Chef<br>from ChineseChef import ChineseChef<br><br>chef = Chef()<br>chef.make_chicken()<br>chef.make_special_dish()<br><br>print()<br><br>chinesechef = ChineseChef()<br>chinesechef.make_chicken()<br>chinesechef.make_special_dish()<br>chinesechef.make_fried_rice()<br><br><br></code></pre></td></tr></table></figure><h2 id="解释器"><a href="#解释器" class="headerlink" title="解释器"></a>解释器</h2><h3 id="环境变量设置"><a href="#环境变量设置" class="headerlink" title="环境变量设置"></a>环境变量设置</h3><ol><li>右键点击”计算机”，然后点击”属性”</li><li>点击”高级系统设置”</li></ol><p><img src="https://pic.imgdb.cn/item/610f67525132923bf8ee2b60.jpg"><br>3. 点击”环境变量”</p><p><img src="https://pic.imgdb.cn/item/610f67dc5132923bf8ef0326.jpg"><br>4. 选中”用户变量的Path”,点击”编辑”</p><p><img src="https://pic.imgdb.cn/item/610f68ca5132923bf8f04bda.jpg"><br>5. 点击”新建”,添加python安装路径</p><p><img src="https://pic.imgdb.cn/item/610f69a15132923bf8f17825.jpg"><br>6. 之后一直点击”确定”即可</p><h3 id="cmd写Python"><a href="#cmd写Python" class="headerlink" title="cmd写Python"></a>cmd写Python</h3><ol><li>win + r, 输入”cmd”</li><li>输入”python”, 变成下图所示</li></ol><p><img src="https://pic.imgdb.cn/item/610f6a4e5132923bf8f270ec.jpg"><br>3. 写python代码，如下图所示</p><p><img src="https://pic.imgdb.cn/item/610f66855132923bf8ed19c6.jpg"></p><p>学习:Youtube：Mike Dane</p><p>文件读写部分参考：<a href="https://blog.csdn.net/qq_38106472/article/details/86305846">Python文件进行写操作后立即读出的结果、原因分析、解决方法</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小试Python(一)</title>
      <link href="/2021/08/04/Python1/"/>
      <url>/2021/08/04/Python1/</url>
      
        <content type="html"><![CDATA[<h1 id="小试Python-一"><a href="#小试Python-一" class="headerlink" title="小试Python(一)"></a>小试Python(一)</h1><p>初步学习一下Python。</p><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>Python是一种解释型、面向对象、动态数据类型的高级程序语言。</p><p>官方宣布，2020年1月1日，停止Python2的更新。</p><p>Python2.7是最后一个Python2.x版本。</p><h2 id="第一个Python程序"><a href="#第一个Python程序" class="headerlink" title="第一个Python程序"></a>第一个Python程序</h2><p>Python不像C++、Java一样，需要有主函数,语句后也不需要分号，函数、条件控制、类等不需要有”{}”包住，但需要有缩进，有缩进相当于加上”{}”，赋值语句缩进会出错。</p><p><code>print(&quot;Hello World!&quot;)</code><br><img src="https://img-blog.csdnimg.cn/img_convert/667c9c7a38af5c81e762945c00848b4c.png"></p><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>和其他语言相似，定义时不需要强调类型，直接赋值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>name = &quot;John&quot;<br>num1 = 10<br>num2 = 20<br>print(name + &quot;:&quot; + str(num1 + num2))<br><br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/img_convert/e1fbc4554af2acc8b5efddfed08689b0.png"></p><p>另外，Python中没有自增”i++”和自减”i–”,但存在”i += 1”</p><h2 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h2><p>输入的默认都是字符串，需要整型、浮点型需转换，<br>字符串可直接用”+”连接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">num1 = input(&quot;Enter first number: &quot;)<br>num2 = input(&quot;Enter second number: &quot;)<br>result = int(num1) + int(num2)<br>print(&quot;Result is: &quot; + str(result))<br><br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/img_convert/d059987cff8a4e5c95d95705bbce9a9c.png"></p><h2 id="数组-列表"><a href="#数组-列表" class="headerlink" title="数组(列表)"></a>数组(列表)</h2><p>下标可以是负数，-1代表最后一个元素，-2代表倒数第二个…，正数和负数都不可以超出数组范围</p><p>取部分：<br>num[1:]:输出下标1及下标比1大的所有数组元素<br>num[1:4]:输出下标范围为[1, 4)的元素，注意：不包括4</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">num = [1, 2, 3, 4, 5, 6]<br>print(num)<br>print(num[1])<br>print(num[-2])<br>print(num[1:])<br>print(num[1:4])<br>print(len(num))<br><br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/img_convert/eac7ea7a580a0494b258e92039c7a6e3.png"></p><h2 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h2><p>和数组类似，元组的元素不能修改，使用小括号</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">tuples = (1, 2, 3, 4, 5, 6)<br>print(tuples)<br>print(tuples[1])<br>print(tuples[1:])<br>print(tuples[1:4])<br><br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/img_convert/2b5359646b9644e34ea781f311441d91.png"></p><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>关键字def开头</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>def add(num1, num2):<br>result = num1 + num2<br>return result<br>def display():<br>print(&quot;Hello World!&quot;)<br>print(add(1, 1))<br>display()<br><br></code></pre></td></tr></table></figure><h2 id="条件控制（if）"><a href="#条件控制（if）" class="headerlink" title="条件控制（if）"></a>条件控制（if）</h2><p>Python中没有”&amp;&amp;”和”||”，也没有”if(!0)”这种用法，分别有类似的逻辑运算符”and”，”or”，”not”。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>test = True<br>if test and False:<br>   print(1)<br>elif False or 0:<br>   print(2)<br>elif not(0):<br>   print(3)<br>else:<br>   print(4)<br><br></code></pre></td></tr></table></figure><p>结果：细品</p><h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><p>字典的每个键值对key=&gt;value用冒号分割，整个字典包括在花括号中，可存储热恩义类型对象</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>dictionary = &#123;<br>1: &quot;one&quot;,<br>2: &quot;two&quot;,<br>&quot;o&quot;: 1,<br>&quot;t&quot;:&quot;test&quot;<br>&#125;<br>print(dictionary[1])<br>print(dictionary[&quot;t&quot;])<br>print(dictionary.get(&quot;o&quot;))<br>print()<br><br>print(dictionary.get(5))  # 用get()找不到不会报错，只有一个参数时，找不到返回&quot;None&quot;<br>print(dictionary.get(5, &quot;You can&#x27;t find it&quot;)) # 两个参数时，找不到返回第二个参数<br><br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/60fcece85132923bf8ddc485.jpg"></p><h2 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h2><p>和其他语言基本相同原理</p><p>示例如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>i = 1<br>while i &lt;= 10:<br>print(i)<br>i += 1<br><br></code></pre></td></tr></table></figure><h2 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h2><p>相当于Java的增强for循环。</p><h3 id="遍历数组示例："><a href="#遍历数组示例：" class="headerlink" title="遍历数组示例："></a>遍历数组示例：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>number = [1, 2, 3, 4, 5, 7]<br>for n in number:<br>print(n)<br><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://pic.imgdb.cn/item/610771125132923bf8aebc5b.jpg"></p><h3 id="搭配range-函数"><a href="#搭配range-函数" class="headerlink" title="搭配range()函数"></a>搭配range()函数</h3><ol><li>只有一个参数n：遍历[0,n)，不包括n</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>for index in range(6):<br>print(index)<br><br></code></pre></td></tr></table></figure><p>结果：</p><p><img src="https://pic.imgdb.cn/item/610772165132923bf8b1b40d.jpg"><br>2. 有两个参数，第一个参数为m,第二个参数为n:遍历[m,n)。</p><p>使用range()函数遍历数组：先用len()函数得到数组长度，然后用以上方法可以得到数组下标[0,n)。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>number = [1, 2, 3, 4, 5, 7]<br>for index in range(len(number)):<br>print(number[index])<br><br></code></pre></td></tr></table></figure><p>结果和上面遍历数组的方法一样。</p><p>学习:Youtube<br>Mike Dane</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flex布局</title>
      <link href="/2021/07/29/Flex-Layout/"/>
      <url>/2021/07/29/Flex-Layout/</url>
      
        <content type="html"><![CDATA[<h1 id="Flex布局"><a href="#Flex布局" class="headerlink" title="Flex布局"></a>Flex布局</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>Flex是Flexible Box的缩写， 用来为盒状模型提供最大的灵活性，也被称为”伸缩布局”，”弹性布局”，”伸缩盒布局”，”弹性盒布局”。</p><p>任何容器都可以指定为Flex布局（包括行内元素）<br>设为Flex布局后，子元素的float、clear和vertical-align属性将失效，Flex布局可以实现垂直居中</p><p>采用Flex布局的元素，称为Flex容器（flex container），简称”容器”。它的所有子元素自动成为容器成员，称为Flex项目(flex item), 简称”项目”。</p><h2 id="容器的属性"><a href="#容器的属性" class="headerlink" title="容器的属性"></a>容器的属性</h2><h3 id="flex-direction属性"><a href="#flex-direction属性" class="headerlink" title="flex-direction属性"></a>flex-direction属性</h3><p>flex-direction属性决定主轴的方向，即项目的排列方向。</p><ol><li>row（默认值）：主轴为水平方向，起点在左边</li><li>row-reverse: 主轴为水平方向，起点在右边</li><li>column：主轴为垂直方向，起点在上面</li><li>column-reverse: 主轴为垂直方向，起点在下面<br><img src="https://img-blog.csdnimg.cn/img_convert/58e1e22a275d792c9e8d15c45f48169c.png"></li></ol><p>例子：<br>row:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;zh-CN&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>&lt;title&gt;Document&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;style&gt;<br>div &#123;<br>display: flex;<br>/*设置为flex布局*/<br>width: 60%;<br>height: 300px;<br>background-color: pink;<br>margin: 20px auto;<br>flex-direction: row;<br>/*设置主轴为水平方向，起点在左边*/<br>&#125;<br><br>span &#123;<br>width: 20%;<br>height: 150px;<br>background-color: purple;<br>margin-right: 5px;<br>color: #fff;<br>&#125;<br>&lt;/style&gt;<br><br>&lt;body&gt;<br>&lt;div&gt;<br>&lt;span&gt;1&lt;/span&gt;<br>&lt;span&gt;2&lt;/span&gt;<br>&lt;span&gt;3&lt;/span&gt;<br>&lt;/div&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br><br></code></pre></td></tr></table></figure><p>结果：<br><img src="https://img-blog.csdnimg.cn/img_convert/3c5a1ad064ff2032197d0028b5146ab9.png"><br>row-reverse:</p><p><code>flex-direction: row-reverse;</code></p><p><img src="https://img-blog.csdnimg.cn/img_convert/5782ba455662414b5213b2b244c1d9fe.png"></p><p>column：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;zh-CN&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>&lt;title&gt;Document&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;style&gt;<br>div &#123;<br>display: flex;<br>/*设置为flex布局*/<br>width: 60%;<br>height: 300px;<br>background-color: pink;<br>margin: 20px auto;<br>flex-direction: column;<br>/*设置主轴为垂直方向，起点在上面*/<br>&#125;<br><br>span &#123;<br>width: 20%;<br>height: 150px; /*这里3个span的高度总和大于父元素的300px，但结果会和100px相同*/<br>background-color: purple;<br>margin-right: 5px;<br>color: #fff;<br>&#125;<br>&lt;/style&gt;<br><br>&lt;body&gt;<br>&lt;div&gt;<br>&lt;span&gt;1&lt;/span&gt;<br>&lt;span&gt;2&lt;/span&gt;<br>&lt;span&gt;3&lt;/span&gt;<br>&lt;/div&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br><br></code></pre></td></tr></table></figure><p>结果：<br><img src="https://img-blog.csdnimg.cn/img_convert/f86caf03dd32db1af42dd66e86d414cb.png"></p><h3 id="justify-content属性"><a href="#justify-content属性" class="headerlink" title="justify-content属性"></a>justify-content属性</h3><p>justify-content属性定义了项目在主轴上的排列方式</p><ol><li>flex-start(默认值)：左对齐</li><li>flex-end：右对齐</li><li>center：居中</li><li>space-between：先两端对齐，之后剩下的项目平分剩余空间。项目之间的间隔相等</li><li>space-around：所有项目平分剩余空间。每个项目两侧的距离相等。项目之间的距离比项目与边框的间隔大一倍。<br><img src="https://img-blog.csdnimg.cn/img_convert/3c225d5d577c61e784e5bfe873c8a97e.png"></li></ol><h3 id="flex-wrap属性"><a href="#flex-wrap属性" class="headerlink" title="flex-wrap属性"></a>flex-wrap属性</h3><p>flex-wrap属性定义如果一条轴线排不下所有项目，是否换行</p><ol><li>nowrap(默认)：不换行</li><li>wrap：换行</li></ol><p>nowrap:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br> &lt;!DOCTYPE html&gt;<br> &lt;html lang=&quot;zh-CN&quot;&gt;<br> <br> &lt;head&gt;<br> &lt;meta charset=&quot;UTF-8&quot;&gt;<br> &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br> &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br> &lt;title&gt;Document&lt;/title&gt;<br> &lt;/head&gt;<br> &lt;style&gt;<br> div &#123;<br> display: flex;<br> width: 60%;<br> height: 400px;<br> background-color: pink;<br> margin: 20px auto;<br> flex-wrap: nowrap; <br>/*设置为不换行，默认也是不换行*/<br> &#125;<br> <br> span &#123;<br> width: 20%;<br> height: 150px;<br> background-color: purple;<br> margin-right: 5px;<br> color: #fff;<br> &#125;<br> <br>     div span:nth-child(2n) &#123;<br> width: 30%;<br> &#125; <br> &lt;/style&gt;<br> <br> &lt;body&gt;<br> &lt;div&gt;<br> &lt;span&gt;1&lt;/span&gt;<br> &lt;span&gt;2&lt;/span&gt;<br> &lt;span&gt;3&lt;/span&gt;<br> &lt;span&gt;4&lt;/span&gt;<br> &lt;span&gt;5&lt;/span&gt;<br> &lt;span&gt;6&lt;/span&gt;<br> &lt;/div&gt;<br> &lt;/body&gt;<br> <br> &lt;/html&gt;<br><br></code></pre></td></tr></table></figure><p>结果：<br><img src="https://img-blog.csdnimg.cn/img_convert/5c9b13a07030945ad7261b8e322d88cb.png"></p><p>wrap:</p><p>把上面的代码带注释部分变成<code>flex-wrap: wrap;</code></p><p>结果：<br><img src="https://img-blog.csdnimg.cn/img_convert/015f30241ea5753cec65f703f4a6761e.png"></p><h3 id="align-items属性"><a href="#align-items属性" class="headerlink" title="align-items属性"></a>align-items属性</h3><p>align-items属性定义侧轴上的子元素排列方式（单行）</p><ol><li>flex-start: 侧轴起点对齐</li></ol><p><font color = "red">当主轴为水平方向时，侧轴为垂直方向，起点为上边，终点为下边；当主轴为垂直方向时，侧轴为水平方向，起点为左边，终点为右边</font><br>2. flex-end:侧轴终点对齐<br>3. center:侧轴中点对齐（垂直居中）<br>4. stretch(默认值):如果项目没有设置高度或者高度设置为auto，则占满整个容器的高度，主轴为垂直方向时，则换宽度<br>5. baseline:项目的第一行文字的基线对齐</p><p><img src="https://img-blog.csdnimg.cn/img_convert/80dd46979fd8c1b508fea98b988067d3.png"></p><h3 id="align-content属性"><a href="#align-content属性" class="headerlink" title="align-content属性"></a>align-content属性</h3><p>align-content属性定义侧轴上的子元素排列方式（多行）</p><p>只能用于项目出现换行的情况，<font color = "red">在单行下没有效果</font></p><ol><li>flex-start: 侧轴起点对齐</li><li>flex-end:侧轴终点对齐</li><li>center:侧轴中点对齐（垂直居中）</li><li>space-between:子项在侧轴先分布在两头，再平分剩余空间。</li><li>space-around:子项在侧轴平分剩余空间。</li><li>stretch(默认值)：设置子项元素平分父元素高度</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/697fc83fd36dc4c834925369dd8e852f.png"></p><p>space-between:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;zh-CN&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>&lt;title&gt;Document&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;style&gt;<br>div &#123;<br>display: flex;<br>width: 60%;<br>height: 500px;<br>background-color: pink;<br>margin: 20px auto;<br>flex-direction: row;<br>align-content: space-between;<br>flex-wrap: wrap;<br>&#125;<br><br>span &#123;<br>width: 20%;<br>height: 100px;<br>background-color: purple;<br>margin: 10px;<br>color: #fff;<br>&#125;<br><br>div span:nth-child(2n) &#123;<br>width: 40%;<br>&#125;<br>&lt;/style&gt;<br><br>&lt;body&gt;<br>&lt;div&gt;<br>&lt;span&gt;1&lt;/span&gt;<br>&lt;span&gt;2&lt;/span&gt;<br>&lt;span&gt;3&lt;/span&gt;<br>&lt;span&gt;4&lt;/span&gt;<br>&lt;span&gt;5&lt;/span&gt;<br>&lt;span&gt;6&lt;/span&gt;<br>&lt;/div&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br><br></code></pre></td></tr></table></figure><p>结果：<br><img src="https://img-blog.csdnimg.cn/img_convert/a290505b6b083e25085735ec1407cd82.png"></p><p>space-around:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;zh-CN&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>&lt;title&gt;Document&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;style&gt;<br>div &#123;<br>display: flex;<br>width: 60%;<br>height: 500px;<br>background-color: pink;<br>margin: 20px auto;<br>flex-direction: row;<br>align-content: space-around;<br>flex-wrap: wrap;<br>&#125;<br><br>span &#123;<br>width: 20%;<br>height: 100px;<br>background-color: purple;<br>margin: 10px;<br>color: #fff;<br>&#125;<br><br>div span:nth-child(2n) &#123;<br>width: 40%;<br>&#125;<br>&lt;/style&gt;<br><br>&lt;body&gt;<br>&lt;div&gt;<br>&lt;span&gt;1&lt;/span&gt;<br>&lt;span&gt;2&lt;/span&gt;<br>&lt;span&gt;3&lt;/span&gt;<br>&lt;span&gt;4&lt;/span&gt;<br>&lt;span&gt;5&lt;/span&gt;<br>&lt;span&gt;6&lt;/span&gt;<br>&lt;/div&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br><br></code></pre></td></tr></table></figure><p>结果：<br><img src="https://img-blog.csdnimg.cn/img_convert/81517b72bf167f6617c9025f6b658781.png"></p><h3 id="flex-flow属性"><a href="#flex-flow属性" class="headerlink" title="flex-flow属性"></a>flex-flow属性</h3><p>flex-flow属性是flex-direction属性和flex-wrap属性的简写形式，默认值为row nowrap。<code>flex-flow: row nowrap;</code></p><h2 id="项目的属性"><a href="#项目的属性" class="headerlink" title="项目的属性"></a>项目的属性</h2><h3 id="flex属性"><a href="#flex属性" class="headerlink" title="flex属性"></a>flex属性</h3><p>flex属性定义子项目分配剩余空间，用flex来表示占多少份数，可以是百分比形式，其中百分比是相对与容器（即父级）来说的。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;zh-CN&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>&lt;title&gt;Document&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;style&gt;<br>div &#123;<br>display: flex;<br>width: 60%;<br>height: 130px;<br>background-color: pink;<br>margin: 20px auto;<br>flex-wrap: wrap;<br>&#125;<br><br>div p &#123;<br>color: #fff;<br>&#125;<br><br>div p:nth-child(2n+1) &#123;<br>width: 100px;<br>height: 100px;<br>background-color: purple;<br>&#125;<br><br>div p:nth-child(2) &#123;<br>flex: 1;<br>background-color: skyblue;<br>&#125;<br>&lt;/style&gt;<br><br>&lt;body&gt;<br>&lt;div&gt;<br>&lt;p&gt;1&lt;/p&gt;<br>&lt;p&gt;2&lt;/p&gt;<br>&lt;p&gt;3&lt;/p&gt;<br>&lt;/div&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br><br></code></pre></td></tr></table></figure><p>结果：<br><img src="https://img-blog.csdnimg.cn/img_convert/a89d9465690e76e640a6e4cf33fe34ec.png"></p><p>上图分析：紫色项目有宽度，蓝色项目没有宽度，蓝色项目添加了<code>flex:1</code>,所以蓝色项目占满剩余空间。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;zh-CN&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>&lt;title&gt;Document&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;style&gt;<br>div &#123;<br>display: flex;<br>width: 60%;<br>height: 120px;<br>background-color: pink;<br>margin: 20px auto;<br>flex-wrap: wrap;<br>&#125;<br><br>span &#123;<br>height: 100px;<br>background-color: purple;<br>margin: 10px;<br>color: #fff;<br>flex: 1;<br>&#125;<br><br>div span:nth-child(2n) &#123;<br>flex: 2;<br>background-color: skyblue;<br>&#125;<br>&lt;/style&gt;<br><br>&lt;body&gt;<br>&lt;div&gt;<br>&lt;span&gt;1&lt;/span&gt;<br>&lt;span&gt;2&lt;/span&gt;<br>&lt;span&gt;3&lt;/span&gt;<br>&lt;span&gt;4&lt;/span&gt;<br>&lt;/div&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br><br></code></pre></td></tr></table></figure><p>结果：<br><img src="https://img-blog.csdnimg.cn/img_convert/536af386fda8e82d53264ee11873cfbf.png"></p><p>分析：</p><p>子项目都没有宽度，最后按flex的占比分配剩余空间，如第一个紫色项目占剩余空间1/（1 + 2 + 1 + 2） = 1 /6</p><h3 id="align-self属性"><a href="#align-self属性" class="headerlink" title="align-self属性"></a>align-self属性</h3><p>align-self属性控制子项自己在侧轴上的排列方式，允许单个项目有与其他项目不一样的排列方式，可覆盖align-items属性。默认值为auto,表示继承父元素的align-items属性，如果没有父元素，则等同于stretch。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;zh-CN&quot;&gt;<br><br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot;&gt;<br>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;<br>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>&lt;title&gt;Document&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;style&gt;<br>div &#123;<br>display: flex;<br>width: 60%;<br>height: 300px;<br>background-color: pink;<br>margin: 20px auto;<br>align-items: flex-start;<br>&#125;<br><br>span &#123;<br>width: 20%;<br>height: 100px;<br>background-color: purple;<br>margin: 10px;<br>color: #fff;<br>&#125;<br><br>div span:nth-child(2n) &#123;<br>align-self: flex-end;<br>&#125;<br>&lt;/style&gt;<br><br>&lt;body&gt;<br>&lt;div&gt;<br>&lt;span&gt;1&lt;/span&gt;<br>&lt;span&gt;2&lt;/span&gt;<br>&lt;span&gt;3&lt;/span&gt;<br>&lt;/div&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br><br></code></pre></td></tr></table></figure><p>结果：<br><img src="https://img-blog.csdnimg.cn/img_convert/75646d1194776e1936373798a0a36ea5.png"></p><h3 id="order属性"><a href="#order属性" class="headerlink" title="order属性"></a>order属性</h3><p>order属性定义项目的排列顺序。数值越小，排列越靠前，默认值为0，可以为负数。<code>order: -1;</code></p><p><img src="https://img-blog.csdnimg.cn/img_convert/a7f50531354de0d62e94d476fbcd4803.png"></p><h3 id="flex-shrink属性"><a href="#flex-shrink属性" class="headerlink" title="flex-shrink属性"></a>flex-shrink属性</h3><p>flex-shrink属性定义了项目的缩小比例，默认为1，即如果空间不足时，该项目将缩小。<code>flex-shrink: 1;</code></p><p>如果所有项目的flex-shrink属性都为1，当空间不足时，都将等比例缩小。如果一个项目的flex-shrink属性为0， 其他项目都为1，则当空间不足时，前者不缩小。</p><p>flex-shrink属性是导致当容器的flex-wrap属性为nowrap时，所有项目不会换行的原因。</p><p>参考链接：<a><a href="https://www.runoob.com/w3cnote/flex-grammar.html">https://www.runoob.com/w3cnote/flex-grammar.html</a></a></p><p>pink老师前端入门教程</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 布局 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>github.io出现的问题及解决方案</title>
      <link href="/2021/07/21/Blog-problem/"/>
      <url>/2021/07/21/Blog-problem/</url>
      
        <content type="html"><![CDATA[<h1 id="github-io遇到的问题"><a href="#github-io遇到的问题" class="headerlink" title="github.io遇到的问题"></a>github.io遇到的问题</h1><h2 id="1-你的连接不是专用连接"><a href="#1-你的连接不是专用连接" class="headerlink" title="1. 你的连接不是专用连接"></a>1. 你的连接不是专用连接</h2><p>放假回家后打开自己的博客，发现无法打开博客，一开始以为是调样式时不小心搞坏了，打开别人的githunb.io博客发现都会出问题，并且用手机不连接wifi可以正常打开<br>解决办法：</p><h3 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h3><ol><li>首先调整键盘为英文；</li><li>鼠标点击当前页面任意位置，然后输入thisisunsafe<br>输入完成后页面会自动刷新<br>注意是直接输入，不要地址栏输入<br>这个方法和输入的暗示一样，是方便但不安全的，而且也会定期更改，从badidea更改为thisisunsafe</li></ol><h3 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h3><ol><li>进入<a>chrome://net-internals/#hsts</a>页面</li><li>点击Domain Security Policy</li><li>在下图区域输入域名，点击”Delete”按钮<br><img src="https://img-blog.csdnimg.cn/img_convert/83bcac2264e44f0a7a69b89f7d9ebc3d.png"></li><li>在下图区域输入域名，点击”Query”按钮，结果应为”Not found”.<br><img src="https://img-blog.csdnimg.cn/img_convert/900c6ee399ec5bb42f9cb6f6f67920aa.png"></li></ol><h2 id="2-访问xxx-github-io-被拒绝"><a href="#2-访问xxx-github-io-被拒绝" class="headerlink" title="2. 访问xxx.github.io 被拒绝"></a>2. 访问xxx.github.io 被拒绝</h2><p>原因：国内运营商DNS污染，域名指向不正确的ip地址<br>拓展：DNS(Domain Name System) 域名系统<br>在网络上访问网站，通过DNS服务器，把域名转换成ip地址<br>（1）系统会先查找本地的hosts文件，确认是否有与域名对应的ip地址，若有，则直接访问ip地址对应的域名服务器<br>（2）本地hosts文件没有与域名对应的ip地址，向已知的DNS服务器提出域名解析<br><a href="https://www.cnblogs.com/yihr/p/9720715.html">更多</a></p><h3 id="方法1："><a href="#方法1：" class="headerlink" title="方法1："></a>方法1：</h3><ol><li>查找ip地址，通过<a><a href="http://tool.chinaz.com/dns">http://tool.chinaz.com/dns</a></a>,复制ip地址<br><img src="https://img-blog.csdnimg.cn/img_convert/cdb1543eb19b805bb91d38356fd8a713.png"></li><li>打开hosts文件，路径：C:\Windows\System32\drivers\etc<br>按下图示例把ip地址和域名输入后保存，需要管理员权限<br><img src="https://img-blog.csdnimg.cn/img_convert/04229be8d57810ba531f3072bd6650cb.png"><br><img src="https://img-blog.csdnimg.cn/img_convert/a8d3540d896b6427d57061d8d088b2f1.png"></li><li>重新访问，正常<br>注意：该方法只能使对应的域名可以正常访问，其他没有添加进去hosts文件的域名还是会出现问题</li></ol><h3 id="方法2："><a href="#方法2：" class="headerlink" title="方法2："></a>方法2：</h3><p>使用<a href="https://gitee.com/docmirror/dev-sidecar">dev-sidecar工具</a><br>功能：</p><ol><li>dns优选</li><li>github加速</li><li>npm加速<br>等等<br>可以实现解决所有的访问github.io被拒绝的问题，非常好用的工具</li></ol><h3 id="方法3："><a href="#方法3：" class="headerlink" title="方法3："></a>方法3：</h3><p>手动修改DNS，尝试过很多个DNS解析服务，只有首选DNS服务器设置为114.114.114.114，备用设置为208.67.222.222成功了一个下午，之后莫名打回原形， 使用<a href="https://www.sordum.org/7952/dns-jumper-v2-2/">DNS jupmper</a>一键设置也没有成功，猜测：DNS服务器不稳定，未找到解决方案。</p><p>参考链接：<a><a href="https://www.itranslater.com/qa/details/2582179179139695616">https://www.itranslater.com/qa/details/2582179179139695616</a></a><br><a><a href="https://blog.csdn.net/milk_aquarium/article/details/113766559">https://blog.csdn.net/milk_aquarium/article/details/113766559</a></a></p>]]></content>
      
      
      <categories>
          
          <category> 小技能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitHub Pages + Hexo - 搭建博客</title>
      <link href="/2021/07/14/Blog/"/>
      <url>/2021/07/14/Blog/</url>
      
        <content type="html"><![CDATA[<h2 id="1-准备"><a href="#1-准备" class="headerlink" title="1. 准备"></a>1. 准备</h2><p>安装<a href="http://git-scm.com/">git</a><br>安装<a href="https://nodejs.org/en/">Node.js</a></p><h2 id="2-GitHub-Pages"><a href="#2-GitHub-Pages" class="headerlink" title="2. GitHub Pages"></a>2. GitHub Pages</h2><pre><code>1. 注册GitHub2. 登录GitHub3. 新建仓库</code></pre><p><img src="https://img-blog.csdnimg.cn/img_convert/c12733a9a85d5898fd728ddc77b792bb.png" alt="Snipaste_2021-06-21_12-08-29.png"><br>4. 配置SSH-Key<br><a href="https://jingyan.baidu.com/article/a65957f4e91ccf24e77f9b11.html">参考步骤</a><br><a href="https://blog.csdn.net/qq_36992688/article/details/102665783">扩展：git配置多个ssh-key</a></p><h2 id="3-安装Hexo"><a href="#3-安装Hexo" class="headerlink" title="3. 安装Hexo"></a>3. 安装Hexo</h2><pre><code>1. 创建文件夹并进入2. git Bash3. 执行命令</code></pre><p><code>npm install -g hexo-cli</code><br>    4. 初始化框架<br><code>hexo init blog</code><br>blog是装博客的文件夹<br>    5. 进入blog文件夹<br><code>cd blog</code><br>    6. 执行<br><code>npm install</code><br>    7. 执行<br><code>hexo server</code> 或者 <code>hexo s</code><br>成功的话，能在<a href="http://localhost:4000，">http://localhost:4000，</a> 能看到下图页面<br><img src="https://img-blog.csdnimg.cn/img_convert/949b947b54217805f7289c28f243f565.png" alt="blog.png"></p><h2 id="4-关联GitHub"><a href="#4-关联GitHub" class="headerlink" title="4. 关联GitHub"></a>4. 关联GitHub</h2><ol><li>修改配置文件<br>找到本地blog文件夹下_config.yml，打开后滑到最后， 修改成下图样子, 冒号后都要有空格</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/1502530d461a1980f83689f85658853d.png" alt="1.png"><br><br><font color = "#dd001b">注意：2020年10月1日起，所有”master”分支都改名为”main”，而网上的教程大部分是”master”</font><br>题外话：原因：使这家公司摆脱任何提及奴隶制的印象，换成不会有误解的包容性术语<br>2. blog目录下执行<br><code>npm install hexo-deployer-git --save</code><br>3. 执行<code>hexo  generate</code> 和 <code>hexo deploy</code>指令或者<br><code>hexo g -d</code>指令<br>其中，<code>hexo  generate</code> 作用是生成静态文件<br><code>hexo  deploy</code> 作用是实现部署到远程站点<br>4. 发布新帖子<br><code>hexo new &quot;My New Post</code><br>会在blog\source_posts下创建新文件My-New-Post.md<br>5. 执行<code>hexo g</code><br>可以在blog\source_posts\日期文件夹中发现生成了新文件夹My-New-Post<br>6. 执行<code>hexo d</code><br><img src="https://img-blog.csdnimg.cn/img_convert/f5c543454c7ee0c674e5334a1cf162ba.png" alt="image.png"></p><h2 id="5-主题"><a href="#5-主题" class="headerlink" title="5. 主题"></a>5. 主题</h2><ol><li>下载主题<a href="https://hexo.io/themes/">hexo主题</a></li><li>安装教程可查看对应主题的安装教程</li><li>修改主题文件夹的配置文件（_config.yml）添加想要的功能和取消不想要的功能</li><li>修改样式<br>①电脑端浏览器打开博客，右键选择检查<br>②点击下图红框框，记录好想修改的部分的class名、id名，用vscode打开theme文件夹中的css文件夹的css文件，ctrl+f查找class名、id名，修改；<br><img src="https://img-blog.csdnimg.cn/img_convert/a7f6be8ce7c7197b161716832cde7c7f.png" alt="hexo_theme.png"><br>③搜索不到：打开空css文件或者直接在原css文件最下面添加，修改后可能没有变化，可以在后面添加!important覆盖原本的样式（这个方法有可能会有问题，暂未遇到）</li></ol><p>参考链接：<a href="https://blog.csdn.net/guoxiaorui666/article/details/99623023">https://blog.csdn.net/guoxiaorui666/article/details/99623023</a></p>]]></content>
      
      
      <categories>
          
          <category> 小技能 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> blog </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
